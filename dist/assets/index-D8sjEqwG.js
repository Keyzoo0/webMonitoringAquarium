var WO=Object.defineProperty;var YO=(n,t,e)=>t in n?WO(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Qt=(n,t,e)=>YO(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();function AA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yy={exports:{}},qh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fw;function ZO(){if(Fw)return qh;Fw=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var h in s)h!=="key"&&(o[h]=s[h])}else o=s;return s=o.ref,{$$typeof:n,type:i,key:u,ref:s!==void 0?s:null,props:o}}return qh.Fragment=t,qh.jsx=e,qh.jsxs=e,qh}var Hw;function KO(){return Hw||(Hw=1,yy.exports=ZO()),yy.exports}var gt=KO(),vy={exports:{}},$t={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jw;function $O(){if(jw)return $t;jw=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.iterator;function w(B){return B===null||typeof B!="object"?null:(B=T&&B[T]||B["@@iterator"],typeof B=="function"?B:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,M={};function k(B,lt,bt){this.props=B,this.context=lt,this.refs=M,this.updater=bt||A}k.prototype.isReactComponent={},k.prototype.setState=function(B,lt){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,lt,"setState")},k.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function U(){}U.prototype=k.prototype;function Z(B,lt,bt){this.props=B,this.context=lt,this.refs=M,this.updater=bt||A}var J=Z.prototype=new U;J.constructor=Z,R(J,k.prototype),J.isPureReactComponent=!0;var ut=Array.isArray,rt={H:null,A:null,T:null,S:null,V:null},_t=Object.prototype.hasOwnProperty;function z(B,lt,bt,mt,xt,At){return bt=At.ref,{$$typeof:n,type:B,key:lt,ref:bt!==void 0?bt:null,props:At}}function N(B,lt){return z(B.type,lt,void 0,void 0,void 0,B.props)}function V(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function q(B){var lt={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(bt){return lt[bt]})}var H=/\/+/g;function W(B,lt){return typeof B=="object"&&B!==null&&B.key!=null?q(""+B.key):lt.toString(36)}function F(){}function ee(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(F,F):(B.status="pending",B.then(function(lt){B.status==="pending"&&(B.status="fulfilled",B.value=lt)},function(lt){B.status==="pending"&&(B.status="rejected",B.reason=lt)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function Gt(B,lt,bt,mt,xt){var At=typeof B;(At==="undefined"||At==="boolean")&&(B=null);var Tt=!1;if(B===null)Tt=!0;else switch(At){case"bigint":case"string":case"number":Tt=!0;break;case"object":switch(B.$$typeof){case n:case t:Tt=!0;break;case v:return Tt=B._init,Gt(Tt(B._payload),lt,bt,mt,xt)}}if(Tt)return xt=xt(B),Tt=mt===""?"."+W(B,0):mt,ut(xt)?(bt="",Tt!=null&&(bt=Tt.replace(H,"$&/")+"/"),Gt(xt,lt,bt,"",function(Ni){return Ni})):xt!=null&&(V(xt)&&(xt=N(xt,bt+(xt.key==null||B&&B.key===xt.key?"":(""+xt.key).replace(H,"$&/")+"/")+Tt)),lt.push(xt)),1;Tt=0;var Pe=mt===""?".":mt+":";if(ut(B))for(var de=0;de<B.length;de++)mt=B[de],At=Pe+W(mt,de),Tt+=Gt(mt,lt,bt,At,xt);else if(de=w(B),typeof de=="function")for(B=de.call(B),de=0;!(mt=B.next()).done;)mt=mt.value,At=Pe+W(mt,de++),Tt+=Gt(mt,lt,bt,At,xt);else if(At==="object"){if(typeof B.then=="function")return Gt(ee(B),lt,bt,mt,xt);throw lt=String(B),Error("Objects are not valid as a React child (found: "+(lt==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":lt)+"). If you meant to render a collection of children, use an array instead.")}return Tt}function nt(B,lt,bt){if(B==null)return B;var mt=[],xt=0;return Gt(B,mt,"","",function(At){return lt.call(bt,At,xt++)}),mt}function Et(B){if(B._status===-1){var lt=B._result;lt=lt(),lt.then(function(bt){(B._status===0||B._status===-1)&&(B._status=1,B._result=bt)},function(bt){(B._status===0||B._status===-1)&&(B._status=2,B._result=bt)}),B._status===-1&&(B._status=0,B._result=lt)}if(B._status===1)return B._result.default;throw B._result}var vt=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var lt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(lt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function Xt(){}return $t.Children={map:nt,forEach:function(B,lt,bt){nt(B,function(){lt.apply(this,arguments)},bt)},count:function(B){var lt=0;return nt(B,function(){lt++}),lt},toArray:function(B){return nt(B,function(lt){return lt})||[]},only:function(B){if(!V(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},$t.Component=k,$t.Fragment=e,$t.Profiler=s,$t.PureComponent=Z,$t.StrictMode=i,$t.Suspense=d,$t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=rt,$t.__COMPILER_RUNTIME={__proto__:null,c:function(B){return rt.H.useMemoCache(B)}},$t.cache=function(B){return function(){return B.apply(null,arguments)}},$t.cloneElement=function(B,lt,bt){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var mt=R({},B.props),xt=B.key,At=void 0;if(lt!=null)for(Tt in lt.ref!==void 0&&(At=void 0),lt.key!==void 0&&(xt=""+lt.key),lt)!_t.call(lt,Tt)||Tt==="key"||Tt==="__self"||Tt==="__source"||Tt==="ref"&&lt.ref===void 0||(mt[Tt]=lt[Tt]);var Tt=arguments.length-2;if(Tt===1)mt.children=bt;else if(1<Tt){for(var Pe=Array(Tt),de=0;de<Tt;de++)Pe[de]=arguments[de+2];mt.children=Pe}return z(B.type,xt,void 0,void 0,At,mt)},$t.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:o,_context:B},B},$t.createElement=function(B,lt,bt){var mt,xt={},At=null;if(lt!=null)for(mt in lt.key!==void 0&&(At=""+lt.key),lt)_t.call(lt,mt)&&mt!=="key"&&mt!=="__self"&&mt!=="__source"&&(xt[mt]=lt[mt]);var Tt=arguments.length-2;if(Tt===1)xt.children=bt;else if(1<Tt){for(var Pe=Array(Tt),de=0;de<Tt;de++)Pe[de]=arguments[de+2];xt.children=Pe}if(B&&B.defaultProps)for(mt in Tt=B.defaultProps,Tt)xt[mt]===void 0&&(xt[mt]=Tt[mt]);return z(B,At,void 0,void 0,null,xt)},$t.createRef=function(){return{current:null}},$t.forwardRef=function(B){return{$$typeof:h,render:B}},$t.isValidElement=V,$t.lazy=function(B){return{$$typeof:v,_payload:{_status:-1,_result:B},_init:Et}},$t.memo=function(B,lt){return{$$typeof:m,type:B,compare:lt===void 0?null:lt}},$t.startTransition=function(B){var lt=rt.T,bt={};rt.T=bt;try{var mt=B(),xt=rt.S;xt!==null&&xt(bt,mt),typeof mt=="object"&&mt!==null&&typeof mt.then=="function"&&mt.then(Xt,vt)}catch(At){vt(At)}finally{rt.T=lt}},$t.unstable_useCacheRefresh=function(){return rt.H.useCacheRefresh()},$t.use=function(B){return rt.H.use(B)},$t.useActionState=function(B,lt,bt){return rt.H.useActionState(B,lt,bt)},$t.useCallback=function(B,lt){return rt.H.useCallback(B,lt)},$t.useContext=function(B){return rt.H.useContext(B)},$t.useDebugValue=function(){},$t.useDeferredValue=function(B,lt){return rt.H.useDeferredValue(B,lt)},$t.useEffect=function(B,lt,bt){var mt=rt.H;if(typeof bt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return mt.useEffect(B,lt)},$t.useId=function(){return rt.H.useId()},$t.useImperativeHandle=function(B,lt,bt){return rt.H.useImperativeHandle(B,lt,bt)},$t.useInsertionEffect=function(B,lt){return rt.H.useInsertionEffect(B,lt)},$t.useLayoutEffect=function(B,lt){return rt.H.useLayoutEffect(B,lt)},$t.useMemo=function(B,lt){return rt.H.useMemo(B,lt)},$t.useOptimistic=function(B,lt){return rt.H.useOptimistic(B,lt)},$t.useReducer=function(B,lt,bt){return rt.H.useReducer(B,lt,bt)},$t.useRef=function(B){return rt.H.useRef(B)},$t.useState=function(B){return rt.H.useState(B)},$t.useSyncExternalStore=function(B,lt,bt){return rt.H.useSyncExternalStore(B,lt,bt)},$t.useTransition=function(){return rt.H.useTransition()},$t.version="19.1.0",$t}var qw;function Xv(){return qw||(qw=1,vy.exports=$O()),vy.exports}var $=Xv();const Cc=AA($);var by={exports:{}},Gh={},Ey={exports:{}},Ty={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gw;function QO(){return Gw||(Gw=1,function(n){function t(nt,Et){var vt=nt.length;nt.push(Et);t:for(;0<vt;){var Xt=vt-1>>>1,B=nt[Xt];if(0<s(B,Et))nt[Xt]=Et,nt[vt]=B,vt=Xt;else break t}}function e(nt){return nt.length===0?null:nt[0]}function i(nt){if(nt.length===0)return null;var Et=nt[0],vt=nt.pop();if(vt!==Et){nt[0]=vt;t:for(var Xt=0,B=nt.length,lt=B>>>1;Xt<lt;){var bt=2*(Xt+1)-1,mt=nt[bt],xt=bt+1,At=nt[xt];if(0>s(mt,vt))xt<B&&0>s(At,mt)?(nt[Xt]=At,nt[xt]=vt,Xt=xt):(nt[Xt]=mt,nt[bt]=vt,Xt=bt);else if(xt<B&&0>s(At,vt))nt[Xt]=At,nt[xt]=vt,Xt=xt;else break t}}return Et}function s(nt,Et){var vt=nt.sortIndex-Et.sortIndex;return vt!==0?vt:nt.id-Et.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var d=[],m=[],v=1,T=null,w=3,A=!1,R=!1,M=!1,k=!1,U=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function ut(nt){for(var Et=e(m);Et!==null;){if(Et.callback===null)i(m);else if(Et.startTime<=nt)i(m),Et.sortIndex=Et.expirationTime,t(d,Et);else break;Et=e(m)}}function rt(nt){if(M=!1,ut(nt),!R)if(e(d)!==null)R=!0,_t||(_t=!0,W());else{var Et=e(m);Et!==null&&Gt(rt,Et.startTime-nt)}}var _t=!1,z=-1,N=5,V=-1;function q(){return k?!0:!(n.unstable_now()-V<N)}function H(){if(k=!1,_t){var nt=n.unstable_now();V=nt;var Et=!0;try{t:{R=!1,M&&(M=!1,Z(z),z=-1),A=!0;var vt=w;try{e:{for(ut(nt),T=e(d);T!==null&&!(T.expirationTime>nt&&q());){var Xt=T.callback;if(typeof Xt=="function"){T.callback=null,w=T.priorityLevel;var B=Xt(T.expirationTime<=nt);if(nt=n.unstable_now(),typeof B=="function"){T.callback=B,ut(nt),Et=!0;break e}T===e(d)&&i(d),ut(nt)}else i(d);T=e(d)}if(T!==null)Et=!0;else{var lt=e(m);lt!==null&&Gt(rt,lt.startTime-nt),Et=!1}}break t}finally{T=null,w=vt,A=!1}Et=void 0}}finally{Et?W():_t=!1}}}var W;if(typeof J=="function")W=function(){J(H)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,ee=F.port2;F.port1.onmessage=H,W=function(){ee.postMessage(null)}}else W=function(){U(H,0)};function Gt(nt,Et){z=U(function(){nt(n.unstable_now())},Et)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(nt){nt.callback=null},n.unstable_forceFrameRate=function(nt){0>nt||125<nt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<nt?Math.floor(1e3/nt):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(nt){switch(w){case 1:case 2:case 3:var Et=3;break;default:Et=w}var vt=w;w=Et;try{return nt()}finally{w=vt}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(nt,Et){switch(nt){case 1:case 2:case 3:case 4:case 5:break;default:nt=3}var vt=w;w=nt;try{return Et()}finally{w=vt}},n.unstable_scheduleCallback=function(nt,Et,vt){var Xt=n.unstable_now();switch(typeof vt=="object"&&vt!==null?(vt=vt.delay,vt=typeof vt=="number"&&0<vt?Xt+vt:Xt):vt=Xt,nt){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=vt+B,nt={id:v++,callback:Et,priorityLevel:nt,startTime:vt,expirationTime:B,sortIndex:-1},vt>Xt?(nt.sortIndex=vt,t(m,nt),e(d)===null&&nt===e(m)&&(M?(Z(z),z=-1):M=!0,Gt(rt,vt-Xt))):(nt.sortIndex=B,t(d,nt),R||A||(R=!0,_t||(_t=!0,W()))),nt},n.unstable_shouldYield=q,n.unstable_wrapCallback=function(nt){var Et=w;return function(){var vt=w;w=Et;try{return nt.apply(this,arguments)}finally{w=vt}}}}(Ty)),Ty}var Ww;function XO(){return Ww||(Ww=1,Ey.exports=QO()),Ey.exports}var wy={exports:{}},ri={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yw;function JO(){if(Yw)return ri;Yw=1;var n=Xv();function t(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,m,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:T==null?null:""+T,children:d,containerInfo:m,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return ri.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ri.createPortal=function(d,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return o(d,m,null,v)},ri.flushSync=function(d){var m=u.T,v=i.p;try{if(u.T=null,i.p=2,d)return d()}finally{u.T=m,i.p=v,i.d.f()}},ri.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(d,m))},ri.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},ri.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var v=m.as,T=h(v,m.crossOrigin),w=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?i.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:w,fetchPriority:A}):v==="script"&&i.d.X(d,{crossOrigin:T,integrity:w,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},ri.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);i.d.M(d,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(d)},ri.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,T=h(v,m.crossOrigin);i.d.L(d,v,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},ri.preloadModule=function(d,m){if(typeof d=="string")if(m){var v=h(m.as,m.crossOrigin);i.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(d)},ri.requestFormReset=function(d){i.d.r(d)},ri.unstable_batchedUpdates=function(d,m){return d(m)},ri.useFormState=function(d,m,v){return u.H.useFormState(d,m,v)},ri.useFormStatus=function(){return u.H.useHostTransitionStatus()},ri.version="19.1.0",ri}var Zw;function IA(){if(Zw)return wy.exports;Zw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),wy.exports=JO(),wy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kw;function tk(){if(Kw)return Gh;Kw=1;var n=XO(),t=Xv(),e=IA();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,c=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(c=a.return),r=a.return;while(r)}return a.tag===3?c:null}function u(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function h(r){if(o(r)!==r)throw Error(i(188))}function d(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(i(188));return a!==r?null:r}for(var c=r,p=a;;){var y=c.return;if(y===null)break;var b=y.alternate;if(b===null){if(p=y.return,p!==null){c=p;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===c)return h(y),r;if(b===p)return h(y),a;b=b.sibling}throw Error(i(188))}if(c.return!==p.return)c=y,p=b;else{for(var I=!1,O=y.child;O;){if(O===c){I=!0,c=y,p=b;break}if(O===p){I=!0,p=y,c=b;break}O=O.sibling}if(!I){for(O=b.child;O;){if(O===c){I=!0,c=b,p=y;break}if(O===p){I=!0,p=b,c=y;break}O=O.sibling}if(!I)throw Error(i(189))}}if(c.alternate!==p)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:a}function m(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=m(r),a!==null)return a;r=r.sibling}return null}var v=Object.assign,T=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),Z=Symbol.for("react.consumer"),J=Symbol.for("react.context"),ut=Symbol.for("react.forward_ref"),rt=Symbol.for("react.suspense"),_t=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function W(r){return r===null||typeof r!="object"?null:(r=H&&r[H]||r["@@iterator"],typeof r=="function"?r:null)}var F=Symbol.for("react.client.reference");function ee(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===F?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case R:return"Fragment";case k:return"Profiler";case M:return"StrictMode";case rt:return"Suspense";case _t:return"SuspenseList";case V:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case A:return"Portal";case J:return(r.displayName||"Context")+".Provider";case Z:return(r._context.displayName||"Context")+".Consumer";case ut:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case z:return a=r.displayName||null,a!==null?a:ee(r.type)||"Memo";case N:a=r._payload,r=r._init;try{return ee(r(a))}catch{}}return null}var Gt=Array.isArray,nt=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Et=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt={pending:!1,data:null,method:null,action:null},Xt=[],B=-1;function lt(r){return{current:r}}function bt(r){0>B||(r.current=Xt[B],Xt[B]=null,B--)}function mt(r,a){B++,Xt[B]=r.current,r.current=a}var xt=lt(null),At=lt(null),Tt=lt(null),Pe=lt(null);function de(r,a){switch(mt(Tt,a),mt(At,r),mt(xt,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?mw(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=mw(a),r=gw(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}bt(xt),mt(xt,r)}function Ni(){bt(xt),bt(At),bt(Tt)}function os(r){r.memoizedState!==null&&mt(Pe,r);var a=xt.current,c=gw(a,r.type);a!==c&&(mt(At,r),mt(xt,c))}function Li(r){At.current===r&&(bt(xt),bt(At)),Pe.current===r&&(bt(Pe),Bh._currentValue=vt)}var Vi=Object.prototype.hasOwnProperty,Os=n.unstable_scheduleCallback,Ur=n.unstable_cancelCallback,Do=n.unstable_shouldYield,ol=n.unstable_requestPaint,Qn=n.unstable_now,No=n.unstable_getCurrentPriorityLevel,al=n.unstable_ImmediatePriority,Fr=n.unstable_UserBlockingPriority,ks=n.unstable_NormalPriority,Tu=n.unstable_LowPriority,Hr=n.unstable_IdlePriority,ll=n.log,wu=n.unstable_setDisableYieldValue,ze=null,ye=null;function Xn(r){if(typeof ll=="function"&&wu(r),ye&&typeof ye.setStrictMode=="function")try{ye.setStrictMode(ze,r)}catch{}}var An=Math.clz32?Math.clz32:jr,ul=Math.log,Su=Math.LN2;function jr(r){return r>>>=0,r===0?32:31-(ul(r)/Su|0)|0}var lr=256,Ds=4194304;function Ei(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Lo(r,a,c){var p=r.pendingLanes;if(p===0)return 0;var y=0,b=r.suspendedLanes,I=r.pingedLanes;r=r.warmLanes;var O=p&134217727;return O!==0?(p=O&~b,p!==0?y=Ei(p):(I&=O,I!==0?y=Ei(I):c||(c=O&~r,c!==0&&(y=Ei(c))))):(O=p&~b,O!==0?y=Ei(O):I!==0?y=Ei(I):c||(c=p&~r,c!==0&&(y=Ei(c)))),y===0?0:a!==0&&a!==y&&(a&b)===0&&(b=y&-y,c=a&-a,b>=c||b===32&&(c&4194048)!==0)?a:y}function zi(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function cl(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hl(){var r=lr;return lr<<=1,(lr&4194048)===0&&(lr=256),r}function Vo(){var r=Ds;return Ds<<=1,(Ds&62914560)===0&&(Ds=4194304),r}function as(r){for(var a=[],c=0;31>c;c++)a.push(r);return a}function ls(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function fl(r,a,c,p,y,b){var I=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var O=r.entanglements,G=r.expirationTimes,et=r.hiddenUpdates;for(c=I&~c;0<c;){var ct=31-An(c),ft=1<<ct;O[ct]=0,G[ct]=-1;var it=et[ct];if(it!==null)for(et[ct]=null,ct=0;ct<it.length;ct++){var st=it[ct];st!==null&&(st.lane&=-536870913)}c&=~ft}p!==0&&us(r,p,0),b!==0&&y===0&&r.tag!==0&&(r.suspendedLanes|=b&~(I&~a))}function us(r,a,c){r.pendingLanes|=a,r.suspendedLanes&=~a;var p=31-An(a);r.entangledLanes|=a,r.entanglements[p]=r.entanglements[p]|1073741824|c&4194090}function dl(r,a){var c=r.entangledLanes|=a;for(r=r.entanglements;c;){var p=31-An(c),y=1<<p;y&a|r[p]&a&&(r[p]|=a),c&=~y}}function ur(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function zo(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function cr(){var r=Et.p;return r!==0?r:(r=window.event,r===void 0?32:Nw(r.type))}function Bo(r,a){var c=Et.p;try{return Et.p=r,a()}finally{Et.p=c}}var Be=Math.random().toString(36).slice(2),ln="__reactFiber$"+Be,sn="__reactProps$"+Be,Ti="__reactContainer$"+Be,Jn="__reactEvents$"+Be,kt="__reactListeners$"+Be,Ns="__reactHandles$"+Be,pl="__reactResources$"+Be,hr="__reactMarker$"+Be;function Ls(r){delete r[ln],delete r[sn],delete r[Jn],delete r[kt],delete r[Ns]}function Bi(r){var a=r[ln];if(a)return a;for(var c=r.parentNode;c;){if(a=c[Ti]||c[ln]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(r=bw(r);r!==null;){if(c=r[ln])return c;r=bw(r)}return a}r=c,c=r.parentNode}return null}function Ui(r){if(r=r[ln]||r[Ti]){var a=r.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return r}return null}function Fn(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function In(r){var a=r[pl];return a||(a=r[pl]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Je(r){r[hr]=!0}var ml=new Set,Uo={};function Fi(r,a){cs(r,a),cs(r+"Capture",a)}function cs(r,a){for(Uo[r]=a,r=0;r<a.length;r++)ml.add(a[r])}var xu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qr={},Gr={};function Cu(r){return Vi.call(Gr,r)?!0:Vi.call(qr,r)?!1:xu.test(r)?Gr[r]=!0:(qr[r]=!0,!1)}function fr(r,a,c){if(Cu(a))if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var p=a.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+c)}}function hs(r,a,c){if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+c)}}function bn(r,a,c,p){if(p===null)r.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(a,c,""+p)}}var Vs,dr;function fs(r){if(Vs===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Vs=a&&a[1]||"",dr=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vs+r+dr}var Wr=!1;function ds(r,a){if(!r||Wr)return"";Wr=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(a){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(st){var it=st}Reflect.construct(r,[],ft)}else{try{ft.call()}catch(st){it=st}r.call(ft.prototype)}}else{try{throw Error()}catch(st){it=st}(ft=r())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(st){if(st&&it&&typeof st.stack=="string")return[st.stack,it.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=p.DetermineComponentFrameRoot(),I=b[0],O=b[1];if(I&&O){var G=I.split(`
`),et=O.split(`
`);for(y=p=0;p<G.length&&!G[p].includes("DetermineComponentFrameRoot");)p++;for(;y<et.length&&!et[y].includes("DetermineComponentFrameRoot");)y++;if(p===G.length||y===et.length)for(p=G.length-1,y=et.length-1;1<=p&&0<=y&&G[p]!==et[y];)y--;for(;1<=p&&0<=y;p--,y--)if(G[p]!==et[y]){if(p!==1||y!==1)do if(p--,y--,0>y||G[p]!==et[y]){var ct=`
`+G[p].replace(" at new "," at ");return r.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",r.displayName)),ct}while(1<=p&&0<=y);break}}}finally{Wr=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?fs(c):""}function ne(r){switch(r.tag){case 26:case 27:case 5:return fs(r.type);case 16:return fs("Lazy");case 13:return fs("Suspense");case 19:return fs("SuspenseList");case 0:case 15:return ds(r.type,!1);case 11:return ds(r.type.render,!1);case 1:return ds(r.type,!0);case 31:return fs("Activity");default:return""}}function we(r){try{var a="";do a+=ne(r),r=r.return;while(r);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function pn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ps(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function pr(r){var a=ps(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),p=""+r[a];if(!r.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,b=c.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return y.call(this)},set:function(I){p=""+I,b.call(this,I)}}),Object.defineProperty(r,a,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(I){p=""+I},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function mr(r){r._valueTracker||(r._valueTracker=pr(r))}function Wt(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var c=a.getValue(),p="";return r&&(p=ps(r)?r.checked?"true":"false":r.value),r=p,r!==c?(a.setValue(r),!0):!1}function Ce(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var gl=/[\n"\\]/g;function We(r){return r.replace(gl,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ue(r,a,c,p,y,b,I,O){r.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?r.type=I:r.removeAttribute("type"),a!=null?I==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+pn(a)):r.value!==""+pn(a)&&(r.value=""+pn(a)):I!=="submit"&&I!=="reset"||r.removeAttribute("value"),a!=null?Hi(r,I,pn(a)):c!=null?Hi(r,I,pn(c)):p!=null&&r.removeAttribute("value"),y==null&&b!=null&&(r.defaultChecked=!!b),y!=null&&(r.checked=y&&typeof y!="function"&&typeof y!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?r.name=""+pn(O):r.removeAttribute("name")}function Yr(r,a,c,p,y,b,I,O){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.type=b),a!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||a!=null))return;c=c!=null?""+pn(c):"",a=a!=null?""+pn(a):c,O||a===r.value||(r.value=a),r.defaultValue=a}p=p??y,p=typeof p!="function"&&typeof p!="symbol"&&!!p,r.checked=O?r.checked:!!p,r.defaultChecked=!!p,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(r.name=I)}function Hi(r,a,c){a==="number"&&Ce(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function Hn(r,a,c,p){if(r=r.options,a){a={};for(var y=0;y<c.length;y++)a["$"+c[y]]=!0;for(c=0;c<r.length;c++)y=a.hasOwnProperty("$"+r[c].value),r[c].selected!==y&&(r[c].selected=y),y&&p&&(r[c].defaultSelected=!0)}else{for(c=""+pn(c),a=null,y=0;y<r.length;y++){if(r[y].value===c){r[y].selected=!0,p&&(r[y].defaultSelected=!0);return}a!==null||r[y].disabled||(a=r[y])}a!==null&&(a.selected=!0)}}function Bt(r,a,c){if(a!=null&&(a=""+pn(a),a!==r.value&&(r.value=a),c==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=c!=null?""+pn(c):""}function pi(r,a,c,p){if(a==null){if(p!=null){if(c!=null)throw Error(i(92));if(Gt(p)){if(1<p.length)throw Error(i(93));p=p[0]}c=p}c==null&&(c=""),a=c}c=pn(a),r.defaultValue=c,p=r.textContent,p===c&&p!==""&&p!==null&&(r.value=p)}function Rn(r,a){if(a){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=a;return}}r.textContent=a}var ji=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fo(r,a,c){var p=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?p?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":p?r.setProperty(a,c):typeof c!="number"||c===0||ji.has(a)?a==="float"?r.cssFloat=c:r[a]=(""+c).trim():r[a]=c+"px"}function zs(r,a,c){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,c!=null){for(var p in c)!c.hasOwnProperty(p)||a!=null&&a.hasOwnProperty(p)||(p.indexOf("--")===0?r.setProperty(p,""):p==="float"?r.cssFloat="":r[p]="");for(var y in a)p=a[y],a.hasOwnProperty(y)&&c[y]!==p&&Fo(r,y,p)}else for(var b in a)a.hasOwnProperty(b)&&Fo(r,b,a[b])}function Zr(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _l=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ho=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gr(r){return Ho.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var qi=null;function jn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ms=null,Gi=null;function yl(r){var a=Ui(r);if(a&&(r=a.stateNode)){var c=r[sn]||null;t:switch(r=a.stateNode,a.type){case"input":if(Ue(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+We(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var p=c[a];if(p!==r&&p.form===r.form){var y=p[sn]||null;if(!y)throw Error(i(90));Ue(p,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(a=0;a<c.length;a++)p=c[a],p.form===r.form&&Wt(p)}break t;case"textarea":Bt(r,c.value,c.defaultValue);break t;case"select":a=c.value,a!=null&&Hn(r,!!c.multiple,a,!1)}}}var Lt=!1;function mi(r,a,c){if(Lt)return r(a,c);Lt=!0;try{var p=r(a);return p}finally{if(Lt=!1,(ms!==null||Gi!==null)&&(rp(),ms&&(a=ms,r=Gi,Gi=ms=null,yl(a),r)))for(a=0;a<r.length;a++)yl(r[a])}}function pe(r,a){var c=r.stateNode;if(c===null)return null;var p=c[sn]||null;if(p===null)return null;c=p[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(r=r.type,p=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!p;break t;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,a,typeof c));return c}var wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ti=!1;if(wi)try{var Bs={};Object.defineProperty(Bs,"passive",{get:function(){ti=!0}}),window.addEventListener("test",Bs,Bs),window.removeEventListener("test",Bs,Bs)}catch{ti=!1}var Si=null,ei=null,Wi=null;function Us(){if(Wi)return Wi;var r,a=ei,c=a.length,p,y="value"in Si?Si.value:Si.textContent,b=y.length;for(r=0;r<c&&a[r]===y[r];r++);var I=c-r;for(p=1;p<=I&&a[c-p]===y[b-p];p++);return Wi=y.slice(r,1<p?1-p:void 0)}function Me(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Pn(){return!0}function jo(){return!1}function un(r){function a(c,p,y,b,I){this._reactName=c,this._targetInst=y,this.type=p,this.nativeEvent=b,this.target=I,this.currentTarget=null;for(var O in r)r.hasOwnProperty(O)&&(c=r[O],this[O]=c?c(b):b[O]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Pn:jo,this.isPropagationStopped=jo,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Pn)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Pn)},persist:function(){},isPersistent:Pn}),a}var ve={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kr=un(ve),Fs=v({},ve,{view:0,detail:0}),Au=un(Fs),$r,Kt,gs,En=v({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==gs&&(gs&&r.type==="mousemove"?($r=r.screenX-gs.screenX,Kt=r.screenY-gs.screenY):Kt=$r=0,gs=r),$r)},movementY:function(r){return"movementY"in r?r.movementY:Kt}}),Mn=un(En),vl=v({},En,{dataTransfer:0}),nh=un(vl),Hs=v({},Fs,{relatedTarget:0}),qo=un(Hs),Go=v({},ve,{animationName:0,elapsedTime:0,pseudoElement:0}),Wo=un(Go),Iu=v({},ve,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),_r=un(Iu),ih=v({},ve,{data:0}),ni=un(ih),Qr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yo(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Yi[r])?!!a[r]:!1}function yr(){return Yo}var Zo=v({},Fs,{key:function(r){if(r.key){var a=Qr[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Me(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?bl[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yr,charCode:function(r){return r.type==="keypress"?Me(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Me(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ko=un(Zo),El=v({},En,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$o=un(El),js=v({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yr}),Ru=un(js),Qo=v({},ve,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pu=un(Qo),Tl=v({},En,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Xr=un(Tl),mn=v({},ve,{newState:0,oldState:0}),_s=un(mn),Mu=[9,13,27,32],ii=wi&&"CompositionEvent"in window,g=null;wi&&"documentMode"in document&&(g=document.documentMode);var S=wi&&"TextEvent"in window&&!g,C=wi&&(!ii||g&&8<g&&11>=g),D=" ",Q=!1;function at(r,a){switch(r){case"keyup":return Mu.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wt(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ce=!1;function rn(r,a){switch(r){case"compositionend":return wt(a);case"keypress":return a.which!==32?null:(Q=!0,D);case"textInput":return r=a.data,r===D&&Q?null:r;default:return null}}function he(r,a){if(ce)return r==="compositionend"||!ii&&at(r,a)?(r=Us(),Wi=ei=Si=null,ce=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return C&&a.locale!=="ko"?null:a.data;default:return null}}var Se={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fe(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!Se[r.type]:a==="textarea"}function qs(r,a,c,p){ms?Gi?Gi.push(p):Gi=[p]:ms=p,a=hp(a,"onChange"),0<a.length&&(c=new Kr("onChange","change",null,c,p),r.push({event:c,listeners:a}))}var Ne=null,ys=null;function vs(r){cw(r,0)}function Ou(r){var a=Fn(r);if(Wt(a))return r}function Xo(r,a){if(r==="change")return a}var sh=!1;if(wi){var Jo;if(wi){var rh="oninput"in document;if(!rh){var Gs=document.createElement("div");Gs.setAttribute("oninput","return;"),rh=typeof Gs.oninput=="function"}Jo=rh}else Jo=!1;sh=Jo&&(!document.documentMode||9<document.documentMode)}function wl(){Ne&&(Ne.detachEvent("onpropertychange",Sd),ys=Ne=null)}function Sd(r){if(r.propertyName==="value"&&Ou(ys)){var a=[];qs(a,ys,r,jn(r)),mi(vs,a)}}function oh(r,a,c){r==="focusin"?(wl(),Ne=a,ys=c,Ne.attachEvent("onpropertychange",Sd)):r==="focusout"&&wl()}function Hg(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ou(ys)}function Ws(r,a){if(r==="click")return Ou(a)}function jg(r,a){if(r==="input"||r==="change")return Ou(a)}function ta(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var gi=typeof Object.is=="function"?Object.is:ta;function _i(r,a){if(gi(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var c=Object.keys(r),p=Object.keys(a);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var y=c[p];if(!Vi.call(a,y)||!gi(r[y],a[y]))return!1}return!0}function Sl(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function ah(r,a){var c=Sl(r);r=0;for(var p;c;){if(c.nodeType===3){if(p=r+c.textContent.length,r<=a&&p>=a)return{node:c,offset:a-r};r=p}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=Sl(c)}}function ku(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?ku(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function xl(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=Ce(r.document);a instanceof r.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)r=a.contentWindow;else break;a=Ce(r.document)}return a}function Cl(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var Du=wi&&"documentMode"in document&&11>=document.documentMode,Zi=null,ea=null,Jr=null,Nu=!1;function xd(r,a,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Nu||Zi==null||Zi!==Ce(p)||(p=Zi,"selectionStart"in p&&Cl(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Jr&&_i(Jr,p)||(Jr=p,p=hp(ea,"onSelect"),0<p.length&&(a=new Kr("onSelect","select",null,a,c),r.push({event:a,listeners:p}),a.target=Zi)))}function bs(r,a){var c={};return c[r.toLowerCase()]=a.toLowerCase(),c["Webkit"+r]="webkit"+a,c["Moz"+r]="moz"+a,c}var na={animationend:bs("Animation","AnimationEnd"),animationiteration:bs("Animation","AnimationIteration"),animationstart:bs("Animation","AnimationStart"),transitionrun:bs("Transition","TransitionRun"),transitionstart:bs("Transition","TransitionStart"),transitioncancel:bs("Transition","TransitionCancel"),transitionend:bs("Transition","TransitionEnd")},Lu={},Cd={};wi&&(Cd=document.createElement("div").style,"AnimationEvent"in window||(delete na.animationend.animation,delete na.animationiteration.animation,delete na.animationstart.animation),"TransitionEvent"in window||delete na.transitionend.transition);function vr(r){if(Lu[r])return Lu[r];if(!na[r])return r;var a=na[r],c;for(c in a)if(a.hasOwnProperty(c)&&c in Cd)return Lu[r]=a[c];return r}var Ad=vr("animationend"),Ki=vr("animationiteration"),Al=vr("animationstart"),qg=vr("transitionrun"),Vu=vr("transitionstart"),Gg=vr("transitioncancel"),lh=vr("transitionend"),Id=new Map,to="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");to.push("scrollEnd");function $i(r,a){Id.set(r,a),Fi(a,[r])}var eo=new WeakMap;function yi(r,a){if(typeof r=="object"&&r!==null){var c=eo.get(r);return c!==void 0?c:(a={value:r,source:a,stack:we(a)},eo.set(r,a),a)}return{value:r,source:a,stack:we(a)}}var vi=[],ia=0,Qi=0;function Il(){for(var r=ia,a=Qi=ia=0;a<r;){var c=vi[a];vi[a++]=null;var p=vi[a];vi[a++]=null;var y=vi[a];vi[a++]=null;var b=vi[a];if(vi[a++]=null,p!==null&&y!==null){var I=p.pending;I===null?y.next=y:(y.next=I.next,I.next=y),p.pending=y}b!==0&&Pl(c,y,b)}}function Rl(r,a,c,p){vi[ia++]=r,vi[ia++]=a,vi[ia++]=c,vi[ia++]=p,Qi|=p,r.lanes|=p,r=r.alternate,r!==null&&(r.lanes|=p)}function no(r,a,c,p){return Rl(r,a,c,p),br(r)}function sa(r,a){return Rl(r,null,null,a),br(r)}function Pl(r,a,c){r.lanes|=c;var p=r.alternate;p!==null&&(p.lanes|=c);for(var y=!1,b=r.return;b!==null;)b.childLanes|=c,p=b.alternate,p!==null&&(p.childLanes|=c),b.tag===22&&(r=b.stateNode,r===null||r._visibility&1||(y=!0)),r=b,b=b.return;return r.tag===3?(b=r.stateNode,y&&a!==null&&(y=31-An(c),r=b.hiddenUpdates,p=r[y],p===null?r[y]=[a]:p.push(a),a.lane=c|536870912),b):null}function br(r){if(50<Mh)throw Mh=0,H_=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var io={};function Rd(r,a,c,p){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bi(r,a,c,p){return new Rd(r,a,c,p)}function zu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Es(r,a){var c=r.alternate;return c===null?(c=bi(r.tag,a,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=a,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,a=r.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function uh(r,a){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,a=c.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Ml(r,a,c,p,y,b){var I=0;if(p=r,typeof r=="function")zu(r)&&(I=1);else if(typeof r=="string")I=kO(r,c,xt.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case V:return r=bi(31,c,a,y),r.elementType=V,r.lanes=b,r;case R:return Er(c.children,y,b,a);case M:I=8,y|=24;break;case k:return r=bi(12,c,a,y|2),r.elementType=k,r.lanes=b,r;case rt:return r=bi(13,c,a,y),r.elementType=rt,r.lanes=b,r;case _t:return r=bi(19,c,a,y),r.elementType=_t,r.lanes=b,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case U:case J:I=10;break t;case Z:I=9;break t;case ut:I=11;break t;case z:I=14;break t;case N:I=16,p=null;break t}I=29,c=Error(i(130,r===null?"null":typeof r,"")),p=null}return a=bi(I,c,a,y),a.elementType=r,a.type=p,a.lanes=b,a}function Er(r,a,c,p){return r=bi(7,r,p,a),r.lanes=c,r}function ch(r,a,c){return r=bi(6,r,null,a),r.lanes=c,r}function Bu(r,a,c){return a=bi(4,r.children!==null?r.children:[],r.key,a),a.lanes=c,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var so=[],ra=0,l=null,f=0,_=[],E=0,x=null,P=1,j="";function X(r,a){so[ra++]=f,so[ra++]=l,l=r,f=a}function ot(r,a,c){_[E++]=P,_[E++]=j,_[E++]=x,x=r;var p=P;r=j;var y=32-An(p)-1;p&=~(1<<y),c+=1;var b=32-An(a)+y;if(30<b){var I=y-y%5;b=(p&(1<<I)-1).toString(32),p>>=I,y-=I,P=1<<32-An(a)+y|c<<y|p,j=b+r}else P=1<<b|c<<y|p,j=r}function yt(r){r.return!==null&&(X(r,1),ot(r,1,0))}function Ct(r){for(;r===l;)l=so[--ra],so[ra]=null,f=so[--ra],so[ra]=null;for(;r===x;)x=_[--E],_[E]=null,j=_[--E],_[E]=null,P=_[--E],_[E]=null}var Pt=null,Ot=null,qt=!1,He=null,tn=!1,On=Error(i(519));function xi(r){var a=Error(i(418,""));throw aa(yi(a,r)),On}function Pd(r){var a=r.stateNode,c=r.type,p=r.memoizedProps;switch(a[ln]=r,a[sn]=p,c){case"dialog":oe("cancel",a),oe("close",a);break;case"iframe":case"object":case"embed":oe("load",a);break;case"video":case"audio":for(c=0;c<kh.length;c++)oe(kh[c],a);break;case"source":oe("error",a);break;case"img":case"image":case"link":oe("error",a),oe("load",a);break;case"details":oe("toggle",a);break;case"input":oe("invalid",a),Yr(a,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),mr(a);break;case"select":oe("invalid",a);break;case"textarea":oe("invalid",a),pi(a,p.value,p.defaultValue,p.children),mr(a)}c=p.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||p.suppressHydrationWarning===!0||pw(a.textContent,c)?(p.popover!=null&&(oe("beforetoggle",a),oe("toggle",a)),p.onScroll!=null&&oe("scroll",a),p.onScrollEnd!=null&&oe("scrollend",a),p.onClick!=null&&(a.onclick=fp),a=!0):a=!1,a||xi(r)}function Md(r){for(Pt=r.return;Pt;)switch(Pt.tag){case 5:case 13:tn=!1;return;case 27:case 3:tn=!0;return;default:Pt=Pt.return}}function Ol(r){if(r!==Pt)return!1;if(!qt)return Md(r),qt=!0,!1;var a=r.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||sy(r.type,r.memoizedProps)),c=!c),c&&Ot&&xi(r),Md(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));t:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8)if(c=r.data,c==="/$"){if(a===0){Ot=$s(r.nextSibling);break t}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++;r=r.nextSibling}Ot=null}}else a===27?(a=Ot,Ta(r.type)?(r=ly,ly=null,Ot=r):Ot=a):Ot=Pt?$s(r.stateNode.nextSibling):null;return!0}function oa(){Ot=Pt=null,qt=!1}function Od(){var r=He;return r!==null&&(Ii===null?Ii=r:Ii.push.apply(Ii,r),He=null),r}function aa(r){He===null?He=[r]:He.push(r)}var $e=lt(null),Ts=null,Ys=null;function Tr(r,a,c){mt($e,a._currentValue),a._currentValue=c}function Zs(r){r._currentValue=$e.current,bt($e)}function kl(r,a,c){for(;r!==null;){var p=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),r===c)break;r=r.return}}function Uu(r,a,c,p){var y=r.child;for(y!==null&&(y.return=r);y!==null;){var b=y.dependencies;if(b!==null){var I=y.child;b=b.firstContext;t:for(;b!==null;){var O=b;b=y;for(var G=0;G<a.length;G++)if(O.context===a[G]){b.lanes|=c,O=b.alternate,O!==null&&(O.lanes|=c),kl(b.return,c,r),p||(I=null);break t}b=O.next}}else if(y.tag===18){if(I=y.return,I===null)throw Error(i(341));I.lanes|=c,b=I.alternate,b!==null&&(b.lanes|=c),kl(I,c,r),I=null}else I=y.child;if(I!==null)I.return=y;else for(I=y;I!==null;){if(I===r){I=null;break}if(y=I.sibling,y!==null){y.return=I.return,I=y;break}I=I.return}y=I}}function Dl(r,a,c,p){r=null;for(var y=a,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var I=y.alternate;if(I===null)throw Error(i(387));if(I=I.memoizedProps,I!==null){var O=y.type;gi(y.pendingProps.value,I.value)||(r!==null?r.push(O):r=[O])}}else if(y===Pe.current){if(I=y.alternate,I===null)throw Error(i(387));I.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(r!==null?r.push(Bh):r=[Bh])}y=y.return}r!==null&&Uu(a,r,c,p),a.flags|=262144}function kd(r){for(r=r.firstContext;r!==null;){if(!gi(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Nl(r){Ts=r,Ys=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function si(r){return tE(Ts,r)}function Dd(r,a){return Ts===null&&Nl(r),tE(r,a)}function tE(r,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},Ys===null){if(r===null)throw Error(i(308));Ys=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Ys=Ys.next=a;return c}var OM=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(c,p){r.push(p)}};this.abort=function(){a.aborted=!0,r.forEach(function(c){return c()})}},kM=n.unstable_scheduleCallback,DM=n.unstable_NormalPriority,Tn={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wg(){return{controller:new OM,data:new Map,refCount:0}}function hh(r){r.refCount--,r.refCount===0&&kM(DM,function(){r.controller.abort()})}var fh=null,Yg=0,Fu=0,Hu=null;function NM(r,a){if(fh===null){var c=fh=[];Yg=0,Fu=K_(),Hu={status:"pending",value:void 0,then:function(p){c.push(p)}}}return Yg++,a.then(eE,eE),a}function eE(){if(--Yg===0&&fh!==null){Hu!==null&&(Hu.status="fulfilled");var r=fh;fh=null,Fu=0,Hu=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function LM(r,a){var c=[],p={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return r.then(function(){p.status="fulfilled",p.value=a;for(var y=0;y<c.length;y++)(0,c[y])(a)},function(y){for(p.status="rejected",p.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),p}var nE=nt.S;nt.S=function(r,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&NM(r,a),nE!==null&&nE(r,a)};var Ll=lt(null);function Zg(){var r=Ll.current;return r!==null?r:je.pooledCache}function Nd(r,a){a===null?mt(Ll,Ll.current):mt(Ll,a.pool)}function iE(){var r=Zg();return r===null?null:{parent:Tn._currentValue,pool:r}}var dh=Error(i(460)),sE=Error(i(474)),Ld=Error(i(542)),Kg={then:function(){}};function rE(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Vd(){}function oE(r,a,c){switch(c=r[c],c===void 0?r.push(a):c!==a&&(a.then(Vd,Vd),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,lE(r),r;default:if(typeof a.status=="string")a.then(Vd,Vd);else{if(r=je,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(p){if(a.status==="pending"){var y=a;y.status="fulfilled",y.value=p}},function(p){if(a.status==="pending"){var y=a;y.status="rejected",y.reason=p}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,lE(r),r}throw ph=a,dh}}var ph=null;function aE(){if(ph===null)throw Error(i(459));var r=ph;return ph=null,r}function lE(r){if(r===dh||r===Ld)throw Error(i(483))}var la=!1;function $g(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qg(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ua(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ca(r,a,c){var p=r.updateQueue;if(p===null)return null;if(p=p.shared,(Ae&2)!==0){var y=p.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),p.pending=a,a=br(r),Pl(r,null,c),a}return Rl(r,p,a,c),br(r)}function mh(r,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var p=a.lanes;p&=r.pendingLanes,c|=p,a.lanes=c,dl(r,c)}}function Xg(r,a){var c=r.updateQueue,p=r.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var y=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var I={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?y=b=I:b=b.next=I,c=c.next}while(c!==null);b===null?y=b=a:b=b.next=a}else y=b=a;c={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:p.shared,callbacks:p.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=a:r.next=a,c.lastBaseUpdate=a}var Jg=!1;function gh(){if(Jg){var r=Hu;if(r!==null)throw r}}function _h(r,a,c,p){Jg=!1;var y=r.updateQueue;la=!1;var b=y.firstBaseUpdate,I=y.lastBaseUpdate,O=y.shared.pending;if(O!==null){y.shared.pending=null;var G=O,et=G.next;G.next=null,I===null?b=et:I.next=et,I=G;var ct=r.alternate;ct!==null&&(ct=ct.updateQueue,O=ct.lastBaseUpdate,O!==I&&(O===null?ct.firstBaseUpdate=et:O.next=et,ct.lastBaseUpdate=G))}if(b!==null){var ft=y.baseState;I=0,ct=et=G=null,O=b;do{var it=O.lane&-536870913,st=it!==O.lane;if(st?(me&it)===it:(p&it)===it){it!==0&&it===Fu&&(Jg=!0),ct!==null&&(ct=ct.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});t:{var Ht=r,Vt=O;it=a;var De=c;switch(Vt.tag){case 1:if(Ht=Vt.payload,typeof Ht=="function"){ft=Ht.call(De,ft,it);break t}ft=Ht;break t;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=Vt.payload,it=typeof Ht=="function"?Ht.call(De,ft,it):Ht,it==null)break t;ft=v({},ft,it);break t;case 2:la=!0}}it=O.callback,it!==null&&(r.flags|=64,st&&(r.flags|=8192),st=y.callbacks,st===null?y.callbacks=[it]:st.push(it))}else st={lane:it,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ct===null?(et=ct=st,G=ft):ct=ct.next=st,I|=it;if(O=O.next,O===null){if(O=y.shared.pending,O===null)break;st=O,O=st.next,st.next=null,y.lastBaseUpdate=st,y.shared.pending=null}}while(!0);ct===null&&(G=ft),y.baseState=G,y.firstBaseUpdate=et,y.lastBaseUpdate=ct,b===null&&(y.shared.lanes=0),ya|=I,r.lanes=I,r.memoizedState=ft}}function uE(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function cE(r,a){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)uE(c[r],a)}var ju=lt(null),zd=lt(0);function hE(r,a){r=ho,mt(zd,r),mt(ju,a),ho=r|a.baseLanes}function t_(){mt(zd,ho),mt(ju,ju.current)}function e_(){ho=zd.current,bt(ju),bt(zd)}var ha=0,Jt=null,Oe=null,gn=null,Bd=!1,qu=!1,Vl=!1,Ud=0,yh=0,Gu=null,VM=0;function cn(){throw Error(i(321))}function n_(r,a){if(a===null)return!1;for(var c=0;c<a.length&&c<r.length;c++)if(!gi(r[c],a[c]))return!1;return!0}function i_(r,a,c,p,y,b){return ha=b,Jt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,nt.H=r===null||r.memoizedState===null?ZE:KE,Vl=!1,b=c(p,y),Vl=!1,qu&&(b=dE(a,c,p,y)),fE(r),b}function fE(r){nt.H=Wd;var a=Oe!==null&&Oe.next!==null;if(ha=0,gn=Oe=Jt=null,Bd=!1,yh=0,Gu=null,a)throw Error(i(300));r===null||kn||(r=r.dependencies,r!==null&&kd(r)&&(kn=!0))}function dE(r,a,c,p){Jt=r;var y=0;do{if(qu&&(Gu=null),yh=0,qu=!1,25<=y)throw Error(i(301));if(y+=1,gn=Oe=null,r.updateQueue!=null){var b=r.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}nt.H=qM,b=a(c,p)}while(qu);return b}function zM(){var r=nt.H,a=r.useState()[0];return a=typeof a.then=="function"?vh(a):a,r=r.useState()[0],(Oe!==null?Oe.memoizedState:null)!==r&&(Jt.flags|=1024),a}function s_(){var r=Ud!==0;return Ud=0,r}function r_(r,a,c){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~c}function o_(r){if(Bd){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Bd=!1}ha=0,gn=Oe=Jt=null,qu=!1,yh=Ud=0,Gu=null}function Ci(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?Jt.memoizedState=gn=r:gn=gn.next=r,gn}function _n(){if(Oe===null){var r=Jt.alternate;r=r!==null?r.memoizedState:null}else r=Oe.next;var a=gn===null?Jt.memoizedState:gn.next;if(a!==null)gn=a,Oe=r;else{if(r===null)throw Jt.alternate===null?Error(i(467)):Error(i(310));Oe=r,r={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},gn===null?Jt.memoizedState=gn=r:gn=gn.next=r}return gn}function a_(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vh(r){var a=yh;return yh+=1,Gu===null&&(Gu=[]),r=oE(Gu,r,a),a=Jt,(gn===null?a.memoizedState:gn.next)===null&&(a=a.alternate,nt.H=a===null||a.memoizedState===null?ZE:KE),r}function Fd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return vh(r);if(r.$$typeof===J)return si(r)}throw Error(i(438,String(r)))}function l_(r){var a=null,c=Jt.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var p=Jt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(a={data:p.data.map(function(y){return y.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=a_(),Jt.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(r),p=0;p<r;p++)c[p]=q;return a.index++,c}function ro(r,a){return typeof a=="function"?a(r):a}function Hd(r){var a=_n();return u_(a,Oe,r)}function u_(r,a,c){var p=r.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=c;var y=r.baseQueue,b=p.pending;if(b!==null){if(y!==null){var I=y.next;y.next=b.next,b.next=I}a.baseQueue=y=b,p.pending=null}if(b=r.baseState,y===null)r.memoizedState=b;else{a=y.next;var O=I=null,G=null,et=a,ct=!1;do{var ft=et.lane&-536870913;if(ft!==et.lane?(me&ft)===ft:(ha&ft)===ft){var it=et.revertLane;if(it===0)G!==null&&(G=G.next={lane:0,revertLane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),ft===Fu&&(ct=!0);else if((ha&it)===it){et=et.next,it===Fu&&(ct=!0);continue}else ft={lane:0,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},G===null?(O=G=ft,I=b):G=G.next=ft,Jt.lanes|=it,ya|=it;ft=et.action,Vl&&c(b,ft),b=et.hasEagerState?et.eagerState:c(b,ft)}else it={lane:ft,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},G===null?(O=G=it,I=b):G=G.next=it,Jt.lanes|=ft,ya|=ft;et=et.next}while(et!==null&&et!==a);if(G===null?I=b:G.next=O,!gi(b,r.memoizedState)&&(kn=!0,ct&&(c=Hu,c!==null)))throw c;r.memoizedState=b,r.baseState=I,r.baseQueue=G,p.lastRenderedState=b}return y===null&&(p.lanes=0),[r.memoizedState,p.dispatch]}function c_(r){var a=_n(),c=a.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var p=c.dispatch,y=c.pending,b=a.memoizedState;if(y!==null){c.pending=null;var I=y=y.next;do b=r(b,I.action),I=I.next;while(I!==y);gi(b,a.memoizedState)||(kn=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),c.lastRenderedState=b}return[b,p]}function pE(r,a,c){var p=Jt,y=_n(),b=qt;if(b){if(c===void 0)throw Error(i(407));c=c()}else c=a();var I=!gi((Oe||y).memoizedState,c);I&&(y.memoizedState=c,kn=!0),y=y.queue;var O=_E.bind(null,p,y,r);if(bh(2048,8,O,[r]),y.getSnapshot!==a||I||gn!==null&&gn.memoizedState.tag&1){if(p.flags|=2048,Wu(9,jd(),gE.bind(null,p,y,c,a),null),je===null)throw Error(i(349));b||(ha&124)!==0||mE(p,a,c)}return c}function mE(r,a,c){r.flags|=16384,r={getSnapshot:a,value:c},a=Jt.updateQueue,a===null?(a=a_(),Jt.updateQueue=a,a.stores=[r]):(c=a.stores,c===null?a.stores=[r]:c.push(r))}function gE(r,a,c,p){a.value=c,a.getSnapshot=p,yE(a)&&vE(r)}function _E(r,a,c){return c(function(){yE(a)&&vE(r)})}function yE(r){var a=r.getSnapshot;r=r.value;try{var c=a();return!gi(r,c)}catch{return!0}}function vE(r){var a=sa(r,2);a!==null&&ns(a,r,2)}function h_(r){var a=Ci();if(typeof r=="function"){var c=r;if(r=c(),Vl){Xn(!0);try{c()}finally{Xn(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:r},a}function bE(r,a,c,p){return r.baseState=c,u_(r,Oe,typeof p=="function"?p:ro)}function BM(r,a,c,p,y){if(Gd(r))throw Error(i(485));if(r=a.action,r!==null){var b={payload:y,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){b.listeners.push(I)}};nt.T!==null?c(!0):b.isTransition=!1,p(b),c=a.pending,c===null?(b.next=a.pending=b,EE(a,b)):(b.next=c.next,a.pending=c.next=b)}}function EE(r,a){var c=a.action,p=a.payload,y=r.state;if(a.isTransition){var b=nt.T,I={};nt.T=I;try{var O=c(y,p),G=nt.S;G!==null&&G(I,O),TE(r,a,O)}catch(et){f_(r,a,et)}finally{nt.T=b}}else try{b=c(y,p),TE(r,a,b)}catch(et){f_(r,a,et)}}function TE(r,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(p){wE(r,a,p)},function(p){return f_(r,a,p)}):wE(r,a,c)}function wE(r,a,c){a.status="fulfilled",a.value=c,SE(a),r.state=c,a=r.pending,a!==null&&(c=a.next,c===a?r.pending=null:(c=c.next,a.next=c,EE(r,c)))}function f_(r,a,c){var p=r.pending;if(r.pending=null,p!==null){p=p.next;do a.status="rejected",a.reason=c,SE(a),a=a.next;while(a!==p)}r.action=null}function SE(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function xE(r,a){return a}function CE(r,a){if(qt){var c=je.formState;if(c!==null){t:{var p=Jt;if(qt){if(Ot){e:{for(var y=Ot,b=tn;y.nodeType!==8;){if(!b){y=null;break e}if(y=$s(y.nextSibling),y===null){y=null;break e}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){Ot=$s(y.nextSibling),p=y.data==="F!";break t}}xi(p)}p=!1}p&&(a=c[0])}}return c=Ci(),c.memoizedState=c.baseState=a,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xE,lastRenderedState:a},c.queue=p,c=GE.bind(null,Jt,p),p.dispatch=c,p=h_(!1),b=__.bind(null,Jt,!1,p.queue),p=Ci(),y={state:a,dispatch:null,action:r,pending:null},p.queue=y,c=BM.bind(null,Jt,y,b,c),y.dispatch=c,p.memoizedState=r,[a,c,!1]}function AE(r){var a=_n();return IE(a,Oe,r)}function IE(r,a,c){if(a=u_(r,a,xE)[0],r=Hd(ro)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var p=vh(a)}catch(I){throw I===dh?Ld:I}else p=a;a=_n();var y=a.queue,b=y.dispatch;return c!==a.memoizedState&&(Jt.flags|=2048,Wu(9,jd(),UM.bind(null,y,c),null)),[p,b,r]}function UM(r,a){r.action=a}function RE(r){var a=_n(),c=Oe;if(c!==null)return IE(a,c,r);_n(),a=a.memoizedState,c=_n();var p=c.queue.dispatch;return c.memoizedState=r,[a,p,!1]}function Wu(r,a,c,p){return r={tag:r,create:c,deps:p,inst:a,next:null},a=Jt.updateQueue,a===null&&(a=a_(),Jt.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=r.next=r:(p=c.next,c.next=r,r.next=p,a.lastEffect=r),r}function jd(){return{destroy:void 0,resource:void 0}}function PE(){return _n().memoizedState}function qd(r,a,c,p){var y=Ci();p=p===void 0?null:p,Jt.flags|=r,y.memoizedState=Wu(1|a,jd(),c,p)}function bh(r,a,c,p){var y=_n();p=p===void 0?null:p;var b=y.memoizedState.inst;Oe!==null&&p!==null&&n_(p,Oe.memoizedState.deps)?y.memoizedState=Wu(a,b,c,p):(Jt.flags|=r,y.memoizedState=Wu(1|a,b,c,p))}function ME(r,a){qd(8390656,8,r,a)}function OE(r,a){bh(2048,8,r,a)}function kE(r,a){return bh(4,2,r,a)}function DE(r,a){return bh(4,4,r,a)}function NE(r,a){if(typeof a=="function"){r=r();var c=a(r);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function LE(r,a,c){c=c!=null?c.concat([r]):null,bh(4,4,NE.bind(null,a,r),c)}function d_(){}function VE(r,a){var c=_n();a=a===void 0?null:a;var p=c.memoizedState;return a!==null&&n_(a,p[1])?p[0]:(c.memoizedState=[r,a],r)}function zE(r,a){var c=_n();a=a===void 0?null:a;var p=c.memoizedState;if(a!==null&&n_(a,p[1]))return p[0];if(p=r(),Vl){Xn(!0);try{r()}finally{Xn(!1)}}return c.memoizedState=[p,a],p}function p_(r,a,c){return c===void 0||(ha&1073741824)!==0?r.memoizedState=a:(r.memoizedState=c,r=FT(),Jt.lanes|=r,ya|=r,c)}function BE(r,a,c,p){return gi(c,a)?c:ju.current!==null?(r=p_(r,c,p),gi(r,a)||(kn=!0),r):(ha&42)===0?(kn=!0,r.memoizedState=c):(r=FT(),Jt.lanes|=r,ya|=r,a)}function UE(r,a,c,p,y){var b=Et.p;Et.p=b!==0&&8>b?b:8;var I=nt.T,O={};nt.T=O,__(r,!1,a,c);try{var G=y(),et=nt.S;if(et!==null&&et(O,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var ct=LM(G,p);Eh(r,a,ct,es(r))}else Eh(r,a,p,es(r))}catch(ft){Eh(r,a,{then:function(){},status:"rejected",reason:ft},es())}finally{Et.p=b,nt.T=I}}function FM(){}function m_(r,a,c,p){if(r.tag!==5)throw Error(i(476));var y=FE(r).queue;UE(r,y,a,vt,c===null?FM:function(){return HE(r),c(p)})}function FE(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:vt,baseState:vt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:vt},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:c},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function HE(r){var a=FE(r).next.queue;Eh(r,a,{},es())}function g_(){return si(Bh)}function jE(){return _n().memoizedState}function qE(){return _n().memoizedState}function HM(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var c=es();r=ua(c);var p=ca(a,r,c);p!==null&&(ns(p,a,c),mh(p,a,c)),a={cache:Wg()},r.payload=a;return}a=a.return}}function jM(r,a,c){var p=es();c={lane:p,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Gd(r)?WE(a,c):(c=no(r,a,c,p),c!==null&&(ns(c,r,p),YE(c,a,p)))}function GE(r,a,c){var p=es();Eh(r,a,c,p)}function Eh(r,a,c,p){var y={lane:p,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Gd(r))WE(a,y);else{var b=r.alternate;if(r.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var I=a.lastRenderedState,O=b(I,c);if(y.hasEagerState=!0,y.eagerState=O,gi(O,I))return Rl(r,a,y,0),je===null&&Il(),!1}catch{}finally{}if(c=no(r,a,y,p),c!==null)return ns(c,r,p),YE(c,a,p),!0}return!1}function __(r,a,c,p){if(p={lane:2,revertLane:K_(),action:p,hasEagerState:!1,eagerState:null,next:null},Gd(r)){if(a)throw Error(i(479))}else a=no(r,c,p,2),a!==null&&ns(a,r,2)}function Gd(r){var a=r.alternate;return r===Jt||a!==null&&a===Jt}function WE(r,a){qu=Bd=!0;var c=r.pending;c===null?a.next=a:(a.next=c.next,c.next=a),r.pending=a}function YE(r,a,c){if((c&4194048)!==0){var p=a.lanes;p&=r.pendingLanes,c|=p,a.lanes=c,dl(r,c)}}var Wd={readContext:si,use:Fd,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn},ZE={readContext:si,use:Fd,useCallback:function(r,a){return Ci().memoizedState=[r,a===void 0?null:a],r},useContext:si,useEffect:ME,useImperativeHandle:function(r,a,c){c=c!=null?c.concat([r]):null,qd(4194308,4,NE.bind(null,a,r),c)},useLayoutEffect:function(r,a){return qd(4194308,4,r,a)},useInsertionEffect:function(r,a){qd(4,2,r,a)},useMemo:function(r,a){var c=Ci();a=a===void 0?null:a;var p=r();if(Vl){Xn(!0);try{r()}finally{Xn(!1)}}return c.memoizedState=[p,a],p},useReducer:function(r,a,c){var p=Ci();if(c!==void 0){var y=c(a);if(Vl){Xn(!0);try{c(a)}finally{Xn(!1)}}}else y=a;return p.memoizedState=p.baseState=y,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:y},p.queue=r,r=r.dispatch=jM.bind(null,Jt,r),[p.memoizedState,r]},useRef:function(r){var a=Ci();return r={current:r},a.memoizedState=r},useState:function(r){r=h_(r);var a=r.queue,c=GE.bind(null,Jt,a);return a.dispatch=c,[r.memoizedState,c]},useDebugValue:d_,useDeferredValue:function(r,a){var c=Ci();return p_(c,r,a)},useTransition:function(){var r=h_(!1);return r=UE.bind(null,Jt,r.queue,!0,!1),Ci().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,c){var p=Jt,y=Ci();if(qt){if(c===void 0)throw Error(i(407));c=c()}else{if(c=a(),je===null)throw Error(i(349));(me&124)!==0||mE(p,a,c)}y.memoizedState=c;var b={value:c,getSnapshot:a};return y.queue=b,ME(_E.bind(null,p,b,r),[r]),p.flags|=2048,Wu(9,jd(),gE.bind(null,p,b,c,a),null),c},useId:function(){var r=Ci(),a=je.identifierPrefix;if(qt){var c=j,p=P;c=(p&~(1<<32-An(p)-1)).toString(32)+c,a="«"+a+"R"+c,c=Ud++,0<c&&(a+="H"+c.toString(32)),a+="»"}else c=VM++,a="«"+a+"r"+c.toString(32)+"»";return r.memoizedState=a},useHostTransitionStatus:g_,useFormState:CE,useActionState:CE,useOptimistic:function(r){var a=Ci();a.memoizedState=a.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=__.bind(null,Jt,!0,c),c.dispatch=a,[r,a]},useMemoCache:l_,useCacheRefresh:function(){return Ci().memoizedState=HM.bind(null,Jt)}},KE={readContext:si,use:Fd,useCallback:VE,useContext:si,useEffect:OE,useImperativeHandle:LE,useInsertionEffect:kE,useLayoutEffect:DE,useMemo:zE,useReducer:Hd,useRef:PE,useState:function(){return Hd(ro)},useDebugValue:d_,useDeferredValue:function(r,a){var c=_n();return BE(c,Oe.memoizedState,r,a)},useTransition:function(){var r=Hd(ro)[0],a=_n().memoizedState;return[typeof r=="boolean"?r:vh(r),a]},useSyncExternalStore:pE,useId:jE,useHostTransitionStatus:g_,useFormState:AE,useActionState:AE,useOptimistic:function(r,a){var c=_n();return bE(c,Oe,r,a)},useMemoCache:l_,useCacheRefresh:qE},qM={readContext:si,use:Fd,useCallback:VE,useContext:si,useEffect:OE,useImperativeHandle:LE,useInsertionEffect:kE,useLayoutEffect:DE,useMemo:zE,useReducer:c_,useRef:PE,useState:function(){return c_(ro)},useDebugValue:d_,useDeferredValue:function(r,a){var c=_n();return Oe===null?p_(c,r,a):BE(c,Oe.memoizedState,r,a)},useTransition:function(){var r=c_(ro)[0],a=_n().memoizedState;return[typeof r=="boolean"?r:vh(r),a]},useSyncExternalStore:pE,useId:jE,useHostTransitionStatus:g_,useFormState:RE,useActionState:RE,useOptimistic:function(r,a){var c=_n();return Oe!==null?bE(c,Oe,r,a):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:l_,useCacheRefresh:qE},Yu=null,Th=0;function Yd(r){var a=Th;return Th+=1,Yu===null&&(Yu=[]),oE(Yu,r,a)}function wh(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Zd(r,a){throw a.$$typeof===T?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function $E(r){var a=r._init;return a(r._payload)}function QE(r){function a(K,Y){if(r){var tt=K.deletions;tt===null?(K.deletions=[Y],K.flags|=16):tt.push(Y)}}function c(K,Y){if(!r)return null;for(;Y!==null;)a(K,Y),Y=Y.sibling;return null}function p(K){for(var Y=new Map;K!==null;)K.key!==null?Y.set(K.key,K):Y.set(K.index,K),K=K.sibling;return Y}function y(K,Y){return K=Es(K,Y),K.index=0,K.sibling=null,K}function b(K,Y,tt){return K.index=tt,r?(tt=K.alternate,tt!==null?(tt=tt.index,tt<Y?(K.flags|=67108866,Y):tt):(K.flags|=67108866,Y)):(K.flags|=1048576,Y)}function I(K){return r&&K.alternate===null&&(K.flags|=67108866),K}function O(K,Y,tt,ht){return Y===null||Y.tag!==6?(Y=ch(tt,K.mode,ht),Y.return=K,Y):(Y=y(Y,tt),Y.return=K,Y)}function G(K,Y,tt,ht){var Mt=tt.type;return Mt===R?ct(K,Y,tt.props.children,ht,tt.key):Y!==null&&(Y.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===N&&$E(Mt)===Y.type)?(Y=y(Y,tt.props),wh(Y,tt),Y.return=K,Y):(Y=Ml(tt.type,tt.key,tt.props,null,K.mode,ht),wh(Y,tt),Y.return=K,Y)}function et(K,Y,tt,ht){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==tt.containerInfo||Y.stateNode.implementation!==tt.implementation?(Y=Bu(tt,K.mode,ht),Y.return=K,Y):(Y=y(Y,tt.children||[]),Y.return=K,Y)}function ct(K,Y,tt,ht,Mt){return Y===null||Y.tag!==7?(Y=Er(tt,K.mode,ht,Mt),Y.return=K,Y):(Y=y(Y,tt),Y.return=K,Y)}function ft(K,Y,tt){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=ch(""+Y,K.mode,tt),Y.return=K,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return tt=Ml(Y.type,Y.key,Y.props,null,K.mode,tt),wh(tt,Y),tt.return=K,tt;case A:return Y=Bu(Y,K.mode,tt),Y.return=K,Y;case N:var ht=Y._init;return Y=ht(Y._payload),ft(K,Y,tt)}if(Gt(Y)||W(Y))return Y=Er(Y,K.mode,tt,null),Y.return=K,Y;if(typeof Y.then=="function")return ft(K,Yd(Y),tt);if(Y.$$typeof===J)return ft(K,Dd(K,Y),tt);Zd(K,Y)}return null}function it(K,Y,tt,ht){var Mt=Y!==null?Y.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return Mt!==null?null:O(K,Y,""+tt,ht);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case w:return tt.key===Mt?G(K,Y,tt,ht):null;case A:return tt.key===Mt?et(K,Y,tt,ht):null;case N:return Mt=tt._init,tt=Mt(tt._payload),it(K,Y,tt,ht)}if(Gt(tt)||W(tt))return Mt!==null?null:ct(K,Y,tt,ht,null);if(typeof tt.then=="function")return it(K,Y,Yd(tt),ht);if(tt.$$typeof===J)return it(K,Y,Dd(K,tt),ht);Zd(K,tt)}return null}function st(K,Y,tt,ht,Mt){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return K=K.get(tt)||null,O(Y,K,""+ht,Mt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case w:return K=K.get(ht.key===null?tt:ht.key)||null,G(Y,K,ht,Mt);case A:return K=K.get(ht.key===null?tt:ht.key)||null,et(Y,K,ht,Mt);case N:var ie=ht._init;return ht=ie(ht._payload),st(K,Y,tt,ht,Mt)}if(Gt(ht)||W(ht))return K=K.get(tt)||null,ct(Y,K,ht,Mt,null);if(typeof ht.then=="function")return st(K,Y,tt,Yd(ht),Mt);if(ht.$$typeof===J)return st(K,Y,tt,Dd(Y,ht),Mt);Zd(Y,ht)}return null}function Ht(K,Y,tt,ht){for(var Mt=null,ie=null,Dt=Y,zt=Y=0,Nn=null;Dt!==null&&zt<tt.length;zt++){Dt.index>zt?(Nn=Dt,Dt=null):Nn=Dt.sibling;var be=it(K,Dt,tt[zt],ht);if(be===null){Dt===null&&(Dt=Nn);break}r&&Dt&&be.alternate===null&&a(K,Dt),Y=b(be,Y,zt),ie===null?Mt=be:ie.sibling=be,ie=be,Dt=Nn}if(zt===tt.length)return c(K,Dt),qt&&X(K,zt),Mt;if(Dt===null){for(;zt<tt.length;zt++)Dt=ft(K,tt[zt],ht),Dt!==null&&(Y=b(Dt,Y,zt),ie===null?Mt=Dt:ie.sibling=Dt,ie=Dt);return qt&&X(K,zt),Mt}for(Dt=p(Dt);zt<tt.length;zt++)Nn=st(Dt,K,zt,tt[zt],ht),Nn!==null&&(r&&Nn.alternate!==null&&Dt.delete(Nn.key===null?zt:Nn.key),Y=b(Nn,Y,zt),ie===null?Mt=Nn:ie.sibling=Nn,ie=Nn);return r&&Dt.forEach(function(Aa){return a(K,Aa)}),qt&&X(K,zt),Mt}function Vt(K,Y,tt,ht){if(tt==null)throw Error(i(151));for(var Mt=null,ie=null,Dt=Y,zt=Y=0,Nn=null,be=tt.next();Dt!==null&&!be.done;zt++,be=tt.next()){Dt.index>zt?(Nn=Dt,Dt=null):Nn=Dt.sibling;var Aa=it(K,Dt,be.value,ht);if(Aa===null){Dt===null&&(Dt=Nn);break}r&&Dt&&Aa.alternate===null&&a(K,Dt),Y=b(Aa,Y,zt),ie===null?Mt=Aa:ie.sibling=Aa,ie=Aa,Dt=Nn}if(be.done)return c(K,Dt),qt&&X(K,zt),Mt;if(Dt===null){for(;!be.done;zt++,be=tt.next())be=ft(K,be.value,ht),be!==null&&(Y=b(be,Y,zt),ie===null?Mt=be:ie.sibling=be,ie=be);return qt&&X(K,zt),Mt}for(Dt=p(Dt);!be.done;zt++,be=tt.next())be=st(Dt,K,zt,be.value,ht),be!==null&&(r&&be.alternate!==null&&Dt.delete(be.key===null?zt:be.key),Y=b(be,Y,zt),ie===null?Mt=be:ie.sibling=be,ie=be);return r&&Dt.forEach(function(GO){return a(K,GO)}),qt&&X(K,zt),Mt}function De(K,Y,tt,ht){if(typeof tt=="object"&&tt!==null&&tt.type===R&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case w:t:{for(var Mt=tt.key;Y!==null;){if(Y.key===Mt){if(Mt=tt.type,Mt===R){if(Y.tag===7){c(K,Y.sibling),ht=y(Y,tt.props.children),ht.return=K,K=ht;break t}}else if(Y.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===N&&$E(Mt)===Y.type){c(K,Y.sibling),ht=y(Y,tt.props),wh(ht,tt),ht.return=K,K=ht;break t}c(K,Y);break}else a(K,Y);Y=Y.sibling}tt.type===R?(ht=Er(tt.props.children,K.mode,ht,tt.key),ht.return=K,K=ht):(ht=Ml(tt.type,tt.key,tt.props,null,K.mode,ht),wh(ht,tt),ht.return=K,K=ht)}return I(K);case A:t:{for(Mt=tt.key;Y!==null;){if(Y.key===Mt)if(Y.tag===4&&Y.stateNode.containerInfo===tt.containerInfo&&Y.stateNode.implementation===tt.implementation){c(K,Y.sibling),ht=y(Y,tt.children||[]),ht.return=K,K=ht;break t}else{c(K,Y);break}else a(K,Y);Y=Y.sibling}ht=Bu(tt,K.mode,ht),ht.return=K,K=ht}return I(K);case N:return Mt=tt._init,tt=Mt(tt._payload),De(K,Y,tt,ht)}if(Gt(tt))return Ht(K,Y,tt,ht);if(W(tt)){if(Mt=W(tt),typeof Mt!="function")throw Error(i(150));return tt=Mt.call(tt),Vt(K,Y,tt,ht)}if(typeof tt.then=="function")return De(K,Y,Yd(tt),ht);if(tt.$$typeof===J)return De(K,Y,Dd(K,tt),ht);Zd(K,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint"?(tt=""+tt,Y!==null&&Y.tag===6?(c(K,Y.sibling),ht=y(Y,tt),ht.return=K,K=ht):(c(K,Y),ht=ch(tt,K.mode,ht),ht.return=K,K=ht),I(K)):c(K,Y)}return function(K,Y,tt,ht){try{Th=0;var Mt=De(K,Y,tt,ht);return Yu=null,Mt}catch(Dt){if(Dt===dh||Dt===Ld)throw Dt;var ie=bi(29,Dt,null,K.mode);return ie.lanes=ht,ie.return=K,ie}finally{}}}var Zu=QE(!0),XE=QE(!1),ws=lt(null),wr=null;function fa(r){var a=r.alternate;mt(wn,wn.current&1),mt(ws,r),wr===null&&(a===null||ju.current!==null||a.memoizedState!==null)&&(wr=r)}function JE(r){if(r.tag===22){if(mt(wn,wn.current),mt(ws,r),wr===null){var a=r.alternate;a!==null&&a.memoizedState!==null&&(wr=r)}}else da()}function da(){mt(wn,wn.current),mt(ws,ws.current)}function oo(r){bt(ws),wr===r&&(wr=null),bt(wn)}var wn=lt(0);function Kd(r){for(var a=r;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||ay(c)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function y_(r,a,c,p){a=r.memoizedState,c=c(p,a),c=c==null?a:v({},a,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var v_={enqueueSetState:function(r,a,c){r=r._reactInternals;var p=es(),y=ua(p);y.payload=a,c!=null&&(y.callback=c),a=ca(r,y,p),a!==null&&(ns(a,r,p),mh(a,r,p))},enqueueReplaceState:function(r,a,c){r=r._reactInternals;var p=es(),y=ua(p);y.tag=1,y.payload=a,c!=null&&(y.callback=c),a=ca(r,y,p),a!==null&&(ns(a,r,p),mh(a,r,p))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var c=es(),p=ua(c);p.tag=2,a!=null&&(p.callback=a),a=ca(r,p,c),a!==null&&(ns(a,r,c),mh(a,r,c))}};function tT(r,a,c,p,y,b,I){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(p,b,I):a.prototype&&a.prototype.isPureReactComponent?!_i(c,p)||!_i(y,b):!0}function eT(r,a,c,p){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,p),a.state!==r&&v_.enqueueReplaceState(a,a.state,null)}function zl(r,a){var c=a;if("ref"in a){c={};for(var p in a)p!=="ref"&&(c[p]=a[p])}if(r=r.defaultProps){c===a&&(c=v({},c));for(var y in r)c[y]===void 0&&(c[y]=r[y])}return c}var $d=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function nT(r){$d(r)}function iT(r){console.error(r)}function sT(r){$d(r)}function Qd(r,a){try{var c=r.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(p){setTimeout(function(){throw p})}}function rT(r,a,c){try{var p=r.onCaughtError;p(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function b_(r,a,c){return c=ua(c),c.tag=3,c.payload={element:null},c.callback=function(){Qd(r,a)},c}function oT(r){return r=ua(r),r.tag=3,r}function aT(r,a,c,p){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var b=p.value;r.payload=function(){return y(b)},r.callback=function(){rT(a,c,p)}}var I=c.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(r.callback=function(){rT(a,c,p),typeof y!="function"&&(va===null?va=new Set([this]):va.add(this));var O=p.stack;this.componentDidCatch(p.value,{componentStack:O!==null?O:""})})}function GM(r,a,c,p,y){if(c.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(a=c.alternate,a!==null&&Dl(a,c,y,!0),c=ws.current,c!==null){switch(c.tag){case 13:return wr===null?q_():c.alternate===null&&on===0&&(on=3),c.flags&=-257,c.flags|=65536,c.lanes=y,p===Kg?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([p]):a.add(p),W_(r,p,y)),!1;case 22:return c.flags|=65536,p===Kg?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([p])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([p]):c.add(p)),W_(r,p,y)),!1}throw Error(i(435,c.tag))}return W_(r,p,y),q_(),!1}if(qt)return a=ws.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=y,p!==On&&(r=Error(i(422),{cause:p}),aa(yi(r,c)))):(p!==On&&(a=Error(i(423),{cause:p}),aa(yi(a,c))),r=r.current.alternate,r.flags|=65536,y&=-y,r.lanes|=y,p=yi(p,c),y=b_(r.stateNode,p,y),Xg(r,y),on!==4&&(on=2)),!1;var b=Error(i(520),{cause:p});if(b=yi(b,c),Ph===null?Ph=[b]:Ph.push(b),on!==4&&(on=2),a===null)return!0;p=yi(p,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,r=y&-y,c.lanes|=r,r=b_(c.stateNode,p,r),Xg(c,r),!1;case 1:if(a=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(va===null||!va.has(b))))return c.flags|=65536,y&=-y,c.lanes|=y,y=oT(y),aT(y,r,c,p),Xg(c,y),!1}c=c.return}while(c!==null);return!1}var lT=Error(i(461)),kn=!1;function qn(r,a,c,p){a.child=r===null?XE(a,null,c,p):Zu(a,r.child,c,p)}function uT(r,a,c,p,y){c=c.render;var b=a.ref;if("ref"in p){var I={};for(var O in p)O!=="ref"&&(I[O]=p[O])}else I=p;return Nl(a),p=i_(r,a,c,I,b,y),O=s_(),r!==null&&!kn?(r_(r,a,y),ao(r,a,y)):(qt&&O&&yt(a),a.flags|=1,qn(r,a,p,y),a.child)}function cT(r,a,c,p,y){if(r===null){var b=c.type;return typeof b=="function"&&!zu(b)&&b.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=b,hT(r,a,b,p,y)):(r=Ml(c.type,null,p,a,a.mode,y),r.ref=a.ref,r.return=a,a.child=r)}if(b=r.child,!I_(r,y)){var I=b.memoizedProps;if(c=c.compare,c=c!==null?c:_i,c(I,p)&&r.ref===a.ref)return ao(r,a,y)}return a.flags|=1,r=Es(b,p),r.ref=a.ref,r.return=a,a.child=r}function hT(r,a,c,p,y){if(r!==null){var b=r.memoizedProps;if(_i(b,p)&&r.ref===a.ref)if(kn=!1,a.pendingProps=p=b,I_(r,y))(r.flags&131072)!==0&&(kn=!0);else return a.lanes=r.lanes,ao(r,a,y)}return E_(r,a,c,p,y)}function fT(r,a,c){var p=a.pendingProps,y=p.children,b=r!==null?r.memoizedState:null;if(p.mode==="hidden"){if((a.flags&128)!==0){if(p=b!==null?b.baseLanes|c:c,r!==null){for(y=a.child=r.child,b=0;y!==null;)b=b|y.lanes|y.childLanes,y=y.sibling;a.childLanes=b&~p}else a.childLanes=0,a.child=null;return dT(r,a,p,c)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&Nd(a,b!==null?b.cachePool:null),b!==null?hE(a,b):t_(),JE(a);else return a.lanes=a.childLanes=536870912,dT(r,a,b!==null?b.baseLanes|c:c,c)}else b!==null?(Nd(a,b.cachePool),hE(a,b),da(),a.memoizedState=null):(r!==null&&Nd(a,null),t_(),da());return qn(r,a,y,c),a.child}function dT(r,a,c,p){var y=Zg();return y=y===null?null:{parent:Tn._currentValue,pool:y},a.memoizedState={baseLanes:c,cachePool:y},r!==null&&Nd(a,null),t_(),JE(a),r!==null&&Dl(r,a,p,!0),null}function Xd(r,a){var c=a.ref;if(c===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(a.flags|=4194816)}}function E_(r,a,c,p,y){return Nl(a),c=i_(r,a,c,p,void 0,y),p=s_(),r!==null&&!kn?(r_(r,a,y),ao(r,a,y)):(qt&&p&&yt(a),a.flags|=1,qn(r,a,c,y),a.child)}function pT(r,a,c,p,y,b){return Nl(a),a.updateQueue=null,c=dE(a,p,c,y),fE(r),p=s_(),r!==null&&!kn?(r_(r,a,b),ao(r,a,b)):(qt&&p&&yt(a),a.flags|=1,qn(r,a,c,b),a.child)}function mT(r,a,c,p,y){if(Nl(a),a.stateNode===null){var b=io,I=c.contextType;typeof I=="object"&&I!==null&&(b=si(I)),b=new c(p,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=v_,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=p,b.state=a.memoizedState,b.refs={},$g(a),I=c.contextType,b.context=typeof I=="object"&&I!==null?si(I):io,b.state=a.memoizedState,I=c.getDerivedStateFromProps,typeof I=="function"&&(y_(a,c,I,p),b.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(I=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),I!==b.state&&v_.enqueueReplaceState(b,b.state,null),_h(a,p,b,y),gh(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),p=!0}else if(r===null){b=a.stateNode;var O=a.memoizedProps,G=zl(c,O);b.props=G;var et=b.context,ct=c.contextType;I=io,typeof ct=="object"&&ct!==null&&(I=si(ct));var ft=c.getDerivedStateFromProps;ct=typeof ft=="function"||typeof b.getSnapshotBeforeUpdate=="function",O=a.pendingProps!==O,ct||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(O||et!==I)&&eT(a,b,p,I),la=!1;var it=a.memoizedState;b.state=it,_h(a,p,b,y),gh(),et=a.memoizedState,O||it!==et||la?(typeof ft=="function"&&(y_(a,c,ft,p),et=a.memoizedState),(G=la||tT(a,c,G,p,it,et,I))?(ct||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=et),b.props=p,b.state=et,b.context=I,p=G):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{b=a.stateNode,Qg(r,a),I=a.memoizedProps,ct=zl(c,I),b.props=ct,ft=a.pendingProps,it=b.context,et=c.contextType,G=io,typeof et=="object"&&et!==null&&(G=si(et)),O=c.getDerivedStateFromProps,(et=typeof O=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(I!==ft||it!==G)&&eT(a,b,p,G),la=!1,it=a.memoizedState,b.state=it,_h(a,p,b,y),gh();var st=a.memoizedState;I!==ft||it!==st||la||r!==null&&r.dependencies!==null&&kd(r.dependencies)?(typeof O=="function"&&(y_(a,c,O,p),st=a.memoizedState),(ct=la||tT(a,c,ct,p,it,st,G)||r!==null&&r.dependencies!==null&&kd(r.dependencies))?(et||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(p,st,G),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(p,st,G)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||I===r.memoizedProps&&it===r.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||I===r.memoizedProps&&it===r.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=st),b.props=p,b.state=st,b.context=G,p=ct):(typeof b.componentDidUpdate!="function"||I===r.memoizedProps&&it===r.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||I===r.memoizedProps&&it===r.memoizedState||(a.flags|=1024),p=!1)}return b=p,Xd(r,a),p=(a.flags&128)!==0,b||p?(b=a.stateNode,c=p&&typeof c.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,r!==null&&p?(a.child=Zu(a,r.child,null,y),a.child=Zu(a,null,c,y)):qn(r,a,c,y),a.memoizedState=b.state,r=a.child):r=ao(r,a,y),r}function gT(r,a,c,p){return oa(),a.flags|=256,qn(r,a,c,p),a.child}var T_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function w_(r){return{baseLanes:r,cachePool:iE()}}function S_(r,a,c){return r=r!==null?r.childLanes&~c:0,a&&(r|=Ss),r}function _T(r,a,c){var p=a.pendingProps,y=!1,b=(a.flags&128)!==0,I;if((I=b)||(I=r!==null&&r.memoizedState===null?!1:(wn.current&2)!==0),I&&(y=!0,a.flags&=-129),I=(a.flags&32)!==0,a.flags&=-33,r===null){if(qt){if(y?fa(a):da(),qt){var O=Ot,G;if(G=O){t:{for(G=O,O=tn;G.nodeType!==8;){if(!O){O=null;break t}if(G=$s(G.nextSibling),G===null){O=null;break t}}O=G}O!==null?(a.memoizedState={dehydrated:O,treeContext:x!==null?{id:P,overflow:j}:null,retryLane:536870912,hydrationErrors:null},G=bi(18,null,null,0),G.stateNode=O,G.return=a,a.child=G,Pt=a,Ot=null,G=!0):G=!1}G||xi(a)}if(O=a.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return ay(O)?a.lanes=32:a.lanes=536870912,null;oo(a)}return O=p.children,p=p.fallback,y?(da(),y=a.mode,O=Jd({mode:"hidden",children:O},y),p=Er(p,y,c,null),O.return=a,p.return=a,O.sibling=p,a.child=O,y=a.child,y.memoizedState=w_(c),y.childLanes=S_(r,I,c),a.memoizedState=T_,p):(fa(a),x_(a,O))}if(G=r.memoizedState,G!==null&&(O=G.dehydrated,O!==null)){if(b)a.flags&256?(fa(a),a.flags&=-257,a=C_(r,a,c)):a.memoizedState!==null?(da(),a.child=r.child,a.flags|=128,a=null):(da(),y=p.fallback,O=a.mode,p=Jd({mode:"visible",children:p.children},O),y=Er(y,O,c,null),y.flags|=2,p.return=a,y.return=a,p.sibling=y,a.child=p,Zu(a,r.child,null,c),p=a.child,p.memoizedState=w_(c),p.childLanes=S_(r,I,c),a.memoizedState=T_,a=y);else if(fa(a),ay(O)){if(I=O.nextSibling&&O.nextSibling.dataset,I)var et=I.dgst;I=et,p=Error(i(419)),p.stack="",p.digest=I,aa({value:p,source:null,stack:null}),a=C_(r,a,c)}else if(kn||Dl(r,a,c,!1),I=(c&r.childLanes)!==0,kn||I){if(I=je,I!==null&&(p=c&-c,p=(p&42)!==0?1:ur(p),p=(p&(I.suspendedLanes|c))!==0?0:p,p!==0&&p!==G.retryLane))throw G.retryLane=p,sa(r,p),ns(I,r,p),lT;O.data==="$?"||q_(),a=C_(r,a,c)}else O.data==="$?"?(a.flags|=192,a.child=r.child,a=null):(r=G.treeContext,Ot=$s(O.nextSibling),Pt=a,qt=!0,He=null,tn=!1,r!==null&&(_[E++]=P,_[E++]=j,_[E++]=x,P=r.id,j=r.overflow,x=a),a=x_(a,p.children),a.flags|=4096);return a}return y?(da(),y=p.fallback,O=a.mode,G=r.child,et=G.sibling,p=Es(G,{mode:"hidden",children:p.children}),p.subtreeFlags=G.subtreeFlags&65011712,et!==null?y=Es(et,y):(y=Er(y,O,c,null),y.flags|=2),y.return=a,p.return=a,p.sibling=y,a.child=p,p=y,y=a.child,O=r.child.memoizedState,O===null?O=w_(c):(G=O.cachePool,G!==null?(et=Tn._currentValue,G=G.parent!==et?{parent:et,pool:et}:G):G=iE(),O={baseLanes:O.baseLanes|c,cachePool:G}),y.memoizedState=O,y.childLanes=S_(r,I,c),a.memoizedState=T_,p):(fa(a),c=r.child,r=c.sibling,c=Es(c,{mode:"visible",children:p.children}),c.return=a,c.sibling=null,r!==null&&(I=a.deletions,I===null?(a.deletions=[r],a.flags|=16):I.push(r)),a.child=c,a.memoizedState=null,c)}function x_(r,a){return a=Jd({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function Jd(r,a){return r=bi(22,r,null,a),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function C_(r,a,c){return Zu(a,r.child,null,c),r=x_(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function yT(r,a,c){r.lanes|=a;var p=r.alternate;p!==null&&(p.lanes|=a),kl(r.return,a,c)}function A_(r,a,c,p,y){var b=r.memoizedState;b===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:y}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=p,b.tail=c,b.tailMode=y)}function vT(r,a,c){var p=a.pendingProps,y=p.revealOrder,b=p.tail;if(qn(r,a,p.children,c),p=wn.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&yT(r,c,a);else if(r.tag===19)yT(r,c,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break t;for(;r.sibling===null;){if(r.return===null||r.return===a)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}p&=1}switch(mt(wn,p),y){case"forwards":for(c=a.child,y=null;c!==null;)r=c.alternate,r!==null&&Kd(r)===null&&(y=c),c=c.sibling;c=y,c===null?(y=a.child,a.child=null):(y=c.sibling,c.sibling=null),A_(a,!1,y,c,b);break;case"backwards":for(c=null,y=a.child,a.child=null;y!==null;){if(r=y.alternate,r!==null&&Kd(r)===null){a.child=y;break}r=y.sibling,y.sibling=c,c=y,y=r}A_(a,!0,c,null,b);break;case"together":A_(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ao(r,a,c){if(r!==null&&(a.dependencies=r.dependencies),ya|=a.lanes,(c&a.childLanes)===0)if(r!==null){if(Dl(r,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,c=Es(r,r.pendingProps),a.child=c,c.return=a;r.sibling!==null;)r=r.sibling,c=c.sibling=Es(r,r.pendingProps),c.return=a;c.sibling=null}return a.child}function I_(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&kd(r)))}function WM(r,a,c){switch(a.tag){case 3:de(a,a.stateNode.containerInfo),Tr(a,Tn,r.memoizedState.cache),oa();break;case 27:case 5:os(a);break;case 4:de(a,a.stateNode.containerInfo);break;case 10:Tr(a,a.type,a.memoizedProps.value);break;case 13:var p=a.memoizedState;if(p!==null)return p.dehydrated!==null?(fa(a),a.flags|=128,null):(c&a.child.childLanes)!==0?_T(r,a,c):(fa(a),r=ao(r,a,c),r!==null?r.sibling:null);fa(a);break;case 19:var y=(r.flags&128)!==0;if(p=(c&a.childLanes)!==0,p||(Dl(r,a,c,!1),p=(c&a.childLanes)!==0),y){if(p)return vT(r,a,c);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),mt(wn,wn.current),p)break;return null;case 22:case 23:return a.lanes=0,fT(r,a,c);case 24:Tr(a,Tn,r.memoizedState.cache)}return ao(r,a,c)}function bT(r,a,c){if(r!==null)if(r.memoizedProps!==a.pendingProps)kn=!0;else{if(!I_(r,c)&&(a.flags&128)===0)return kn=!1,WM(r,a,c);kn=(r.flags&131072)!==0}else kn=!1,qt&&(a.flags&1048576)!==0&&ot(a,f,a.index);switch(a.lanes=0,a.tag){case 16:t:{r=a.pendingProps;var p=a.elementType,y=p._init;if(p=y(p._payload),a.type=p,typeof p=="function")zu(p)?(r=zl(p,r),a.tag=1,a=mT(null,a,p,r,c)):(a.tag=0,a=E_(null,a,p,r,c));else{if(p!=null){if(y=p.$$typeof,y===ut){a.tag=11,a=uT(null,a,p,r,c);break t}else if(y===z){a.tag=14,a=cT(null,a,p,r,c);break t}}throw a=ee(p)||p,Error(i(306,a,""))}}return a;case 0:return E_(r,a,a.type,a.pendingProps,c);case 1:return p=a.type,y=zl(p,a.pendingProps),mT(r,a,p,y,c);case 3:t:{if(de(a,a.stateNode.containerInfo),r===null)throw Error(i(387));p=a.pendingProps;var b=a.memoizedState;y=b.element,Qg(r,a),_h(a,p,null,c);var I=a.memoizedState;if(p=I.cache,Tr(a,Tn,p),p!==b.cache&&Uu(a,[Tn],c,!0),gh(),p=I.element,b.isDehydrated)if(b={element:p,isDehydrated:!1,cache:I.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=gT(r,a,p,c);break t}else if(p!==y){y=yi(Error(i(424)),a),aa(y),a=gT(r,a,p,c);break t}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ot=$s(r.firstChild),Pt=a,qt=!0,He=null,tn=!0,c=XE(a,null,p,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(oa(),p===y){a=ao(r,a,c);break t}qn(r,a,p,c)}a=a.child}return a;case 26:return Xd(r,a),r===null?(c=Sw(a.type,null,a.pendingProps,null))?a.memoizedState=c:qt||(c=a.type,r=a.pendingProps,p=dp(Tt.current).createElement(c),p[ln]=a,p[sn]=r,Wn(p,c,r),Je(p),a.stateNode=p):a.memoizedState=Sw(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return os(a),r===null&&qt&&(p=a.stateNode=Ew(a.type,a.pendingProps,Tt.current),Pt=a,tn=!0,y=Ot,Ta(a.type)?(ly=y,Ot=$s(p.firstChild)):Ot=y),qn(r,a,a.pendingProps.children,c),Xd(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&qt&&((y=p=Ot)&&(p=bO(p,a.type,a.pendingProps,tn),p!==null?(a.stateNode=p,Pt=a,Ot=$s(p.firstChild),tn=!1,y=!0):y=!1),y||xi(a)),os(a),y=a.type,b=a.pendingProps,I=r!==null?r.memoizedProps:null,p=b.children,sy(y,b)?p=null:I!==null&&sy(y,I)&&(a.flags|=32),a.memoizedState!==null&&(y=i_(r,a,zM,null,null,c),Bh._currentValue=y),Xd(r,a),qn(r,a,p,c),a.child;case 6:return r===null&&qt&&((r=c=Ot)&&(c=EO(c,a.pendingProps,tn),c!==null?(a.stateNode=c,Pt=a,Ot=null,r=!0):r=!1),r||xi(a)),null;case 13:return _T(r,a,c);case 4:return de(a,a.stateNode.containerInfo),p=a.pendingProps,r===null?a.child=Zu(a,null,p,c):qn(r,a,p,c),a.child;case 11:return uT(r,a,a.type,a.pendingProps,c);case 7:return qn(r,a,a.pendingProps,c),a.child;case 8:return qn(r,a,a.pendingProps.children,c),a.child;case 12:return qn(r,a,a.pendingProps.children,c),a.child;case 10:return p=a.pendingProps,Tr(a,a.type,p.value),qn(r,a,p.children,c),a.child;case 9:return y=a.type._context,p=a.pendingProps.children,Nl(a),y=si(y),p=p(y),a.flags|=1,qn(r,a,p,c),a.child;case 14:return cT(r,a,a.type,a.pendingProps,c);case 15:return hT(r,a,a.type,a.pendingProps,c);case 19:return vT(r,a,c);case 31:return p=a.pendingProps,c=a.mode,p={mode:p.mode,children:p.children},r===null?(c=Jd(p,c),c.ref=a.ref,a.child=c,c.return=a,a=c):(c=Es(r.child,p),c.ref=a.ref,a.child=c,c.return=a,a=c),a;case 22:return fT(r,a,c);case 24:return Nl(a),p=si(Tn),r===null?(y=Zg(),y===null&&(y=je,b=Wg(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=c),y=b),a.memoizedState={parent:p,cache:y},$g(a),Tr(a,Tn,y)):((r.lanes&c)!==0&&(Qg(r,a),_h(a,null,null,c),gh()),y=r.memoizedState,b=a.memoizedState,y.parent!==p?(y={parent:p,cache:p},a.memoizedState=y,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=y),Tr(a,Tn,p)):(p=b.cache,Tr(a,Tn,p),p!==y.cache&&Uu(a,[Tn],c,!0))),qn(r,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function lo(r){r.flags|=4}function ET(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Rw(a)){if(a=ws.current,a!==null&&((me&4194048)===me?wr!==null:(me&62914560)!==me&&(me&536870912)===0||a!==wr))throw ph=Kg,sE;r.flags|=8192}}function tp(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?Vo():536870912,r.lanes|=a,Xu|=a)}function Sh(r,a){if(!qt)switch(r.tailMode){case"hidden":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:p.sibling=null}}function en(r){var a=r.alternate!==null&&r.alternate.child===r.child,c=0,p=0;if(a)for(var y=r.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags&65011712,p|=y.flags&65011712,y.return=r,y=y.sibling;else for(y=r.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=r,y=y.sibling;return r.subtreeFlags|=p,r.childLanes=c,a}function YM(r,a,c){var p=a.pendingProps;switch(Ct(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(a),null;case 1:return en(a),null;case 3:return c=a.stateNode,p=null,r!==null&&(p=r.memoizedState.cache),a.memoizedState.cache!==p&&(a.flags|=2048),Zs(Tn),Ni(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Ol(a)?lo(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Od())),en(a),null;case 26:return c=a.memoizedState,r===null?(lo(a),c!==null?(en(a),ET(a,c)):(en(a),a.flags&=-16777217)):c?c!==r.memoizedState?(lo(a),en(a),ET(a,c)):(en(a),a.flags&=-16777217):(r.memoizedProps!==p&&lo(a),en(a),a.flags&=-16777217),null;case 27:Li(a),c=Tt.current;var y=a.type;if(r!==null&&a.stateNode!=null)r.memoizedProps!==p&&lo(a);else{if(!p){if(a.stateNode===null)throw Error(i(166));return en(a),null}r=xt.current,Ol(a)?Pd(a):(r=Ew(y,p,c),a.stateNode=r,lo(a))}return en(a),null;case 5:if(Li(a),c=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==p&&lo(a);else{if(!p){if(a.stateNode===null)throw Error(i(166));return en(a),null}if(r=xt.current,Ol(a))Pd(a);else{switch(y=dp(Tt.current),r){case 1:r=y.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:r=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":r=y.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":r=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":r=y.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof p.is=="string"?y.createElement("select",{is:p.is}):y.createElement("select"),p.multiple?r.multiple=!0:p.size&&(r.size=p.size);break;default:r=typeof p.is=="string"?y.createElement(c,{is:p.is}):y.createElement(c)}}r[ln]=a,r[sn]=p;t:for(y=a.child;y!==null;){if(y.tag===5||y.tag===6)r.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===a)break t;for(;y.sibling===null;){if(y.return===null||y.return===a)break t;y=y.return}y.sibling.return=y.return,y=y.sibling}a.stateNode=r;t:switch(Wn(r,c,p),c){case"button":case"input":case"select":case"textarea":r=!!p.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&lo(a)}}return en(a),a.flags&=-16777217,null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==p&&lo(a);else{if(typeof p!="string"&&a.stateNode===null)throw Error(i(166));if(r=Tt.current,Ol(a)){if(r=a.stateNode,c=a.memoizedProps,p=null,y=Pt,y!==null)switch(y.tag){case 27:case 5:p=y.memoizedProps}r[ln]=a,r=!!(r.nodeValue===c||p!==null&&p.suppressHydrationWarning===!0||pw(r.nodeValue,c)),r||xi(a)}else r=dp(r).createTextNode(p),r[ln]=a,a.stateNode=r}return en(a),null;case 13:if(p=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(y=Ol(a),p!==null&&p.dehydrated!==null){if(r===null){if(!y)throw Error(i(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[ln]=a}else oa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;en(a),y=!1}else y=Od(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=y),y=!0;if(!y)return a.flags&256?(oo(a),a):(oo(a),null)}if(oo(a),(a.flags&128)!==0)return a.lanes=c,a;if(c=p!==null,r=r!==null&&r.memoizedState!==null,c){p=a.child,y=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(y=p.alternate.memoizedState.cachePool.pool);var b=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(b=p.memoizedState.cachePool.pool),b!==y&&(p.flags|=2048)}return c!==r&&c&&(a.child.flags|=8192),tp(a,a.updateQueue),en(a),null;case 4:return Ni(),r===null&&J_(a.stateNode.containerInfo),en(a),null;case 10:return Zs(a.type),en(a),null;case 19:if(bt(wn),y=a.memoizedState,y===null)return en(a),null;if(p=(a.flags&128)!==0,b=y.rendering,b===null)if(p)Sh(y,!1);else{if(on!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(b=Kd(r),b!==null){for(a.flags|=128,Sh(y,!1),r=b.updateQueue,a.updateQueue=r,tp(a,r),a.subtreeFlags=0,r=c,c=a.child;c!==null;)uh(c,r),c=c.sibling;return mt(wn,wn.current&1|2),a.child}r=r.sibling}y.tail!==null&&Qn()>ip&&(a.flags|=128,p=!0,Sh(y,!1),a.lanes=4194304)}else{if(!p)if(r=Kd(b),r!==null){if(a.flags|=128,p=!0,r=r.updateQueue,a.updateQueue=r,tp(a,r),Sh(y,!0),y.tail===null&&y.tailMode==="hidden"&&!b.alternate&&!qt)return en(a),null}else 2*Qn()-y.renderingStartTime>ip&&c!==536870912&&(a.flags|=128,p=!0,Sh(y,!1),a.lanes=4194304);y.isBackwards?(b.sibling=a.child,a.child=b):(r=y.last,r!==null?r.sibling=b:a.child=b,y.last=b)}return y.tail!==null?(a=y.tail,y.rendering=a,y.tail=a.sibling,y.renderingStartTime=Qn(),a.sibling=null,r=wn.current,mt(wn,p?r&1|2:r&1),a):(en(a),null);case 22:case 23:return oo(a),e_(),p=a.memoizedState!==null,r!==null?r.memoizedState!==null!==p&&(a.flags|=8192):p&&(a.flags|=8192),p?(c&536870912)!==0&&(a.flags&128)===0&&(en(a),a.subtreeFlags&6&&(a.flags|=8192)):en(a),c=a.updateQueue,c!==null&&tp(a,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),p=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),p!==c&&(a.flags|=2048),r!==null&&bt(Ll),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Zs(Tn),en(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function ZM(r,a){switch(Ct(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Zs(Tn),Ni(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return Li(a),null;case 13:if(oo(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));oa()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return bt(wn),null;case 4:return Ni(),null;case 10:return Zs(a.type),null;case 22:case 23:return oo(a),e_(),r!==null&&bt(Ll),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Zs(Tn),null;case 25:return null;default:return null}}function TT(r,a){switch(Ct(a),a.tag){case 3:Zs(Tn),Ni();break;case 26:case 27:case 5:Li(a);break;case 4:Ni();break;case 13:oo(a);break;case 19:bt(wn);break;case 10:Zs(a.type);break;case 22:case 23:oo(a),e_(),r!==null&&bt(Ll);break;case 24:Zs(Tn)}}function xh(r,a){try{var c=a.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var y=p.next;c=y;do{if((c.tag&r)===r){p=void 0;var b=c.create,I=c.inst;p=b(),I.destroy=p}c=c.next}while(c!==y)}}catch(O){Le(a,a.return,O)}}function pa(r,a,c){try{var p=a.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var b=y.next;p=b;do{if((p.tag&r)===r){var I=p.inst,O=I.destroy;if(O!==void 0){I.destroy=void 0,y=a;var G=c,et=O;try{et()}catch(ct){Le(y,G,ct)}}}p=p.next}while(p!==b)}}catch(ct){Le(a,a.return,ct)}}function wT(r){var a=r.updateQueue;if(a!==null){var c=r.stateNode;try{cE(a,c)}catch(p){Le(r,r.return,p)}}}function ST(r,a,c){c.props=zl(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(p){Le(r,a,p)}}function Ch(r,a){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var p=r.stateNode;break;case 30:p=r.stateNode;break;default:p=r.stateNode}typeof c=="function"?r.refCleanup=c(p):c.current=p}}catch(y){Le(r,a,y)}}function Sr(r,a){var c=r.ref,p=r.refCleanup;if(c!==null)if(typeof p=="function")try{p()}catch(y){Le(r,a,y)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){Le(r,a,y)}else c.current=null}function xT(r){var a=r.type,c=r.memoizedProps,p=r.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&p.focus();break t;case"img":c.src?p.src=c.src:c.srcSet&&(p.srcset=c.srcSet)}}catch(y){Le(r,r.return,y)}}function R_(r,a,c){try{var p=r.stateNode;mO(p,r.type,c,a),p[sn]=a}catch(y){Le(r,r.return,y)}}function CT(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ta(r.type)||r.tag===4}function P_(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||CT(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ta(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function M_(r,a,c){var p=r.tag;if(p===5||p===6)r=r.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(r),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=fp));else if(p!==4&&(p===27&&Ta(r.type)&&(c=r.stateNode,a=null),r=r.child,r!==null))for(M_(r,a,c),r=r.sibling;r!==null;)M_(r,a,c),r=r.sibling}function ep(r,a,c){var p=r.tag;if(p===5||p===6)r=r.stateNode,a?c.insertBefore(r,a):c.appendChild(r);else if(p!==4&&(p===27&&Ta(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(ep(r,a,c),r=r.sibling;r!==null;)ep(r,a,c),r=r.sibling}function AT(r){var a=r.stateNode,c=r.memoizedProps;try{for(var p=r.type,y=a.attributes;y.length;)a.removeAttributeNode(y[0]);Wn(a,p,c),a[ln]=r,a[sn]=c}catch(b){Le(r,r.return,b)}}var uo=!1,hn=!1,O_=!1,IT=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function KM(r,a){if(r=r.containerInfo,ny=vp,r=xl(r),Cl(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else t:{c=(c=r.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var y=p.anchorOffset,b=p.focusNode;p=p.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break t}var I=0,O=-1,G=-1,et=0,ct=0,ft=r,it=null;e:for(;;){for(var st;ft!==c||y!==0&&ft.nodeType!==3||(O=I+y),ft!==b||p!==0&&ft.nodeType!==3||(G=I+p),ft.nodeType===3&&(I+=ft.nodeValue.length),(st=ft.firstChild)!==null;)it=ft,ft=st;for(;;){if(ft===r)break e;if(it===c&&++et===y&&(O=I),it===b&&++ct===p&&(G=I),(st=ft.nextSibling)!==null)break;ft=it,it=ft.parentNode}ft=st}c=O===-1||G===-1?null:{start:O,end:G}}else c=null}c=c||{start:0,end:0}}else c=null;for(iy={focusedElem:r,selectionRange:c},vp=!1,Dn=a;Dn!==null;)if(a=Dn,r=a.child,(a.subtreeFlags&1024)!==0&&r!==null)r.return=a,Dn=r;else for(;Dn!==null;){switch(a=Dn,b=a.alternate,r=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&b!==null){r=void 0,c=a,y=b.memoizedProps,b=b.memoizedState,p=c.stateNode;try{var Ht=zl(c.type,y,c.elementType===c.type);r=p.getSnapshotBeforeUpdate(Ht,b),p.__reactInternalSnapshotBeforeUpdate=r}catch(Vt){Le(c,c.return,Vt)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,c=r.nodeType,c===9)oy(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":oy(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,Dn=r;break}Dn=a.return}}function RT(r,a,c){var p=c.flags;switch(c.tag){case 0:case 11:case 15:ma(r,c),p&4&&xh(5,c);break;case 1:if(ma(r,c),p&4)if(r=c.stateNode,a===null)try{r.componentDidMount()}catch(I){Le(c,c.return,I)}else{var y=zl(c.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(y,a,r.__reactInternalSnapshotBeforeUpdate)}catch(I){Le(c,c.return,I)}}p&64&&wT(c),p&512&&Ch(c,c.return);break;case 3:if(ma(r,c),p&64&&(r=c.updateQueue,r!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{cE(r,a)}catch(I){Le(c,c.return,I)}}break;case 27:a===null&&p&4&&AT(c);case 26:case 5:ma(r,c),a===null&&p&4&&xT(c),p&512&&Ch(c,c.return);break;case 12:ma(r,c);break;case 13:ma(r,c),p&4&&OT(r,c),p&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=sO.bind(null,c),TO(r,c))));break;case 22:if(p=c.memoizedState!==null||uo,!p){a=a!==null&&a.memoizedState!==null||hn,y=uo;var b=hn;uo=p,(hn=a)&&!b?ga(r,c,(c.subtreeFlags&8772)!==0):ma(r,c),uo=y,hn=b}break;case 30:break;default:ma(r,c)}}function PT(r){var a=r.alternate;a!==null&&(r.alternate=null,PT(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Ls(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Qe=null,Ai=!1;function co(r,a,c){for(c=c.child;c!==null;)MT(r,a,c),c=c.sibling}function MT(r,a,c){if(ye&&typeof ye.onCommitFiberUnmount=="function")try{ye.onCommitFiberUnmount(ze,c)}catch{}switch(c.tag){case 26:hn||Sr(c,a),co(r,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:hn||Sr(c,a);var p=Qe,y=Ai;Ta(c.type)&&(Qe=c.stateNode,Ai=!1),co(r,a,c),Nh(c.stateNode),Qe=p,Ai=y;break;case 5:hn||Sr(c,a);case 6:if(p=Qe,y=Ai,Qe=null,co(r,a,c),Qe=p,Ai=y,Qe!==null)if(Ai)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(c.stateNode)}catch(b){Le(c,a,b)}else try{Qe.removeChild(c.stateNode)}catch(b){Le(c,a,b)}break;case 18:Qe!==null&&(Ai?(r=Qe,vw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),jh(r)):vw(Qe,c.stateNode));break;case 4:p=Qe,y=Ai,Qe=c.stateNode.containerInfo,Ai=!0,co(r,a,c),Qe=p,Ai=y;break;case 0:case 11:case 14:case 15:hn||pa(2,c,a),hn||pa(4,c,a),co(r,a,c);break;case 1:hn||(Sr(c,a),p=c.stateNode,typeof p.componentWillUnmount=="function"&&ST(c,a,p)),co(r,a,c);break;case 21:co(r,a,c);break;case 22:hn=(p=hn)||c.memoizedState!==null,co(r,a,c),hn=p;break;default:co(r,a,c)}}function OT(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{jh(r)}catch(c){Le(a,a.return,c)}}function $M(r){switch(r.tag){case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new IT),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new IT),a;default:throw Error(i(435,r.tag))}}function k_(r,a){var c=$M(r);a.forEach(function(p){var y=rO.bind(null,r,p);c.has(p)||(c.add(p),p.then(y,y))})}function Xi(r,a){var c=a.deletions;if(c!==null)for(var p=0;p<c.length;p++){var y=c[p],b=r,I=a,O=I;t:for(;O!==null;){switch(O.tag){case 27:if(Ta(O.type)){Qe=O.stateNode,Ai=!1;break t}break;case 5:Qe=O.stateNode,Ai=!1;break t;case 3:case 4:Qe=O.stateNode.containerInfo,Ai=!0;break t}O=O.return}if(Qe===null)throw Error(i(160));MT(b,I,y),Qe=null,Ai=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)kT(a,r),a=a.sibling}var Ks=null;function kT(r,a){var c=r.alternate,p=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Xi(a,r),Ji(r),p&4&&(pa(3,r,r.return),xh(3,r),pa(5,r,r.return));break;case 1:Xi(a,r),Ji(r),p&512&&(hn||c===null||Sr(c,c.return)),p&64&&uo&&(r=r.updateQueue,r!==null&&(p=r.callbacks,p!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?p:c.concat(p))));break;case 26:var y=Ks;if(Xi(a,r),Ji(r),p&512&&(hn||c===null||Sr(c,c.return)),p&4){var b=c!==null?c.memoizedState:null;if(p=r.memoizedState,c===null)if(p===null)if(r.stateNode===null){t:{p=r.type,c=r.memoizedProps,y=y.ownerDocument||y;e:switch(p){case"title":b=y.getElementsByTagName("title")[0],(!b||b[hr]||b[ln]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(p),y.head.insertBefore(b,y.querySelector("head > title"))),Wn(b,p,c),b[ln]=r,Je(b),p=b;break t;case"link":var I=Aw("link","href",y).get(p+(c.href||""));if(I){for(var O=0;O<I.length;O++)if(b=I[O],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){I.splice(O,1);break e}}b=y.createElement(p),Wn(b,p,c),y.head.appendChild(b);break;case"meta":if(I=Aw("meta","content",y).get(p+(c.content||""))){for(O=0;O<I.length;O++)if(b=I[O],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){I.splice(O,1);break e}}b=y.createElement(p),Wn(b,p,c),y.head.appendChild(b);break;default:throw Error(i(468,p))}b[ln]=r,Je(b),p=b}r.stateNode=p}else Iw(y,r.type,r.stateNode);else r.stateNode=Cw(y,p,r.memoizedProps);else b!==p?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,p===null?Iw(y,r.type,r.stateNode):Cw(y,p,r.memoizedProps)):p===null&&r.stateNode!==null&&R_(r,r.memoizedProps,c.memoizedProps)}break;case 27:Xi(a,r),Ji(r),p&512&&(hn||c===null||Sr(c,c.return)),c!==null&&p&4&&R_(r,r.memoizedProps,c.memoizedProps);break;case 5:if(Xi(a,r),Ji(r),p&512&&(hn||c===null||Sr(c,c.return)),r.flags&32){y=r.stateNode;try{Rn(y,"")}catch(st){Le(r,r.return,st)}}p&4&&r.stateNode!=null&&(y=r.memoizedProps,R_(r,y,c!==null?c.memoizedProps:y)),p&1024&&(O_=!0);break;case 6:if(Xi(a,r),Ji(r),p&4){if(r.stateNode===null)throw Error(i(162));p=r.memoizedProps,c=r.stateNode;try{c.nodeValue=p}catch(st){Le(r,r.return,st)}}break;case 3:if(gp=null,y=Ks,Ks=pp(a.containerInfo),Xi(a,r),Ks=y,Ji(r),p&4&&c!==null&&c.memoizedState.isDehydrated)try{jh(a.containerInfo)}catch(st){Le(r,r.return,st)}O_&&(O_=!1,DT(r));break;case 4:p=Ks,Ks=pp(r.stateNode.containerInfo),Xi(a,r),Ji(r),Ks=p;break;case 12:Xi(a,r),Ji(r);break;case 13:Xi(a,r),Ji(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(B_=Qn()),p&4&&(p=r.updateQueue,p!==null&&(r.updateQueue=null,k_(r,p)));break;case 22:y=r.memoizedState!==null;var G=c!==null&&c.memoizedState!==null,et=uo,ct=hn;if(uo=et||y,hn=ct||G,Xi(a,r),hn=ct,uo=et,Ji(r),p&8192)t:for(a=r.stateNode,a._visibility=y?a._visibility&-2:a._visibility|1,y&&(c===null||G||uo||hn||Bl(r)),c=null,a=r;;){if(a.tag===5||a.tag===26){if(c===null){G=c=a;try{if(b=G.stateNode,y)I=b.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{O=G.stateNode;var ft=G.memoizedProps.style,it=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;O.style.display=it==null||typeof it=="boolean"?"":(""+it).trim()}}catch(st){Le(G,G.return,st)}}}else if(a.tag===6){if(c===null){G=a;try{G.stateNode.nodeValue=y?"":G.memoizedProps}catch(st){Le(G,G.return,st)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break t;for(;a.sibling===null;){if(a.return===null||a.return===r)break t;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}p&4&&(p=r.updateQueue,p!==null&&(c=p.retryQueue,c!==null&&(p.retryQueue=null,k_(r,c))));break;case 19:Xi(a,r),Ji(r),p&4&&(p=r.updateQueue,p!==null&&(r.updateQueue=null,k_(r,p)));break;case 30:break;case 21:break;default:Xi(a,r),Ji(r)}}function Ji(r){var a=r.flags;if(a&2){try{for(var c,p=r.return;p!==null;){if(CT(p)){c=p;break}p=p.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var y=c.stateNode,b=P_(r);ep(r,b,y);break;case 5:var I=c.stateNode;c.flags&32&&(Rn(I,""),c.flags&=-33);var O=P_(r);ep(r,O,I);break;case 3:case 4:var G=c.stateNode.containerInfo,et=P_(r);M_(r,et,G);break;default:throw Error(i(161))}}catch(ct){Le(r,r.return,ct)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function DT(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;DT(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function ma(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)RT(r,a.alternate,a),a=a.sibling}function Bl(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:pa(4,a,a.return),Bl(a);break;case 1:Sr(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&ST(a,a.return,c),Bl(a);break;case 27:Nh(a.stateNode);case 26:case 5:Sr(a,a.return),Bl(a);break;case 22:a.memoizedState===null&&Bl(a);break;case 30:Bl(a);break;default:Bl(a)}r=r.sibling}}function ga(r,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var p=a.alternate,y=r,b=a,I=b.flags;switch(b.tag){case 0:case 11:case 15:ga(y,b,c),xh(4,b);break;case 1:if(ga(y,b,c),p=b,y=p.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(et){Le(p,p.return,et)}if(p=b,y=p.updateQueue,y!==null){var O=p.stateNode;try{var G=y.shared.hiddenCallbacks;if(G!==null)for(y.shared.hiddenCallbacks=null,y=0;y<G.length;y++)uE(G[y],O)}catch(et){Le(p,p.return,et)}}c&&I&64&&wT(b),Ch(b,b.return);break;case 27:AT(b);case 26:case 5:ga(y,b,c),c&&p===null&&I&4&&xT(b),Ch(b,b.return);break;case 12:ga(y,b,c);break;case 13:ga(y,b,c),c&&I&4&&OT(y,b);break;case 22:b.memoizedState===null&&ga(y,b,c),Ch(b,b.return);break;case 30:break;default:ga(y,b,c)}a=a.sibling}}function D_(r,a){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&hh(c))}function N_(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&hh(r))}function xr(r,a,c,p){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)NT(r,a,c,p),a=a.sibling}function NT(r,a,c,p){var y=a.flags;switch(a.tag){case 0:case 11:case 15:xr(r,a,c,p),y&2048&&xh(9,a);break;case 1:xr(r,a,c,p);break;case 3:xr(r,a,c,p),y&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&hh(r)));break;case 12:if(y&2048){xr(r,a,c,p),r=a.stateNode;try{var b=a.memoizedProps,I=b.id,O=b.onPostCommit;typeof O=="function"&&O(I,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(G){Le(a,a.return,G)}}else xr(r,a,c,p);break;case 13:xr(r,a,c,p);break;case 23:break;case 22:b=a.stateNode,I=a.alternate,a.memoizedState!==null?b._visibility&2?xr(r,a,c,p):Ah(r,a):b._visibility&2?xr(r,a,c,p):(b._visibility|=2,Ku(r,a,c,p,(a.subtreeFlags&10256)!==0)),y&2048&&D_(I,a);break;case 24:xr(r,a,c,p),y&2048&&N_(a.alternate,a);break;default:xr(r,a,c,p)}}function Ku(r,a,c,p,y){for(y=y&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var b=r,I=a,O=c,G=p,et=I.flags;switch(I.tag){case 0:case 11:case 15:Ku(b,I,O,G,y),xh(8,I);break;case 23:break;case 22:var ct=I.stateNode;I.memoizedState!==null?ct._visibility&2?Ku(b,I,O,G,y):Ah(b,I):(ct._visibility|=2,Ku(b,I,O,G,y)),y&&et&2048&&D_(I.alternate,I);break;case 24:Ku(b,I,O,G,y),y&&et&2048&&N_(I.alternate,I);break;default:Ku(b,I,O,G,y)}a=a.sibling}}function Ah(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=r,p=a,y=p.flags;switch(p.tag){case 22:Ah(c,p),y&2048&&D_(p.alternate,p);break;case 24:Ah(c,p),y&2048&&N_(p.alternate,p);break;default:Ah(c,p)}a=a.sibling}}var Ih=8192;function $u(r){if(r.subtreeFlags&Ih)for(r=r.child;r!==null;)LT(r),r=r.sibling}function LT(r){switch(r.tag){case 26:$u(r),r.flags&Ih&&r.memoizedState!==null&&NO(Ks,r.memoizedState,r.memoizedProps);break;case 5:$u(r);break;case 3:case 4:var a=Ks;Ks=pp(r.stateNode.containerInfo),$u(r),Ks=a;break;case 22:r.memoizedState===null&&(a=r.alternate,a!==null&&a.memoizedState!==null?(a=Ih,Ih=16777216,$u(r),Ih=a):$u(r));break;default:$u(r)}}function VT(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Rh(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var p=a[c];Dn=p,BT(p,r)}VT(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)zT(r),r=r.sibling}function zT(r){switch(r.tag){case 0:case 11:case 15:Rh(r),r.flags&2048&&pa(9,r,r.return);break;case 3:Rh(r);break;case 12:Rh(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,np(r)):Rh(r);break;default:Rh(r)}}function np(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var p=a[c];Dn=p,BT(p,r)}VT(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:pa(8,a,a.return),np(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,np(a));break;default:np(a)}r=r.sibling}}function BT(r,a){for(;Dn!==null;){var c=Dn;switch(c.tag){case 0:case 11:case 15:pa(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var p=c.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:hh(c.memoizedState.cache)}if(p=c.child,p!==null)p.return=c,Dn=p;else t:for(c=r;Dn!==null;){p=Dn;var y=p.sibling,b=p.return;if(PT(p),p===c){Dn=null;break t}if(y!==null){y.return=b,Dn=y;break t}Dn=b}}}var QM={getCacheForType:function(r){var a=si(Tn),c=a.data.get(r);return c===void 0&&(c=r(),a.data.set(r,c)),c}},XM=typeof WeakMap=="function"?WeakMap:Map,Ae=0,je=null,re=null,me=0,Ie=0,ts=null,_a=!1,Qu=!1,L_=!1,ho=0,on=0,ya=0,Ul=0,V_=0,Ss=0,Xu=0,Ph=null,Ii=null,z_=!1,B_=0,ip=1/0,sp=null,va=null,Gn=0,ba=null,Ju=null,tc=0,U_=0,F_=null,UT=null,Mh=0,H_=null;function es(){if((Ae&2)!==0&&me!==0)return me&-me;if(nt.T!==null){var r=Fu;return r!==0?r:K_()}return cr()}function FT(){Ss===0&&(Ss=(me&536870912)===0||qt?hl():536870912);var r=ws.current;return r!==null&&(r.flags|=32),Ss}function ns(r,a,c){(r===je&&(Ie===2||Ie===9)||r.cancelPendingCommit!==null)&&(ec(r,0),Ea(r,me,Ss,!1)),ls(r,c),((Ae&2)===0||r!==je)&&(r===je&&((Ae&2)===0&&(Ul|=c),on===4&&Ea(r,me,Ss,!1)),Cr(r))}function HT(r,a,c){if((Ae&6)!==0)throw Error(i(327));var p=!c&&(a&124)===0&&(a&r.expiredLanes)===0||zi(r,a),y=p?eO(r,a):G_(r,a,!0),b=p;do{if(y===0){Qu&&!p&&Ea(r,a,0,!1);break}else{if(c=r.current.alternate,b&&!JM(c)){y=G_(r,a,!1),b=!1;continue}if(y===2){if(b=a,r.errorRecoveryDisabledLanes&b)var I=0;else I=r.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){a=I;t:{var O=r;y=Ph;var G=O.current.memoizedState.isDehydrated;if(G&&(ec(O,I).flags|=256),I=G_(O,I,!1),I!==2){if(L_&&!G){O.errorRecoveryDisabledLanes|=b,Ul|=b,y=4;break t}b=Ii,Ii=y,b!==null&&(Ii===null?Ii=b:Ii.push.apply(Ii,b))}y=I}if(b=!1,y!==2)continue}}if(y===1){ec(r,0),Ea(r,a,0,!0);break}t:{switch(p=r,b=y,b){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Ea(p,a,Ss,!_a);break t;case 2:Ii=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(y=B_+300-Qn(),10<y)){if(Ea(p,a,Ss,!_a),Lo(p,0,!0)!==0)break t;p.timeoutHandle=_w(jT.bind(null,p,c,Ii,sp,z_,a,Ss,Ul,Xu,_a,b,2,-0,0),y);break t}jT(p,c,Ii,sp,z_,a,Ss,Ul,Xu,_a,b,0,-0,0)}}break}while(!0);Cr(r)}function jT(r,a,c,p,y,b,I,O,G,et,ct,ft,it,st){if(r.timeoutHandle=-1,ft=a.subtreeFlags,(ft&8192||(ft&16785408)===16785408)&&(zh={stylesheets:null,count:0,unsuspend:DO},LT(a),ft=LO(),ft!==null)){r.cancelPendingCommit=ft($T.bind(null,r,a,b,c,p,y,I,O,G,ct,1,it,st)),Ea(r,b,I,!et);return}$T(r,a,b,c,p,y,I,O,G)}function JM(r){for(var a=r;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var p=0;p<c.length;p++){var y=c[p],b=y.getSnapshot;y=y.value;try{if(!gi(b(),y))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ea(r,a,c,p){a&=~V_,a&=~Ul,r.suspendedLanes|=a,r.pingedLanes&=~a,p&&(r.warmLanes|=a),p=r.expirationTimes;for(var y=a;0<y;){var b=31-An(y),I=1<<b;p[b]=-1,y&=~I}c!==0&&us(r,c,a)}function rp(){return(Ae&6)===0?(Oh(0),!1):!0}function j_(){if(re!==null){if(Ie===0)var r=re.return;else r=re,Ys=Ts=null,o_(r),Yu=null,Th=0,r=re;for(;r!==null;)TT(r.alternate,r),r=r.return;re=null}}function ec(r,a){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,_O(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),j_(),je=r,re=c=Es(r.current,null),me=a,Ie=0,ts=null,_a=!1,Qu=zi(r,a),L_=!1,Xu=Ss=V_=Ul=ya=on=0,Ii=Ph=null,z_=!1,(a&8)!==0&&(a|=a&32);var p=r.entangledLanes;if(p!==0)for(r=r.entanglements,p&=a;0<p;){var y=31-An(p),b=1<<y;a|=r[y],p&=~b}return ho=a,Il(),c}function qT(r,a){Jt=null,nt.H=Wd,a===dh||a===Ld?(a=aE(),Ie=3):a===sE?(a=aE(),Ie=4):Ie=a===lT?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ts=a,re===null&&(on=1,Qd(r,yi(a,r.current)))}function GT(){var r=nt.H;return nt.H=Wd,r===null?Wd:r}function WT(){var r=nt.A;return nt.A=QM,r}function q_(){on=4,_a||(me&4194048)!==me&&ws.current!==null||(Qu=!0),(ya&134217727)===0&&(Ul&134217727)===0||je===null||Ea(je,me,Ss,!1)}function G_(r,a,c){var p=Ae;Ae|=2;var y=GT(),b=WT();(je!==r||me!==a)&&(sp=null,ec(r,a)),a=!1;var I=on;t:do try{if(Ie!==0&&re!==null){var O=re,G=ts;switch(Ie){case 8:j_(),I=6;break t;case 3:case 2:case 9:case 6:ws.current===null&&(a=!0);var et=Ie;if(Ie=0,ts=null,nc(r,O,G,et),c&&Qu){I=0;break t}break;default:et=Ie,Ie=0,ts=null,nc(r,O,G,et)}}tO(),I=on;break}catch(ct){qT(r,ct)}while(!0);return a&&r.shellSuspendCounter++,Ys=Ts=null,Ae=p,nt.H=y,nt.A=b,re===null&&(je=null,me=0,Il()),I}function tO(){for(;re!==null;)YT(re)}function eO(r,a){var c=Ae;Ae|=2;var p=GT(),y=WT();je!==r||me!==a?(sp=null,ip=Qn()+500,ec(r,a)):Qu=zi(r,a);t:do try{if(Ie!==0&&re!==null){a=re;var b=ts;e:switch(Ie){case 1:Ie=0,ts=null,nc(r,a,b,1);break;case 2:case 9:if(rE(b)){Ie=0,ts=null,ZT(a);break}a=function(){Ie!==2&&Ie!==9||je!==r||(Ie=7),Cr(r)},b.then(a,a);break t;case 3:Ie=7;break t;case 4:Ie=5;break t;case 7:rE(b)?(Ie=0,ts=null,ZT(a)):(Ie=0,ts=null,nc(r,a,b,7));break;case 5:var I=null;switch(re.tag){case 26:I=re.memoizedState;case 5:case 27:var O=re;if(!I||Rw(I)){Ie=0,ts=null;var G=O.sibling;if(G!==null)re=G;else{var et=O.return;et!==null?(re=et,op(et)):re=null}break e}}Ie=0,ts=null,nc(r,a,b,5);break;case 6:Ie=0,ts=null,nc(r,a,b,6);break;case 8:j_(),on=6;break t;default:throw Error(i(462))}}nO();break}catch(ct){qT(r,ct)}while(!0);return Ys=Ts=null,nt.H=p,nt.A=y,Ae=c,re!==null?0:(je=null,me=0,Il(),on)}function nO(){for(;re!==null&&!Do();)YT(re)}function YT(r){var a=bT(r.alternate,r,ho);r.memoizedProps=r.pendingProps,a===null?op(r):re=a}function ZT(r){var a=r,c=a.alternate;switch(a.tag){case 15:case 0:a=pT(c,a,a.pendingProps,a.type,void 0,me);break;case 11:a=pT(c,a,a.pendingProps,a.type.render,a.ref,me);break;case 5:o_(a);default:TT(c,a),a=re=uh(a,ho),a=bT(c,a,ho)}r.memoizedProps=r.pendingProps,a===null?op(r):re=a}function nc(r,a,c,p){Ys=Ts=null,o_(a),Yu=null,Th=0;var y=a.return;try{if(GM(r,y,a,c,me)){on=1,Qd(r,yi(c,r.current)),re=null;return}}catch(b){if(y!==null)throw re=y,b;on=1,Qd(r,yi(c,r.current)),re=null;return}a.flags&32768?(qt||p===1?r=!0:Qu||(me&536870912)!==0?r=!1:(_a=r=!0,(p===2||p===9||p===3||p===6)&&(p=ws.current,p!==null&&p.tag===13&&(p.flags|=16384))),KT(a,r)):op(a)}function op(r){var a=r;do{if((a.flags&32768)!==0){KT(a,_a);return}r=a.return;var c=YM(a.alternate,a,ho);if(c!==null){re=c;return}if(a=a.sibling,a!==null){re=a;return}re=a=r}while(a!==null);on===0&&(on=5)}function KT(r,a){do{var c=ZM(r.alternate,r);if(c!==null){c.flags&=32767,re=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(r=r.sibling,r!==null)){re=r;return}re=r=c}while(r!==null);on=6,re=null}function $T(r,a,c,p,y,b,I,O,G){r.cancelPendingCommit=null;do ap();while(Gn!==0);if((Ae&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(b=a.lanes|a.childLanes,b|=Qi,fl(r,c,b,I,O,G),r===je&&(re=je=null,me=0),Ju=a,ba=r,tc=c,U_=b,F_=y,UT=p,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,oO(ks,function(){return ew(),null})):(r.callbackNode=null,r.callbackPriority=0),p=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||p){p=nt.T,nt.T=null,y=Et.p,Et.p=2,I=Ae,Ae|=4;try{KM(r,a,c)}finally{Ae=I,Et.p=y,nt.T=p}}Gn=1,QT(),XT(),JT()}}function QT(){if(Gn===1){Gn=0;var r=ba,a=Ju,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=nt.T,nt.T=null;var p=Et.p;Et.p=2;var y=Ae;Ae|=4;try{kT(a,r);var b=iy,I=xl(r.containerInfo),O=b.focusedElem,G=b.selectionRange;if(I!==O&&O&&O.ownerDocument&&ku(O.ownerDocument.documentElement,O)){if(G!==null&&Cl(O)){var et=G.start,ct=G.end;if(ct===void 0&&(ct=et),"selectionStart"in O)O.selectionStart=et,O.selectionEnd=Math.min(ct,O.value.length);else{var ft=O.ownerDocument||document,it=ft&&ft.defaultView||window;if(it.getSelection){var st=it.getSelection(),Ht=O.textContent.length,Vt=Math.min(G.start,Ht),De=G.end===void 0?Vt:Math.min(G.end,Ht);!st.extend&&Vt>De&&(I=De,De=Vt,Vt=I);var K=ah(O,Vt),Y=ah(O,De);if(K&&Y&&(st.rangeCount!==1||st.anchorNode!==K.node||st.anchorOffset!==K.offset||st.focusNode!==Y.node||st.focusOffset!==Y.offset)){var tt=ft.createRange();tt.setStart(K.node,K.offset),st.removeAllRanges(),Vt>De?(st.addRange(tt),st.extend(Y.node,Y.offset)):(tt.setEnd(Y.node,Y.offset),st.addRange(tt))}}}}for(ft=[],st=O;st=st.parentNode;)st.nodeType===1&&ft.push({element:st,left:st.scrollLeft,top:st.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<ft.length;O++){var ht=ft[O];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}vp=!!ny,iy=ny=null}finally{Ae=y,Et.p=p,nt.T=c}}r.current=a,Gn=2}}function XT(){if(Gn===2){Gn=0;var r=ba,a=Ju,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=nt.T,nt.T=null;var p=Et.p;Et.p=2;var y=Ae;Ae|=4;try{RT(r,a.alternate,a)}finally{Ae=y,Et.p=p,nt.T=c}}Gn=3}}function JT(){if(Gn===4||Gn===3){Gn=0,ol();var r=ba,a=Ju,c=tc,p=UT;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Gn=5:(Gn=0,Ju=ba=null,tw(r,r.pendingLanes));var y=r.pendingLanes;if(y===0&&(va=null),zo(c),a=a.stateNode,ye&&typeof ye.onCommitFiberRoot=="function")try{ye.onCommitFiberRoot(ze,a,void 0,(a.current.flags&128)===128)}catch{}if(p!==null){a=nt.T,y=Et.p,Et.p=2,nt.T=null;try{for(var b=r.onRecoverableError,I=0;I<p.length;I++){var O=p[I];b(O.value,{componentStack:O.stack})}}finally{nt.T=a,Et.p=y}}(tc&3)!==0&&ap(),Cr(r),y=r.pendingLanes,(c&4194090)!==0&&(y&42)!==0?r===H_?Mh++:(Mh=0,H_=r):Mh=0,Oh(0)}}function tw(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,hh(a)))}function ap(r){return QT(),XT(),JT(),ew()}function ew(){if(Gn!==5)return!1;var r=ba,a=U_;U_=0;var c=zo(tc),p=nt.T,y=Et.p;try{Et.p=32>c?32:c,nt.T=null,c=F_,F_=null;var b=ba,I=tc;if(Gn=0,Ju=ba=null,tc=0,(Ae&6)!==0)throw Error(i(331));var O=Ae;if(Ae|=4,zT(b.current),NT(b,b.current,I,c),Ae=O,Oh(0,!1),ye&&typeof ye.onPostCommitFiberRoot=="function")try{ye.onPostCommitFiberRoot(ze,b)}catch{}return!0}finally{Et.p=y,nt.T=p,tw(r,a)}}function nw(r,a,c){a=yi(c,a),a=b_(r.stateNode,a,2),r=ca(r,a,2),r!==null&&(ls(r,2),Cr(r))}function Le(r,a,c){if(r.tag===3)nw(r,r,c);else for(;a!==null;){if(a.tag===3){nw(a,r,c);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(va===null||!va.has(p))){r=yi(c,r),c=oT(2),p=ca(a,c,2),p!==null&&(aT(c,p,a,r),ls(p,2),Cr(p));break}}a=a.return}}function W_(r,a,c){var p=r.pingCache;if(p===null){p=r.pingCache=new XM;var y=new Set;p.set(a,y)}else y=p.get(a),y===void 0&&(y=new Set,p.set(a,y));y.has(c)||(L_=!0,y.add(c),r=iO.bind(null,r,a,c),a.then(r,r))}function iO(r,a,c){var p=r.pingCache;p!==null&&p.delete(a),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,je===r&&(me&c)===c&&(on===4||on===3&&(me&62914560)===me&&300>Qn()-B_?(Ae&2)===0&&ec(r,0):V_|=c,Xu===me&&(Xu=0)),Cr(r)}function iw(r,a){a===0&&(a=Vo()),r=sa(r,a),r!==null&&(ls(r,a),Cr(r))}function sO(r){var a=r.memoizedState,c=0;a!==null&&(c=a.retryLane),iw(r,c)}function rO(r,a){var c=0;switch(r.tag){case 13:var p=r.stateNode,y=r.memoizedState;y!==null&&(c=y.retryLane);break;case 19:p=r.stateNode;break;case 22:p=r.stateNode._retryCache;break;default:throw Error(i(314))}p!==null&&p.delete(a),iw(r,c)}function oO(r,a){return Os(r,a)}var lp=null,ic=null,Y_=!1,up=!1,Z_=!1,Fl=0;function Cr(r){r!==ic&&r.next===null&&(ic===null?lp=ic=r:ic=ic.next=r),up=!0,Y_||(Y_=!0,lO())}function Oh(r,a){if(!Z_&&up){Z_=!0;do for(var c=!1,p=lp;p!==null;){if(r!==0){var y=p.pendingLanes;if(y===0)var b=0;else{var I=p.suspendedLanes,O=p.pingedLanes;b=(1<<31-An(42|r)+1)-1,b&=y&~(I&~O),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,aw(p,b))}else b=me,b=Lo(p,p===je?b:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(b&3)===0||zi(p,b)||(c=!0,aw(p,b));p=p.next}while(c);Z_=!1}}function aO(){sw()}function sw(){up=Y_=!1;var r=0;Fl!==0&&(gO()&&(r=Fl),Fl=0);for(var a=Qn(),c=null,p=lp;p!==null;){var y=p.next,b=rw(p,a);b===0?(p.next=null,c===null?lp=y:c.next=y,y===null&&(ic=c)):(c=p,(r!==0||(b&3)!==0)&&(up=!0)),p=y}Oh(r)}function rw(r,a){for(var c=r.suspendedLanes,p=r.pingedLanes,y=r.expirationTimes,b=r.pendingLanes&-62914561;0<b;){var I=31-An(b),O=1<<I,G=y[I];G===-1?((O&c)===0||(O&p)!==0)&&(y[I]=cl(O,a)):G<=a&&(r.expiredLanes|=O),b&=~O}if(a=je,c=me,c=Lo(r,r===a?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),p=r.callbackNode,c===0||r===a&&(Ie===2||Ie===9)||r.cancelPendingCommit!==null)return p!==null&&p!==null&&Ur(p),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||zi(r,c)){if(a=c&-c,a===r.callbackPriority)return a;switch(p!==null&&Ur(p),zo(c)){case 2:case 8:c=Fr;break;case 32:c=ks;break;case 268435456:c=Hr;break;default:c=ks}return p=ow.bind(null,r),c=Os(c,p),r.callbackPriority=a,r.callbackNode=c,a}return p!==null&&p!==null&&Ur(p),r.callbackPriority=2,r.callbackNode=null,2}function ow(r,a){if(Gn!==0&&Gn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(ap()&&r.callbackNode!==c)return null;var p=me;return p=Lo(r,r===je?p:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),p===0?null:(HT(r,p,a),rw(r,Qn()),r.callbackNode!=null&&r.callbackNode===c?ow.bind(null,r):null)}function aw(r,a){if(ap())return null;HT(r,a,!0)}function lO(){yO(function(){(Ae&6)!==0?Os(al,aO):sw()})}function K_(){return Fl===0&&(Fl=hl()),Fl}function lw(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:gr(""+r)}function uw(r,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,r.id&&c.setAttribute("form",r.id),a.parentNode.insertBefore(c,a),r=new FormData(r),c.parentNode.removeChild(c),r}function uO(r,a,c,p,y){if(a==="submit"&&c&&c.stateNode===y){var b=lw((y[sn]||null).action),I=p.submitter;I&&(a=(a=I[sn]||null)?lw(a.formAction):I.getAttribute("formAction"),a!==null&&(b=a,I=null));var O=new Kr("action","action",null,p,y);r.push({event:O,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Fl!==0){var G=I?uw(y,I):new FormData(y);m_(c,{pending:!0,data:G,method:y.method,action:b},null,G)}}else typeof b=="function"&&(O.preventDefault(),G=I?uw(y,I):new FormData(y),m_(c,{pending:!0,data:G,method:y.method,action:b},b,G))},currentTarget:y}]})}}for(var $_=0;$_<to.length;$_++){var Q_=to[$_],cO=Q_.toLowerCase(),hO=Q_[0].toUpperCase()+Q_.slice(1);$i(cO,"on"+hO)}$i(Ad,"onAnimationEnd"),$i(Ki,"onAnimationIteration"),$i(Al,"onAnimationStart"),$i("dblclick","onDoubleClick"),$i("focusin","onFocus"),$i("focusout","onBlur"),$i(qg,"onTransitionRun"),$i(Vu,"onTransitionStart"),$i(Gg,"onTransitionCancel"),$i(lh,"onTransitionEnd"),cs("onMouseEnter",["mouseout","mouseover"]),cs("onMouseLeave",["mouseout","mouseover"]),cs("onPointerEnter",["pointerout","pointerover"]),cs("onPointerLeave",["pointerout","pointerover"]),Fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kh));function cw(r,a){a=(a&4)!==0;for(var c=0;c<r.length;c++){var p=r[c],y=p.event;p=p.listeners;t:{var b=void 0;if(a)for(var I=p.length-1;0<=I;I--){var O=p[I],G=O.instance,et=O.currentTarget;if(O=O.listener,G!==b&&y.isPropagationStopped())break t;b=O,y.currentTarget=et;try{b(y)}catch(ct){$d(ct)}y.currentTarget=null,b=G}else for(I=0;I<p.length;I++){if(O=p[I],G=O.instance,et=O.currentTarget,O=O.listener,G!==b&&y.isPropagationStopped())break t;b=O,y.currentTarget=et;try{b(y)}catch(ct){$d(ct)}y.currentTarget=null,b=G}}}}function oe(r,a){var c=a[Jn];c===void 0&&(c=a[Jn]=new Set);var p=r+"__bubble";c.has(p)||(hw(a,r,2,!1),c.add(p))}function X_(r,a,c){var p=0;a&&(p|=4),hw(c,r,p,a)}var cp="_reactListening"+Math.random().toString(36).slice(2);function J_(r){if(!r[cp]){r[cp]=!0,ml.forEach(function(c){c!=="selectionchange"&&(fO.has(c)||X_(c,!1,r),X_(c,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[cp]||(a[cp]=!0,X_("selectionchange",!1,a))}}function hw(r,a,c,p){switch(Nw(a)){case 2:var y=BO;break;case 8:y=UO;break;default:y=dy}c=y.bind(null,a,c,r),y=void 0,!ti||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),p?y!==void 0?r.addEventListener(a,c,{capture:!0,passive:y}):r.addEventListener(a,c,!0):y!==void 0?r.addEventListener(a,c,{passive:y}):r.addEventListener(a,c,!1)}function ty(r,a,c,p,y){var b=p;if((a&1)===0&&(a&2)===0&&p!==null)t:for(;;){if(p===null)return;var I=p.tag;if(I===3||I===4){var O=p.stateNode.containerInfo;if(O===y)break;if(I===4)for(I=p.return;I!==null;){var G=I.tag;if((G===3||G===4)&&I.stateNode.containerInfo===y)return;I=I.return}for(;O!==null;){if(I=Bi(O),I===null)return;if(G=I.tag,G===5||G===6||G===26||G===27){p=b=I;continue t}O=O.parentNode}}p=p.return}mi(function(){var et=b,ct=jn(c),ft=[];t:{var it=Id.get(r);if(it!==void 0){var st=Kr,Ht=r;switch(r){case"keypress":if(Me(c)===0)break t;case"keydown":case"keyup":st=Ko;break;case"focusin":Ht="focus",st=qo;break;case"focusout":Ht="blur",st=qo;break;case"beforeblur":case"afterblur":st=qo;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=Mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=nh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=Ru;break;case Ad:case Ki:case Al:st=Wo;break;case lh:st=Pu;break;case"scroll":case"scrollend":st=Au;break;case"wheel":st=Xr;break;case"copy":case"cut":case"paste":st=_r;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=$o;break;case"toggle":case"beforetoggle":st=_s}var Vt=(a&4)!==0,De=!Vt&&(r==="scroll"||r==="scrollend"),K=Vt?it!==null?it+"Capture":null:it;Vt=[];for(var Y=et,tt;Y!==null;){var ht=Y;if(tt=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||tt===null||K===null||(ht=pe(Y,K),ht!=null&&Vt.push(Dh(Y,ht,tt))),De)break;Y=Y.return}0<Vt.length&&(it=new st(it,Ht,null,c,ct),ft.push({event:it,listeners:Vt}))}}if((a&7)===0){t:{if(it=r==="mouseover"||r==="pointerover",st=r==="mouseout"||r==="pointerout",it&&c!==qi&&(Ht=c.relatedTarget||c.fromElement)&&(Bi(Ht)||Ht[Ti]))break t;if((st||it)&&(it=ct.window===ct?ct:(it=ct.ownerDocument)?it.defaultView||it.parentWindow:window,st?(Ht=c.relatedTarget||c.toElement,st=et,Ht=Ht?Bi(Ht):null,Ht!==null&&(De=o(Ht),Vt=Ht.tag,Ht!==De||Vt!==5&&Vt!==27&&Vt!==6)&&(Ht=null)):(st=null,Ht=et),st!==Ht)){if(Vt=Mn,ht="onMouseLeave",K="onMouseEnter",Y="mouse",(r==="pointerout"||r==="pointerover")&&(Vt=$o,ht="onPointerLeave",K="onPointerEnter",Y="pointer"),De=st==null?it:Fn(st),tt=Ht==null?it:Fn(Ht),it=new Vt(ht,Y+"leave",st,c,ct),it.target=De,it.relatedTarget=tt,ht=null,Bi(ct)===et&&(Vt=new Vt(K,Y+"enter",Ht,c,ct),Vt.target=tt,Vt.relatedTarget=De,ht=Vt),De=ht,st&&Ht)e:{for(Vt=st,K=Ht,Y=0,tt=Vt;tt;tt=sc(tt))Y++;for(tt=0,ht=K;ht;ht=sc(ht))tt++;for(;0<Y-tt;)Vt=sc(Vt),Y--;for(;0<tt-Y;)K=sc(K),tt--;for(;Y--;){if(Vt===K||K!==null&&Vt===K.alternate)break e;Vt=sc(Vt),K=sc(K)}Vt=null}else Vt=null;st!==null&&fw(ft,it,st,Vt,!1),Ht!==null&&De!==null&&fw(ft,De,Ht,Vt,!0)}}t:{if(it=et?Fn(et):window,st=it.nodeName&&it.nodeName.toLowerCase(),st==="select"||st==="input"&&it.type==="file")var Mt=Xo;else if(Fe(it))if(sh)Mt=jg;else{Mt=Hg;var ie=oh}else st=it.nodeName,!st||st.toLowerCase()!=="input"||it.type!=="checkbox"&&it.type!=="radio"?et&&Zr(et.elementType)&&(Mt=Xo):Mt=Ws;if(Mt&&(Mt=Mt(r,et))){qs(ft,Mt,c,ct);break t}ie&&ie(r,it,et),r==="focusout"&&et&&it.type==="number"&&et.memoizedProps.value!=null&&Hi(it,"number",it.value)}switch(ie=et?Fn(et):window,r){case"focusin":(Fe(ie)||ie.contentEditable==="true")&&(Zi=ie,ea=et,Jr=null);break;case"focusout":Jr=ea=Zi=null;break;case"mousedown":Nu=!0;break;case"contextmenu":case"mouseup":case"dragend":Nu=!1,xd(ft,c,ct);break;case"selectionchange":if(Du)break;case"keydown":case"keyup":xd(ft,c,ct)}var Dt;if(ii)t:{switch(r){case"compositionstart":var zt="onCompositionStart";break t;case"compositionend":zt="onCompositionEnd";break t;case"compositionupdate":zt="onCompositionUpdate";break t}zt=void 0}else ce?at(r,c)&&(zt="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(zt="onCompositionStart");zt&&(C&&c.locale!=="ko"&&(ce||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&ce&&(Dt=Us()):(Si=ct,ei="value"in Si?Si.value:Si.textContent,ce=!0)),ie=hp(et,zt),0<ie.length&&(zt=new ni(zt,r,null,c,ct),ft.push({event:zt,listeners:ie}),Dt?zt.data=Dt:(Dt=wt(c),Dt!==null&&(zt.data=Dt)))),(Dt=S?rn(r,c):he(r,c))&&(zt=hp(et,"onBeforeInput"),0<zt.length&&(ie=new ni("onBeforeInput","beforeinput",null,c,ct),ft.push({event:ie,listeners:zt}),ie.data=Dt)),uO(ft,r,et,c,ct)}cw(ft,a)})}function Dh(r,a,c){return{instance:r,listener:a,currentTarget:c}}function hp(r,a){for(var c=a+"Capture",p=[];r!==null;){var y=r,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=pe(r,c),y!=null&&p.unshift(Dh(r,y,b)),y=pe(r,a),y!=null&&p.push(Dh(r,y,b))),r.tag===3)return p;r=r.return}return[]}function sc(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function fw(r,a,c,p,y){for(var b=a._reactName,I=[];c!==null&&c!==p;){var O=c,G=O.alternate,et=O.stateNode;if(O=O.tag,G!==null&&G===p)break;O!==5&&O!==26&&O!==27||et===null||(G=et,y?(et=pe(c,b),et!=null&&I.unshift(Dh(c,et,G))):y||(et=pe(c,b),et!=null&&I.push(Dh(c,et,G)))),c=c.return}I.length!==0&&r.push({event:a,listeners:I})}var dO=/\r\n?/g,pO=/\u0000|\uFFFD/g;function dw(r){return(typeof r=="string"?r:""+r).replace(dO,`
`).replace(pO,"")}function pw(r,a){return a=dw(a),dw(r)===a}function fp(){}function ke(r,a,c,p,y,b){switch(c){case"children":typeof p=="string"?a==="body"||a==="textarea"&&p===""||Rn(r,p):(typeof p=="number"||typeof p=="bigint")&&a!=="body"&&Rn(r,""+p);break;case"className":hs(r,"class",p);break;case"tabIndex":hs(r,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":hs(r,c,p);break;case"style":zs(r,p,b);break;case"data":if(a!=="object"){hs(r,"data",p);break}case"src":case"href":if(p===""&&(a!=="a"||c!=="href")){r.removeAttribute(c);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){r.removeAttribute(c);break}p=gr(""+p),r.setAttribute(c,p);break;case"action":case"formAction":if(typeof p=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(a!=="input"&&ke(r,a,"name",y.name,y,null),ke(r,a,"formEncType",y.formEncType,y,null),ke(r,a,"formMethod",y.formMethod,y,null),ke(r,a,"formTarget",y.formTarget,y,null)):(ke(r,a,"encType",y.encType,y,null),ke(r,a,"method",y.method,y,null),ke(r,a,"target",y.target,y,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){r.removeAttribute(c);break}p=gr(""+p),r.setAttribute(c,p);break;case"onClick":p!=null&&(r.onclick=fp);break;case"onScroll":p!=null&&oe("scroll",r);break;case"onScrollEnd":p!=null&&oe("scrollend",r);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(c=p.__html,c!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":r.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){r.removeAttribute("xlink:href");break}c=gr(""+p),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?r.setAttribute(c,""+p):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":p===!0?r.setAttribute(c,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?r.setAttribute(c,p):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?r.setAttribute(c,p):r.removeAttribute(c);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?r.removeAttribute(c):r.setAttribute(c,p);break;case"popover":oe("beforetoggle",r),oe("toggle",r),fr(r,"popover",p);break;case"xlinkActuate":bn(r,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":bn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":bn(r,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":bn(r,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":bn(r,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":bn(r,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":bn(r,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":bn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":bn(r,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":fr(r,"is",p);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=_l.get(c)||c,fr(r,c,p))}}function ey(r,a,c,p,y,b){switch(c){case"style":zs(r,p,b);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(c=p.__html,c!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof p=="string"?Rn(r,p):(typeof p=="number"||typeof p=="bigint")&&Rn(r,""+p);break;case"onScroll":p!=null&&oe("scroll",r);break;case"onScrollEnd":p!=null&&oe("scrollend",r);break;case"onClick":p!=null&&(r.onclick=fp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Uo.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),a=c.slice(2,y?c.length-7:void 0),b=r[sn]||null,b=b!=null?b[c]:null,typeof b=="function"&&r.removeEventListener(a,b,y),typeof p=="function")){typeof b!="function"&&b!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(a,p,y);break t}c in r?r[c]=p:p===!0?r.setAttribute(c,""):fr(r,c,p)}}}function Wn(r,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":oe("error",r),oe("load",r);var p=!1,y=!1,b;for(b in c)if(c.hasOwnProperty(b)){var I=c[b];if(I!=null)switch(b){case"src":p=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ke(r,a,b,I,c,null)}}y&&ke(r,a,"srcSet",c.srcSet,c,null),p&&ke(r,a,"src",c.src,c,null);return;case"input":oe("invalid",r);var O=b=I=y=null,G=null,et=null;for(p in c)if(c.hasOwnProperty(p)){var ct=c[p];if(ct!=null)switch(p){case"name":y=ct;break;case"type":I=ct;break;case"checked":G=ct;break;case"defaultChecked":et=ct;break;case"value":b=ct;break;case"defaultValue":O=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(i(137,a));break;default:ke(r,a,p,ct,c,null)}}Yr(r,b,O,G,et,I,y,!1),mr(r);return;case"select":oe("invalid",r),p=I=b=null;for(y in c)if(c.hasOwnProperty(y)&&(O=c[y],O!=null))switch(y){case"value":b=O;break;case"defaultValue":I=O;break;case"multiple":p=O;default:ke(r,a,y,O,c,null)}a=b,c=I,r.multiple=!!p,a!=null?Hn(r,!!p,a,!1):c!=null&&Hn(r,!!p,c,!0);return;case"textarea":oe("invalid",r),b=y=p=null;for(I in c)if(c.hasOwnProperty(I)&&(O=c[I],O!=null))switch(I){case"value":p=O;break;case"defaultValue":y=O;break;case"children":b=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:ke(r,a,I,O,c,null)}pi(r,p,y,b),mr(r);return;case"option":for(G in c)if(c.hasOwnProperty(G)&&(p=c[G],p!=null))switch(G){case"selected":r.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:ke(r,a,G,p,c,null)}return;case"dialog":oe("beforetoggle",r),oe("toggle",r),oe("cancel",r),oe("close",r);break;case"iframe":case"object":oe("load",r);break;case"video":case"audio":for(p=0;p<kh.length;p++)oe(kh[p],r);break;case"image":oe("error",r),oe("load",r);break;case"details":oe("toggle",r);break;case"embed":case"source":case"link":oe("error",r),oe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(et in c)if(c.hasOwnProperty(et)&&(p=c[et],p!=null))switch(et){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ke(r,a,et,p,c,null)}return;default:if(Zr(a)){for(ct in c)c.hasOwnProperty(ct)&&(p=c[ct],p!==void 0&&ey(r,a,ct,p,c,void 0));return}}for(O in c)c.hasOwnProperty(O)&&(p=c[O],p!=null&&ke(r,a,O,p,c,null))}function mO(r,a,c,p){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,I=null,O=null,G=null,et=null,ct=null;for(st in c){var ft=c[st];if(c.hasOwnProperty(st)&&ft!=null)switch(st){case"checked":break;case"value":break;case"defaultValue":G=ft;default:p.hasOwnProperty(st)||ke(r,a,st,null,p,ft)}}for(var it in p){var st=p[it];if(ft=c[it],p.hasOwnProperty(it)&&(st!=null||ft!=null))switch(it){case"type":b=st;break;case"name":y=st;break;case"checked":et=st;break;case"defaultChecked":ct=st;break;case"value":I=st;break;case"defaultValue":O=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(i(137,a));break;default:st!==ft&&ke(r,a,it,st,p,ft)}}Ue(r,I,O,G,et,ct,b,y);return;case"select":st=I=O=it=null;for(b in c)if(G=c[b],c.hasOwnProperty(b)&&G!=null)switch(b){case"value":break;case"multiple":st=G;default:p.hasOwnProperty(b)||ke(r,a,b,null,p,G)}for(y in p)if(b=p[y],G=c[y],p.hasOwnProperty(y)&&(b!=null||G!=null))switch(y){case"value":it=b;break;case"defaultValue":O=b;break;case"multiple":I=b;default:b!==G&&ke(r,a,y,b,p,G)}a=O,c=I,p=st,it!=null?Hn(r,!!c,it,!1):!!p!=!!c&&(a!=null?Hn(r,!!c,a,!0):Hn(r,!!c,c?[]:"",!1));return;case"textarea":st=it=null;for(O in c)if(y=c[O],c.hasOwnProperty(O)&&y!=null&&!p.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:ke(r,a,O,null,p,y)}for(I in p)if(y=p[I],b=c[I],p.hasOwnProperty(I)&&(y!=null||b!=null))switch(I){case"value":it=y;break;case"defaultValue":st=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==b&&ke(r,a,I,y,p,b)}Bt(r,it,st);return;case"option":for(var Ht in c)if(it=c[Ht],c.hasOwnProperty(Ht)&&it!=null&&!p.hasOwnProperty(Ht))switch(Ht){case"selected":r.selected=!1;break;default:ke(r,a,Ht,null,p,it)}for(G in p)if(it=p[G],st=c[G],p.hasOwnProperty(G)&&it!==st&&(it!=null||st!=null))switch(G){case"selected":r.selected=it&&typeof it!="function"&&typeof it!="symbol";break;default:ke(r,a,G,it,p,st)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Vt in c)it=c[Vt],c.hasOwnProperty(Vt)&&it!=null&&!p.hasOwnProperty(Vt)&&ke(r,a,Vt,null,p,it);for(et in p)if(it=p[et],st=c[et],p.hasOwnProperty(et)&&it!==st&&(it!=null||st!=null))switch(et){case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(i(137,a));break;default:ke(r,a,et,it,p,st)}return;default:if(Zr(a)){for(var De in c)it=c[De],c.hasOwnProperty(De)&&it!==void 0&&!p.hasOwnProperty(De)&&ey(r,a,De,void 0,p,it);for(ct in p)it=p[ct],st=c[ct],!p.hasOwnProperty(ct)||it===st||it===void 0&&st===void 0||ey(r,a,ct,it,p,st);return}}for(var K in c)it=c[K],c.hasOwnProperty(K)&&it!=null&&!p.hasOwnProperty(K)&&ke(r,a,K,null,p,it);for(ft in p)it=p[ft],st=c[ft],!p.hasOwnProperty(ft)||it===st||it==null&&st==null||ke(r,a,ft,it,p,st)}var ny=null,iy=null;function dp(r){return r.nodeType===9?r:r.ownerDocument}function mw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gw(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function sy(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var ry=null;function gO(){var r=window.event;return r&&r.type==="popstate"?r===ry?!1:(ry=r,!0):(ry=null,!1)}var _w=typeof setTimeout=="function"?setTimeout:void 0,_O=typeof clearTimeout=="function"?clearTimeout:void 0,yw=typeof Promise=="function"?Promise:void 0,yO=typeof queueMicrotask=="function"?queueMicrotask:typeof yw<"u"?function(r){return yw.resolve(null).then(r).catch(vO)}:_w;function vO(r){setTimeout(function(){throw r})}function Ta(r){return r==="head"}function vw(r,a){var c=a,p=0,y=0;do{var b=c.nextSibling;if(r.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(0<p&&8>p){c=p;var I=r.ownerDocument;if(c&1&&Nh(I.documentElement),c&2&&Nh(I.body),c&4)for(c=I.head,Nh(c),I=c.firstChild;I;){var O=I.nextSibling,G=I.nodeName;I[hr]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&I.rel.toLowerCase()==="stylesheet"||c.removeChild(I),I=O}}if(y===0){r.removeChild(b),jh(a);return}y--}else c==="$"||c==="$?"||c==="$!"?y++:p=c.charCodeAt(0)-48;else p=0;c=b}while(c);jh(a)}function oy(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":oy(c),Ls(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function bO(r,a,c,p){for(;r.nodeType===1;){var y=c;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!p&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(p){if(!r[hr])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(b=r.getAttribute("rel"),b==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(b!==y.rel||r.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||r.getAttribute("title")!==(y.title==null?null:y.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(b=r.getAttribute("src"),(b!==(y.src==null?null:y.src)||r.getAttribute("type")!==(y.type==null?null:y.type)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&r.getAttribute("name")===b)return r}else return r;if(r=$s(r.nextSibling),r===null)break}return null}function EO(r,a,c){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=$s(r.nextSibling),r===null))return null;return r}function ay(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function TO(r,a){var c=r.ownerDocument;if(r.data!=="$?"||c.readyState==="complete")a();else{var p=function(){a(),c.removeEventListener("DOMContentLoaded",p)};c.addEventListener("DOMContentLoaded",p),r._reactRetry=p}}function $s(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return r}var ly=null;function bw(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return r;a--}else c==="/$"&&a++}r=r.previousSibling}return null}function Ew(r,a,c){switch(a=dp(c),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Nh(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);Ls(r)}var xs=new Map,Tw=new Set;function pp(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var fo=Et.d;Et.d={f:wO,r:SO,D:xO,C:CO,L:AO,m:IO,X:PO,S:RO,M:MO};function wO(){var r=fo.f(),a=rp();return r||a}function SO(r){var a=Ui(r);a!==null&&a.tag===5&&a.type==="form"?HE(a):fo.r(r)}var rc=typeof document>"u"?null:document;function ww(r,a,c){var p=rc;if(p&&typeof a=="string"&&a){var y=We(a);y='link[rel="'+r+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),Tw.has(y)||(Tw.add(y),r={rel:r,crossOrigin:c,href:a},p.querySelector(y)===null&&(a=p.createElement("link"),Wn(a,"link",r),Je(a),p.head.appendChild(a)))}}function xO(r){fo.D(r),ww("dns-prefetch",r,null)}function CO(r,a){fo.C(r,a),ww("preconnect",r,a)}function AO(r,a,c){fo.L(r,a,c);var p=rc;if(p&&r&&a){var y='link[rel="preload"][as="'+We(a)+'"]';a==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+We(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+We(c.imageSizes)+'"]')):y+='[href="'+We(r)+'"]';var b=y;switch(a){case"style":b=oc(r);break;case"script":b=ac(r)}xs.has(b)||(r=v({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:r,as:a},c),xs.set(b,r),p.querySelector(y)!==null||a==="style"&&p.querySelector(Lh(b))||a==="script"&&p.querySelector(Vh(b))||(a=p.createElement("link"),Wn(a,"link",r),Je(a),p.head.appendChild(a)))}}function IO(r,a){fo.m(r,a);var c=rc;if(c&&r){var p=a&&typeof a.as=="string"?a.as:"script",y='link[rel="modulepreload"][as="'+We(p)+'"][href="'+We(r)+'"]',b=y;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=ac(r)}if(!xs.has(b)&&(r=v({rel:"modulepreload",href:r},a),xs.set(b,r),c.querySelector(y)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Vh(b)))return}p=c.createElement("link"),Wn(p,"link",r),Je(p),c.head.appendChild(p)}}}function RO(r,a,c){fo.S(r,a,c);var p=rc;if(p&&r){var y=In(p).hoistableStyles,b=oc(r);a=a||"default";var I=y.get(b);if(!I){var O={loading:0,preload:null};if(I=p.querySelector(Lh(b)))O.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":a},c),(c=xs.get(b))&&uy(r,c);var G=I=p.createElement("link");Je(G),Wn(G,"link",r),G._p=new Promise(function(et,ct){G.onload=et,G.onerror=ct}),G.addEventListener("load",function(){O.loading|=1}),G.addEventListener("error",function(){O.loading|=2}),O.loading|=4,mp(I,a,p)}I={type:"stylesheet",instance:I,count:1,state:O},y.set(b,I)}}}function PO(r,a){fo.X(r,a);var c=rc;if(c&&r){var p=In(c).hoistableScripts,y=ac(r),b=p.get(y);b||(b=c.querySelector(Vh(y)),b||(r=v({src:r,async:!0},a),(a=xs.get(y))&&cy(r,a),b=c.createElement("script"),Je(b),Wn(b,"link",r),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},p.set(y,b))}}function MO(r,a){fo.M(r,a);var c=rc;if(c&&r){var p=In(c).hoistableScripts,y=ac(r),b=p.get(y);b||(b=c.querySelector(Vh(y)),b||(r=v({src:r,async:!0,type:"module"},a),(a=xs.get(y))&&cy(r,a),b=c.createElement("script"),Je(b),Wn(b,"link",r),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},p.set(y,b))}}function Sw(r,a,c,p){var y=(y=Tt.current)?pp(y):null;if(!y)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=oc(c.href),c=In(y).hoistableStyles,p=c.get(a),p||(p={type:"style",instance:null,count:0,state:null},c.set(a,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=oc(c.href);var b=In(y).hoistableStyles,I=b.get(r);if(I||(y=y.ownerDocument||y,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(r,I),(b=y.querySelector(Lh(r)))&&!b._p&&(I.instance=b,I.state.loading=5),xs.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},xs.set(r,c),b||OO(y,r,c,I.state))),a&&p===null)throw Error(i(528,""));return I}if(a&&p!==null)throw Error(i(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ac(c),c=In(y).hoistableScripts,p=c.get(a),p||(p={type:"script",instance:null,count:0,state:null},c.set(a,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function oc(r){return'href="'+We(r)+'"'}function Lh(r){return'link[rel="stylesheet"]['+r+"]"}function xw(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function OO(r,a,c,p){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?p.loading=1:(a=r.createElement("link"),p.preload=a,a.addEventListener("load",function(){return p.loading|=1}),a.addEventListener("error",function(){return p.loading|=2}),Wn(a,"link",c),Je(a),r.head.appendChild(a))}function ac(r){return'[src="'+We(r)+'"]'}function Vh(r){return"script[async]"+r}function Cw(r,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var p=r.querySelector('style[data-href~="'+We(c.href)+'"]');if(p)return a.instance=p,Je(p),p;var y=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return p=(r.ownerDocument||r).createElement("style"),Je(p),Wn(p,"style",y),mp(p,c.precedence,r),a.instance=p;case"stylesheet":y=oc(c.href);var b=r.querySelector(Lh(y));if(b)return a.state.loading|=4,a.instance=b,Je(b),b;p=xw(c),(y=xs.get(y))&&uy(p,y),b=(r.ownerDocument||r).createElement("link"),Je(b);var I=b;return I._p=new Promise(function(O,G){I.onload=O,I.onerror=G}),Wn(b,"link",p),a.state.loading|=4,mp(b,c.precedence,r),a.instance=b;case"script":return b=ac(c.src),(y=r.querySelector(Vh(b)))?(a.instance=y,Je(y),y):(p=c,(y=xs.get(b))&&(p=v({},c),cy(p,y)),r=r.ownerDocument||r,y=r.createElement("script"),Je(y),Wn(y,"link",p),r.head.appendChild(y),a.instance=y);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(p=a.instance,a.state.loading|=4,mp(p,c.precedence,r));return a.instance}function mp(r,a,c){for(var p=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=p.length?p[p.length-1]:null,b=y,I=0;I<p.length;I++){var O=p[I];if(O.dataset.precedence===a)b=O;else if(b!==y)break}b?b.parentNode.insertBefore(r,b.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(r,a.firstChild))}function uy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function cy(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var gp=null;function Aw(r,a,c){if(gp===null){var p=new Map,y=gp=new Map;y.set(c,p)}else y=gp,p=y.get(c),p||(p=new Map,y.set(c,p));if(p.has(r))return p;for(p.set(r,null),c=c.getElementsByTagName(r),y=0;y<c.length;y++){var b=c[y];if(!(b[hr]||b[ln]||r==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var I=b.getAttribute(a)||"";I=r+I;var O=p.get(I);O?O.push(b):p.set(I,[b])}}return p}function Iw(r,a,c){r=r.ownerDocument||r,r.head.insertBefore(c,a==="title"?r.querySelector("head > title"):null)}function kO(r,a,c){if(c===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Rw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var zh=null;function DO(){}function NO(r,a,c){if(zh===null)throw Error(i(475));var p=zh;if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=oc(c.href),b=r.querySelector(Lh(y));if(b){r=b._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(p.count++,p=_p.bind(p),r.then(p,p)),a.state.loading|=4,a.instance=b,Je(b);return}b=r.ownerDocument||r,c=xw(c),(y=xs.get(y))&&uy(c,y),b=b.createElement("link"),Je(b);var I=b;I._p=new Promise(function(O,G){I.onload=O,I.onerror=G}),Wn(b,"link",c),a.instance=b}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(p.count++,a=_p.bind(p),r.addEventListener("load",a),r.addEventListener("error",a))}}function LO(){if(zh===null)throw Error(i(475));var r=zh;return r.stylesheets&&r.count===0&&hy(r,r.stylesheets),0<r.count?function(a){var c=setTimeout(function(){if(r.stylesheets&&hy(r,r.stylesheets),r.unsuspend){var p=r.unsuspend;r.unsuspend=null,p()}},6e4);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(c)}}:null}function _p(){if(this.count--,this.count===0){if(this.stylesheets)hy(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var yp=null;function hy(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,yp=new Map,a.forEach(VO,r),yp=null,_p.call(r))}function VO(r,a){if(!(a.state.loading&4)){var c=yp.get(r);if(c)var p=c.get(null);else{c=new Map,yp.set(r,c);for(var y=r.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var I=y[b];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(c.set(I.dataset.precedence,I),p=I)}p&&c.set(null,p)}y=a.instance,I=y.getAttribute("data-precedence"),b=c.get(I)||p,b===p&&c.set(null,y),c.set(I,y),this.count++,p=_p.bind(this),y.addEventListener("load",p),y.addEventListener("error",p),b?b.parentNode.insertBefore(y,b.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(y,r.firstChild)),a.state.loading|=4}}var Bh={$$typeof:J,Provider:null,Consumer:null,_currentValue:vt,_currentValue2:vt,_threadCount:0};function zO(r,a,c,p,y,b,I,O){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=as(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=as(0),this.hiddenUpdates=as(null),this.identifierPrefix=p,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Pw(r,a,c,p,y,b,I,O,G,et,ct,ft){return r=new zO(r,a,c,I,O,G,et,ft),a=1,b===!0&&(a|=24),b=bi(3,null,null,a),r.current=b,b.stateNode=r,a=Wg(),a.refCount++,r.pooledCache=a,a.refCount++,b.memoizedState={element:p,isDehydrated:c,cache:a},$g(b),r}function Mw(r){return r?(r=io,r):io}function Ow(r,a,c,p,y,b){y=Mw(y),p.context===null?p.context=y:p.pendingContext=y,p=ua(a),p.payload={element:c},b=b===void 0?null:b,b!==null&&(p.callback=b),c=ca(r,p,a),c!==null&&(ns(c,r,a),mh(c,r,a))}function kw(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<a?c:a}}function fy(r,a){kw(r,a),(r=r.alternate)&&kw(r,a)}function Dw(r){if(r.tag===13){var a=sa(r,67108864);a!==null&&ns(a,r,67108864),fy(r,67108864)}}var vp=!0;function BO(r,a,c,p){var y=nt.T;nt.T=null;var b=Et.p;try{Et.p=2,dy(r,a,c,p)}finally{Et.p=b,nt.T=y}}function UO(r,a,c,p){var y=nt.T;nt.T=null;var b=Et.p;try{Et.p=8,dy(r,a,c,p)}finally{Et.p=b,nt.T=y}}function dy(r,a,c,p){if(vp){var y=py(p);if(y===null)ty(r,a,p,bp,c),Lw(r,p);else if(HO(y,r,a,c,p))p.stopPropagation();else if(Lw(r,p),a&4&&-1<FO.indexOf(r)){for(;y!==null;){var b=Ui(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var I=Ei(b.pendingLanes);if(I!==0){var O=b;for(O.pendingLanes|=2,O.entangledLanes|=2;I;){var G=1<<31-An(I);O.entanglements[1]|=G,I&=~G}Cr(b),(Ae&6)===0&&(ip=Qn()+500,Oh(0))}}break;case 13:O=sa(b,2),O!==null&&ns(O,b,2),rp(),fy(b,2)}if(b=py(p),b===null&&ty(r,a,p,bp,c),b===y)break;y=b}y!==null&&p.stopPropagation()}else ty(r,a,p,null,c)}}function py(r){return r=jn(r),my(r)}var bp=null;function my(r){if(bp=null,r=Bi(r),r!==null){var a=o(r);if(a===null)r=null;else{var c=a.tag;if(c===13){if(r=u(a),r!==null)return r;r=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return bp=r,null}function Nw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(No()){case al:return 2;case Fr:return 8;case ks:case Tu:return 32;case Hr:return 268435456;default:return 32}default:return 32}}var gy=!1,wa=null,Sa=null,xa=null,Uh=new Map,Fh=new Map,Ca=[],FO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lw(r,a){switch(r){case"focusin":case"focusout":wa=null;break;case"dragenter":case"dragleave":Sa=null;break;case"mouseover":case"mouseout":xa=null;break;case"pointerover":case"pointerout":Uh.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fh.delete(a.pointerId)}}function Hh(r,a,c,p,y,b){return r===null||r.nativeEvent!==b?(r={blockedOn:a,domEventName:c,eventSystemFlags:p,nativeEvent:b,targetContainers:[y]},a!==null&&(a=Ui(a),a!==null&&Dw(a)),r):(r.eventSystemFlags|=p,a=r.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),r)}function HO(r,a,c,p,y){switch(a){case"focusin":return wa=Hh(wa,r,a,c,p,y),!0;case"dragenter":return Sa=Hh(Sa,r,a,c,p,y),!0;case"mouseover":return xa=Hh(xa,r,a,c,p,y),!0;case"pointerover":var b=y.pointerId;return Uh.set(b,Hh(Uh.get(b)||null,r,a,c,p,y)),!0;case"gotpointercapture":return b=y.pointerId,Fh.set(b,Hh(Fh.get(b)||null,r,a,c,p,y)),!0}return!1}function Vw(r){var a=Bi(r.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=u(c),a!==null){r.blockedOn=a,Bo(r.priority,function(){if(c.tag===13){var p=es();p=ur(p);var y=sa(c,p);y!==null&&ns(y,c,p),fy(c,p)}});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ep(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var c=py(r.nativeEvent);if(c===null){c=r.nativeEvent;var p=new c.constructor(c.type,c);qi=p,c.target.dispatchEvent(p),qi=null}else return a=Ui(c),a!==null&&Dw(a),r.blockedOn=c,!1;a.shift()}return!0}function zw(r,a,c){Ep(r)&&c.delete(a)}function jO(){gy=!1,wa!==null&&Ep(wa)&&(wa=null),Sa!==null&&Ep(Sa)&&(Sa=null),xa!==null&&Ep(xa)&&(xa=null),Uh.forEach(zw),Fh.forEach(zw)}function Tp(r,a){r.blockedOn===a&&(r.blockedOn=null,gy||(gy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,jO)))}var wp=null;function Bw(r){wp!==r&&(wp=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){wp===r&&(wp=null);for(var a=0;a<r.length;a+=3){var c=r[a],p=r[a+1],y=r[a+2];if(typeof p!="function"){if(my(p||c)===null)continue;break}var b=Ui(c);b!==null&&(r.splice(a,3),a-=3,m_(b,{pending:!0,data:y,method:c.method,action:p},p,y))}}))}function jh(r){function a(G){return Tp(G,r)}wa!==null&&Tp(wa,r),Sa!==null&&Tp(Sa,r),xa!==null&&Tp(xa,r),Uh.forEach(a),Fh.forEach(a);for(var c=0;c<Ca.length;c++){var p=Ca[c];p.blockedOn===r&&(p.blockedOn=null)}for(;0<Ca.length&&(c=Ca[0],c.blockedOn===null);)Vw(c),c.blockedOn===null&&Ca.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(p=0;p<c.length;p+=3){var y=c[p],b=c[p+1],I=y[sn]||null;if(typeof b=="function")I||Bw(c);else if(I){var O=null;if(b&&b.hasAttribute("formAction")){if(y=b,I=b[sn]||null)O=I.formAction;else if(my(y)!==null)continue}else O=I.action;typeof O=="function"?c[p+1]=O:(c.splice(p,3),p-=3),Bw(c)}}}function _y(r){this._internalRoot=r}Sp.prototype.render=_y.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var c=a.current,p=es();Ow(c,p,r,a,null,null)},Sp.prototype.unmount=_y.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;Ow(r.current,2,null,r,null,null),rp(),a[Ti]=null}};function Sp(r){this._internalRoot=r}Sp.prototype.unstable_scheduleHydration=function(r){if(r){var a=cr();r={blockedOn:null,target:r,priority:a};for(var c=0;c<Ca.length&&a!==0&&a<Ca[c].priority;c++);Ca.splice(c,0,r),c===0&&Vw(r)}};var Uw=t.version;if(Uw!=="19.1.0")throw Error(i(527,Uw,"19.1.0"));Et.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=d(a),r=r!==null?m(r):null,r=r===null?null:r.stateNode,r};var qO={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:nt,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xp.isDisabled&&xp.supportsFiber)try{ze=xp.inject(qO),ye=xp}catch{}}return Gh.createRoot=function(r,a){if(!s(r))throw Error(i(299));var c=!1,p="",y=nT,b=iT,I=sT,O=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(O=a.unstable_transitionCallbacks)),a=Pw(r,1,!1,null,null,c,p,y,b,I,O,null),r[Ti]=a.current,J_(r),new _y(a)},Gh.hydrateRoot=function(r,a,c){if(!s(r))throw Error(i(299));var p=!1,y="",b=nT,I=iT,O=sT,G=null,et=null;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(I=c.onCaughtError),c.onRecoverableError!==void 0&&(O=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(G=c.unstable_transitionCallbacks),c.formState!==void 0&&(et=c.formState)),a=Pw(r,1,!0,a,c??null,p,y,b,I,O,G,et),a.context=Mw(null),c=a.current,p=es(),p=ur(p),y=ua(p),y.callback=null,ca(c,y,p),c=p,a.current.lanes=c,ls(a,c),Cr(a),r[Ti]=a.current,J_(r),new Sp(a)},Gh.version="19.1.0",Gh}var $w;function ek(){if($w)return by.exports;$w=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),by.exports=tk(),by.exports}var nk=ek();const ik=AA(nk);var Wh={},Qw;function sk(){if(Qw)return Wh;Qw=1,Object.defineProperty(Wh,"__esModule",{value:!0}),Wh.parse=u,Wh.serialize=m;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function u(w,A){const R=new o,M=w.length;if(M<2)return R;const k=(A==null?void 0:A.decode)||v;let U=0;do{const Z=w.indexOf("=",U);if(Z===-1)break;const J=w.indexOf(";",U),ut=J===-1?M:J;if(Z>ut){U=w.lastIndexOf(";",Z-1)+1;continue}const rt=h(w,U,Z),_t=d(w,Z,rt),z=w.slice(rt,_t);if(R[z]===void 0){let N=h(w,Z+1,ut),V=d(w,ut,N);const q=k(w.slice(N,V));R[z]=q}U=ut+1}while(U<M);return R}function h(w,A,R){do{const M=w.charCodeAt(A);if(M!==32&&M!==9)return A}while(++A<R);return R}function d(w,A,R){for(;A>R;){const M=w.charCodeAt(--A);if(M!==32&&M!==9)return A+1}return R}function m(w,A,R){const M=(R==null?void 0:R.encode)||encodeURIComponent;if(!n.test(w))throw new TypeError(`argument name is invalid: ${w}`);const k=M(A);if(!t.test(k))throw new TypeError(`argument val is invalid: ${A}`);let U=w+"="+k;if(!R)return U;if(R.maxAge!==void 0){if(!Number.isInteger(R.maxAge))throw new TypeError(`option maxAge is invalid: ${R.maxAge}`);U+="; Max-Age="+R.maxAge}if(R.domain){if(!e.test(R.domain))throw new TypeError(`option domain is invalid: ${R.domain}`);U+="; Domain="+R.domain}if(R.path){if(!i.test(R.path))throw new TypeError(`option path is invalid: ${R.path}`);U+="; Path="+R.path}if(R.expires){if(!T(R.expires)||!Number.isFinite(R.expires.valueOf()))throw new TypeError(`option expires is invalid: ${R.expires}`);U+="; Expires="+R.expires.toUTCString()}if(R.httpOnly&&(U+="; HttpOnly"),R.secure&&(U+="; Secure"),R.partitioned&&(U+="; Partitioned"),R.priority)switch(typeof R.priority=="string"?R.priority.toLowerCase():void 0){case"low":U+="; Priority=Low";break;case"medium":U+="; Priority=Medium";break;case"high":U+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${R.priority}`)}if(R.sameSite)switch(typeof R.sameSite=="string"?R.sameSite.toLowerCase():R.sameSite){case!0:case"strict":U+="; SameSite=Strict";break;case"lax":U+="; SameSite=Lax";break;case"none":U+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${R.sameSite}`)}return U}function v(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function T(w){return s.call(w)==="[object Date]"}return Wh}sk();var Xw="popstate";function rk(n={}){function t(i,s){let{pathname:o,search:u,hash:h}=i.location;return tv("",{pathname:o,search:u,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(i,s){return typeof s=="string"?s:Nf(s)}return ak(t,e,null,n)}function Xe(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function sr(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ok(){return Math.random().toString(36).substring(2,10)}function Jw(n,t){return{usr:n.state,key:n.key,idx:t}}function tv(n,t,e=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?Fc(t):t,state:e,key:t&&t.key||i||ok()}}function Nf({pathname:n="/",search:t="",hash:e=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(n+=e.charAt(0)==="#"?e:"#"+e),n}function Fc(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substring(e),n=n.substring(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substring(i),n=n.substring(0,i)),n&&(t.pathname=n)}return t}function ak(n,t,e,i={}){let{window:s=document.defaultView,v5Compat:o=!1}=i,u=s.history,h="POP",d=null,m=v();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function v(){return(u.state||{idx:null}).idx}function T(){h="POP";let k=v(),U=k==null?null:k-m;m=k,d&&d({action:h,location:M.location,delta:U})}function w(k,U){h="PUSH";let Z=tv(M.location,k,U);m=v()+1;let J=Jw(Z,m),ut=M.createHref(Z);try{u.pushState(J,"",ut)}catch(rt){if(rt instanceof DOMException&&rt.name==="DataCloneError")throw rt;s.location.assign(ut)}o&&d&&d({action:h,location:M.location,delta:1})}function A(k,U){h="REPLACE";let Z=tv(M.location,k,U);m=v();let J=Jw(Z,m),ut=M.createHref(Z);u.replaceState(J,"",ut),o&&d&&d({action:h,location:M.location,delta:0})}function R(k){return lk(k)}let M={get action(){return h},get location(){return n(s,u)},listen(k){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Xw,T),d=k,()=>{s.removeEventListener(Xw,T),d=null}},createHref(k){return t(s,k)},createURL:R,encodeLocation(k){let U=R(k);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:w,replace:A,go(k){return u.go(k)}};return M}function lk(n,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Xe(e,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Nf(n);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function RA(n,t,e="/"){return uk(n,t,e,!1)}function uk(n,t,e,i){let s=typeof t=="string"?Fc(t):t,o=Co(s.pathname||"/",e);if(o==null)return null;let u=PA(n);ck(u);let h=null;for(let d=0;h==null&&d<u.length;++d){let m=Ek(o);h=vk(u[d],m,i)}return h}function PA(n,t=[],e=[],i=""){let s=(o,u,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};d.relativePath.startsWith("/")&&(Xe(d.relativePath.startsWith(i),`Absolute route path "${d.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(i.length));let m=Eo([i,d.relativePath]),v=e.concat(d);o.children&&o.children.length>0&&(Xe(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),PA(o.children,t,v,m)),!(o.path==null&&!o.index)&&t.push({path:m,score:_k(m,o.index),routesMeta:v})};return n.forEach((o,u)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,u);else for(let d of MA(o.path))s(o,u,d)}),t}function MA(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,s=e.endsWith("?"),o=e.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let u=MA(i.join("/")),h=[];return h.push(...u.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...u),h.map(d=>n.startsWith("/")&&d===""?"/":d)}function ck(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:yk(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var hk=/^:[\w-]+$/,fk=3,dk=2,pk=1,mk=10,gk=-2,tS=n=>n==="*";function _k(n,t){let e=n.split("/"),i=e.length;return e.some(tS)&&(i+=gk),t&&(i+=dk),e.filter(s=>!tS(s)).reduce((s,o)=>s+(hk.test(o)?fk:o===""?pk:mk),i)}function yk(n,t){return n.length===t.length&&n.slice(0,-1).every((i,s)=>i===t[s])?n[n.length-1]-t[t.length-1]:0}function vk(n,t,e=!1){let{routesMeta:i}=n,s={},o="/",u=[];for(let h=0;h<i.length;++h){let d=i[h],m=h===i.length-1,v=o==="/"?t:t.slice(o.length)||"/",T=pm({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},v),w=d.route;if(!T&&m&&e&&!i[i.length-1].route.index&&(T=pm({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},v)),!T)return null;Object.assign(s,T.params),u.push({params:s,pathname:Eo([o,T.pathname]),pathnameBase:xk(Eo([o,T.pathnameBase])),route:w}),T.pathnameBase!=="/"&&(o=Eo([o,T.pathnameBase]))}return u}function pm(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=bk(n.path,n.caseSensitive,n.end),s=t.match(e);if(!s)return null;let o=s[0],u=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:i.reduce((m,{paramName:v,isOptional:T},w)=>{if(v==="*"){let R=h[w]||"";u=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const A=h[w];return T&&!A?m[v]=void 0:m[v]=(A||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:u,pattern:n}}function bk(n,t=!1,e=!0){sr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function Ek(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return sr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function Co(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}function Tk(n,t="/"){let{pathname:e,search:i="",hash:s=""}=typeof n=="string"?Fc(n):n;return{pathname:e?e.startsWith("/")?e:wk(e,t):t,search:Ck(i),hash:Ak(s)}}function wk(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function Sy(n,t,e,i){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Sk(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function Jv(n){let t=Sk(n);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function t0(n,t,e,i=!1){let s;typeof n=="string"?s=Fc(n):(s={...n},Xe(!s.pathname||!s.pathname.includes("?"),Sy("?","pathname","search",s)),Xe(!s.pathname||!s.pathname.includes("#"),Sy("#","pathname","hash",s)),Xe(!s.search||!s.search.includes("#"),Sy("#","search","hash",s)));let o=n===""||s.pathname==="",u=o?"/":s.pathname,h;if(u==null)h=e;else{let T=t.length-1;if(!i&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),T-=1;s.pathname=w.join("/")}h=T>=0?t[T]:"/"}let d=Tk(s,h),m=u&&u!=="/"&&u.endsWith("/"),v=(o||u===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(m||v)&&(d.pathname+="/"),d}var Eo=n=>n.join("/").replace(/\/\/+/g,"/"),xk=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Ck=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Ak=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Ik(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var OA=["POST","PUT","PATCH","DELETE"];new Set(OA);var Rk=["GET",...OA];new Set(Rk);var Hc=$.createContext(null);Hc.displayName="DataRouter";var sg=$.createContext(null);sg.displayName="DataRouterState";var kA=$.createContext({isTransitioning:!1});kA.displayName="ViewTransition";var Pk=$.createContext(new Map);Pk.displayName="Fetchers";var Mk=$.createContext(null);Mk.displayName="Await";var ar=$.createContext(null);ar.displayName="Navigation";var rd=$.createContext(null);rd.displayName="Location";var Br=$.createContext({outlet:null,matches:[],isDataRoute:!1});Br.displayName="Route";var e0=$.createContext(null);e0.displayName="RouteError";function Ok(n,{relative:t}={}){Xe(jc(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=$.useContext(ar),{hash:s,pathname:o,search:u}=od(n,{relative:t}),h=o;return e!=="/"&&(h=o==="/"?e:Eo([e,o])),i.createHref({pathname:h,search:u,hash:s})}function jc(){return $.useContext(rd)!=null}function tl(){return Xe(jc(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(rd).location}var DA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function NA(n){$.useContext(ar).static||$.useLayoutEffect(n)}function qc(){let{isDataRoute:n}=$.useContext(Br);return n?Gk():kk()}function kk(){Xe(jc(),"useNavigate() may be used only in the context of a <Router> component.");let n=$.useContext(Hc),{basename:t,navigator:e}=$.useContext(ar),{matches:i}=$.useContext(Br),{pathname:s}=tl(),o=JSON.stringify(Jv(i)),u=$.useRef(!1);return NA(()=>{u.current=!0}),$.useCallback((d,m={})=>{if(sr(u.current,DA),!u.current)return;if(typeof d=="number"){e.go(d);return}let v=t0(d,JSON.parse(o),s,m.relative==="path");n==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:Eo([t,v.pathname])),(m.replace?e.replace:e.push)(v,m.state,m)},[t,e,o,s,n])}$.createContext(null);function od(n,{relative:t}={}){let{matches:e}=$.useContext(Br),{pathname:i}=tl(),s=JSON.stringify(Jv(e));return $.useMemo(()=>t0(n,JSON.parse(s),i,t==="path"),[n,s,i,t])}function Dk(n,t){return LA(n,t)}function LA(n,t,e,i){var U;Xe(jc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=$.useContext(ar),{matches:o}=$.useContext(Br),u=o[o.length-1],h=u?u.params:{},d=u?u.pathname:"/",m=u?u.pathnameBase:"/",v=u&&u.route;{let Z=v&&v.path||"";VA(d,!v||Z.endsWith("*")||Z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${Z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Z}"> to <Route path="${Z==="/"?"*":`${Z}/*`}">.`)}let T=tl(),w;if(t){let Z=typeof t=="string"?Fc(t):t;Xe(m==="/"||((U=Z.pathname)==null?void 0:U.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${Z.pathname}" was given in the \`location\` prop.`),w=Z}else w=T;let A=w.pathname||"/",R=A;if(m!=="/"){let Z=m.replace(/^\//,"").split("/");R="/"+A.replace(/^\//,"").split("/").slice(Z.length).join("/")}let M=RA(n,{pathname:R});sr(v||M!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),sr(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=Bk(M&&M.map(Z=>Object.assign({},Z,{params:Object.assign({},h,Z.params),pathname:Eo([m,s.encodeLocation?s.encodeLocation(Z.pathname).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?m:Eo([m,s.encodeLocation?s.encodeLocation(Z.pathnameBase).pathname:Z.pathnameBase])})),o,e,i);return t&&k?$.createElement(rd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},k):k}function Nk(){let n=qk(),t=Ik(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=$.createElement($.Fragment,null,$.createElement("p",null,"💿 Hey developer 👋"),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:o},"ErrorBoundary")," or"," ",$.createElement("code",{style:o},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},t),e?$.createElement("pre",{style:s},e):null,u)}var Lk=$.createElement(Nk,null),Vk=class extends $.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){console.error("React Router caught the following error during render",n,t)}render(){return this.state.error!==void 0?$.createElement(Br.Provider,{value:this.props.routeContext},$.createElement(e0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zk({routeContext:n,match:t,children:e}){let i=$.useContext(Hc);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),$.createElement(Br.Provider,{value:n},e)}function Bk(n,t=[],e=null,i=null){if(n==null){if(!e)return null;if(e.errors)n=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let s=n,o=e==null?void 0:e.errors;if(o!=null){let d=s.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);Xe(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let u=!1,h=-1;if(e)for(let d=0;d<s.length;d++){let m=s[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=d),m.route.id){let{loaderData:v,errors:T}=e,w=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!T||T[m.route.id]===void 0);if(m.route.lazy||w){u=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((d,m,v)=>{let T,w=!1,A=null,R=null;e&&(T=o&&m.route.id?o[m.route.id]:void 0,A=m.route.errorElement||Lk,u&&(h<0&&v===0?(VA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,R=null):h===v&&(w=!0,R=m.route.hydrateFallbackElement||null)));let M=t.concat(s.slice(0,v+1)),k=()=>{let U;return T?U=A:w?U=R:m.route.Component?U=$.createElement(m.route.Component,null):m.route.element?U=m.route.element:U=d,$.createElement(zk,{match:m,routeContext:{outlet:d,matches:M,isDataRoute:e!=null},children:U})};return e&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?$.createElement(Vk,{location:e.location,revalidation:e.revalidation,component:A,error:T,children:k(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):k()},null)}function n0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Uk(n){let t=$.useContext(Hc);return Xe(t,n0(n)),t}function Fk(n){let t=$.useContext(sg);return Xe(t,n0(n)),t}function Hk(n){let t=$.useContext(Br);return Xe(t,n0(n)),t}function i0(n){let t=Hk(n),e=t.matches[t.matches.length-1];return Xe(e.route.id,`${n} can only be used on routes that contain a unique "id"`),e.route.id}function jk(){return i0("useRouteId")}function qk(){var i;let n=$.useContext(e0),t=Fk("useRouteError"),e=i0("useRouteError");return n!==void 0?n:(i=t.errors)==null?void 0:i[e]}function Gk(){let{router:n}=Uk("useNavigate"),t=i0("useNavigate"),e=$.useRef(!1);return NA(()=>{e.current=!0}),$.useCallback(async(s,o={})=>{sr(e.current,DA),e.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:t,...o}))},[n,t])}var eS={};function VA(n,t,e){!t&&!eS[n]&&(eS[n]=!0,sr(!1,e))}$.memo(Wk);function Wk({routes:n,future:t,state:e}){return LA(n,void 0,e,t)}function Yh({to:n,replace:t,state:e,relative:i}){Xe(jc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=$.useContext(ar);sr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=$.useContext(Br),{pathname:u}=tl(),h=qc(),d=t0(n,Jv(o),u,i==="path"),m=JSON.stringify(d);return $.useEffect(()=>{h(JSON.parse(m),{replace:t,state:e,relative:i})},[h,m,i,t,e]),null}function cc(n){Xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Yk({basename:n="/",children:t=null,location:e,navigationType:i="POP",navigator:s,static:o=!1}){Xe(!jc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=$.useMemo(()=>({basename:u,navigator:s,static:o,future:{}}),[u,s,o]);typeof e=="string"&&(e=Fc(e));let{pathname:d="/",search:m="",hash:v="",state:T=null,key:w="default"}=e,A=$.useMemo(()=>{let R=Co(d,u);return R==null?null:{location:{pathname:R,search:m,hash:v,state:T,key:w},navigationType:i}},[u,d,m,v,T,w,i]);return sr(A!=null,`<Router basename="${u}"> is not able to match the URL "${d}${m}${v}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:$.createElement(ar.Provider,{value:h},$.createElement(rd.Provider,{children:t,value:A}))}function Zk({children:n,location:t}){return Dk(ev(n),t)}function ev(n,t=[]){let e=[];return $.Children.forEach(n,(i,s)=>{if(!$.isValidElement(i))return;let o=[...t,s];if(i.type===$.Fragment){e.push.apply(e,ev(i.props.children,o));return}Xe(i.type===cc,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xe(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=ev(i.props.children,o)),e.push(u)}),e}var $p="get",Qp="application/x-www-form-urlencoded";function rg(n){return n!=null&&typeof n.tagName=="string"}function Kk(n){return rg(n)&&n.tagName.toLowerCase()==="button"}function $k(n){return rg(n)&&n.tagName.toLowerCase()==="form"}function Qk(n){return rg(n)&&n.tagName.toLowerCase()==="input"}function Xk(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Jk(n,t){return n.button===0&&(!t||t==="_self")&&!Xk(n)}var Cp=null;function tD(){if(Cp===null)try{new FormData(document.createElement("form"),0),Cp=!1}catch{Cp=!0}return Cp}var eD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xy(n){return n!=null&&!eD.has(n)?(sr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qp}"`),null):n}function nD(n,t){let e,i,s,o,u;if($k(n)){let h=n.getAttribute("action");i=h?Co(h,t):null,e=n.getAttribute("method")||$p,s=xy(n.getAttribute("enctype"))||Qp,o=new FormData(n)}else if(Kk(n)||Qk(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||h.getAttribute("action");if(i=d?Co(d,t):null,e=n.getAttribute("formmethod")||h.getAttribute("method")||$p,s=xy(n.getAttribute("formenctype"))||xy(h.getAttribute("enctype"))||Qp,o=new FormData(h,n),!tD()){let{name:m,type:v,value:T}=n;if(v==="image"){let w=m?`${m}.`:"";o.append(`${w}x`,"0"),o.append(`${w}y`,"0")}else m&&o.append(m,T)}}else{if(rg(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=$p,i=null,s=Qp,u=n}return o&&s==="text/plain"&&(u=o,o=void 0),{action:i,method:e.toLowerCase(),encType:s,formData:o,body:u}}function s0(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}async function iD(n,t){if(n.id in t)return t[n.id];try{let e=await import(n.module);return t[n.id]=e,e}catch(e){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sD(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function rD(n,t,e){let i=await Promise.all(n.map(async s=>{let o=t.routes[s.route.id];if(o){let u=await iD(o,e);return u.links?u.links():[]}return[]}));return uD(i.flat(1).filter(sD).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function nS(n,t,e,i,s,o){let u=(d,m)=>e[m]?d.route.id!==e[m].route.id:!0,h=(d,m)=>{var v;return e[m].pathname!==d.pathname||((v=e[m].route.path)==null?void 0:v.endsWith("*"))&&e[m].params["*"]!==d.params["*"]};return o==="assets"?t.filter((d,m)=>u(d,m)||h(d,m)):o==="data"?t.filter((d,m)=>{var T;let v=i.routes[d.route.id];if(!v||!v.hasLoader)return!1;if(u(d,m)||h(d,m))return!0;if(d.route.shouldRevalidate){let w=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((T=e[0])==null?void 0:T.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function oD(n,t,{includeHydrateFallback:e}={}){return aD(n.map(i=>{let s=t.routes[i.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),e&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function aD(n){return[...new Set(n)]}function lD(n){let t={},e=Object.keys(n).sort();for(let i of e)t[i]=n[i];return t}function uD(n,t){let e=new Set;return new Set(t),n.reduce((i,s)=>{let o=JSON.stringify(lD(s));return e.has(o)||(e.add(o),i.push({key:o,link:s})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var cD=new Set([100,101,204,205]);function hD(n,t){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":t&&Co(e.pathname,t)==="/"?e.pathname=`${t.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function zA(){let n=$.useContext(Hc);return s0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function fD(){let n=$.useContext(sg);return s0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var r0=$.createContext(void 0);r0.displayName="FrameworkContext";function BA(){let n=$.useContext(r0);return s0(n,"You must render this element inside a <HydratedRouter> element"),n}function dD(n,t){let e=$.useContext(r0),[i,s]=$.useState(!1),[o,u]=$.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:m,onMouseLeave:v,onTouchStart:T}=t,w=$.useRef(null);$.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let M=U=>{U.forEach(Z=>{u(Z.isIntersecting)})},k=new IntersectionObserver(M,{threshold:.5});return w.current&&k.observe(w.current),()=>{k.disconnect()}}},[n]),$.useEffect(()=>{if(i){let M=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(M)}}},[i]);let A=()=>{s(!0)},R=()=>{s(!1),u(!1)};return e?n!=="intent"?[o,w,{}]:[o,w,{onFocus:Zh(h,A),onBlur:Zh(d,R),onMouseEnter:Zh(m,A),onMouseLeave:Zh(v,R),onTouchStart:Zh(T,A)}]:[!1,w,{}]}function Zh(n,t){return e=>{n&&n(e),e.defaultPrevented||t(e)}}function pD({page:n,...t}){let{router:e}=zA(),i=$.useMemo(()=>RA(e.routes,n,e.basename),[e.routes,n,e.basename]);return i?$.createElement(gD,{page:n,matches:i,...t}):null}function mD(n){let{manifest:t,routeModules:e}=BA(),[i,s]=$.useState([]);return $.useEffect(()=>{let o=!1;return rD(n,t,e).then(u=>{o||s(u)}),()=>{o=!0}},[n,t,e]),i}function gD({page:n,matches:t,...e}){let i=tl(),{manifest:s,routeModules:o}=BA(),{basename:u}=zA(),{loaderData:h,matches:d}=fD(),m=$.useMemo(()=>nS(n,t,d,s,i,"data"),[n,t,d,s,i]),v=$.useMemo(()=>nS(n,t,d,s,i,"assets"),[n,t,d,s,i]),T=$.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let R=new Set,M=!1;if(t.forEach(U=>{var J;let Z=s.routes[U.route.id];!Z||!Z.hasLoader||(!m.some(ut=>ut.route.id===U.route.id)&&U.route.id in h&&((J=o[U.route.id])!=null&&J.shouldRevalidate)||Z.hasClientLoader?M=!0:R.add(U.route.id))}),R.size===0)return[];let k=hD(n,u);return M&&R.size>0&&k.searchParams.set("_routes",t.filter(U=>R.has(U.route.id)).map(U=>U.route.id).join(",")),[k.pathname+k.search]},[u,h,i,s,m,t,n,o]),w=$.useMemo(()=>oD(v,s),[v,s]),A=mD(v);return $.createElement($.Fragment,null,T.map(R=>$.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...e})),w.map(R=>$.createElement("link",{key:R,rel:"modulepreload",href:R,...e})),A.map(({key:R,link:M})=>$.createElement("link",{key:R,...M})))}function _D(...n){return t=>{n.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var UA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{UA&&(window.__reactRouterVersion="7.6.2")}catch{}function yD({basename:n,children:t,window:e}){let i=$.useRef();i.current==null&&(i.current=rk({window:e,v5Compat:!0}));let s=i.current,[o,u]=$.useState({action:s.action,location:s.location}),h=$.useCallback(d=>{$.startTransition(()=>u(d))},[u]);return $.useLayoutEffect(()=>s.listen(h),[s,h]),$.createElement(Yk,{basename:n,children:t,location:o.location,navigationType:o.action,navigator:s})}var FA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,og=$.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:s,reloadDocument:o,replace:u,state:h,target:d,to:m,preventScrollReset:v,viewTransition:T,...w},A){let{basename:R}=$.useContext(ar),M=typeof m=="string"&&FA.test(m),k,U=!1;if(typeof m=="string"&&M&&(k=m,UA))try{let V=new URL(window.location.href),q=m.startsWith("//")?new URL(V.protocol+m):new URL(m),H=Co(q.pathname,R);q.origin===V.origin&&H!=null?m=H+q.search+q.hash:U=!0}catch{sr(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Z=Ok(m,{relative:s}),[J,ut,rt]=dD(i,w),_t=TD(m,{replace:u,state:h,target:d,preventScrollReset:v,relative:s,viewTransition:T});function z(V){t&&t(V),V.defaultPrevented||_t(V)}let N=$.createElement("a",{...w,...rt,href:k||Z,onClick:U||o?t:z,ref:_D(A,ut),target:d,"data-discover":!M&&e==="render"?"true":void 0});return J&&!M?$.createElement($.Fragment,null,N,$.createElement(pD,{page:Z})):N});og.displayName="Link";var vD=$.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:s=!1,style:o,to:u,viewTransition:h,children:d,...m},v){let T=od(u,{relative:m.relative}),w=tl(),A=$.useContext(sg),{navigator:R,basename:M}=$.useContext(ar),k=A!=null&&AD(T)&&h===!0,U=R.encodeLocation?R.encodeLocation(T).pathname:T.pathname,Z=w.pathname,J=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;e||(Z=Z.toLowerCase(),J=J?J.toLowerCase():null,U=U.toLowerCase()),J&&M&&(J=Co(J,M)||J);const ut=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let rt=Z===U||!s&&Z.startsWith(U)&&Z.charAt(ut)==="/",_t=J!=null&&(J===U||!s&&J.startsWith(U)&&J.charAt(U.length)==="/"),z={isActive:rt,isPending:_t,isTransitioning:k},N=rt?t:void 0,V;typeof i=="function"?V=i(z):V=[i,rt?"active":null,_t?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let q=typeof o=="function"?o(z):o;return $.createElement(og,{...m,"aria-current":N,className:V,ref:v,style:q,to:u,viewTransition:h},typeof d=="function"?d(z):d)});vD.displayName="NavLink";var bD=$.forwardRef(({discover:n="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:s,state:o,method:u=$p,action:h,onSubmit:d,relative:m,preventScrollReset:v,viewTransition:T,...w},A)=>{let R=xD(),M=CD(h,{relative:m}),k=u.toLowerCase()==="get"?"get":"post",U=typeof h=="string"&&FA.test(h),Z=J=>{if(d&&d(J),J.defaultPrevented)return;J.preventDefault();let ut=J.nativeEvent.submitter,rt=(ut==null?void 0:ut.getAttribute("formmethod"))||u;R(ut||J.currentTarget,{fetcherKey:t,method:rt,navigate:e,replace:s,state:o,relative:m,preventScrollReset:v,viewTransition:T})};return $.createElement("form",{ref:A,method:k,action:M,onSubmit:i?d:Z,...w,"data-discover":!U&&n==="render"?"true":void 0})});bD.displayName="Form";function ED(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HA(n){let t=$.useContext(Hc);return Xe(t,ED(n)),t}function TD(n,{target:t,replace:e,state:i,preventScrollReset:s,relative:o,viewTransition:u}={}){let h=qc(),d=tl(),m=od(n,{relative:o});return $.useCallback(v=>{if(Jk(v,t)){v.preventDefault();let T=e!==void 0?e:Nf(d)===Nf(m);h(n,{replace:T,state:i,preventScrollReset:s,relative:o,viewTransition:u})}},[d,h,m,e,i,t,n,s,o,u])}var wD=0,SD=()=>`__${String(++wD)}__`;function xD(){let{router:n}=HA("useSubmit"),{basename:t}=$.useContext(ar),e=jk();return $.useCallback(async(i,s={})=>{let{action:o,method:u,encType:h,formData:d,body:m}=nD(i,t);if(s.navigate===!1){let v=s.fetcherKey||SD();await n.fetch(v,e,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||u,formEncType:s.encType||h,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||u,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:e,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,t,e])}function CD(n,{relative:t}={}){let{basename:e}=$.useContext(ar),i=$.useContext(Br);Xe(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o={...od(n||".",{relative:t})},u=tl();if(n==null){o.search=u.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(v=>v==="")){h.delete("index"),d.filter(T=>T).forEach(T=>h.append("index",T));let v=h.toString();o.search=v?`?${v}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:Eo([e,o.pathname])),Nf(o)}function AD(n,t={}){let e=$.useContext(kA);Xe(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=HA("useViewTransitionState"),s=od(n,{relative:t.relative});if(!e.isTransitioning)return!1;let o=Co(e.currentLocation.pathname,i)||e.currentLocation.pathname,u=Co(e.nextLocation.pathname,i)||e.nextLocation.pathname;return pm(s.pathname,u)!=null||pm(s.pathname,o)!=null}[...cD];var ID=IA();/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=()=>{};var iS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St=function(n,t){if(!n)throw Gc(t)},Gc=function(n){return new Error("Firebase Database ("+jA.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},PD=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const s=n[e++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[e++];t[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[e++],u=n[e++],h=n[e++],d=((s&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(d>>10)),t[i++]=String.fromCharCode(56320+(d&1023))}else{const o=n[e++],u=n[e++];t[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|u&63)}}return t.join("")},o0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],u=s+1<n.length,h=u?n[s+1]:0,d=s+2<n.length,m=d?n[s+2]:0,v=o>>2,T=(o&3)<<4|h>>4;let w=(h&15)<<2|m>>6,A=m&63;d||(A=64,u||(w=64)),i.push(e[v],e[T],e[w],e[A])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(qA(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):PD(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=e[n.charAt(s++)],h=s<n.length?e[n.charAt(s)]:0;++s;const m=s<n.length?e[n.charAt(s)]:64;++s;const T=s<n.length?e[n.charAt(s)]:64;if(++s,o==null||h==null||m==null||T==null)throw new MD;const w=o<<2|h>>4;if(i.push(w),m!==64){const A=h<<4&240|m>>2;if(i.push(A),T!==64){const R=m<<6&192|T;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class MD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GA=function(n){const t=qA(n);return o0.encodeByteArray(t,!0)},mm=function(n){return GA(n).replace(/\./g,"")},gm=function(n){try{return o0.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(n){return WA(void 0,n)}function WA(n,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const e=t;return new Date(e.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return t}for(const e in t)!t.hasOwnProperty(e)||!kD(e)||(n[e]=WA(n[e],t[e]));return n}function kD(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=()=>DD().__FIREBASE_DEFAULTS__,LD=()=>{if(typeof process>"u"||typeof iS>"u")return;const n=iS.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},VD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&gm(n[1]);return t&&JSON.parse(t)},ag=()=>{try{return RD()||ND()||LD()||VD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},YA=n=>{var t,e;return(e=(t=ag())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},ZA=n=>{const t=YA(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},KA=()=>{var n;return(n=ag())===null||n===void 0?void 0:n.config},$A=n=>{var t;return(t=ag())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(n){return n.endsWith(".cloudworkstations.dev")}async function l0(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[mm(JSON.stringify(e)),mm(JSON.stringify(u)),""].join(".")}const yf={};function zD(){const n={prod:[],emulator:[]};for(const t of Object.keys(yf))yf[t]?n.emulator.push(t):n.prod.push(t);return n}function BD(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let sS=!1;function u0(n,t){if(typeof window>"u"||typeof document>"u"||!el(window.location.host)||yf[n]===t||yf[n]||sS)return;yf[n]=t;function e(w){return`__firebase__banner__${w}`}const i="__firebase__banner",o=zD().prod.length>0;function u(){const w=document.getElementById(i);w&&w.remove()}function h(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function d(w,A){w.setAttribute("width","24"),w.setAttribute("id",A),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function m(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{sS=!0,u()},w}function v(w,A){w.setAttribute("id",A),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function T(){const w=BD(i),A=e("text"),R=document.getElementById(A)||document.createElement("span"),M=e("learnmore"),k=document.getElementById(M)||document.createElement("a"),U=e("preprendIcon"),Z=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const J=w.element;h(J),v(k,M);const ut=m();d(Z,U),J.append(Z,R,k,ut),document.body.appendChild(J)}o?(R.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function c0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(di())}function UD(){var n;const t=(n=ag())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function XA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jD(){const n=di();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function qD(){return jA.NODE_ADMIN===!0}function GD(){return!UD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WD(){try{return typeof indexedDB=="object"}catch{return!1}}function YD(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{var o;t(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="FirebaseError";class Oo extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=ZD,Object.setPrototypeOf(this,Oo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ad.prototype.create)}}class ad{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},s=`${this.service}/${t}`,o=this.errors[t],u=o?KD(o,i):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new Oo(s,h,i)}}function KD(n,t){return n.replace($D,(e,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const $D=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(n){return JSON.parse(n)}function zn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=function(n){let t={},e={},i={},s="";try{const o=n.split(".");t=Lf(gm(o[0])||""),e=Lf(gm(o[1])||""),s=o[2],i=e.d||{},delete e.d}catch{}return{header:t,claims:e,data:i,signature:s}},QD=function(n){const t=JA(n),e=t.claims;return!!e&&typeof e=="object"&&e.hasOwnProperty("iat")},XD=function(n){const t=JA(n).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function Ac(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}function nv(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function _m(n,t,e){const i={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=t.call(e,n[s],s,n));return i}function ja(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const s of e){if(!i.includes(s))return!1;const o=n[s],u=t[s];if(rS(o)&&rS(u)){if(!ja(o,u))return!1}else if(o!==u)return!1}for(const s of i)if(!e.includes(s))return!1;return!0}function rS(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function rf(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");t[decodeURIComponent(s)]=decodeURIComponent(o)}}),t}function of(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const i=this.W_;if(typeof t=="string")for(let T=0;T<16;T++)i[T]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let T=0;T<16;T++)i[T]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let T=16;T<80;T++){const w=i[T-3]^i[T-8]^i[T-14]^i[T-16];i[T]=(w<<1|w>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],u=this.chain_[2],h=this.chain_[3],d=this.chain_[4],m,v;for(let T=0;T<80;T++){T<40?T<20?(m=h^o&(u^h),v=1518500249):(m=o^u^h,v=1859775393):T<60?(m=o&u|h&(o|u),v=2400959708):(m=o^u^h,v=3395469782);const w=(s<<5|s>>>27)+m+d+v+i[T]&4294967295;d=h,h=u,u=(o<<30|o>>>2)&4294967295,o=s,s=w}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(t,e){if(t==null)return;e===void 0&&(e=t.length);const i=e-this.blockSize;let s=0;const o=this.buf_;let u=this.inbuf_;for(;s<e;){if(u===0)for(;s<=i;)this.compress_(t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(o[u]=t.charCodeAt(s),++u,++s,u===this.blockSize){this.compress_(o),u=0;break}}else for(;s<e;)if(o[u]=t[s],++u,++s,u===this.blockSize){this.compress_(o),u=0;break}}this.inbuf_=u,this.total_+=e}digest(){const t=[];let e=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=e&255,e/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let o=24;o>=0;o-=8)t[i]=this.chain_[s]>>o&255,++i;return t}}function tN(n,t){const e=new eN(n,t);return e.subscribe.bind(e)}class eN{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let s;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");nN(t,["next","error","complete"])?s=t:s={next:t,error:e,complete:i},s.next===void 0&&(s.next=Cy),s.error===void 0&&(s.error=Cy),s.complete===void 0&&(s.complete=Cy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nN(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function Cy(){}function t1(n,t){return`${n} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);if(s>=55296&&s<=56319){const o=s-55296;i++,St(i<n.length,"Surrogate pair missing trail surrogate.");const u=n.charCodeAt(i)-56320;s=65536+(o<<10)+u}s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):s<65536?(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},lg=function(n){let t=0;for(let e=0;e<n.length;e++){const i=n.charCodeAt(e);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,e++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(n){return n&&n._delegate?n._delegate:n}class qa{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new a0;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(oN(t))try{this.getOrInitializeService({instanceIdentifier:Gl})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(t=Gl){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Gl){return this.instances.has(t)}getOptions(t=Gl){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&u.resolve(s)}return s}onInit(t,e){var i;const s=this.normalizeInstanceIdentifier(e),o=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;o.add(t),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&t(u,s),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const s of i)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:rN(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Gl){return this.component?this.component.multipleInstances?t:Gl:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rN(n){return n===Gl?void 0:n}function oN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new sN(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ae||(ae={}));const lN={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},uN=ae.INFO,cN={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},hN=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),s=cN[t];if(s)console[s](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ug{constructor(t){this.name=t,this._logLevel=uN,this._logHandler=hN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ae))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?lN[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...t),this._logHandler(this,ae.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...t),this._logHandler(this,ae.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...t),this._logHandler(this,ae.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...t),this._logHandler(this,ae.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...t),this._logHandler(this,ae.ERROR,...t)}}const fN=(n,t)=>t.some(e=>n instanceof e);let oS,aS;function dN(){return oS||(oS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pN(){return aS||(aS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const e1=new WeakMap,iv=new WeakMap,n1=new WeakMap,Ay=new WeakMap,h0=new WeakMap;function mN(n){const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{e(Va(n.result)),s()},u=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",u)});return t.then(e=>{e instanceof IDBCursor&&e1.set(e,n)}).catch(()=>{}),h0.set(t,n),t}function gN(n){if(iv.has(n))return;const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{e(),s()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});iv.set(n,t)}let sv={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return iv.get(n);if(t==="objectStoreNames")return n.objectStoreNames||n1.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Va(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function _N(n){sv=n(sv)}function yN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(Iy(this),t,...e);return n1.set(i,t.sort?t.sort():[t]),Va(i)}:pN().includes(n)?function(...t){return n.apply(Iy(this),t),Va(e1.get(this))}:function(...t){return Va(n.apply(Iy(this),t))}}function vN(n){return typeof n=="function"?yN(n):(n instanceof IDBTransaction&&gN(n),fN(n,dN())?new Proxy(n,sv):n)}function Va(n){if(n instanceof IDBRequest)return mN(n);if(Ay.has(n))return Ay.get(n);const t=vN(n);return t!==n&&(Ay.set(n,t),h0.set(t,n)),t}const Iy=n=>h0.get(n);function bN(n,t,{blocked:e,upgrade:i,blocking:s,terminated:o}={}){const u=indexedDB.open(n,t),h=Va(u);return i&&u.addEventListener("upgradeneeded",d=>{i(Va(u.result),d.oldVersion,d.newVersion,Va(u.transaction),d)}),e&&u.addEventListener("blocked",d=>e(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const EN=["get","getKey","getAll","getAllKeys","count"],TN=["put","add","delete","clear"],Ry=new Map;function lS(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Ry.get(t))return Ry.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,s=TN.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(s||EN.includes(e)))return;const o=async function(u,...h){const d=this.transaction(u,s?"readwrite":"readonly");let m=d.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[e](...h),s&&d.done]))[0]};return Ry.set(t,o),o}_N(n=>({...n,get:(t,e,i)=>lS(t,e)||n.get(t,e,i),has:(t,e)=>!!lS(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(SN(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function SN(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const rv="@firebase/app",uS="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=new ug("@firebase/app"),xN="@firebase/app-compat",CN="@firebase/analytics-compat",AN="@firebase/analytics",IN="@firebase/app-check-compat",RN="@firebase/app-check",PN="@firebase/auth",MN="@firebase/auth-compat",ON="@firebase/database",kN="@firebase/data-connect",DN="@firebase/database-compat",NN="@firebase/functions",LN="@firebase/functions-compat",VN="@firebase/installations",zN="@firebase/installations-compat",BN="@firebase/messaging",UN="@firebase/messaging-compat",FN="@firebase/performance",HN="@firebase/performance-compat",jN="@firebase/remote-config",qN="@firebase/remote-config-compat",GN="@firebase/storage",WN="@firebase/storage-compat",YN="@firebase/firestore",ZN="@firebase/ai",KN="@firebase/firestore-compat",$N="firebase",QN="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="[DEFAULT]",XN={[rv]:"fire-core",[xN]:"fire-core-compat",[AN]:"fire-analytics",[CN]:"fire-analytics-compat",[RN]:"fire-app-check",[IN]:"fire-app-check-compat",[PN]:"fire-auth",[MN]:"fire-auth-compat",[ON]:"fire-rtdb",[kN]:"fire-data-connect",[DN]:"fire-rtdb-compat",[NN]:"fire-fn",[LN]:"fire-fn-compat",[VN]:"fire-iid",[zN]:"fire-iid-compat",[BN]:"fire-fcm",[UN]:"fire-fcm-compat",[FN]:"fire-perf",[HN]:"fire-perf-compat",[jN]:"fire-rc",[qN]:"fire-rc-compat",[GN]:"fire-gcs",[WN]:"fire-gcs-compat",[YN]:"fire-fst",[KN]:"fire-fst-compat",[ZN]:"fire-vertex","fire-js":"fire-js",[$N]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=new Map,JN=new Map,av=new Map;function cS(n,t){try{n.container.addComponent(t)}catch(e){Ao.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function tu(n){const t=n.name;if(av.has(t))return Ao.debug(`There were multiple attempts to register component ${t}.`),!1;av.set(t,n);for(const e of ym.values())cS(e,n);for(const e of JN.values())cS(e,n);return!0}function cg(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function ss(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},za=new ad("app","Firebase",tL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new qa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw za.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu=QN;function i1(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i=Object.assign({name:ov,automaticDataCollectionEnabled:!0},t),s=i.name;if(typeof s!="string"||!s)throw za.create("bad-app-name",{appName:String(s)});if(e||(e=KA()),!e)throw za.create("no-options");const o=ym.get(s);if(o){if(ja(e,o.options)&&ja(i,o.config))return o;throw za.create("duplicate-app",{appName:s})}const u=new aN(s);for(const d of av.values())u.addComponent(d);const h=new eL(e,i,u);return ym.set(s,h),h}function f0(n=ov){const t=ym.get(n);if(!t&&n===ov&&KA())return i1();if(!t)throw za.create("no-app",{appName:n});return t}function Or(n,t,e){var i;let s=(i=XN[n])!==null&&i!==void 0?i:n;e&&(s+=`-${e}`);const o=s.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${t}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ao.warn(h.join(" "));return}tu(new qa(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL="firebase-heartbeat-database",iL=1,Vf="firebase-heartbeat-store";let Py=null;function s1(){return Py||(Py=bN(nL,iL,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Vf)}catch(e){console.warn(e)}}}}).catch(n=>{throw za.create("idb-open",{originalErrorMessage:n.message})})),Py}async function sL(n){try{const e=(await s1()).transaction(Vf),i=await e.objectStore(Vf).get(r1(n));return await e.done,i}catch(t){if(t instanceof Oo)Ao.warn(t.message);else{const e=za.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ao.warn(e.message)}}}async function hS(n,t){try{const i=(await s1()).transaction(Vf,"readwrite");await i.objectStore(Vf).put(t,r1(n)),await i.done}catch(e){if(e instanceof Oo)Ao.warn(e.message);else{const i=za.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Ao.warn(i.message)}}}function r1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=1024,oL=30;class aL{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new uL(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=fS();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>oL){const u=cL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ao.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=fS(),{heartbeatsToSend:i,unsentEntries:s}=lL(this._heartbeatsCache.heartbeats),o=mm(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ao.warn(e),""}}}function fS(){return new Date().toISOString().substring(0,10)}function lL(n,t=rL){const e=[];let i=n.slice();for(const s of n){const o=e.find(u=>u.agent===s.agent);if(o){if(o.dates.push(s.date),dS(e)>t){o.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),dS(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class uL{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WD()?YD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await sL(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const s=await this.read();return hS(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const s=await this.read();return hS(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function dS(n){return mm(JSON.stringify({version:2,heartbeats:n})).length}function cL(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(n){tu(new qa("platform-logger",t=>new wN(t),"PRIVATE")),tu(new qa("heartbeat",t=>new aL(t),"PRIVATE")),Or(rv,uS,n),Or(rv,uS,"esm2017"),Or("fire-js","")}hL("");var fL="firebase",dL="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Or(fL,dL,"app");function d0(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e}function o1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pL=o1,a1=new ad("auth","Firebase",o1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=new ug("@firebase/auth");function mL(n,...t){vm.logLevel<=ae.WARN&&vm.warn(`Auth (${fu}): ${n}`,...t)}function Xp(n,...t){vm.logLevel<=ae.ERROR&&vm.error(`Auth (${fu}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(n,...t){throw p0(n,...t)}function kr(n,...t){return p0(n,...t)}function l1(n,t,e){const i=Object.assign(Object.assign({},pL()),{[t]:e});return new ad("auth","Firebase",i).create(t,{appName:n.name})}function To(n){return l1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function p0(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return a1.create(n,...t)}function Ut(n,t,...e){if(!n)throw p0(t,...e)}function yo(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Xp(t),new Error(t)}function Io(n,t){n||yo(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function gL(){return pS()==="http:"||pS()==="https:"}function pS(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gL()||HD()||"connection"in navigator)?navigator.onLine:!0}function yL(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(t,e){this.shortDelay=t,this.longDelay=e,Io(e>t,"Short delay should be less than long delay!"),this.isMobile=c0()||XA()}get(){return _L()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(n,t){Io(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],EL=new ld(3e4,6e4);function nl(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function il(n,t,e,i,s={}){return c1(n,s,async()=>{let o={},u={};i&&(t==="GET"?u=i:o={body:JSON.stringify(i)});const h=Wc(Object.assign({key:n.config.apiKey},u)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:t,headers:d},o);return FD()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&el(n.emulatorConfig.host)&&(m.credentials="include"),u1.fetch()(await h1(n,n.config.apiHost,e,h),m)})}async function c1(n,t,e){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},vL),t);try{const s=new wL(n),o=await Promise.race([e(),s.promise]);s.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Ap(n,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const h=o.ok?u.errorMessage:u.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ap(n,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw Ap(n,"email-already-in-use",u);if(d==="USER_DISABLED")throw Ap(n,"user-disabled",u);const v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw l1(n,v,m);rr(n,v)}}catch(s){if(s instanceof Oo)throw s;rr(n,"network-request-failed",{message:String(s)})}}async function ud(n,t,e,i,s={}){const o=await il(n,t,e,i,s);return"mfaPendingCredential"in o&&rr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function h1(n,t,e,i){const s=`${t}${e}?${i}`,o=n,u=o.config.emulator?m0(n.config,s):`${n.config.apiScheme}://${s}`;return bL.includes(e)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function TL(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(kr(this.auth,"network-request-failed")),EL.get())})}}function Ap(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const s=kr(n,t,i);return s.customData._tokenResponse=e,s}function mS(n){return n!==void 0&&n.enterprise!==void 0}class SL{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return TL(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function xL(n,t){return il(n,"GET","/v2/recaptchaConfig",nl(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CL(n,t){return il(n,"POST","/v1/accounts:delete",t)}async function bm(n,t){return il(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function AL(n,t=!1){const e=Kn(n),i=await e.getIdToken(t),s=g0(i);Ut(s&&s.exp&&s.auth_time&&s.iat,e.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:vf(My(s.auth_time)),issuedAtTime:vf(My(s.iat)),expirationTime:vf(My(s.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function My(n){return Number(n)*1e3}function g0(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Xp("JWT malformed, contained fewer than 3 sections"),null;try{const s=gm(e);return s?JSON.parse(s):(Xp("Failed to decode base64 JWT payload"),null)}catch(s){return Xp("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function gS(n){const t=g0(n);return Ut(t,"internal-error"),Ut(typeof t.exp<"u","internal-error"),Ut(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zf(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Oo&&IL(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function IL({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=vf(this.lastLoginAt),this.creationTime=vf(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Em(n){var t;const e=n.auth,i=await n.getIdToken(),s=await zf(n,bm(e,{idToken:i}));Ut(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const u=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?f1(o.providerUserInfo):[],h=ML(n.providerData,u),d=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!(h!=null&&h.length),v=d?m:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new uv(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(n,T)}async function PL(n){const t=Kn(n);await Em(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function ML(n,t){return[...n.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function f1(n){return n.map(t=>{var{providerId:e}=t,i=d0(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OL(n,t){const e=await c1(n,{},async()=>{const i=Wc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,u=await h1(n,s,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return n.emulatorConfig&&el(n.emulatorConfig.host)&&(d.credentials="include"),u1.fetch()(u,d)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function kL(n,t){return il(n,"POST","/v2/accounts:revokeToken",nl(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ut(t.idToken,"internal-error"),Ut(typeof t.idToken<"u","internal-error"),Ut(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):gS(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Ut(t.length!==0,"internal-error");const e=gS(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Ut(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:s,expiresIn:o}=await OL(t,e);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:s,expirationTime:o}=e,u=new yc;return i&&(Ut(typeof i=="string","internal-error",{appName:t}),u.refreshToken=i),s&&(Ut(typeof s=="string","internal-error",{appName:t}),u.accessToken=s),o&&(Ut(typeof o=="number","internal-error",{appName:t}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new yc,this.toJSON())}_performRefresh(){return yo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(n,t){Ut(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Xs{constructor(t){var{uid:e,auth:i,stsTokenManager:s}=t,o=d0(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new uv(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const e=await zf(this,this.stsTokenManager.getToken(this.auth,t));return Ut(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return AL(this,t)}reload(){return PL(this)}_assign(t){this!==t&&(Ut(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Xs(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){Ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await Em(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ss(this.auth.app))return Promise.reject(To(this.auth));const t=await this.getIdToken();return await zf(this,CL(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,s,o,u,h,d,m,v;const T=(i=e.displayName)!==null&&i!==void 0?i:void 0,w=(s=e.email)!==null&&s!==void 0?s:void 0,A=(o=e.phoneNumber)!==null&&o!==void 0?o:void 0,R=(u=e.photoURL)!==null&&u!==void 0?u:void 0,M=(h=e.tenantId)!==null&&h!==void 0?h:void 0,k=(d=e._redirectEventId)!==null&&d!==void 0?d:void 0,U=(m=e.createdAt)!==null&&m!==void 0?m:void 0,Z=(v=e.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:J,emailVerified:ut,isAnonymous:rt,providerData:_t,stsTokenManager:z}=e;Ut(J&&z,t,"internal-error");const N=yc.fromJSON(this.name,z);Ut(typeof J=="string",t,"internal-error"),Ia(T,t.name),Ia(w,t.name),Ut(typeof ut=="boolean",t,"internal-error"),Ut(typeof rt=="boolean",t,"internal-error"),Ia(A,t.name),Ia(R,t.name),Ia(M,t.name),Ia(k,t.name),Ia(U,t.name),Ia(Z,t.name);const V=new Xs({uid:J,auth:t,email:w,emailVerified:ut,displayName:T,isAnonymous:rt,photoURL:R,phoneNumber:A,tenantId:M,stsTokenManager:N,createdAt:U,lastLoginAt:Z});return _t&&Array.isArray(_t)&&(V.providerData=_t.map(q=>Object.assign({},q))),k&&(V._redirectEventId=k),V}static async _fromIdTokenResponse(t,e,i=!1){const s=new yc;s.updateFromServerResponse(e);const o=new Xs({uid:e.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await Em(o),o}static async _fromGetAccountInfoResponse(t,e,i){const s=e.users[0];Ut(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?f1(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new yc;h.updateFromIdToken(i);const d=new Xs({uid:s.localId,auth:t,stsTokenManager:h,isAnonymous:u}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new uv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=new Map;function vo(n){Io(n instanceof Function,"Expected a class definition");let t=_S.get(n);return t?(Io(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,_S.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}d1.type="NONE";const yS=d1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(n,t,e){return`firebase:${n}:${t}:${e}`}class vc{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Jp(this.userKey,s.apiKey,o),this.fullPersistenceKey=Jp("persistence",s.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await bm(this.auth,{idToken:t}).catch(()=>{});return e?Xs._fromGetAccountInfoResponse(this.auth,e,t):null}return Xs._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new vc(vo(yS),t,i);const s=(await Promise.all(e.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=s[0]||vo(yS);const u=Jp(i,t.config.apiKey,t.name);let h=null;for(const m of e)try{const v=await m._get(u);if(v){let T;if(typeof v=="string"){const w=await bm(t,{idToken:v}).catch(()=>{});if(!w)break;T=await Xs._fromGetAccountInfoResponse(t,w,v)}else T=Xs._fromJSON(t,v);m!==o&&(h=T),o=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new vc(o,t,i):(o=d[0],h&&await o._set(u,h.toJSON()),await Promise.all(e.map(async m=>{if(m!==o)try{await m._remove(u)}catch{}})),new vc(o,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(_1(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(p1(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(v1(t))return"Blackberry";if(b1(t))return"Webos";if(m1(t))return"Safari";if((t.includes("chrome/")||g1(t))&&!t.includes("edge/"))return"Chrome";if(y1(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function p1(n=di()){return/firefox\//i.test(n)}function m1(n=di()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function g1(n=di()){return/crios\//i.test(n)}function _1(n=di()){return/iemobile/i.test(n)}function y1(n=di()){return/android/i.test(n)}function v1(n=di()){return/blackberry/i.test(n)}function b1(n=di()){return/webos/i.test(n)}function _0(n=di()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function DL(n=di()){var t;return _0(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function NL(){return jD()&&document.documentMode===10}function E1(n=di()){return _0(n)||y1(n)||b1(n)||v1(n)||/windows phone/i.test(n)||_1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(n,t=[]){let e;switch(n){case"Browser":e=vS(di());break;case"Worker":e=`${vS(di())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${fu}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=o=>new Promise((u,h)=>{try{const d=t(o);u(d)}catch(d){h(d)}});i.onAbort=e,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const s of e)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VL(n,t={}){return il(n,"GET","/v2/passwordPolicy",nl(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=6;class BL{constructor(t){var e,i,s,o;const u=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=u.minPasswordLength)!==null&&e!==void 0?e:zL,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,s,o,u,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,d),this.validatePasswordCharacterOptions(t,d),d.isValid&&(d.isValid=(e=d.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(u=d.containsNumericCharacter)!==null&&u!==void 0?u:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),s&&(e.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(t,e,i,s){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bS(this),this.idTokenSubscription=new bS(this),this.beforeStateQueue=new LL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=a1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=vo(e)),this._initializationPromise=this.queue(async()=>{var i,s,o;if(!this._deleted&&(this.persistenceManager=await vc.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await bm(this,{idToken:t}),i=await Xs._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(ss(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,h=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(t);(!u||u===h)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ut(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Em(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=yL()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ss(this.app))return Promise.reject(To(this));const e=t?Kn(t):null;return e&&Ut(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Ut(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ss(this.app)?Promise.reject(To(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ss(this.app)?Promise.reject(To(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vo(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await VL(this),e=new BL(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new ad("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await kL(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&vo(t)||this._popupRedirectResolver;Ut(e,this,"argument-error"),this.redirectPersistenceManager=await vc.create(this,[vo(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,s){if(this._deleted)return()=>{};const o=typeof e=="function"?e:e.next.bind(e);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ut(h,this,"internal-error"),h.then(()=>{u||o(this.currentUser)}),typeof e=="function"){const d=t.addObserver(e,i,s);return()=>{u=!0,d()}}else{const d=t.addObserver(e);return()=>{u=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=T1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(ss(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e!=null&&e.error&&mL(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function du(n){return Kn(n)}class bS{constructor(t){this.auth=t,this.observer=null,this.addObserver=tN(e=>this.observer=e)}get next(){return Ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FL(n){hg=n}function w1(n){return hg.loadJS(n)}function HL(){return hg.recaptchaEnterpriseScript}function jL(){return hg.gapiScript}function qL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class GL{constructor(){this.enterprise=new WL}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class WL{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const YL="recaptcha-enterprise",S1="NO_RECAPTCHA";class ZL{constructor(t){this.type=YL,this.auth=du(t)}async verify(t="verify",e=!1){async function i(o){if(!e){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,h)=>{xL(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new SL(d);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,u(m.siteKey)}}).catch(d=>{h(d)})})}function s(o,u,h){const d=window.grecaptcha;mS(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:t}).then(m=>{u(m)}).catch(()=>{u(S1)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GL().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{i(this.auth).then(h=>{if(!e&&mS(window.grecaptcha))s(h,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let d=HL();d.length!==0&&(d+=h),w1(d).then(()=>{s(h,o,u)}).catch(m=>{u(m)})}}).catch(h=>{u(h)})})}}async function ES(n,t,e,i=!1,s=!1){const o=new ZL(n);let u;if(s)u=S1;else try{u=await o.verify(e)}catch{u=await o.verify(e,!0)}const h=Object.assign({},t);if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function cv(n,t,e,i,s){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await ES(n,t,e,e==="getOobCode");return i(n,u)}else return i(n,t).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await ES(n,t,e,e==="getOobCode");return i(n,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KL(n,t){const e=cg(n,"auth");if(e.isInitialized()){const s=e.getImmediate(),o=e.getOptions();if(ja(o,t??{}))return s;rr(s,"already-initialized")}return e.initialize({options:t})}function $L(n,t){const e=(t==null?void 0:t.persistence)||[],i=(Array.isArray(e)?e:[e]).map(vo);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function QL(n,t,e){const i=du(n);Ut(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,o=x1(t),{host:u,port:h}=XL(t),d=h===null?"":`:${h}`,m={url:`${o}//${u}${d}/`},v=Object.freeze({host:u,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Ut(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ut(ja(m,i.config.emulator)&&ja(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,el(u)?(l0(`${o}//${u}${d}`),u0("Auth",!0)):JL()}function x1(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function XL(n){const t=x1(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:TS(i.substr(o.length+1))}}else{const[o,u]=i.split(":");return{host:o,port:TS(u)}}}function TS(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function JL(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return yo("not implemented")}_getIdTokenResponse(t){return yo("not implemented")}_linkToIdToken(t,e){return yo("not implemented")}_getReauthenticationResolver(t){return yo("not implemented")}}async function t2(n,t){return il(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(n,t){return ud(n,"POST","/v1/accounts:signInWithPassword",nl(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n2(n,t){return ud(n,"POST","/v1/accounts:signInWithEmailLink",nl(n,t))}async function i2(n,t){return ud(n,"POST","/v1/accounts:signInWithEmailLink",nl(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf extends y0{constructor(t,e,i,s=null){super("password",i),this._email=t,this._password=e,this._tenantId=s}static _fromEmailAndPassword(t,e){return new Bf(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new Bf(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cv(t,e,"signInWithPassword",e2);case"emailLink":return n2(t,{email:this._email,oobCode:this._password});default:rr(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cv(t,i,"signUpPassword",t2);case"emailLink":return i2(t,{idToken:e,email:this._email,oobCode:this._password});default:rr(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bc(n,t){return ud(n,"POST","/v1/accounts:signInWithIdp",nl(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2="http://localhost";class eu extends y0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new eu(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):rr("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s}=e,o=d0(e,["providerId","signInMethod"]);if(!i||!s)return null;const u=new eu(i,s);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(t){const e=this.buildRequest();return bc(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,bc(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,bc(t,e)}buildRequest(){const t={requestUri:s2,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Wc(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function o2(n){const t=rf(of(n)).link,e=t?rf(of(t)).deep_link_id:null,i=rf(of(n)).deep_link_id;return(i?rf(of(i)).link:null)||i||e||t||n}class v0{constructor(t){var e,i,s,o,u,h;const d=rf(of(t)),m=(e=d.apiKey)!==null&&e!==void 0?e:null,v=(i=d.oobCode)!==null&&i!==void 0?i:null,T=r2((s=d.mode)!==null&&s!==void 0?s:null);Ut(m&&v&&T,"argument-error"),this.apiKey=m,this.operation=T,this.code=v,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(u=d.lang)!==null&&u!==void 0?u:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(t){const e=o2(t);try{return new v0(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(){this.providerId=Yc.PROVIDER_ID}static credential(t,e){return Bf._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=v0.parseLink(e);return Ut(i,"argument-error"),Bf._fromEmailAndCode(t,i.code,i.tenantId)}}Yc.PROVIDER_ID="password";Yc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd extends C1{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma extends cd{constructor(){super("facebook.com")}static credential(t){return eu._fromParams({providerId:Ma.PROVIDER_ID,signInMethod:Ma.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ma.credentialFromTaggedObject(t)}static credentialFromError(t){return Ma.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ma.credential(t.oauthAccessToken)}catch{return null}}}Ma.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ma.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa extends cd{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return eu._fromParams({providerId:Oa.PROVIDER_ID,signInMethod:Oa.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Oa.credentialFromTaggedObject(t)}static credentialFromError(t){return Oa.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Oa.credential(e,i)}catch{return null}}}Oa.GOOGLE_SIGN_IN_METHOD="google.com";Oa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka extends cd{constructor(){super("github.com")}static credential(t){return eu._fromParams({providerId:ka.PROVIDER_ID,signInMethod:ka.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ka.credentialFromTaggedObject(t)}static credentialFromError(t){return ka.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ka.credential(t.oauthAccessToken)}catch{return null}}}ka.GITHUB_SIGN_IN_METHOD="github.com";ka.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da extends cd{constructor(){super("twitter.com")}static credential(t,e){return eu._fromParams({providerId:Da.PROVIDER_ID,signInMethod:Da.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Da.credentialFromTaggedObject(t)}static credentialFromError(t){return Da.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Da.credential(e,i)}catch{return null}}}Da.TWITTER_SIGN_IN_METHOD="twitter.com";Da.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a2(n,t){return ud(n,"POST","/v1/accounts:signUp",nl(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,s=!1){const o=await Xs._fromIdTokenResponse(t,i,s),u=wS(i);return new nu({user:o,providerId:u,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const s=wS(i);return new nu({user:t,providerId:s,_tokenResponse:i,operationType:e})}}function wS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm extends Oo{constructor(t,e,i,s){var o;super(e.code,e.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Tm.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,s){return new Tm(t,e,i,s)}}function A1(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Tm._fromErrorAndOperation(n,o,t,i):o})}async function l2(n,t,e=!1){const i=await zf(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return nu._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(n,t,e=!1){const{auth:i}=n;if(ss(i.app))return Promise.reject(To(i));const s="reauthenticate";try{const o=await zf(n,A1(i,s,t,n),e);Ut(o.idToken,i,"internal-error");const u=g0(o.idToken);Ut(u,i,"internal-error");const{sub:h}=u;return Ut(n.uid===h,i,"user-mismatch"),nu._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&rr(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I1(n,t,e=!1){if(ss(n.app))return Promise.reject(To(n));const i="signIn",s=await A1(n,i,t),o=await nu._fromIdTokenResponse(n,i,s);return e||await n._updateCurrentUser(o.user),o}async function c2(n,t){return I1(du(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R1(n){const t=du(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function h2(n,t,e){if(ss(n.app))return Promise.reject(To(n));const i=du(n),u=await cv(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",a2).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&R1(n),d}),h=await nu._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(h.user),h}function f2(n,t,e){return ss(n.app)?Promise.reject(To(n)):c2(Kn(n),Yc.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&R1(n),i})}function d2(n,t,e,i){return Kn(n).onIdTokenChanged(t,e,i)}function p2(n,t,e){return Kn(n).beforeAuthStateChanged(t,e)}const wm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(wm,"1"),this.storage.removeItem(wm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=1e3,g2=10;class M1 extends P1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=E1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),s=this.localCache[e];i!==s&&t(e,s,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((u,h,d)=>{this.notifyListeners(u,d)});return}const i=t.key;e?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(i);!e&&this.localCache[i]===u||this.notifyListeners(i,u)},o=this.storage.getItem(i);NL()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,g2):s()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},m2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}M1.type="LOCAL";const _2=M1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1 extends P1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}O1.type="SESSION";const k1=O1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(s=>s.isListeningto(t));if(e)return e;const i=new fg(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:s,data:o}=e.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(u).map(async m=>m(e.origin,o)),d=await y2(h);e.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,u;return new Promise((h,d)=>{const m=b0("",20);s.port1.start();const v=setTimeout(()=>{d(new Error("unsupported_event"))},i);u={messageChannel:s,onMessage(T){const w=T;if(w.data.eventId===m)switch(w.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(w.data.response);break;default:clearTimeout(v),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:t,eventId:m,data:e},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(){return window}function b2(n){Dr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(){return typeof Dr().WorkerGlobalScope<"u"&&typeof Dr().importScripts=="function"}async function E2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function T2(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function w2(){return D1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="firebaseLocalStorageDb",S2=1,Sm="firebaseLocalStorage",L1="fbase_key";class hd{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function dg(n,t){return n.transaction([Sm],t?"readwrite":"readonly").objectStore(Sm)}function x2(){const n=indexedDB.deleteDatabase(N1);return new hd(n).toPromise()}function hv(){const n=indexedDB.open(N1,S2);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Sm,{keyPath:L1})}catch(s){e(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Sm)?t(i):(i.close(),await x2(),t(await hv()))})})}async function SS(n,t,e){const i=dg(n,!0).put({[L1]:t,value:e});return new hd(i).toPromise()}async function C2(n,t){const e=dg(n,!1).get(t),i=await new hd(e).toPromise();return i===void 0?null:i.value}function xS(n,t){const e=dg(n,!0).delete(t);return new hd(e).toPromise()}const A2=800,I2=3;class V1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hv(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>I2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return D1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fg._getInstance(w2()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await E2(),!this.activeServiceWorker)return;this.sender=new v2(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((e=i[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||T2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await hv();return await SS(t,wm,"1"),await xS(t,wm),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>SS(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>C2(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>xS(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const o=dg(s,!1).getAll();return new hd(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),e.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),e.push(s));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}V1.type="LOCAL";const R2=V1;new ld(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(n,t){return t?vo(t):(Ut(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0 extends y0{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return bc(t,this._buildIdpRequest())}_linkToIdToken(t,e){return bc(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return bc(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function M2(n){return I1(n.auth,new E0(n),n.bypassAuthState)}function O2(n){const{auth:t,user:e}=n;return Ut(e,t,"internal-error"),u2(e,new E0(n),n.bypassAuthState)}async function k2(n){const{auth:t,user:e}=n;return Ut(e,t,"internal-error"),l2(e,new E0(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(t,e,i,s,o=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:s,tenantId:o,error:u,type:h}=t;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:e,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return M2;case"linkViaPopup":case"linkViaRedirect":return k2;case"reauthViaPopup":case"reauthViaRedirect":return O2;default:rr(this.auth,"internal-error")}}resolve(t){Io(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Io(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=new ld(2e3,1e4);class mc extends z1{constructor(t,e,i,s,o){super(t,e,s,o),this.provider=i,this.authWindow=null,this.pollId=null,mc.currentPopupAction&&mc.currentPopupAction.cancel(),mc.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ut(t,this.auth,"internal-error"),t}async onExecution(){Io(this.filter.length===1,"Popup operations only handle one event");const t=b0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(kr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(kr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mc.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if(!((i=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,D2.get())};t()}}mc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="pendingRedirect",tm=new Map;class L2 extends z1{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=tm.get(this.auth._key());if(!t){try{const i=await V2(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}tm.set(this.auth._key(),t)}return this.bypassAuthState||tm.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function V2(n,t){const e=U2(t),i=B2(n);if(!await i._isAvailable())return!1;const s=await i._get(e)==="true";return await i._remove(e),s}function z2(n,t){tm.set(n._key(),t)}function B2(n){return vo(n._redirectPersistence)}function U2(n){return Jp(N2,n.config.apiKey,n.name)}async function F2(n,t,e=!1){if(ss(n.app))return Promise.reject(To(n));const i=du(n),s=P2(i,t),u=await new L2(i,s,e).execute();return u&&!e&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,t)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=10*60*1e3;class j2{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!q2(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!B1(t)){const s=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(kr(this.auth,s))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=H2&&this.cachedEventUids.clear(),this.cachedEventUids.has(CS(t))}saveEventToCache(t){this.cachedEventUids.add(CS(t)),this.lastProcessedEventTime=Date.now()}}function CS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function B1({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function q2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return B1(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G2(n,t={}){return il(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Y2=/^https?/;async function Z2(n){if(n.config.emulator)return;const{authorizedDomains:t}=await G2(n);for(const e of t)try{if(K2(e))return}catch{}rr(n,"unauthorized-domain")}function K2(n){const t=lv(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&u.hostname===i}if(!Y2.test(e))return!1;if(W2.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=new ld(3e4,6e4);function AS(){const n=Dr().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function Q2(n){return new Promise((t,e)=>{var i,s,o;function u(){AS(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{AS(),e(kr(n,"network-request-failed"))},timeout:$2.get()})}if(!((s=(i=Dr().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)t(gapi.iframes.getContext());else if(!((o=Dr().gapi)===null||o===void 0)&&o.load)u();else{const h=qL("iframefcb");return Dr()[h]=()=>{gapi.load?u():e(kr(n,"network-request-failed"))},w1(`${jL()}?onload=${h}`).catch(d=>e(d))}}).catch(t=>{throw em=null,t})}let em=null;function X2(n){return em=em||Q2(n),em}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=new ld(5e3,15e3),tV="__/auth/iframe",eV="emulator/auth/iframe",nV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sV(n){const t=n.config;Ut(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?m0(t,eV):`https://${n.config.authDomain}/${tV}`,i={apiKey:t.apiKey,appName:n.name,v:fu},s=iV.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${e}?${Wc(i).slice(1)}`}async function rV(n){const t=await X2(n),e=Dr().gapi;return Ut(e,n,"internal-error"),t.open({where:document.body,url:sV(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nV,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const u=kr(n,"network-request-failed"),h=Dr().setTimeout(()=>{o(u)},J2.get());function d(){Dr().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aV=500,lV=600,uV="_blank",cV="http://localhost";class IS{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hV(n,t,e,i=aV,s=lV){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},oV),{width:i.toString(),height:s.toString(),top:o,left:u}),m=di().toLowerCase();e&&(h=g1(m)?uV:e),p1(m)&&(t=t||cV,d.scrollbars="yes");const v=Object.entries(d).reduce((w,[A,R])=>`${w}${A}=${R},`,"");if(DL(m)&&h!=="_self")return fV(t||"",h),new IS(null);const T=window.open(t||"",h,v);Ut(T,n,"popup-blocked");try{T.focus()}catch{}return new IS(T)}function fV(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV="__/auth/handler",pV="emulator/auth/handler",mV=encodeURIComponent("fac");async function RS(n,t,e,i,s,o){Ut(n.config.authDomain,n,"auth-domain-config-required"),Ut(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:fu,eventId:s};if(t instanceof C1){t.setDefaultLanguage(n.languageCode),u.providerId=t.providerId||"",nv(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(const[v,T]of Object.entries({}))u[v]=T}if(t instanceof cd){const v=t.getScopes().filter(T=>T!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const d=await n._getAppCheckToken(),m=d?`#${mV}=${encodeURIComponent(d)}`:"";return`${gV(n)}?${Wc(h).slice(1)}${m}`}function gV({config:n}){return n.emulator?m0(n,pV):`https://${n.authDomain}/${dV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="webStorageSupport";class _V{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=k1,this._completeRedirectFn=F2,this._overrideRedirectResult=z2}async _openPopup(t,e,i,s){var o;Io((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await RS(t,e,i,lv(),s);return hV(t,u,b0())}async _openRedirect(t,e,i,s){await this._originValidation(t);const o=await RS(t,e,i,lv(),s);return b2(o),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:s,promise:o}=this.eventManagers[e];return s?Promise.resolve(s):(Io(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await rV(t),i=new j2(t);return e.register("authEvent",s=>(Ut(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Oy,{type:Oy},s=>{var o;const u=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Oy];u!==void 0&&e(!!u),rr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Z2(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return E1()||m1()||_0()}}const yV=_V;var PS="@firebase/auth",MS="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EV(n){tu(new qa("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=i.options;Ut(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:T1(n)},m=new UL(i,s,o,d);return $L(m,e),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),tu(new qa("auth-internal",t=>{const e=du(t.getProvider("auth").getImmediate());return(i=>new vV(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Or(PS,MS,bV(n)),Or(PS,MS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=5*60,wV=$A("authIdTokenMaxAge")||TV;let OS=null;const SV=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>wV)return;const s=e==null?void 0:e.token;OS!==s&&(OS=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function xV(n=f0()){const t=cg(n,"auth");if(t.isInitialized())return t.getImmediate();const e=KL(n,{popupRedirectResolver:yV,persistence:[R2,_2,k1]}),i=$A("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const u=SV(o.toString());p2(e,u,()=>u(e.currentUser)),d2(e,h=>u(h))}}const s=YA("auth");return s&&QL(e,`http://${s}`),e}function CV(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}FL({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=s=>{const o=kr("internal-error");o.customData=s,e(o)},i.type="text/javascript",i.charset="UTF-8",CV().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EV("Browser");var kS={};const DS="@firebase/database",NS="1.0.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U1="";function AV(n){U1=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),zn(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:Lf(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return ko(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new IV(t)}}catch{}return new RV},Kl=F1("localStorage"),PV=F1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new ug("@firebase/database"),MV=function(){let n=1;return function(){return n++}}(),H1=function(n){const t=iN(n),e=new JD;e.update(t);const i=e.digest();return o0.encodeByteArray(i)},fd=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=fd.apply(null,i):typeof i=="object"?t+=zn(i):t+=i,t+=" "}return t};let bf=null,LS=!0;const OV=function(n,t){St(!0,"Can't turn on custom loggers persistently."),Ec.logLevel=ae.VERBOSE,bf=Ec.log.bind(Ec)},ui=function(...n){if(LS===!0&&(LS=!1,bf===null&&PV.get("logging_enabled")===!0&&OV()),bf){const t=fd.apply(null,n);bf(t)}},dd=function(n){return function(...t){ui(n,...t)}},fv=function(...n){const t="FIREBASE INTERNAL ERROR: "+fd(...n);Ec.error(t)},Ro=function(...n){const t=`FIREBASE FATAL ERROR: ${fd(...n)}`;throw Ec.error(t),new Error(t)},rs=function(...n){const t="FIREBASE WARNING: "+fd(...n);Ec.warn(t)},kV=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&rs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},j1=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},DV=function(n){if(document.readyState==="complete")n();else{let t=!1;const e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},Ic="[MIN_NAME]",iu="[MAX_NAME]",Zc=function(n,t){if(n===t)return 0;if(n===Ic||t===iu)return-1;if(t===Ic||n===iu)return 1;{const e=VS(n),i=VS(t);return e!==null?i!==null?e-i===0?n.length-t.length:e-i:-1:i!==null?1:n<t?-1:1}},NV=function(n,t){return n===t?0:n<t?-1:1},Kh=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+zn(t))},T0=function(n){if(typeof n!="object"||n===null)return zn(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)i!==0&&(e+=","),e+=zn(t[i]),e+=":",e+=T0(n[t[i]]);return e+="}",e},q1=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let s=0;s<e;s+=t)s+t>e?i.push(n.substring(s,e)):i.push(n.substring(s,s+t));return i};function Di(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const G1=function(n){St(!j1(n),"Invalid JSON number");const t=11,e=52,i=(1<<t-1)-1;let s,o,u,h,d;n===0?(o=0,u=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=h+i,u=Math.round(n*Math.pow(2,e-h)-Math.pow(2,e))):(o=0,u=Math.round(n/Math.pow(2,1-i-e))));const m=[];for(d=e;d;d-=1)m.push(u%2?1:0),u=Math.floor(u/2);for(d=t;d;d-=1)m.push(o%2?1:0),o=Math.floor(o/2);m.push(s?1:0),m.reverse();const v=m.join("");let T="";for(d=0;d<64;d+=8){let w=parseInt(v.substr(d,8),2).toString(16);w.length===1&&(w="0"+w),T=T+w}return T.toLowerCase()},LV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},VV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function zV(n,t){let e="Unknown Error";n==="too_big"?e="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?e="Client doesn't have permission to access the desired data.":n==="unavailable"&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}const BV=new RegExp("^-?(0*)\\d{1,10}$"),UV=-2147483648,FV=2147483647,VS=function(n){if(BV.test(n)){const t=Number(n);if(t>=UV&&t<=FV)return t}return null},pd=function(n){try{n()}catch(t){setTimeout(()=>{const e=t.stack||"";throw rs("Exception was thrown by user callback.",e),t},Math.floor(0))}},HV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ef=function(n,t){const e=setTimeout(n,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(t,e){this.appCheckProvider=e,this.appName=t.name,ss(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=e==null?void 0:e.getImmediate({optional:!0}),this.appCheck||e==null||e.get().then(i=>this.appCheck=i)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;(e=this.appCheckProvider)===null||e===void 0||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){rs(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(ui("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rs(t)}}class nm{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}nm.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="5",W1="v",Y1="s",Z1="r",K1="f",$1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Q1="ls",X1="p",dv="ac",J1="websocket",tI="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(t,e,i,s,o=!1,u="",h=!1,d=!1,m=null){this.secure=e,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=d,this.emulatorOptions=m,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Kl.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Kl.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}}function GV(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function nI(n,t,e){St(typeof t=="string","typeof type must == string"),St(typeof e=="object","typeof params must == object");let i;if(t===J1)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(t===tI)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);GV(n)&&(e.ns=n.namespace);const s=[];return Di(e,(o,u)=>{s.push(o+"="+u)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(){this.counters_={}}incrementCounter(t,e=1){ko(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return OD(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky={},Dy={};function S0(n){const t=n.toString();return ky[t]||(ky[t]=new WV),ky[t]}function YV(n,t){const e=n.toString();return Dy[e]||(Dy[e]=t()),Dy[e]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&pd(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="start",KV="close",$V="pLPCommand",QV="pRTLPCB",iI="id",sI="pw",rI="ser",XV="cb",JV="seg",tz="ts",ez="d",nz="dframe",oI=1870,aI=30,iz=oI-aI,sz=25e3,rz=3e4;class gc{constructor(t,e,i,s,o,u,h){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=dd(t),this.stats_=S0(e),this.urlFn=d=>(this.appCheckToken&&(d[dv]=this.appCheckToken),nI(e,tI,d))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new ZV(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(rz)),DV(()=>{if(this.isClosed_)return;this.scriptTagHolder=new x0((...o)=>{const[u,h,d,m,v]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===zS)this.id=h,this.password=d;else if(u===KV)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...o)=>{const[u,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const i={};i[zS]="t",i[rI]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[XV]=this.scriptTagHolder.uniqueCallbackIdentifier),i[W1]=w0,this.transportSessionId&&(i[Y1]=this.transportSessionId),this.lastSessionId&&(i[Q1]=this.lastSessionId),this.applicationId&&(i[X1]=this.applicationId),this.appCheckToken&&(i[dv]=this.appCheckToken),typeof location<"u"&&location.hostname&&$1.test(location.hostname)&&(i[Z1]=K1);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){gc.forceAllow_=!0}static forceDisallow(){gc.forceDisallow_=!0}static isAvailable(){return gc.forceAllow_?!0:!gc.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!LV()&&!VV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=zn(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=GA(e),s=q1(i,iz);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(t,e){this.myDisconnFrame=document.createElement("iframe");const i={};i[nz]="t",i[iI]=t,i[sI]=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=zn(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class x0{constructor(t,e,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=MV(),window[$V+this.uniqueCallbackIdentifier]=t,window[QV+this.uniqueCallbackIdentifier]=e,this.myIFrame=x0.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){ui("frame writing exception"),h.stack&&ui(h.stack),ui(h)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||ui("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[iI]=this.myID,t[sI]=this.myPW,t[rI]=this.currentSerial;let e=this.urlFn(t),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+aI+i.length<=oI;){const u=this.pendingSegs.shift();i=i+"&"+JV+s+"="+u.seg+"&"+tz+s+"="+u.ts+"&"+ez+s+"="+u.d,s++}return e=e+i,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},s=setTimeout(i,Math.floor(sz)),o=()=>{clearTimeout(s),i()};this.addTag(t,o)}addTag(t,e){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{ui("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oz=16384,az=45e3;let xm=null;typeof MozWebSocket<"u"?xm=MozWebSocket:typeof WebSocket<"u"&&(xm=WebSocket);class Qs{constructor(t,e,i,s,o,u,h){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=dd(this.connId),this.stats_=S0(e),this.connURL=Qs.connectionURL_(e,u,h,s,i),this.nodeAdmin=e.nodeAdmin}static connectionURL_(t,e,i,s,o){const u={};return u[W1]=w0,typeof location<"u"&&location.hostname&&$1.test(location.hostname)&&(u[Z1]=K1),e&&(u[Y1]=e),i&&(u[Q1]=i),s&&(u[dv]=s),o&&(u[X1]=o),nI(t,J1,u)}open(t,e){this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Kl.set("previous_websocket_failure",!0);try{let i;qD(),this.mySock=new xm(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Qs.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const e=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(e);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&xm!==null&&!Qs.forceDisallow_}static previouslyFailed(){return Kl.isInMemoryStorage||Kl.get("previous_websocket_failure")===!0}markConnectionHealthy(){Kl.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const i=Lf(e);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(St(this.frames===null,"We already have a frame buffer"),t.length<=6){const e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(e);else{const i=this.extractFrameCount_(e);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const e=zn(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=q1(e,oz);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(az))}sendString_(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Qs.responsesRequiredToBeHealthy=2;Qs.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{static get ALL_TRANSPORTS(){return[gc,Qs]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const e=Qs&&Qs.isAvailable();let i=e&&!Qs.previouslyFailed();if(t.webSocketOnly&&(e||rs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Qs];else{const s=this.transports_=[];for(const o of Uf.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);Uf.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Uf.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lz=6e4,uz=5e3,cz=10*1024,hz=100*1024,Ny="t",BS="d",fz="s",US="r",dz="e",FS="o",HS="a",jS="n",qS="p",pz="h";class mz{constructor(t,e,i,s,o,u,h,d,m,v){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=d,this.onKill_=m,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=dd("c:"+this.id+":"),this.transportManager_=new Uf(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=Ef(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>hz?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>cz?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){const e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Ny in t){const e=t[Ny];e===HS?this.upgradeIfSecondaryHealthy_():e===US?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===FS&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=Kh("t",t),i=Kh("d",t);if(e==="c")this.onSecondaryControl_(i);else if(e==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:qS,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:HS,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:jS,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=Kh("t",t),i=Kh("d",t);e==="c"?this.onControl_(i):e==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=Kh(Ny,t);if(BS in t){const i=t[BS];if(e===pz){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(e===jS){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===fz?this.onConnectionShutdown_(i):e===US?this.onReset_(i):e===dz?fv("Server Error: "+i):e===FS?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):fv("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),w0!==i&&rs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),Ef(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(lz))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ef(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(uz))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:qS,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Kl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{put(t,e,i,s){}merge(t,e,i,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(t){this.allowedEvents_=t,this.listeners_={},St(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const s=this.getInitialEvent(t);s&&e.apply(i,s)}off(t,e,i){this.validateEventType_(t);const s=this.listeners_[t]||[];for(let o=0;o<s.length;o++)if(s[o].callback===e&&(!i||i===s[o].context)){s.splice(o,1);return}}validateEventType_(t){St(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm extends uI{static getInstance(){return new Cm}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!c0()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return St(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=32,WS=768;class Ve{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}}function Ee(){return new Ve("")}function le(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ga(n){return n.pieces_.length-n.pieceNum_}function qe(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Ve(n.pieces_,t)}function cI(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function gz(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)n.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}function hI(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function fI(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Ve(t,0)}function Sn(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Ve)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&e.push(i[s])}return new Ve(e,0)}function ue(n){return n.pieceNum_>=n.pieces_.length}function Oi(n,t){const e=le(n),i=le(t);if(e===null)return t;if(e===i)return Oi(qe(n),qe(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function C0(n,t){if(Ga(n)!==Ga(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function Js(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(Ga(n)>Ga(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class _z{constructor(t,e){this.errorPrefix_=e,this.parts_=hI(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=lg(this.parts_[i]);dI(this)}}function yz(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=lg(t),dI(n)}function vz(n){const t=n.parts_.pop();n.byteLength_-=lg(t),n.parts_.length>0&&(n.byteLength_-=1)}function dI(n){if(n.byteLength_>WS)throw new Error(n.errorPrefix_+"has a key path longer than "+WS+" bytes ("+n.byteLength_+").");if(n.parts_.length>GS)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+GS+") or object contains a cycle "+Wl(n))}function Wl(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0 extends uI{static getInstance(){return new A0}constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(t){return St(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=1e3,bz=60*5*1e3,YS=30*1e3,Ez=1.3,Tz=3e4,wz="server_kill",ZS=3;class wo extends lI{constructor(t,e,i,s,o,u,h,d){if(super(),this.repoInfo_=t,this.applicationId_=e,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=u,this.appCheckTokenProvider_=h,this.authOverride_=d,this.id=wo.nextPersistentConnectionId_++,this.log_=dd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$h,this.maxReconnectDelay_=bz,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");A0.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Cm.getInstance().on("online",this.onOnline_,this)}sendRequest(t,e,i){const s=++this.requestNumber_,o={r:s,a:t,b:e};this.log_(zn(o)),St(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const e=new a0,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:u=>{const h=u.d;u.s==="ok"?e.resolve(h):e.reject(h)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),e.promise}listen(t,e,i,s){this.initConnection_();const o=t._queryIdentifier,u=t._path.toString();this.log_("Listen called for "+u+" "+o),this.listens.has(u)||this.listens.set(u,new Map),St(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),St(!this.listens.get(u).has(o),"listen() called twice for same path/queryId.");const h={onComplete:s,hashFn:e,query:t,tag:i};this.listens.get(u).set(o,h),this.connected_&&this.sendListen_(h)}sendGet_(t){const e=this.outstandingGets_[t];this.sendRequest("g",e.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),e.onComplete&&e.onComplete(i)})}sendListen_(t){const e=t.query,i=e._path.toString(),s=e._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i},u="q";t.tag&&(o.q=e._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(u,o,h=>{const d=h.d,m=h.s;wo.warnOnListenWarnings_(d,e),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",h),m!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(m,d))})}static warnOnListenWarnings_(t,e){if(t&&typeof t=="object"&&ko(t,"w")){const i=Ac(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+e._queryParams.getIndex().toString()+'"',o=e._path.toString();rs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||XD(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=YS)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,e=QD(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(e,i,s=>{const o=s.s,u=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const e=t.s,i=t.d||"error";e==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(e,i)})}unlisten(t,e){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),St(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,e)}sendUnlisten_(t,e,i,s){this.log_("Unlisten on "+t+" for "+e);const o={p:t},u="n";s&&(o.q=i,o.t=s),this.sendRequest(u,o)}onDisconnectPut(t,e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:i})}onDisconnectMerge(t,e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:i})}onDisconnectCancel(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})}sendOnDisconnect_(t,e,i,s){const o={p:e,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,u=>{s&&setTimeout(()=>{s(u.s,u.d)},Math.floor(0))})}put(t,e,i,s){this.putInternal("p",t,e,i,s)}merge(t,e,i,s){this.putInternal("m",t,e,i,s)}putInternal(t,e,i,s,o){this.initConnection_();const u={p:e,d:i};o!==void 0&&(u.h=o),this.outstandingPuts_.push({action:t,request:u,onComplete:s}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+e)}sendPut_(t){const e=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(e,i,o=>{this.log_(e+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+zn(t));const e=t.r,i=this.requestCBHash_[e];i&&(delete this.requestCBHash_[e],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,e){this.log_("handleServerMessage",t,e),t==="d"?this.onDataUpdate_(e.p,e.d,!1,e.t):t==="m"?this.onDataUpdate_(e.p,e.d,!0,e.t):t==="c"?this.onListenRevoked_(e.p,e.q):t==="ac"?this.onAuthRevoked_(e.s,e.d):t==="apc"?this.onAppCheckRevoked_(e.s,e.d):t==="sd"?this.onSecurityDebugPacket_(e):fv("Unrecognized action received from server: "+zn(t)+`
Are you using the latest client?`)}onReady_(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){St(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$h,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=$h,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Tz&&(this.reconnectDelay_=$h),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Ez)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+wo.nextConnectionId_++,o=this.lastSessionId;let u=!1,h=null;const d=function(){h?h.close():(u=!0,i())},m=function(T){St(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(T)};this.realtime_={close:d,sendRequest:m};const v=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[T,w]=await Promise.all([this.authTokenProvider_.getToken(v),this.appCheckTokenProvider_.getToken(v)]);u?ui("getToken() completed but was canceled"):(ui("getToken() completed. Creating connection."),this.authToken_=T&&T.accessToken,this.appCheckToken_=w&&w.token,h=new mz(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,e,i,A=>{rs(A+" ("+this.repoInfo_.toString()+")"),this.interrupt(wz)},o))}catch(T){this.log_("Failed to get token: "+T),u||(this.repoInfo_.nodeAdmin&&rs(T),d())}}}interrupt(t){ui("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ui("Resuming connection for reason: "+t),delete this.interruptReasons_[t],nv(this.interruptReasons_)&&(this.reconnectDelay_=$h,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const e=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,e){let i;e?i=e.map(o=>T0(o)).join("$"):i="default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,e){const i=new Ve(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(e),o.delete(e),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,e){ui("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ZS&&(this.reconnectDelay_=YS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,e){ui("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ZS&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const e of t.values())this.sendListen_(e);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let e="js";t["sdk."+e+"."+U1.replace(/\./g,"-")]=1,c0()?t["framework.cordova"]=1:XA()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Cm.getInstance().currentlyOnline();return nv(this.interruptReasons_)&&t}}wo.nextPersistentConnectionId_=0;wo.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new se(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new se(Ic,t),s=new se(Ic,e);return this.compare(i,s)!==0}minPost(){return se.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ip;class pI extends pg{static get __EMPTY_NODE(){return Ip}static set __EMPTY_NODE(t){Ip=t}compare(t,e){return Zc(t.name,e.name)}isDefinedOn(t){throw Gc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return se.MIN}maxPost(){return new se(iu,Ip)}makePost(t,e){return St(typeof t=="string","KeyIndex indexValue must always be a string."),new se(t,Ip)}toString(){return".key"}}const Tc=new pI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rp=class{constructor(t,e,i,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let u=1;for(;!t.isEmpty();)if(t=t,u=e?i(t.key,e):1,s&&(u*=-1),u<0)this.isReverse_?t=t.left:t=t.right;else if(u===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},is=class af{constructor(t,e,i,s,o){this.key=t,this.value=e,this.color=i??af.RED,this.left=s??Mr.EMPTY_NODE,this.right=o??Mr.EMPTY_NODE}copy(t,e,i,s,o){return new af(t??this.key,e??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,e,i),null):o===0?s=s.copy(null,e,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Mr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,e){let i,s;if(i=this,e(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),e(t,i.key)===0){if(i.right.isEmpty())return Mr.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,af.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,af.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}};is.RED=!0;is.BLACK=!1;class Sz{copy(t,e,i,s,o){return this}insert(t,e,i){return new is(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Mr=class im{constructor(t,e=im.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new im(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,is.BLACK,null,null))}remove(t){return new im(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,is.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),e===0)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,s=null;for(;!i.isEmpty();)if(e=this.comparator_(t,i.key),e===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else e<0?i=i.left:e>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Rp(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new Rp(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new Rp(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new Rp(this.root_,null,this.comparator_,!0,t)}};Mr.EMPTY_NODE=new Sz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xz(n,t){return Zc(n.name,t.name)}function I0(n,t){return Zc(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pv;function Cz(n){pv=n}const mI=function(n){return typeof n=="number"?"number:"+G1(n):"string:"+n},gI=function(n){if(n.isLeafNode()){const t=n.val();St(typeof t=="string"||typeof t=="number"||typeof t=="object"&&ko(t,".sv"),"Priority must be a string or number.")}else St(n===pv||n.isEmpty(),"priority of unexpected type.");St(n===pv||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KS;class Ln{static set __childrenNodeConstructor(t){KS=t}static get __childrenNodeConstructor(){return KS}constructor(t,e=Ln.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=e,this.lazyHash_=null,St(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),gI(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Ln(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Ln.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ue(t)?this:le(t)===".priority"?this.priorityNode_:Ln.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,e){return null}updateImmediateChild(t,e){return t===".priority"?this.updatePriority(e):e.isEmpty()&&t!==".priority"?this:Ln.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)}updateChild(t,e){const i=le(t);return i===null?e:e.isEmpty()&&i!==".priority"?this:(St(i!==".priority"||Ga(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Ln.__childrenNodeConstructor.EMPTY_NODE.updateChild(qe(t),e)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,e){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+mI(this.priorityNode_.val())+":");const e=typeof this.value_;t+=e+":",e==="number"?t+=G1(this.value_):t+=this.value_,this.lazyHash_=H1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Ln.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Ln.__childrenNodeConstructor?-1:(St(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const e=typeof t.value_,i=typeof this.value_,s=Ln.VALUE_TYPE_ORDER.indexOf(e),o=Ln.VALUE_TYPE_ORDER.indexOf(i);return St(s>=0,"Unknown leaf type: "+e),St(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}else return!1}}Ln.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _I,yI;function Az(n){_I=n}function Iz(n){yI=n}class Rz extends pg{compare(t,e){const i=t.node.getPriority(),s=e.node.getPriority(),o=i.compareTo(s);return o===0?Zc(t.name,e.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return se.MIN}maxPost(){return new se(iu,new Ln("[PRIORITY-POST]",yI))}makePost(t,e){const i=_I(t);return new se(e,new Ln("[PRIORITY-POST]",i))}toString(){return".priority"}}const an=new Rz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz=Math.log(2);class Mz{constructor(t){const e=o=>parseInt(Math.log(o)/Pz,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;const s=i(this.count);this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Am=function(n,t,e,i){n.sort(t);const s=function(d,m){const v=m-d;let T,w;if(v===0)return null;if(v===1)return T=n[d],w=e?e(T):T,new is(w,T.node,is.BLACK,null,null);{const A=parseInt(v/2,10)+d,R=s(d,A),M=s(A+1,m);return T=n[A],w=e?e(T):T,new is(w,T.node,is.BLACK,R,M)}},o=function(d){let m=null,v=null,T=n.length;const w=function(R,M){const k=T-R,U=T;T-=R;const Z=s(k+1,U),J=n[k],ut=e?e(J):J;A(new is(ut,J.node,M,null,Z))},A=function(R){m?(m.left=R,m=R):(v=R,m=R)};for(let R=0;R<d.count;++R){const M=d.nextBitIsOne(),k=Math.pow(2,d.count-(R+1));M?w(k,is.BLACK):(w(k,is.BLACK),w(k,is.RED))}return v},u=new Mz(n.length),h=o(u);return new Mr(i||t,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ly;const lc={};class bo{static get Default(){return St(lc&&an,"ChildrenNode.ts has not been loaded"),Ly=Ly||new bo({".priority":lc},{".priority":an}),Ly}constructor(t,e){this.indexes_=t,this.indexSet_=e}get(t){const e=Ac(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Mr?e:null}hasIndex(t){return ko(this.indexSet_,t.toString())}addIndex(t,e){St(t!==Tc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const o=e.getIterator(se.Wrap);let u=o.getNext();for(;u;)s=s||t.isDefinedOn(u.node),i.push(u),u=o.getNext();let h;s?h=Am(i,t.getCompare()):h=lc;const d=t.toString(),m=Object.assign({},this.indexSet_);m[d]=t;const v=Object.assign({},this.indexes_);return v[d]=h,new bo(v,m)}addToIndexes(t,e){const i=_m(this.indexes_,(s,o)=>{const u=Ac(this.indexSet_,o);if(St(u,"Missing index implementation for "+o),s===lc)if(u.isDefinedOn(t.node)){const h=[],d=e.getIterator(se.Wrap);let m=d.getNext();for(;m;)m.name!==t.name&&h.push(m),m=d.getNext();return h.push(t),Am(h,u.getCompare())}else return lc;else{const h=e.get(t.name);let d=s;return h&&(d=d.remove(new se(t.name,h))),d.insert(t,t.node)}});return new bo(i,this.indexSet_)}removeFromIndexes(t,e){const i=_m(this.indexes_,s=>{if(s===lc)return s;{const o=e.get(t.name);return o?s.remove(new se(t.name,o)):s}});return new bo(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh;class jt{static get EMPTY_NODE(){return Qh||(Qh=new jt(new Mr(I0),null,bo.Default))}constructor(t,e,i){this.children_=t,this.priorityNode_=e,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&gI(this.priorityNode_),this.children_.isEmpty()&&St(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Qh}updatePriority(t){return this.children_.isEmpty()?this:new jt(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const e=this.children_.get(t);return e===null?Qh:e}}getChild(t){const e=le(t);return e===null?this:this.getImmediateChild(e).getChild(qe(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,e){if(St(e,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(e);{const i=new se(t,e);let s,o;e.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,e),o=this.indexMap_.addToIndexes(i,this.children_));const u=s.isEmpty()?Qh:this.priorityNode_;return new jt(s,u,o)}}updateChild(t,e){const i=le(t);if(i===null)return e;{St(le(t)!==".priority"||Ga(t)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(qe(t),e);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const e={};let i=0,s=0,o=!0;if(this.forEachChild(an,(u,h)=>{e[u]=h.val(t),i++,o&&jt.INTEGER_REGEXP_.test(u)?s=Math.max(s,Number(u)):o=!1}),!t&&o&&s<2*i){const u=[];for(const h in e)u[h]=e[h];return u}else return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+mI(this.getPriority().val())+":"),this.forEachChild(an,(e,i)=>{const s=i.hash();s!==""&&(t+=":"+e+":"+s)}),this.lazyHash_=t===""?"":H1(t)}return this.lazyHash_}getPredecessorChildName(t,e,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new se(t,e));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const e=this.resolveIndex_(t);if(e){const i=e.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){const e=this.getFirstChildName(t);return e?new se(e,this.children_.get(e)):null}getLastChildName(t){const e=this.resolveIndex_(t);if(e){const i=e.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){const e=this.getLastChildName(t);return e?new se(e,this.children_.get(e)):null}forEachChild(t,e){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>e(s.name,s.node)):this.children_.inorderTraversal(e)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,e){const i=this.resolveIndex_(e);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,se.Wrap);let o=s.peek();for(;o!=null&&e.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,e){const i=this.resolveIndex_(e);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,se.Wrap);let o=s.peek();for(;o!=null&&e.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===md?-1:0}withIndex(t){if(t===Tc||this.indexMap_.hasIndex(t))return this;{const e=this.indexMap_.addIndex(t,this.children_);return new jt(this.children_,this.priorityNode_,e)}}isIndexed(t){return t===Tc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const e=t;if(this.getPriority().equals(e.getPriority()))if(this.children_.count()===e.children_.count()){const i=this.getIterator(an),s=e.getIterator(an);let o=i.getNext(),u=s.getNext();for(;o&&u;){if(o.name!==u.name||!o.node.equals(u.node))return!1;o=i.getNext(),u=s.getNext()}return o===null&&u===null}else return!1;else return!1}}resolveIndex_(t){return t===Tc?null:this.indexMap_.get(t.toString())}}jt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Oz extends jt{constructor(){super(new Mr(I0),jt.EMPTY_NODE,bo.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return jt.EMPTY_NODE}isEmpty(){return!1}}const md=new Oz;Object.defineProperties(se,{MIN:{value:new se(Ic,jt.EMPTY_NODE)},MAX:{value:new se(iu,md)}});pI.__EMPTY_NODE=jt.EMPTY_NODE;Ln.__childrenNodeConstructor=jt;Cz(md);Iz(md);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kz=!0;function ci(n,t=null){if(n===null)return jt.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(t=n[".priority"]),St(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const e=n;return new Ln(e,ci(t))}if(!(n instanceof Array)&&kz){const e=[];let i=!1;if(Di(n,(u,h)=>{if(u.substring(0,1)!=="."){const d=ci(h);d.isEmpty()||(i=i||!d.getPriority().isEmpty(),e.push(new se(u,d)))}}),e.length===0)return jt.EMPTY_NODE;const o=Am(e,xz,u=>u.name,I0);if(i){const u=Am(e,an.getCompare());return new jt(o,ci(t),new bo({".priority":u},{".priority":an}))}else return new jt(o,ci(t),bo.Default)}else{let e=jt.EMPTY_NODE;return Di(n,(i,s)=>{if(ko(n,i)&&i.substring(0,1)!=="."){const o=ci(s);(o.isLeafNode()||!o.isEmpty())&&(e=e.updateImmediateChild(i,o))}}),e.updatePriority(ci(t))}}Az(ci);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz extends pg{constructor(t){super(),this.indexPath_=t,St(!ue(t)&&le(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),s=this.extractChild(e.node),o=i.compareTo(s);return o===0?Zc(t.name,e.name):o}makePost(t,e){const i=ci(t),s=jt.EMPTY_NODE.updateChild(this.indexPath_,i);return new se(e,s)}maxPost(){const t=jt.EMPTY_NODE.updateChild(this.indexPath_,md);return new se(iu,t)}toString(){return hI(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz extends pg{compare(t,e){const i=t.node.compareTo(e.node);return i===0?Zc(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return se.MIN}maxPost(){return se.MAX}makePost(t,e){const i=ci(t);return new se(e,i)}toString(){return".value"}}const Lz=new Nz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(n){return{type:"value",snapshotNode:n}}function Rc(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function Ff(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function Hf(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}function Vz(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(t){this.index_=t}updateChild(t,e,i,s,o,u){St(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=t.getImmediateChild(e);return h.getChild(s).equals(i.getChild(s))&&h.isEmpty()===i.isEmpty()||(u!=null&&(i.isEmpty()?t.hasChild(e)?u.trackChildChange(Ff(e,h)):St(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(Rc(e,i)):u.trackChildChange(Hf(e,i,h))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return i!=null&&(t.isLeafNode()||t.forEachChild(an,(s,o)=>{e.hasChild(s)||i.trackChildChange(Ff(s,o))}),e.isLeafNode()||e.forEachChild(an,(s,o)=>{if(t.hasChild(s)){const u=t.getImmediateChild(s);u.equals(o)||i.trackChildChange(Hf(s,o,u))}else i.trackChildChange(Rc(s,o))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?jt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(t){this.indexedFilter_=new R0(t.getIndex()),this.index_=t.getIndex(),this.startPost_=jf.getStartPost_(t),this.endPost_=jf.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,s,o,u){return this.matches(new se(e,i))||(i=jt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,s,o,u)}updateFullNode(t,e,i){e.isLeafNode()&&(e=jt.EMPTY_NODE);let s=e.withIndex(this.index_);s=s.updatePriority(jt.EMPTY_NODE);const o=this;return e.forEachChild(an,(u,h)=>{o.matches(new se(u,h))||(s=s.updateImmediateChild(u,jt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,s,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zz{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new jf(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,s,o,u){return this.rangedFilter_.matches(new se(e,i))||(i=jt.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,s,o,u):this.fullLimitUpdateChild_(t,e,i,o,u)}updateFullNode(t,e,i){let s;if(e.isLeafNode()||e.isEmpty())s=jt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<e.numChildren()&&e.isIndexed(this.index_)){s=jt.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;o.hasNext()&&u<this.limit_;){const h=o.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))s=s.updateImmediateChild(h.name,h.node),u++;else break;else continue}}else{s=e.withIndex(this.index_),s=s.updatePriority(jt.EMPTY_NODE);let o;this.reverse_?o=s.getReverseIterator(this.index_):o=s.getIterator(this.index_);let u=0;for(;o.hasNext();){const h=o.getNext();u<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?u++:s=s.updateImmediateChild(h.name,jt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,s,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,s,o){let u;if(this.reverse_){const T=this.index_.getCompare();u=(w,A)=>T(A,w)}else u=this.index_.getCompare();const h=t;St(h.numChildren()===this.limit_,"");const d=new se(e,i),m=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),v=this.rangedFilter_.matches(d);if(h.hasChild(e)){const T=h.getImmediateChild(e);let w=s.getChildAfterChild(this.index_,m,this.reverse_);for(;w!=null&&(w.name===e||h.hasChild(w.name));)w=s.getChildAfterChild(this.index_,w,this.reverse_);const A=w==null?1:u(w,d);if(v&&!i.isEmpty()&&A>=0)return o!=null&&o.trackChildChange(Hf(e,i,T)),h.updateImmediateChild(e,i);{o!=null&&o.trackChildChange(Ff(e,T));const M=h.updateImmediateChild(e,jt.EMPTY_NODE);return w!=null&&this.rangedFilter_.matches(w)?(o!=null&&o.trackChildChange(Rc(w.name,w.node)),M.updateImmediateChild(w.name,w.node)):M}}else return i.isEmpty()?t:v&&u(m,d)>=0?(o!=null&&(o.trackChildChange(Ff(m.name,m.node)),o.trackChildChange(Rc(e,i))),h.updateImmediateChild(e,i).updateImmediateChild(m.name,jt.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=an}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return St(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return St(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ic}hasEnd(){return this.endSet_}getIndexEndValue(){return St(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return St(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:iu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return St(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===an}copy(){const t=new P0;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Bz(n){return n.loadsAllData()?new R0(n.getIndex()):n.hasLimit()?new zz(n):new jf(n)}function $S(n){const t={};if(n.isDefault())return t;let e;if(n.index_===an?e="$priority":n.index_===Lz?e="$value":n.index_===Tc?e="$key":(St(n.index_ instanceof Dz,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=zn(e),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";t[i]=zn(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+zn(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";t[i]=zn(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+zn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function QS(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;e===""&&(n.isViewFromLeft()?e="l":e="r"),t.vf=e}return n.index_!==an&&(t.i=n.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im extends lI{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(St(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,e,i,s){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=dd("p:rest:"),this.listens_={}}listen(t,e,i,s){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const u=Im.getListenId_(t,i),h={};this.listens_[u]=h;const d=$S(t._queryParams);this.restRequest_(o+".json",d,(m,v)=>{let T=v;if(m===404&&(T=null,m=null),m===null&&this.onDataUpdate_(o,T,!1,i),Ac(this.listens_,u)===h){let w;m?m===401?w="permission_denied":w="rest_error:"+m:w="ok",s(w,null)}})}unlisten(t,e){const i=Im.getListenId_(t,e);delete this.listens_[i]}get(t){const e=$S(t._queryParams),i=t._path.toString(),s=new a0;return this.restRequest_(i+".json",e,(o,u)=>{let h=u;o===404&&(h=null,o=null),o===null?(this.onDataUpdate_(i,h,!1,null),s.resolve(h)):s.reject(new Error(h))}),s.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(e.auth=s.accessToken),o&&o.token&&(e.ac=o.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Wc(e);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&h.readyState===4){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let d=null;if(h.status>=200&&h.status<300){try{d=Lf(h.responseText)}catch{rs("Failed to parse JSON response for "+u+": "+h.responseText)}i(null,d)}else h.status!==401&&h.status!==404&&rs("Got unsuccessful REST response for "+u+" Status: "+h.status),i(h.status);i=null}},h.open("GET",u,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(){this.rootNode_=jt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(){return{value:null,children:new Map}}function bI(n,t,e){if(ue(t))n.value=e,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(t,e);else{const i=le(t);n.children.has(i)||n.children.set(i,Rm());const s=n.children.get(i);t=qe(t),bI(s,t,e)}}function mv(n,t,e){n.value!==null?e(t,n.value):Fz(n,(i,s)=>{const o=new Ve(t.toString()+"/"+i);mv(s,o,e)})}function Fz(n,t){n.children.forEach((e,i)=>{t(i,e)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Di(this.last_,(i,s)=>{e[i]=e[i]-s}),this.last_=t,e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=10*1e3,jz=30*1e3,qz=5*60*1e3;class Gz{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Hz(t);const i=XS+(jz-XS)*Math.random();Ef(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;Di(t,(s,o)=>{o>0&&ko(this.statsToReport_,s)&&(e[s]=o,i=!0)}),i&&this.server_.reportStats(e),Ef(this.reportStats_.bind(this),Math.floor(Math.random()*2*qz))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tr;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(tr||(tr={}));function EI(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function M0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function O0(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=tr.ACK_USER_WRITE,this.source=EI()}operationForChild(t){if(ue(this.path)){if(this.affectedTree.value!=null)return St(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Ve(t));return new Pm(Ee(),e,this.revert)}}else return St(le(this.path)===t,"operationForChild called for unrelated child."),new Pm(qe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(t,e){this.source=t,this.path=e,this.type=tr.LISTEN_COMPLETE}operationForChild(t){return ue(this.path)?new qf(this.source,Ee()):new qf(this.source,qe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=tr.OVERWRITE}operationForChild(t){return ue(this.path)?new su(this.source,Ee(),this.snap.getImmediateChild(t)):new su(this.source,qe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=tr.MERGE}operationForChild(t){if(ue(this.path)){const e=this.children.subtree(new Ve(t));return e.isEmpty()?null:e.value?new su(this.source,Ee(),e.value):new Gf(this.source,Ee(),e)}else return St(le(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Gf(this.source,qe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(ue(t))return this.isFullyInitialized()&&!this.filtered_;const e=le(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function Yz(n,t,e,i){const s=[],o=[];return t.forEach(u=>{u.type==="child_changed"&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(Vz(u.childName,u.snapshotNode))}),Xh(n,s,"child_removed",t,i,e),Xh(n,s,"child_added",t,i,e),Xh(n,s,"child_moved",o,i,e),Xh(n,s,"child_changed",t,i,e),Xh(n,s,"value",t,i,e),s}function Xh(n,t,e,i,s,o){const u=i.filter(h=>h.type===e);u.sort((h,d)=>Kz(n,h,d)),u.forEach(h=>{const d=Zz(n,h,o);s.forEach(m=>{m.respondsTo(h.type)&&t.push(m.createEvent(d,n.query_))})})}function Zz(n,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}function Kz(n,t,e){if(t.childName==null||e.childName==null)throw Gc("Should only compare child_ events.");const i=new se(t.childName,t.snapshotNode),s=new se(e.childName,e.snapshotNode);return n.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(n,t){return{eventCache:n,serverCache:t}}function Tf(n,t,e,i){return mg(new ru(t,e,i),n.serverCache)}function TI(n,t,e,i){return mg(n.eventCache,new ru(t,e,i))}function gv(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ou(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vy;const $z=()=>(Vy||(Vy=new Mr(NV)),Vy);class Ye{static fromObject(t){let e=new Ye(null);return Di(t,(i,s)=>{e=e.set(new Ve(i),s)}),e}constructor(t,e=$z()){this.value=t,this.children=e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:Ee(),value:this.value};if(ue(t))return null;{const i=le(t),s=this.children.get(i);if(s!==null){const o=s.findRootMostMatchingPathAndValue(qe(t),e);return o!=null?{path:Sn(new Ve(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(ue(t))return this;{const e=le(t),i=this.children.get(e);return i!==null?i.subtree(qe(t)):new Ye(null)}}set(t,e){if(ue(t))return new Ye(e,this.children);{const i=le(t),o=(this.children.get(i)||new Ye(null)).set(qe(t),e),u=this.children.insert(i,o);return new Ye(this.value,u)}}remove(t){if(ue(t))return this.children.isEmpty()?new Ye(null):new Ye(null,this.children);{const e=le(t),i=this.children.get(e);if(i){const s=i.remove(qe(t));let o;return s.isEmpty()?o=this.children.remove(e):o=this.children.insert(e,s),this.value===null&&o.isEmpty()?new Ye(null):new Ye(this.value,o)}else return this}}get(t){if(ue(t))return this.value;{const e=le(t),i=this.children.get(e);return i?i.get(qe(t)):null}}setTree(t,e){if(ue(t))return e;{const i=le(t),o=(this.children.get(i)||new Ye(null)).setTree(qe(t),e);let u;return o.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,o),new Ye(this.value,u)}}fold(t){return this.fold_(Ee(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((s,o)=>{i[s]=o.fold_(Sn(t,s),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,Ee(),e)}findOnPath_(t,e,i){const s=this.value?i(e,this.value):!1;if(s)return s;if(ue(t))return null;{const o=le(t),u=this.children.get(o);return u?u.findOnPath_(qe(t),Sn(e,o),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Ee(),e)}foreachOnPath_(t,e,i){if(ue(t))return this;{this.value&&i(e,this.value);const s=le(t),o=this.children.get(s);return o?o.foreachOnPath_(qe(t),Sn(e,s),i):new Ye(null)}}foreach(t){this.foreach_(Ee(),t)}foreach_(t,e){this.children.inorderTraversal((i,s)=>{s.foreach_(Sn(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(t){this.writeTree_=t}static empty(){return new ir(new Ye(null))}}function wf(n,t,e){if(ue(t))return new ir(new Ye(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(i!=null){const s=i.path;let o=i.value;const u=Oi(s,t);return o=o.updateChild(u,e),new ir(n.writeTree_.set(s,o))}else{const s=new Ye(e),o=n.writeTree_.setTree(t,s);return new ir(o)}}}function JS(n,t,e){let i=n;return Di(e,(s,o)=>{i=wf(i,Sn(t,s),o)}),i}function tx(n,t){if(ue(t))return ir.empty();{const e=n.writeTree_.setTree(t,new Ye(null));return new ir(e)}}function _v(n,t){return pu(n,t)!=null}function pu(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return e!=null?n.writeTree_.get(e.path).getChild(Oi(e.path,t)):null}function ex(n){const t=[],e=n.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(an,(i,s)=>{t.push(new se(i,s))}):n.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&t.push(new se(i,s.value))}),t}function Ba(n,t){if(ue(t))return n;{const e=pu(n,t);return e!=null?new ir(new Ye(e)):new ir(n.writeTree_.subtree(t))}}function yv(n){return n.writeTree_.isEmpty()}function Pc(n,t){return wI(Ee(),n.writeTree_,t)}function wI(n,t,e){if(t.value!=null)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((s,o)=>{s===".priority"?(St(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):e=wI(Sn(n,s),o,e)}),!e.getChild(n).isEmpty()&&i!==null&&(e=e.updateChild(Sn(n,".priority"),i)),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(n,t){return AI(t,n)}function Qz(n,t,e,i,s){St(i>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:s}),s&&(n.visibleWrites=wf(n.visibleWrites,t,e)),n.lastWriteId=i}function Xz(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}function Jz(n,t){const e=n.allWrites.findIndex(h=>h.writeId===t);St(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let s=i.visible,o=!1,u=n.allWrites.length-1;for(;s&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=e&&t4(h,i.path)?s=!1:Js(i.path,h.path)&&(o=!0)),u--}if(s){if(o)return e4(n),!0;if(i.snap)n.visibleWrites=tx(n.visibleWrites,i.path);else{const h=i.children;Di(h,d=>{n.visibleWrites=tx(n.visibleWrites,Sn(i.path,d))})}return!0}else return!1}function t4(n,t){if(n.snap)return Js(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&Js(Sn(n.path,e),t))return!0;return!1}function e4(n){n.visibleWrites=SI(n.allWrites,n4,Ee()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function n4(n){return n.visible}function SI(n,t,e){let i=ir.empty();for(let s=0;s<n.length;++s){const o=n[s];if(t(o)){const u=o.path;let h;if(o.snap)Js(e,u)?(h=Oi(e,u),i=wf(i,h,o.snap)):Js(u,e)&&(h=Oi(u,e),i=wf(i,Ee(),o.snap.getChild(h)));else if(o.children){if(Js(e,u))h=Oi(e,u),i=JS(i,h,o.children);else if(Js(u,e))if(h=Oi(u,e),ue(h))i=JS(i,Ee(),o.children);else{const d=Ac(o.children,le(h));if(d){const m=d.getChild(qe(h));i=wf(i,Ee(),m)}}}else throw Gc("WriteRecord should have .snap or .children")}}return i}function xI(n,t,e,i,s){if(!i&&!s){const o=pu(n.visibleWrites,t);if(o!=null)return o;{const u=Ba(n.visibleWrites,t);if(yv(u))return e;if(e==null&&!_v(u,Ee()))return null;{const h=e||jt.EMPTY_NODE;return Pc(u,h)}}}else{const o=Ba(n.visibleWrites,t);if(!s&&yv(o))return e;if(!s&&e==null&&!_v(o,Ee()))return null;{const u=function(m){return(m.visible||s)&&(!i||!~i.indexOf(m.writeId))&&(Js(m.path,t)||Js(t,m.path))},h=SI(n.allWrites,u,t),d=e||jt.EMPTY_NODE;return Pc(h,d)}}}function i4(n,t,e){let i=jt.EMPTY_NODE;const s=pu(n.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(an,(o,u)=>{i=i.updateImmediateChild(o,u)}),i;if(e){const o=Ba(n.visibleWrites,t);return e.forEachChild(an,(u,h)=>{const d=Pc(Ba(o,new Ve(u)),h);i=i.updateImmediateChild(u,d)}),ex(o).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}else{const o=Ba(n.visibleWrites,t);return ex(o).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}}function s4(n,t,e,i,s){St(i||s,"Either existingEventSnap or existingServerSnap must exist");const o=Sn(t,e);if(_v(n.visibleWrites,o))return null;{const u=Ba(n.visibleWrites,o);return yv(u)?s.getChild(e):Pc(u,s.getChild(e))}}function r4(n,t,e,i){const s=Sn(t,e),o=pu(n.visibleWrites,s);if(o!=null)return o;if(i.isCompleteForChild(e)){const u=Ba(n.visibleWrites,s);return Pc(u,i.getNode().getImmediateChild(e))}else return null}function o4(n,t){return pu(n.visibleWrites,t)}function a4(n,t,e,i,s,o,u){let h;const d=Ba(n.visibleWrites,t),m=pu(d,Ee());if(m!=null)h=m;else if(e!=null)h=Pc(d,e);else return[];if(h=h.withIndex(u),!h.isEmpty()&&!h.isLeafNode()){const v=[],T=u.getCompare(),w=o?h.getReverseIteratorFrom(i,u):h.getIteratorFrom(i,u);let A=w.getNext();for(;A&&v.length<s;)T(A,i)!==0&&v.push(A),A=w.getNext();return v}else return[]}function l4(){return{visibleWrites:ir.empty(),allWrites:[],lastWriteId:-1}}function Mm(n,t,e,i){return xI(n.writeTree,n.treePath,t,e,i)}function D0(n,t){return i4(n.writeTree,n.treePath,t)}function nx(n,t,e,i){return s4(n.writeTree,n.treePath,t,e,i)}function Om(n,t){return o4(n.writeTree,Sn(n.treePath,t))}function u4(n,t,e,i,s,o){return a4(n.writeTree,n.treePath,t,e,i,s,o)}function N0(n,t,e){return r4(n.writeTree,n.treePath,t,e)}function CI(n,t){return AI(Sn(n.treePath,t),n.writeTree)}function AI(n,t){return{treePath:n,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;St(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),St(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const o=s.type;if(e==="child_added"&&o==="child_removed")this.changeMap.set(i,Hf(i,t.snapshotNode,s.snapshotNode));else if(e==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(e==="child_removed"&&o==="child_changed")this.changeMap.set(i,Ff(i,s.oldSnap));else if(e==="child_changed"&&o==="child_added")this.changeMap.set(i,Rc(i,t.snapshotNode));else if(e==="child_changed"&&o==="child_changed")this.changeMap.set(i,Hf(i,t.snapshotNode,s.oldSnap));else throw Gc("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}}const II=new h4;class L0{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=this.optCompleteServerCache_!=null?new ru(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return N0(this.writes_,t,i)}}getChildAfterChild(t,e,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ou(this.viewCache_),o=u4(this.writes_,s,e,1,i,t);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(n){return{filter:n}}function d4(n,t){St(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),St(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function p4(n,t,e,i,s){const o=new c4;let u,h;if(e.type===tr.OVERWRITE){const m=e;m.source.fromUser?u=vv(n,t,m.path,m.snap,i,s,o):(St(m.source.fromServer,"Unknown source."),h=m.source.tagged||t.serverCache.isFiltered()&&!ue(m.path),u=km(n,t,m.path,m.snap,i,s,h,o))}else if(e.type===tr.MERGE){const m=e;m.source.fromUser?u=g4(n,t,m.path,m.children,i,s,o):(St(m.source.fromServer,"Unknown source."),h=m.source.tagged||t.serverCache.isFiltered(),u=bv(n,t,m.path,m.children,i,s,h,o))}else if(e.type===tr.ACK_USER_WRITE){const m=e;m.revert?u=v4(n,t,m.path,i,s,o):u=_4(n,t,m.path,m.affectedTree,i,s,o)}else if(e.type===tr.LISTEN_COMPLETE)u=y4(n,t,e.path,i,o);else throw Gc("Unknown operation type: "+e.type);const d=o.getChanges();return m4(t,u,d),{viewCache:u,changes:d}}function m4(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=gv(n);(e.length>0||!n.eventCache.isFullyInitialized()||s&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&e.push(vI(gv(t)))}}function RI(n,t,e,i,s,o){const u=t.eventCache;if(Om(i,e)!=null)return t;{let h,d;if(ue(e))if(St(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const m=ou(t),v=m instanceof jt?m:jt.EMPTY_NODE,T=D0(i,v);h=n.filter.updateFullNode(t.eventCache.getNode(),T,o)}else{const m=Mm(i,ou(t));h=n.filter.updateFullNode(t.eventCache.getNode(),m,o)}else{const m=le(e);if(m===".priority"){St(Ga(e)===1,"Can't have a priority with additional path components");const v=u.getNode();d=t.serverCache.getNode();const T=nx(i,e,v,d);T!=null?h=n.filter.updatePriority(v,T):h=u.getNode()}else{const v=qe(e);let T;if(u.isCompleteForChild(m)){d=t.serverCache.getNode();const w=nx(i,e,u.getNode(),d);w!=null?T=u.getNode().getImmediateChild(m).updateChild(v,w):T=u.getNode().getImmediateChild(m)}else T=N0(i,m,t.serverCache);T!=null?h=n.filter.updateChild(u.getNode(),m,T,v,s,o):h=u.getNode()}}return Tf(t,h,u.isFullyInitialized()||ue(e),n.filter.filtersNodes())}}function km(n,t,e,i,s,o,u,h){const d=t.serverCache;let m;const v=u?n.filter:n.filter.getIndexedFilter();if(ue(e))m=v.updateFullNode(d.getNode(),i,null);else if(v.filtersNodes()&&!d.isFiltered()){const A=d.getNode().updateChild(e,i);m=v.updateFullNode(d.getNode(),A,null)}else{const A=le(e);if(!d.isCompleteForPath(e)&&Ga(e)>1)return t;const R=qe(e),k=d.getNode().getImmediateChild(A).updateChild(R,i);A===".priority"?m=v.updatePriority(d.getNode(),k):m=v.updateChild(d.getNode(),A,k,R,II,null)}const T=TI(t,m,d.isFullyInitialized()||ue(e),v.filtersNodes()),w=new L0(s,T,o);return RI(n,T,e,s,w,h)}function vv(n,t,e,i,s,o,u){const h=t.eventCache;let d,m;const v=new L0(s,t,o);if(ue(e))m=n.filter.updateFullNode(t.eventCache.getNode(),i,u),d=Tf(t,m,!0,n.filter.filtersNodes());else{const T=le(e);if(T===".priority")m=n.filter.updatePriority(t.eventCache.getNode(),i),d=Tf(t,m,h.isFullyInitialized(),h.isFiltered());else{const w=qe(e),A=h.getNode().getImmediateChild(T);let R;if(ue(w))R=i;else{const M=v.getCompleteChild(T);M!=null?cI(w)===".priority"&&M.getChild(fI(w)).isEmpty()?R=M:R=M.updateChild(w,i):R=jt.EMPTY_NODE}if(A.equals(R))d=t;else{const M=n.filter.updateChild(h.getNode(),T,R,w,v,u);d=Tf(t,M,h.isFullyInitialized(),n.filter.filtersNodes())}}}return d}function ix(n,t){return n.eventCache.isCompleteForChild(t)}function g4(n,t,e,i,s,o,u){let h=t;return i.foreach((d,m)=>{const v=Sn(e,d);ix(t,le(v))&&(h=vv(n,h,v,m,s,o,u))}),i.foreach((d,m)=>{const v=Sn(e,d);ix(t,le(v))||(h=vv(n,h,v,m,s,o,u))}),h}function sx(n,t,e){return e.foreach((i,s)=>{t=t.updateChild(i,s)}),t}function bv(n,t,e,i,s,o,u,h){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let d=t,m;ue(e)?m=i:m=new Ye(null).setTree(e,i);const v=t.serverCache.getNode();return m.children.inorderTraversal((T,w)=>{if(v.hasChild(T)){const A=t.serverCache.getNode().getImmediateChild(T),R=sx(n,A,w);d=km(n,d,new Ve(T),R,s,o,u,h)}}),m.children.inorderTraversal((T,w)=>{const A=!t.serverCache.isCompleteForChild(T)&&w.value===null;if(!v.hasChild(T)&&!A){const R=t.serverCache.getNode().getImmediateChild(T),M=sx(n,R,w);d=km(n,d,new Ve(T),M,s,o,u,h)}}),d}function _4(n,t,e,i,s,o,u){if(Om(s,e)!=null)return t;const h=t.serverCache.isFiltered(),d=t.serverCache;if(i.value!=null){if(ue(e)&&d.isFullyInitialized()||d.isCompleteForPath(e))return km(n,t,e,d.getNode().getChild(e),s,o,h,u);if(ue(e)){let m=new Ye(null);return d.getNode().forEachChild(Tc,(v,T)=>{m=m.set(new Ve(v),T)}),bv(n,t,e,m,s,o,h,u)}else return t}else{let m=new Ye(null);return i.foreach((v,T)=>{const w=Sn(e,v);d.isCompleteForPath(w)&&(m=m.set(v,d.getNode().getChild(w)))}),bv(n,t,e,m,s,o,h,u)}}function y4(n,t,e,i,s){const o=t.serverCache,u=TI(t,o.getNode(),o.isFullyInitialized()||ue(e),o.isFiltered());return RI(n,u,e,i,II,s)}function v4(n,t,e,i,s,o){let u;if(Om(i,e)!=null)return t;{const h=new L0(i,t,s),d=t.eventCache.getNode();let m;if(ue(e)||le(e)===".priority"){let v;if(t.serverCache.isFullyInitialized())v=Mm(i,ou(t));else{const T=t.serverCache.getNode();St(T instanceof jt,"serverChildren would be complete if leaf node"),v=D0(i,T)}v=v,m=n.filter.updateFullNode(d,v,o)}else{const v=le(e);let T=N0(i,v,t.serverCache);T==null&&t.serverCache.isCompleteForChild(v)&&(T=d.getImmediateChild(v)),T!=null?m=n.filter.updateChild(d,v,T,qe(e),h,o):t.eventCache.getNode().hasChild(v)?m=n.filter.updateChild(d,v,jt.EMPTY_NODE,qe(e),h,o):m=d,m.isEmpty()&&t.serverCache.isFullyInitialized()&&(u=Mm(i,ou(t)),u.isLeafNode()&&(m=n.filter.updateFullNode(m,u,o)))}return u=t.serverCache.isFullyInitialized()||Om(i,Ee())!=null,Tf(t,m,u,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new R0(i.getIndex()),o=Bz(i);this.processor_=f4(o);const u=e.serverCache,h=e.eventCache,d=s.updateFullNode(jt.EMPTY_NODE,u.getNode(),null),m=o.updateFullNode(jt.EMPTY_NODE,h.getNode(),null),v=new ru(d,u.isFullyInitialized(),s.filtersNodes()),T=new ru(m,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=mg(T,v),this.eventGenerator_=new Wz(this.query_)}get query(){return this.query_}}function E4(n){return n.viewCache_.serverCache.getNode()}function T4(n,t){const e=ou(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!ue(t)&&!e.getImmediateChild(le(t)).isEmpty())?e.getChild(t):null}function rx(n){return n.eventRegistrations_.length===0}function w4(n,t){n.eventRegistrations_.push(t)}function ox(n,t,e){const i=[];if(e){St(t==null,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(o=>{const u=o.createCancelEvent(e,s);u&&i.push(u)})}if(t){let s=[];for(let o=0;o<n.eventRegistrations_.length;++o){const u=n.eventRegistrations_[o];if(!u.matches(t))s.push(u);else if(t.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(o+1));break}}n.eventRegistrations_=s}else n.eventRegistrations_=[];return i}function ax(n,t,e,i){t.type===tr.MERGE&&t.source.queryId!==null&&(St(ou(n.viewCache_),"We should always have a full cache before handling merges"),St(gv(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=p4(n.processor_,s,t,e,i);return d4(n.processor_,o.viewCache),St(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,PI(n,o.changes,o.viewCache.eventCache.getNode(),null)}function S4(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(an,(o,u)=>{i.push(Rc(o,u))}),e.isFullyInitialized()&&i.push(vI(e.getNode())),PI(n,i,e.getNode(),t)}function PI(n,t,e,i){const s=i?[i]:n.eventRegistrations_;return Yz(n.eventGenerator_,t,e,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dm;class x4{constructor(){this.views=new Map}}function C4(n){St(!Dm,"__referenceConstructor has already been defined"),Dm=n}function A4(){return St(Dm,"Reference.ts has not been loaded"),Dm}function I4(n){return n.views.size===0}function V0(n,t,e,i){const s=t.source.queryId;if(s!==null){const o=n.views.get(s);return St(o!=null,"SyncTree gave us an op for an invalid query."),ax(o,t,e,i)}else{let o=[];for(const u of n.views.values())o=o.concat(ax(u,t,e,i));return o}}function R4(n,t,e,i,s){const o=t._queryIdentifier,u=n.views.get(o);if(!u){let h=Mm(e,s?i:null),d=!1;h?d=!0:i instanceof jt?(h=D0(e,i),d=!1):(h=jt.EMPTY_NODE,d=!1);const m=mg(new ru(h,d,!1),new ru(i,s,!1));return new b4(t,m)}return u}function P4(n,t,e,i,s,o){const u=R4(n,t,i,s,o);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,u),w4(u,e),S4(u,e)}function M4(n,t,e,i){const s=t._queryIdentifier,o=[];let u=[];const h=Wa(n);if(s==="default")for(const[d,m]of n.views.entries())u=u.concat(ox(m,e,i)),rx(m)&&(n.views.delete(d),m.query._queryParams.loadsAllData()||o.push(m.query));else{const d=n.views.get(s);d&&(u=u.concat(ox(d,e,i)),rx(d)&&(n.views.delete(s),d.query._queryParams.loadsAllData()||o.push(d.query)))}return h&&!Wa(n)&&o.push(new(A4())(t._repo,t._path)),{removed:o,events:u}}function MI(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function wc(n,t){let e=null;for(const i of n.views.values())e=e||T4(i,t);return e}function OI(n,t){if(t._queryParams.loadsAllData())return gg(n);{const i=t._queryIdentifier;return n.views.get(i)}}function kI(n,t){return OI(n,t)!=null}function Wa(n){return gg(n)!=null}function gg(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nm;function O4(n){St(!Nm,"__referenceConstructor has already been defined"),Nm=n}function k4(){return St(Nm,"Reference.ts has not been loaded"),Nm}let D4=1;class lx{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Ye(null),this.pendingWriteTree_=l4(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function N4(n,t,e,i,s){return Qz(n.pendingWriteTree_,t,e,i,s),s?gd(n,new su(EI(),t,e)):[]}function _c(n,t,e=!1){const i=Xz(n.pendingWriteTree_,t);if(Jz(n.pendingWriteTree_,t)){let o=new Ye(null);return i.snap!=null?o=o.set(Ee(),!0):Di(i.children,u=>{o=o.set(new Ve(u),!0)}),gd(n,new Pm(i.path,o,e))}else return[]}function _g(n,t,e){return gd(n,new su(M0(),t,e))}function L4(n,t,e){const i=Ye.fromObject(e);return gd(n,new Gf(M0(),t,i))}function V4(n,t){return gd(n,new qf(M0(),t))}function z4(n,t,e){const i=z0(n,e);if(i){const s=B0(i),o=s.path,u=s.queryId,h=Oi(o,t),d=new qf(O0(u),h);return U0(n,o,d)}else return[]}function Ev(n,t,e,i,s=!1){const o=t._path,u=n.syncPointTree_.get(o);let h=[];if(u&&(t._queryIdentifier==="default"||kI(u,t))){const d=M4(u,t,e,i);I4(u)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const m=d.removed;if(h=d.events,!s){const v=m.findIndex(w=>w._queryParams.loadsAllData())!==-1,T=n.syncPointTree_.findOnPath(o,(w,A)=>Wa(A));if(v&&!T){const w=n.syncPointTree_.subtree(o);if(!w.isEmpty()){const A=F4(w);for(let R=0;R<A.length;++R){const M=A[R],k=M.query,U=VI(n,M);n.listenProvider_.startListening(Sf(k),Lm(n,k),U.hashFn,U.onComplete)}}}!T&&m.length>0&&!i&&(v?n.listenProvider_.stopListening(Sf(t),null):m.forEach(w=>{const A=n.queryToTagMap.get(yg(w));n.listenProvider_.stopListening(Sf(w),A)}))}H4(n,m)}return h}function B4(n,t,e,i){const s=z0(n,i);if(s!=null){const o=B0(s),u=o.path,h=o.queryId,d=Oi(u,t),m=new su(O0(h),d,e);return U0(n,u,m)}else return[]}function U4(n,t,e,i){const s=z0(n,i);if(s){const o=B0(s),u=o.path,h=o.queryId,d=Oi(u,t),m=Ye.fromObject(e),v=new Gf(O0(h),d,m);return U0(n,u,v)}else return[]}function ux(n,t,e,i=!1){const s=t._path;let o=null,u=!1;n.syncPointTree_.foreachOnPath(s,(w,A)=>{const R=Oi(w,s);o=o||wc(A,R),u=u||Wa(A)});let h=n.syncPointTree_.get(s);h?(u=u||Wa(h),o=o||wc(h,Ee())):(h=new x4,n.syncPointTree_=n.syncPointTree_.set(s,h));let d;o!=null?d=!0:(d=!1,o=jt.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((A,R)=>{const M=wc(R,Ee());M&&(o=o.updateImmediateChild(A,M))}));const m=kI(h,t);if(!m&&!t._queryParams.loadsAllData()){const w=yg(t);St(!n.queryToTagMap.has(w),"View does not exist, but we have a tag");const A=j4();n.queryToTagMap.set(w,A),n.tagToQueryMap.set(A,w)}const v=k0(n.pendingWriteTree_,s);let T=P4(h,t,e,v,o,d);if(!m&&!u&&!i){const w=OI(h,t);T=T.concat(q4(n,t,w))}return T}function DI(n,t,e){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(t,(u,h)=>{const d=Oi(u,t),m=wc(h,d);if(m)return m});return xI(s,t,o,e,!0)}function gd(n,t){return NI(t,n.syncPointTree_,null,k0(n.pendingWriteTree_,Ee()))}function NI(n,t,e,i){if(ue(n.path))return LI(n,t,e,i);{const s=t.get(Ee());e==null&&s!=null&&(e=wc(s,Ee()));let o=[];const u=le(n.path),h=n.operationForChild(u),d=t.children.get(u);if(d&&h){const m=e?e.getImmediateChild(u):null,v=CI(i,u);o=o.concat(NI(h,d,m,v))}return s&&(o=o.concat(V0(s,n,i,e))),o}}function LI(n,t,e,i){const s=t.get(Ee());e==null&&s!=null&&(e=wc(s,Ee()));let o=[];return t.children.inorderTraversal((u,h)=>{const d=e?e.getImmediateChild(u):null,m=CI(i,u),v=n.operationForChild(u);v&&(o=o.concat(LI(v,h,d,m)))}),s&&(o=o.concat(V0(s,n,i,e))),o}function VI(n,t){const e=t.query,i=Lm(n,e);return{hashFn:()=>(E4(t)||jt.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?z4(n,e._path,i):V4(n,e._path);{const o=zV(s,e);return Ev(n,e,null,o)}}}}function Lm(n,t){const e=yg(t);return n.queryToTagMap.get(e)}function yg(n){return n._path.toString()+"$"+n._queryIdentifier}function z0(n,t){return n.tagToQueryMap.get(t)}function B0(n){const t=n.indexOf("$");return St(t!==-1&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Ve(n.substr(0,t))}}function U0(n,t,e){const i=n.syncPointTree_.get(t);St(i,"Missing sync point for query tag that we're tracking");const s=k0(n.pendingWriteTree_,t);return V0(i,e,s,null)}function F4(n){return n.fold((t,e,i)=>{if(e&&Wa(e))return[gg(e)];{let s=[];return e&&(s=MI(e)),Di(i,(o,u)=>{s=s.concat(u)}),s}})}function Sf(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(k4())(n._repo,n._path):n}function H4(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const s=yg(i),o=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(o)}}}function j4(){return D4++}function q4(n,t,e){const i=t._path,s=Lm(n,t),o=VI(n,e),u=n.listenProvider_.startListening(Sf(t),s,o.hashFn,o.onComplete),h=n.syncPointTree_.subtree(i);if(s)St(!Wa(h.value),"If we're adding a query, it shouldn't be shadowed");else{const d=h.fold((m,v,T)=>{if(!ue(m)&&v&&Wa(v))return[gg(v).query];{let w=[];return v&&(w=w.concat(MI(v).map(A=>A.query))),Di(T,(A,R)=>{w=w.concat(R)}),w}});for(let m=0;m<d.length;++m){const v=d[m];n.listenProvider_.stopListening(Sf(v),Lm(n,v))}}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new F0(e)}node(){return this.node_}}class H0{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Sn(this.path_,t);return new H0(this.syncTree_,e)}node(){return DI(this.syncTree_,this.path_)}}const G4=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},cx=function(n,t,e){if(!n||typeof n!="object")return n;if(St(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return W4(n[".sv"],t,e);if(typeof n[".sv"]=="object")return Y4(n[".sv"],t);St(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},W4=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:St(!1,"Unexpected server value: "+n)}},Y4=function(n,t,e){n.hasOwnProperty("increment")||St(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&St(!1,"Unexpected increment value: "+i);const s=t.node();if(St(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const u=s.getValue();return typeof u!="number"?i:u+i},Z4=function(n,t,e,i){return j0(t,new H0(e,n),i)},K4=function(n,t,e){return j0(n,new F0(t),e)};function j0(n,t,e){const i=n.getPriority().val(),s=cx(i,t.getImmediateChild(".priority"),e);let o;if(n.isLeafNode()){const u=n,h=cx(u.getValue(),t,e);return h!==u.getValue()||s!==u.getPriority().val()?new Ln(h,ci(s)):n}else{const u=n;return o=u,s!==u.getPriority().val()&&(o=o.updatePriority(new Ln(s))),u.forEachChild(an,(h,d)=>{const m=j0(d,t.getImmediateChild(h),e);m!==d&&(o=o.updateImmediateChild(h,m))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function G0(n,t){let e=t instanceof Ve?t:new Ve(t),i=n,s=le(e);for(;s!==null;){const o=Ac(i.node.children,s)||{children:{},childCount:0};i=new q0(s,i,o),e=qe(e),s=le(e)}return i}function Kc(n){return n.node.value}function zI(n,t){n.node.value=t,Tv(n)}function BI(n){return n.node.childCount>0}function $4(n){return Kc(n)===void 0&&!BI(n)}function vg(n,t){Di(n.node.children,(e,i)=>{t(new q0(e,n,i))})}function UI(n,t,e,i){e&&t(n),vg(n,s=>{UI(s,t,!0)})}function Q4(n,t,e){let i=n.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function _d(n){return new Ve(n.parent===null?n.name:_d(n.parent)+"/"+n.name)}function Tv(n){n.parent!==null&&X4(n.parent,n.name,n)}function X4(n,t,e){const i=$4(e),s=ko(n.node.children,t);i&&s?(delete n.node.children[t],n.node.childCount--,Tv(n)):!i&&!s&&(n.node.children[t]=e.node,n.node.childCount++,Tv(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=/[\[\].#$\/\u0000-\u001F\u007F]/,t3=/[\[\].#$\u0000-\u001F\u007F]/,zy=10*1024*1024,FI=function(n){return typeof n=="string"&&n.length!==0&&!J4.test(n)},HI=function(n){return typeof n=="string"&&n.length!==0&&!t3.test(n)},e3=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),HI(n)},jI=function(n,t,e){const i=e instanceof Ve?new _z(e,n):e;if(t===void 0)throw new Error(n+"contains undefined "+Wl(i));if(typeof t=="function")throw new Error(n+"contains a function "+Wl(i)+" with contents = "+t.toString());if(j1(t))throw new Error(n+"contains "+t.toString()+" "+Wl(i));if(typeof t=="string"&&t.length>zy/3&&lg(t)>zy)throw new Error(n+"contains a string greater than "+zy+" utf8 bytes "+Wl(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,o=!1;if(Di(t,(u,h)=>{if(u===".value")s=!0;else if(u!==".priority"&&u!==".sv"&&(o=!0,!FI(u)))throw new Error(n+" contains an invalid key ("+u+") "+Wl(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);yz(i,u),jI(n,h,i),vz(i)}),s&&o)throw new Error(n+' contains ".value" child '+Wl(i)+" in addition to actual children.")}},qI=function(n,t,e,i){if(!HI(e))throw new Error(t1(n,t)+'was an invalid path = "'+e+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},n3=function(n,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),qI(n,t,e)},i3=function(n,t){const e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!FI(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!e3(e))throw new Error(t1(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function GI(n,t){let e=null;for(let i=0;i<t.length;i++){const s=t[i],o=s.getPath();e!==null&&!C0(o,e.path)&&(n.eventLists_.push(e),e=null),e===null&&(e={events:[],path:o}),e.events.push(s)}e&&n.eventLists_.push(e)}function WI(n,t,e){GI(n,e),YI(n,i=>C0(i,t))}function mu(n,t,e){GI(n,e),YI(n,i=>Js(i,t)||Js(t,i))}function YI(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const s=n.eventLists_[i];if(s){const o=s.path;t(o)?(r3(n.eventLists_[i]),n.eventLists_[i]=null):e=!1}}e&&(n.eventLists_=[]),n.recursionDepth_--}function r3(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(e!==null){n.events[t]=null;const i=e.getEventRunner();bf&&ui("event: "+e.toString()),pd(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3="repo_interrupt",a3=25;class l3{constructor(t,e,i,s){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new s3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Rm(),this.transactionQueueTree_=new q0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function u3(n,t,e){if(n.stats_=S0(n.repoInfo_),n.forceRestClient_||HV())n.server_=new Im(n.repoInfo_,(i,s,o,u)=>{hx(n,i,s,o,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>fx(n,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{zn(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new wo(n.repoInfo_,t,(i,s,o,u)=>{hx(n,i,s,o,u)},i=>{fx(n,i)},i=>{h3(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=YV(n.repoInfo_,()=>new Gz(n.stats_,n.server_)),n.infoData_=new Uz,n.infoSyncTree_=new lx({startListening:(i,s,o,u)=>{let h=[];const d=n.infoData_.getNode(i._path);return d.isEmpty()||(h=_g(n.infoSyncTree_,i._path,d),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),W0(n,"connected",!1),n.serverSyncTree_=new lx({startListening:(i,s,o,u)=>(n.server_.listen(i,o,s,(h,d)=>{const m=u(h,d);mu(n.eventQueue_,i._path,m)}),[]),stopListening:(i,s)=>{n.server_.unlisten(i,s)}})}function c3(n){const e=n.infoData_.getNode(new Ve(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function ZI(n){return G4({timestamp:c3(n)})}function hx(n,t,e,i,s){n.dataUpdateCount++;const o=new Ve(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let u=[];if(s)if(i){const d=_m(e,m=>ci(m));u=U4(n.serverSyncTree_,o,d,s)}else{const d=ci(e);u=B4(n.serverSyncTree_,o,d,s)}else if(i){const d=_m(e,m=>ci(m));u=L4(n.serverSyncTree_,o,d)}else{const d=ci(e);u=_g(n.serverSyncTree_,o,d)}let h=o;u.length>0&&(h=Z0(n,o)),mu(n.eventQueue_,h,u)}function fx(n,t){W0(n,"connected",t),t===!1&&d3(n)}function h3(n,t){Di(t,(e,i)=>{W0(n,e,i)})}function W0(n,t,e){const i=new Ve("/.info/"+t),s=ci(e);n.infoData_.updateSnapshot(i,s);const o=_g(n.infoSyncTree_,i,s);mu(n.eventQueue_,i,o)}function f3(n){return n.nextWriteId_++}function d3(n){KI(n,"onDisconnectEvents");const t=ZI(n),e=Rm();mv(n.onDisconnect_,Ee(),(s,o)=>{const u=Z4(s,o,n.serverSyncTree_,t);bI(e,s,u)});let i=[];mv(e,Ee(),(s,o)=>{i=i.concat(_g(n.serverSyncTree_,s,o));const u=v3(n,s);Z0(n,u)}),n.onDisconnect_=Rm(),mu(n.eventQueue_,Ee(),i)}function p3(n,t,e){let i;le(t._path)===".info"?i=ux(n.infoSyncTree_,t,e):i=ux(n.serverSyncTree_,t,e),WI(n.eventQueue_,t._path,i)}function m3(n,t,e){let i;le(t._path)===".info"?i=Ev(n.infoSyncTree_,t,e):i=Ev(n.serverSyncTree_,t,e),WI(n.eventQueue_,t._path,i)}function g3(n){n.persistentConnection_&&n.persistentConnection_.interrupt(o3)}function KI(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),ui(e,...t)}function $I(n,t,e){return DI(n.serverSyncTree_,t,e)||jt.EMPTY_NODE}function Y0(n,t=n.transactionQueueTree_){if(t||bg(n,t),Kc(t)){const e=XI(n,t);St(e.length>0,"Sending zero length transaction queue"),e.every(s=>s.status===0)&&_3(n,_d(t),e)}else BI(t)&&vg(t,e=>{Y0(n,e)})}function _3(n,t,e){const i=e.map(m=>m.currentWriteId),s=$I(n,t,i);let o=s;const u=s.hash();for(let m=0;m<e.length;m++){const v=e[m];St(v.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;const T=Oi(t,v.path);o=o.updateChild(T,v.currentOutputSnapshotRaw)}const h=o.val(!0),d=t;n.server_.put(d.toString(),h,m=>{KI(n,"transaction put response",{path:d.toString(),status:m});let v=[];if(m==="ok"){const T=[];for(let w=0;w<e.length;w++)e[w].status=2,v=v.concat(_c(n.serverSyncTree_,e[w].currentWriteId)),e[w].onComplete&&T.push(()=>e[w].onComplete(null,!0,e[w].currentOutputSnapshotResolved)),e[w].unwatcher();bg(n,G0(n.transactionQueueTree_,t)),Y0(n,n.transactionQueueTree_),mu(n.eventQueue_,t,v);for(let w=0;w<T.length;w++)pd(T[w])}else{if(m==="datastale")for(let T=0;T<e.length;T++)e[T].status===3?e[T].status=4:e[T].status=0;else{rs("transaction at "+d.toString()+" failed: "+m);for(let T=0;T<e.length;T++)e[T].status=4,e[T].abortReason=m}Z0(n,t)}},u)}function Z0(n,t){const e=QI(n,t),i=_d(e),s=XI(n,e);return y3(n,s,i),i}function y3(n,t,e){if(t.length===0)return;const i=[];let s=[];const u=t.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<t.length;h++){const d=t[h],m=Oi(e,d.path);let v=!1,T;if(St(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)v=!0,T=d.abortReason,s=s.concat(_c(n.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=a3)v=!0,T="maxretry",s=s.concat(_c(n.serverSyncTree_,d.currentWriteId,!0));else{const w=$I(n,d.path,u);d.currentInputSnapshot=w;const A=t[h].update(w.val());if(A!==void 0){jI("transaction failed: Data returned ",A,d.path);let R=ci(A);typeof A=="object"&&A!=null&&ko(A,".priority")||(R=R.updatePriority(w.getPriority()));const k=d.currentWriteId,U=ZI(n),Z=K4(R,w,U);d.currentOutputSnapshotRaw=R,d.currentOutputSnapshotResolved=Z,d.currentWriteId=f3(n),u.splice(u.indexOf(k),1),s=s.concat(N4(n.serverSyncTree_,d.path,Z,d.currentWriteId,d.applyLocally)),s=s.concat(_c(n.serverSyncTree_,k,!0))}else v=!0,T="nodata",s=s.concat(_c(n.serverSyncTree_,d.currentWriteId,!0))}mu(n.eventQueue_,e,s),s=[],v&&(t[h].status=2,function(w){setTimeout(w,Math.floor(0))}(t[h].unwatcher),t[h].onComplete&&(T==="nodata"?i.push(()=>t[h].onComplete(null,!1,t[h].currentInputSnapshot)):i.push(()=>t[h].onComplete(new Error(T),!1,null))))}bg(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)pd(i[h]);Y0(n,n.transactionQueueTree_)}function QI(n,t){let e,i=n.transactionQueueTree_;for(e=le(t);e!==null&&Kc(i)===void 0;)i=G0(i,e),t=qe(t),e=le(t);return i}function XI(n,t){const e=[];return JI(n,t,e),e.sort((i,s)=>i.order-s.order),e}function JI(n,t,e){const i=Kc(t);if(i)for(let s=0;s<i.length;s++)e.push(i[s]);vg(t,s=>{JI(n,s,e)})}function bg(n,t){const e=Kc(t);if(e){let i=0;for(let s=0;s<e.length;s++)e[s].status!==2&&(e[i]=e[s],i++);e.length=i,zI(t,e.length>0?e:void 0)}vg(t,i=>{bg(n,i)})}function v3(n,t){const e=_d(QI(n,t)),i=G0(n.transactionQueueTree_,t);return Q4(i,s=>{By(n,s)}),By(n,i),UI(i,s=>{By(n,s)}),e}function By(n,t){const e=Kc(t);if(e){const i=[];let s=[],o=-1;for(let u=0;u<e.length;u++)e[u].status===3||(e[u].status===1?(St(o===u-1,"All SENT items should be at beginning of queue."),o=u,e[u].status=3,e[u].abortReason="set"):(St(e[u].status===0,"Unexpected transaction status in abort"),e[u].unwatcher(),s=s.concat(_c(n.serverSyncTree_,e[u].currentWriteId,!0)),e[u].onComplete&&i.push(e[u].onComplete.bind(null,new Error("set"),!1,null))));o===-1?zI(t,void 0):e.length=o+1,mu(n.eventQueue_,_d(t),s);for(let u=0;u<i.length;u++)pd(i[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let s=e[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function E3(n){const t={};n.charAt(0)==="?"&&(n=n.substring(1));for(const e of n.split("&")){if(e.length===0)continue;const i=e.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):rs(`Invalid query segment '${e}' in query '${n}'`)}return t}const dx=function(n,t){const e=T3(n),i=e.namespace;e.domain==="firebase.com"&&Ro(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&e.domain!=="localhost"&&Ro("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||kV();const s=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new eI(e.host,e.secure,i,s,t,"",i!==e.subdomain),path:new Ve(e.pathString)}},T3=function(n){let t="",e="",i="",s="",o="",u=!0,h="https",d=443;if(typeof n=="string"){let m=n.indexOf("//");m>=0&&(h=n.substring(0,m-1),n=n.substring(m+2));let v=n.indexOf("/");v===-1&&(v=n.length);let T=n.indexOf("?");T===-1&&(T=n.length),t=n.substring(0,Math.min(v,T)),v<T&&(s=b3(n.substring(v,T)));const w=E3(n.substring(Math.min(n.length,T)));m=t.indexOf(":"),m>=0?(u=h==="https"||h==="wss",d=parseInt(t.substring(m+1),10)):m=t.length;const A=t.slice(0,m);if(A.toLowerCase()==="localhost")e="localhost";else if(A.split(".").length<=2)e=A;else{const R=t.indexOf(".");i=t.substring(0,R).toLowerCase(),e=t.substring(R+1),o=i}"ns"in w&&(o=w.ns)}return{host:t,port:d,domain:e,subdomain:i,secure:u,scheme:h,pathString:s,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(t,e,i,s){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=s}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+zn(this.snapshot.exportVal())}}class S3{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return St(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(t,e,i,s){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=s}get key(){return ue(this._path)?null:cI(this._path)}get ref(){return new sl(this._repo,this._path)}get _queryIdentifier(){const t=QS(this._queryParams),e=T0(t);return e==="{}"?"default":e}get _queryObject(){return QS(this._queryParams)}isEqual(t){if(t=Kn(t),!(t instanceof K0))return!1;const e=this._repo===t._repo,i=C0(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return e&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+gz(this._path)}}class sl extends K0{constructor(t,e){super(t,e,new P0,!1)}get parent(){const t=fI(this._path);return t===null?null:new sl(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class Vm{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Ve(t),i=wv(this.ref,t);return new Vm(this._node.getChild(e),i,an)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>t(new Vm(s,wv(this.ref,i),an)))}hasChild(t){const e=new Ve(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function C3(n,t){return n=Kn(n),n._checkNotDeleted("ref"),wv(n._root,t)}function wv(n,t){return n=Kn(n),le(n._path)===null?n3("child","path",t):qI("child","path",t),new sl(n._repo,Sn(n._path,t))}class $0{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,e){const i=e._queryParams.getIndex();return new w3("value",this,new Vm(t.snapshotNode,new sl(e._repo,e._path),i))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new S3(this,t,e):null}matches(t){return t instanceof $0?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function A3(n,t,e,i,s){const o=new x3(e,void 0),u=new $0(o);return p3(n._repo,n,u),()=>m3(n._repo,n,u)}function I3(n,t,e,i){return A3(n,"value",t)}C4(sl);O4(sl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3="FIREBASE_DATABASE_EMULATOR_HOST",Sv={};let P3=!1;function M3(n,t,e,i){const s=t.lastIndexOf(":"),o=t.substring(0,s),u=el(o);n.repoInfo_=new eI(t,u,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,e),i&&(n.authTokenProvider_=i)}function O3(n,t,e,i,s){let o=i||n.options.databaseURL;o===void 0&&(n.options.projectId||Ro("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ui("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let u=dx(o,s),h=u.repoInfo,d;typeof process<"u"&&kS&&(d=kS[R3]),d?(o=`http://${d}?ns=${h.namespace}`,u=dx(o,s),h=u.repoInfo):u.repoInfo.secure;const m=new qV(n.name,n.options,t);i3("Invalid Firebase Database URL",u),ue(u.path)||Ro("Database URL must point to the root of a Firebase Database (not including a child path).");const v=D3(h,n,m,new jV(n,e));return new N3(v,n)}function k3(n,t){const e=Sv[t];(!e||e[n.key]!==n)&&Ro(`Database ${t}(${n.repoInfo_}) has already been deleted.`),g3(n),delete e[n.key]}function D3(n,t,e,i){let s=Sv[t.name];s||(s={},Sv[t.name]=s);let o=s[n.toURLString()];return o&&Ro("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new l3(n,P3,e,i),s[n.toURLString()]=o,o}class N3{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(u3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new sl(this._repo,Ee())),this._rootInternal}_delete(){return this._rootInternal!==null&&(k3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Ro("Cannot call "+t+" on a deleted database.")}}function L3(n=f0(),t){const e=cg(n,"database").getImmediate({identifier:t});if(!e._instanceStarted){const i=ZA("database");i&&V3(e,...i)}return e}function V3(n,t,e,i={}){n=Kn(n),n._checkNotDeleted("useEmulator");const s=`${t}:${e}`,o=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&ja(i,o.repoInfo_.emulatorOptions))return;Ro("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(o.repoInfo_.nodeAdmin)i.mockUserToken&&Ro('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new nm(nm.OWNER);else if(i.mockUserToken){const h=typeof i.mockUserToken=="string"?i.mockUserToken:QA(i.mockUserToken,n.app.options.projectId);u=new nm(h)}el(t)&&(l0(t),u0("Database",!0)),M3(o,s,i,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z3(n){AV(fu),tu(new qa("database",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return O3(i,s,o,e)},"PUBLIC").setMultipleInstances(!0)),Or(DS,NS,n),Or(DS,NS,"esm2017")}wo.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)};wo.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)};z3();var px=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ua,tR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(z,N){function V(){}V.prototype=N.prototype,z.D=N.prototype,z.prototype=new V,z.prototype.constructor=z,z.C=function(q,H,W){for(var F=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)F[ee-2]=arguments[ee];return N.prototype[H].apply(q,F)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(z,N,V){V||(V=0);var q=Array(16);if(typeof N=="string")for(var H=0;16>H;++H)q[H]=N.charCodeAt(V++)|N.charCodeAt(V++)<<8|N.charCodeAt(V++)<<16|N.charCodeAt(V++)<<24;else for(H=0;16>H;++H)q[H]=N[V++]|N[V++]<<8|N[V++]<<16|N[V++]<<24;N=z.g[0],V=z.g[1],H=z.g[2];var W=z.g[3],F=N+(W^V&(H^W))+q[0]+3614090360&4294967295;N=V+(F<<7&4294967295|F>>>25),F=W+(H^N&(V^H))+q[1]+3905402710&4294967295,W=N+(F<<12&4294967295|F>>>20),F=H+(V^W&(N^V))+q[2]+606105819&4294967295,H=W+(F<<17&4294967295|F>>>15),F=V+(N^H&(W^N))+q[3]+3250441966&4294967295,V=H+(F<<22&4294967295|F>>>10),F=N+(W^V&(H^W))+q[4]+4118548399&4294967295,N=V+(F<<7&4294967295|F>>>25),F=W+(H^N&(V^H))+q[5]+1200080426&4294967295,W=N+(F<<12&4294967295|F>>>20),F=H+(V^W&(N^V))+q[6]+2821735955&4294967295,H=W+(F<<17&4294967295|F>>>15),F=V+(N^H&(W^N))+q[7]+4249261313&4294967295,V=H+(F<<22&4294967295|F>>>10),F=N+(W^V&(H^W))+q[8]+1770035416&4294967295,N=V+(F<<7&4294967295|F>>>25),F=W+(H^N&(V^H))+q[9]+2336552879&4294967295,W=N+(F<<12&4294967295|F>>>20),F=H+(V^W&(N^V))+q[10]+4294925233&4294967295,H=W+(F<<17&4294967295|F>>>15),F=V+(N^H&(W^N))+q[11]+2304563134&4294967295,V=H+(F<<22&4294967295|F>>>10),F=N+(W^V&(H^W))+q[12]+1804603682&4294967295,N=V+(F<<7&4294967295|F>>>25),F=W+(H^N&(V^H))+q[13]+4254626195&4294967295,W=N+(F<<12&4294967295|F>>>20),F=H+(V^W&(N^V))+q[14]+2792965006&4294967295,H=W+(F<<17&4294967295|F>>>15),F=V+(N^H&(W^N))+q[15]+1236535329&4294967295,V=H+(F<<22&4294967295|F>>>10),F=N+(H^W&(V^H))+q[1]+4129170786&4294967295,N=V+(F<<5&4294967295|F>>>27),F=W+(V^H&(N^V))+q[6]+3225465664&4294967295,W=N+(F<<9&4294967295|F>>>23),F=H+(N^V&(W^N))+q[11]+643717713&4294967295,H=W+(F<<14&4294967295|F>>>18),F=V+(W^N&(H^W))+q[0]+3921069994&4294967295,V=H+(F<<20&4294967295|F>>>12),F=N+(H^W&(V^H))+q[5]+3593408605&4294967295,N=V+(F<<5&4294967295|F>>>27),F=W+(V^H&(N^V))+q[10]+38016083&4294967295,W=N+(F<<9&4294967295|F>>>23),F=H+(N^V&(W^N))+q[15]+3634488961&4294967295,H=W+(F<<14&4294967295|F>>>18),F=V+(W^N&(H^W))+q[4]+3889429448&4294967295,V=H+(F<<20&4294967295|F>>>12),F=N+(H^W&(V^H))+q[9]+568446438&4294967295,N=V+(F<<5&4294967295|F>>>27),F=W+(V^H&(N^V))+q[14]+3275163606&4294967295,W=N+(F<<9&4294967295|F>>>23),F=H+(N^V&(W^N))+q[3]+4107603335&4294967295,H=W+(F<<14&4294967295|F>>>18),F=V+(W^N&(H^W))+q[8]+1163531501&4294967295,V=H+(F<<20&4294967295|F>>>12),F=N+(H^W&(V^H))+q[13]+2850285829&4294967295,N=V+(F<<5&4294967295|F>>>27),F=W+(V^H&(N^V))+q[2]+4243563512&4294967295,W=N+(F<<9&4294967295|F>>>23),F=H+(N^V&(W^N))+q[7]+1735328473&4294967295,H=W+(F<<14&4294967295|F>>>18),F=V+(W^N&(H^W))+q[12]+2368359562&4294967295,V=H+(F<<20&4294967295|F>>>12),F=N+(V^H^W)+q[5]+4294588738&4294967295,N=V+(F<<4&4294967295|F>>>28),F=W+(N^V^H)+q[8]+2272392833&4294967295,W=N+(F<<11&4294967295|F>>>21),F=H+(W^N^V)+q[11]+1839030562&4294967295,H=W+(F<<16&4294967295|F>>>16),F=V+(H^W^N)+q[14]+4259657740&4294967295,V=H+(F<<23&4294967295|F>>>9),F=N+(V^H^W)+q[1]+2763975236&4294967295,N=V+(F<<4&4294967295|F>>>28),F=W+(N^V^H)+q[4]+1272893353&4294967295,W=N+(F<<11&4294967295|F>>>21),F=H+(W^N^V)+q[7]+4139469664&4294967295,H=W+(F<<16&4294967295|F>>>16),F=V+(H^W^N)+q[10]+3200236656&4294967295,V=H+(F<<23&4294967295|F>>>9),F=N+(V^H^W)+q[13]+681279174&4294967295,N=V+(F<<4&4294967295|F>>>28),F=W+(N^V^H)+q[0]+3936430074&4294967295,W=N+(F<<11&4294967295|F>>>21),F=H+(W^N^V)+q[3]+3572445317&4294967295,H=W+(F<<16&4294967295|F>>>16),F=V+(H^W^N)+q[6]+76029189&4294967295,V=H+(F<<23&4294967295|F>>>9),F=N+(V^H^W)+q[9]+3654602809&4294967295,N=V+(F<<4&4294967295|F>>>28),F=W+(N^V^H)+q[12]+3873151461&4294967295,W=N+(F<<11&4294967295|F>>>21),F=H+(W^N^V)+q[15]+530742520&4294967295,H=W+(F<<16&4294967295|F>>>16),F=V+(H^W^N)+q[2]+3299628645&4294967295,V=H+(F<<23&4294967295|F>>>9),F=N+(H^(V|~W))+q[0]+4096336452&4294967295,N=V+(F<<6&4294967295|F>>>26),F=W+(V^(N|~H))+q[7]+1126891415&4294967295,W=N+(F<<10&4294967295|F>>>22),F=H+(N^(W|~V))+q[14]+2878612391&4294967295,H=W+(F<<15&4294967295|F>>>17),F=V+(W^(H|~N))+q[5]+4237533241&4294967295,V=H+(F<<21&4294967295|F>>>11),F=N+(H^(V|~W))+q[12]+1700485571&4294967295,N=V+(F<<6&4294967295|F>>>26),F=W+(V^(N|~H))+q[3]+2399980690&4294967295,W=N+(F<<10&4294967295|F>>>22),F=H+(N^(W|~V))+q[10]+4293915773&4294967295,H=W+(F<<15&4294967295|F>>>17),F=V+(W^(H|~N))+q[1]+2240044497&4294967295,V=H+(F<<21&4294967295|F>>>11),F=N+(H^(V|~W))+q[8]+1873313359&4294967295,N=V+(F<<6&4294967295|F>>>26),F=W+(V^(N|~H))+q[15]+4264355552&4294967295,W=N+(F<<10&4294967295|F>>>22),F=H+(N^(W|~V))+q[6]+2734768916&4294967295,H=W+(F<<15&4294967295|F>>>17),F=V+(W^(H|~N))+q[13]+1309151649&4294967295,V=H+(F<<21&4294967295|F>>>11),F=N+(H^(V|~W))+q[4]+4149444226&4294967295,N=V+(F<<6&4294967295|F>>>26),F=W+(V^(N|~H))+q[11]+3174756917&4294967295,W=N+(F<<10&4294967295|F>>>22),F=H+(N^(W|~V))+q[2]+718787259&4294967295,H=W+(F<<15&4294967295|F>>>17),F=V+(W^(H|~N))+q[9]+3951481745&4294967295,z.g[0]=z.g[0]+N&4294967295,z.g[1]=z.g[1]+(H+(F<<21&4294967295|F>>>11))&4294967295,z.g[2]=z.g[2]+H&4294967295,z.g[3]=z.g[3]+W&4294967295}i.prototype.u=function(z,N){N===void 0&&(N=z.length);for(var V=N-this.blockSize,q=this.B,H=this.h,W=0;W<N;){if(H==0)for(;W<=V;)s(this,z,W),W+=this.blockSize;if(typeof z=="string"){for(;W<N;)if(q[H++]=z.charCodeAt(W++),H==this.blockSize){s(this,q),H=0;break}}else for(;W<N;)if(q[H++]=z[W++],H==this.blockSize){s(this,q),H=0;break}}this.h=H,this.o+=N},i.prototype.v=function(){var z=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);z[0]=128;for(var N=1;N<z.length-8;++N)z[N]=0;var V=8*this.o;for(N=z.length-8;N<z.length;++N)z[N]=V&255,V/=256;for(this.u(z),z=Array(16),N=V=0;4>N;++N)for(var q=0;32>q;q+=8)z[V++]=this.g[N]>>>q&255;return z};function o(z,N){var V=h;return Object.prototype.hasOwnProperty.call(V,z)?V[z]:V[z]=N(z)}function u(z,N){this.h=N;for(var V=[],q=!0,H=z.length-1;0<=H;H--){var W=z[H]|0;q&&W==N||(V[H]=W,q=!1)}this.g=V}var h={};function d(z){return-128<=z&&128>z?o(z,function(N){return new u([N|0],0>N?-1:0)}):new u([z|0],0>z?-1:0)}function m(z){if(isNaN(z)||!isFinite(z))return T;if(0>z)return k(m(-z));for(var N=[],V=1,q=0;z>=V;q++)N[q]=z/V|0,V*=4294967296;return new u(N,0)}function v(z,N){if(z.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(z.charAt(0)=="-")return k(v(z.substring(1),N));if(0<=z.indexOf("-"))throw Error('number format error: interior "-" character');for(var V=m(Math.pow(N,8)),q=T,H=0;H<z.length;H+=8){var W=Math.min(8,z.length-H),F=parseInt(z.substring(H,H+W),N);8>W?(W=m(Math.pow(N,W)),q=q.j(W).add(m(F))):(q=q.j(V),q=q.add(m(F)))}return q}var T=d(0),w=d(1),A=d(16777216);n=u.prototype,n.m=function(){if(M(this))return-k(this).m();for(var z=0,N=1,V=0;V<this.g.length;V++){var q=this.i(V);z+=(0<=q?q:4294967296+q)*N,N*=4294967296}return z},n.toString=function(z){if(z=z||10,2>z||36<z)throw Error("radix out of range: "+z);if(R(this))return"0";if(M(this))return"-"+k(this).toString(z);for(var N=m(Math.pow(z,6)),V=this,q="";;){var H=ut(V,N).g;V=U(V,H.j(N));var W=((0<V.g.length?V.g[0]:V.h)>>>0).toString(z);if(V=H,R(V))return W+q;for(;6>W.length;)W="0"+W;q=W+q}},n.i=function(z){return 0>z?0:z<this.g.length?this.g[z]:this.h};function R(z){if(z.h!=0)return!1;for(var N=0;N<z.g.length;N++)if(z.g[N]!=0)return!1;return!0}function M(z){return z.h==-1}n.l=function(z){return z=U(this,z),M(z)?-1:R(z)?0:1};function k(z){for(var N=z.g.length,V=[],q=0;q<N;q++)V[q]=~z.g[q];return new u(V,~z.h).add(w)}n.abs=function(){return M(this)?k(this):this},n.add=function(z){for(var N=Math.max(this.g.length,z.g.length),V=[],q=0,H=0;H<=N;H++){var W=q+(this.i(H)&65535)+(z.i(H)&65535),F=(W>>>16)+(this.i(H)>>>16)+(z.i(H)>>>16);q=F>>>16,W&=65535,F&=65535,V[H]=F<<16|W}return new u(V,V[V.length-1]&-2147483648?-1:0)};function U(z,N){return z.add(k(N))}n.j=function(z){if(R(this)||R(z))return T;if(M(this))return M(z)?k(this).j(k(z)):k(k(this).j(z));if(M(z))return k(this.j(k(z)));if(0>this.l(A)&&0>z.l(A))return m(this.m()*z.m());for(var N=this.g.length+z.g.length,V=[],q=0;q<2*N;q++)V[q]=0;for(q=0;q<this.g.length;q++)for(var H=0;H<z.g.length;H++){var W=this.i(q)>>>16,F=this.i(q)&65535,ee=z.i(H)>>>16,Gt=z.i(H)&65535;V[2*q+2*H]+=F*Gt,Z(V,2*q+2*H),V[2*q+2*H+1]+=W*Gt,Z(V,2*q+2*H+1),V[2*q+2*H+1]+=F*ee,Z(V,2*q+2*H+1),V[2*q+2*H+2]+=W*ee,Z(V,2*q+2*H+2)}for(q=0;q<N;q++)V[q]=V[2*q+1]<<16|V[2*q];for(q=N;q<2*N;q++)V[q]=0;return new u(V,0)};function Z(z,N){for(;(z[N]&65535)!=z[N];)z[N+1]+=z[N]>>>16,z[N]&=65535,N++}function J(z,N){this.g=z,this.h=N}function ut(z,N){if(R(N))throw Error("division by zero");if(R(z))return new J(T,T);if(M(z))return N=ut(k(z),N),new J(k(N.g),k(N.h));if(M(N))return N=ut(z,k(N)),new J(k(N.g),N.h);if(30<z.g.length){if(M(z)||M(N))throw Error("slowDivide_ only works with positive integers.");for(var V=w,q=N;0>=q.l(z);)V=rt(V),q=rt(q);var H=_t(V,1),W=_t(q,1);for(q=_t(q,2),V=_t(V,2);!R(q);){var F=W.add(q);0>=F.l(z)&&(H=H.add(V),W=F),q=_t(q,1),V=_t(V,1)}return N=U(z,H.j(N)),new J(H,N)}for(H=T;0<=z.l(N);){for(V=Math.max(1,Math.floor(z.m()/N.m())),q=Math.ceil(Math.log(V)/Math.LN2),q=48>=q?1:Math.pow(2,q-48),W=m(V),F=W.j(N);M(F)||0<F.l(z);)V-=q,W=m(V),F=W.j(N);R(W)&&(W=w),H=H.add(W),z=U(z,F)}return new J(H,z)}n.A=function(z){return ut(this,z).h},n.and=function(z){for(var N=Math.max(this.g.length,z.g.length),V=[],q=0;q<N;q++)V[q]=this.i(q)&z.i(q);return new u(V,this.h&z.h)},n.or=function(z){for(var N=Math.max(this.g.length,z.g.length),V=[],q=0;q<N;q++)V[q]=this.i(q)|z.i(q);return new u(V,this.h|z.h)},n.xor=function(z){for(var N=Math.max(this.g.length,z.g.length),V=[],q=0;q<N;q++)V[q]=this.i(q)^z.i(q);return new u(V,this.h^z.h)};function rt(z){for(var N=z.g.length+1,V=[],q=0;q<N;q++)V[q]=z.i(q)<<1|z.i(q-1)>>>31;return new u(V,z.h)}function _t(z,N){var V=N>>5;N%=32;for(var q=z.g.length-V,H=[],W=0;W<q;W++)H[W]=0<N?z.i(W+V)>>>N|z.i(W+V+1)<<32-N:z.i(W+V);return new u(H,z.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,tR=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,Ua=u}).apply(typeof px<"u"?px:typeof self<"u"?self:typeof window<"u"?window:{});var Pp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eR,lf,nR,sm,xv,iR,sR,rR;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,S,C){return g==Array.prototype||g==Object.prototype||(g[S]=C.value),g};function e(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pp=="object"&&Pp];for(var S=0;S<g.length;++S){var C=g[S];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=e(this);function s(g,S){if(S)t:{var C=i;g=g.split(".");for(var D=0;D<g.length-1;D++){var Q=g[D];if(!(Q in C))break t;C=C[Q]}g=g[g.length-1],D=C[g],S=S(D),S!=D&&S!=null&&t(C,g,{configurable:!0,writable:!0,value:S})}}function o(g,S){g instanceof String&&(g+="");var C=0,D=!1,Q={next:function(){if(!D&&C<g.length){var at=C++;return{value:S(at,g[at]),done:!1}}return D=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}s("Array.prototype.values",function(g){return g||function(){return o(this,function(S,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function d(g){var S=typeof g;return S=S!="object"?S:g?Array.isArray(g)?"array":S:"null",S=="array"||S=="object"&&typeof g.length=="number"}function m(g){var S=typeof g;return S=="object"&&g!=null||S=="function"}function v(g,S,C){return g.call.apply(g.bind,arguments)}function T(g,S,C){if(!g)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,D),g.apply(S,Q)}}return function(){return g.apply(S,arguments)}}function w(g,S,C){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:T,w.apply(null,arguments)}function A(g,S){var C=Array.prototype.slice.call(arguments,1);return function(){var D=C.slice();return D.push.apply(D,arguments),g.apply(this,D)}}function R(g,S){function C(){}C.prototype=S.prototype,g.aa=S.prototype,g.prototype=new C,g.prototype.constructor=g,g.Qb=function(D,Q,at){for(var wt=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)wt[ce-2]=arguments[ce];return S.prototype[Q].apply(D,wt)}}function M(g){const S=g.length;if(0<S){const C=Array(S);for(let D=0;D<S;D++)C[D]=g[D];return C}return[]}function k(g,S){for(let C=1;C<arguments.length;C++){const D=arguments[C];if(d(D)){const Q=g.length||0,at=D.length||0;g.length=Q+at;for(let wt=0;wt<at;wt++)g[Q+wt]=D[wt]}else g.push(D)}}class U{constructor(S,C){this.i=S,this.j=C,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function Z(g){return/^[\s\xa0]*$/.test(g)}function J(){var g=h.navigator;return g&&(g=g.userAgent)?g:""}function ut(g){return ut[" "](g),g}ut[" "]=function(){};var rt=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function _t(g,S,C){for(const D in g)S.call(C,g[D],D,g)}function z(g,S){for(const C in g)S.call(void 0,g[C],C,g)}function N(g){const S={};for(const C in g)S[C]=g[C];return S}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q(g,S){let C,D;for(let Q=1;Q<arguments.length;Q++){D=arguments[Q];for(C in D)g[C]=D[C];for(let at=0;at<V.length;at++)C=V[at],Object.prototype.hasOwnProperty.call(D,C)&&(g[C]=D[C])}}function H(g){var S=1;g=g.split(":");const C=[];for(;0<S&&g.length;)C.push(g.shift()),S--;return g.length&&C.push(g.join(":")),C}function W(g){h.setTimeout(()=>{throw g},0)}function F(){var g=Xt;let S=null;return g.g&&(S=g.g,g.g=g.g.next,g.g||(g.h=null),S.next=null),S}class ee{constructor(){this.h=this.g=null}add(S,C){const D=Gt.get();D.set(S,C),this.h?this.h.next=D:this.g=D,this.h=D}}var Gt=new U(()=>new nt,g=>g.reset());class nt{constructor(){this.next=this.g=this.h=null}set(S,C){this.h=S,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let Et,vt=!1,Xt=new ee,B=()=>{const g=h.Promise.resolve(void 0);Et=()=>{g.then(lt)}};var lt=()=>{for(var g;g=F();){try{g.h.call(g.g)}catch(C){W(C)}var S=Gt;S.j(g),100>S.h&&(S.h++,g.next=S.g,S.g=g)}vt=!1};function bt(){this.s=this.s,this.C=this.C}bt.prototype.s=!1,bt.prototype.ma=function(){this.s||(this.s=!0,this.N())},bt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function mt(g,S){this.type=g,this.g=this.target=S,this.defaultPrevented=!1}mt.prototype.h=function(){this.defaultPrevented=!0};var xt=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var g=!1,S=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};h.addEventListener("test",C,S),h.removeEventListener("test",C,S)}catch{}return g}();function At(g,S){if(mt.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var C=this.type=g.type,D=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=S,S=g.relatedTarget){if(rt){t:{try{ut(S.nodeName);var Q=!0;break t}catch{}Q=!1}Q||(S=null)}}else C=="mouseover"?S=g.fromElement:C=="mouseout"&&(S=g.toElement);this.relatedTarget=S,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Tt[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&At.aa.h.call(this)}}R(At,mt);var Tt={2:"touch",3:"pen",4:"mouse"};At.prototype.h=function(){At.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),de=0;function Ni(g,S,C,D,Q){this.listener=g,this.proxy=null,this.src=S,this.type=C,this.capture=!!D,this.ha=Q,this.key=++de,this.da=this.fa=!1}function os(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Li(g){this.src=g,this.g={},this.h=0}Li.prototype.add=function(g,S,C,D,Q){var at=g.toString();g=this.g[at],g||(g=this.g[at]=[],this.h++);var wt=Os(g,S,D,Q);return-1<wt?(S=g[wt],C||(S.fa=!1)):(S=new Ni(S,this.src,at,!!D,Q),S.fa=C,g.push(S)),S};function Vi(g,S){var C=S.type;if(C in g.g){var D=g.g[C],Q=Array.prototype.indexOf.call(D,S,void 0),at;(at=0<=Q)&&Array.prototype.splice.call(D,Q,1),at&&(os(S),g.g[C].length==0&&(delete g.g[C],g.h--))}}function Os(g,S,C,D){for(var Q=0;Q<g.length;++Q){var at=g[Q];if(!at.da&&at.listener==S&&at.capture==!!C&&at.ha==D)return Q}return-1}var Ur="closure_lm_"+(1e6*Math.random()|0),Do={};function ol(g,S,C,D,Q){if(Array.isArray(S)){for(var at=0;at<S.length;at++)ol(g,S[at],C,D,Q);return null}return C=wu(C),g&&g[Pe]?g.K(S,C,m(D)?!!D.capture:!1,Q):Qn(g,S,C,!1,D,Q)}function Qn(g,S,C,D,Q,at){if(!S)throw Error("Invalid event type");var wt=m(Q)?!!Q.capture:!!Q,ce=Hr(g);if(ce||(g[Ur]=ce=new Li(g)),C=ce.add(S,C,D,wt,at),C.proxy)return C;if(D=No(),C.proxy=D,D.src=g,D.listener=C,g.addEventListener)xt||(Q=wt),Q===void 0&&(Q=!1),g.addEventListener(S.toString(),D,Q);else if(g.attachEvent)g.attachEvent(ks(S.toString()),D);else if(g.addListener&&g.removeListener)g.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return C}function No(){function g(C){return S.call(g.src,g.listener,C)}const S=Tu;return g}function al(g,S,C,D,Q){if(Array.isArray(S))for(var at=0;at<S.length;at++)al(g,S[at],C,D,Q);else D=m(D)?!!D.capture:!!D,C=wu(C),g&&g[Pe]?(g=g.i,S=String(S).toString(),S in g.g&&(at=g.g[S],C=Os(at,C,D,Q),-1<C&&(os(at[C]),Array.prototype.splice.call(at,C,1),at.length==0&&(delete g.g[S],g.h--)))):g&&(g=Hr(g))&&(S=g.g[S.toString()],g=-1,S&&(g=Os(S,C,D,Q)),(C=-1<g?S[g]:null)&&Fr(C))}function Fr(g){if(typeof g!="number"&&g&&!g.da){var S=g.src;if(S&&S[Pe])Vi(S.i,g);else{var C=g.type,D=g.proxy;S.removeEventListener?S.removeEventListener(C,D,g.capture):S.detachEvent?S.detachEvent(ks(C),D):S.addListener&&S.removeListener&&S.removeListener(D),(C=Hr(S))?(Vi(C,g),C.h==0&&(C.src=null,S[Ur]=null)):os(g)}}}function ks(g){return g in Do?Do[g]:Do[g]="on"+g}function Tu(g,S){if(g.da)g=!0;else{S=new At(S,this);var C=g.listener,D=g.ha||g.src;g.fa&&Fr(g),g=C.call(D,S)}return g}function Hr(g){return g=g[Ur],g instanceof Li?g:null}var ll="__closure_events_fn_"+(1e9*Math.random()>>>0);function wu(g){return typeof g=="function"?g:(g[ll]||(g[ll]=function(S){return g.handleEvent(S)}),g[ll])}function ze(){bt.call(this),this.i=new Li(this),this.M=this,this.F=null}R(ze,bt),ze.prototype[Pe]=!0,ze.prototype.removeEventListener=function(g,S,C,D){al(this,g,S,C,D)};function ye(g,S){var C,D=g.F;if(D)for(C=[];D;D=D.F)C.push(D);if(g=g.M,D=S.type||S,typeof S=="string")S=new mt(S,g);else if(S instanceof mt)S.target=S.target||g;else{var Q=S;S=new mt(D,g),q(S,Q)}if(Q=!0,C)for(var at=C.length-1;0<=at;at--){var wt=S.g=C[at];Q=Xn(wt,D,!0,S)&&Q}if(wt=S.g=g,Q=Xn(wt,D,!0,S)&&Q,Q=Xn(wt,D,!1,S)&&Q,C)for(at=0;at<C.length;at++)wt=S.g=C[at],Q=Xn(wt,D,!1,S)&&Q}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var g=this.i,S;for(S in g.g){for(var C=g.g[S],D=0;D<C.length;D++)os(C[D]);delete g.g[S],g.h--}}this.F=null},ze.prototype.K=function(g,S,C,D){return this.i.add(String(g),S,!1,C,D)},ze.prototype.L=function(g,S,C,D){return this.i.add(String(g),S,!0,C,D)};function Xn(g,S,C,D){if(S=g.i.g[String(S)],!S)return!0;S=S.concat();for(var Q=!0,at=0;at<S.length;++at){var wt=S[at];if(wt&&!wt.da&&wt.capture==C){var ce=wt.listener,rn=wt.ha||wt.src;wt.fa&&Vi(g.i,wt),Q=ce.call(rn,D)!==!1&&Q}}return Q&&!D.defaultPrevented}function An(g,S,C){if(typeof g=="function")C&&(g=w(g,C));else if(g&&typeof g.handleEvent=="function")g=w(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:h.setTimeout(g,S||0)}function ul(g){g.g=An(()=>{g.g=null,g.i&&(g.i=!1,ul(g))},g.l);const S=g.h;g.h=null,g.m.apply(null,S)}class Su extends bt{constructor(S,C){super(),this.m=S,this.l=C,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:ul(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jr(g){bt.call(this),this.h=g,this.g={}}R(jr,bt);var lr=[];function Ds(g){_t(g.g,function(S,C){this.g.hasOwnProperty(C)&&Fr(S)},g),g.g={}}jr.prototype.N=function(){jr.aa.N.call(this),Ds(this)},jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ei=h.JSON.stringify,Lo=h.JSON.parse,zi=class{stringify(g){return h.JSON.stringify(g,void 0)}parse(g){return h.JSON.parse(g,void 0)}};function cl(){}cl.prototype.h=null;function hl(g){return g.h||(g.h=g.i())}function Vo(){}var as={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ls(){mt.call(this,"d")}R(ls,mt);function fl(){mt.call(this,"c")}R(fl,mt);var us={},dl=null;function ur(){return dl=dl||new ze}us.La="serverreachability";function zo(g){mt.call(this,us.La,g)}R(zo,mt);function cr(g){const S=ur();ye(S,new zo(S))}us.STAT_EVENT="statevent";function Bo(g,S){mt.call(this,us.STAT_EVENT,g),this.stat=S}R(Bo,mt);function Be(g){const S=ur();ye(S,new Bo(S,g))}us.Ma="timingevent";function ln(g,S){mt.call(this,us.Ma,g),this.size=S}R(ln,mt);function sn(g,S){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){g()},S)}function Ti(){this.g=!0}Ti.prototype.xa=function(){this.g=!1};function Jn(g,S,C,D,Q,at){g.info(function(){if(g.g)if(at)for(var wt="",ce=at.split("&"),rn=0;rn<ce.length;rn++){var he=ce[rn].split("=");if(1<he.length){var Se=he[0];he=he[1];var Fe=Se.split("_");wt=2<=Fe.length&&Fe[1]=="type"?wt+(Se+"="+he+"&"):wt+(Se+"=redacted&")}}else wt=null;else wt=at;return"XMLHTTP REQ ("+D+") [attempt "+Q+"]: "+S+`
`+C+`
`+wt})}function kt(g,S,C,D,Q,at,wt){g.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+Q+"]: "+S+`
`+C+`
`+at+" "+wt})}function Ns(g,S,C,D){g.info(function(){return"XMLHTTP TEXT ("+S+"): "+hr(g,C)+(D?" "+D:"")})}function pl(g,S){g.info(function(){return"TIMEOUT: "+S})}Ti.prototype.info=function(){};function hr(g,S){if(!g.g)return S;if(!S)return null;try{var C=JSON.parse(S);if(C){for(g=0;g<C.length;g++)if(Array.isArray(C[g])){var D=C[g];if(!(2>D.length)){var Q=D[1];if(Array.isArray(Q)&&!(1>Q.length)){var at=Q[0];if(at!="noop"&&at!="stop"&&at!="close")for(var wt=1;wt<Q.length;wt++)Q[wt]=""}}}}return Ei(C)}catch{return S}}var Ls={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ui;function Fn(){}R(Fn,cl),Fn.prototype.g=function(){return new XMLHttpRequest},Fn.prototype.i=function(){return{}},Ui=new Fn;function In(g,S,C,D){this.j=g,this.i=S,this.l=C,this.R=D||1,this.U=new jr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Je}function Je(){this.i=null,this.g="",this.h=!1}var ml={},Uo={};function Fi(g,S,C){g.L=1,g.v=pi(Ue(S)),g.m=C,g.P=!0,cs(g,null)}function cs(g,S){g.F=Date.now(),Gr(g),g.A=Ue(g.v);var C=g.A,D=g.R;Array.isArray(D)||(D=[String(D)]),yl(C.i,"t",D),g.C=0,C=g.j.J,g.h=new Je,g.g=Pu(g.j,C?S:null,!g.m),0<g.O&&(g.M=new Su(w(g.Y,g,g.g),g.O)),S=g.U,C=g.g,D=g.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(lr[0]=Q.toString()),Q=lr);for(var at=0;at<Q.length;at++){var wt=ol(C,Q[at],D||S.handleEvent,!1,S.h||S);if(!wt)break;S.g[wt.key]=wt}S=g.H?N(g.H):{},g.m?(g.u||(g.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,S)):(g.u="GET",g.g.ea(g.A,g.u,null,S)),cr(),Jn(g.i,g.u,g.A,g.l,g.R,g.m)}In.prototype.ca=function(g){g=g.target;const S=this.M;S&&Mn(g)==3?S.j():this.Y(g)},In.prototype.Y=function(g){try{if(g==this.g)t:{const Fe=Mn(this.g);var S=this.g.Ba();const qs=this.g.Z();if(!(3>Fe)&&(Fe!=3||this.g&&(this.h.h||this.g.oa()||vl(this.g)))){this.J||Fe!=4||S==7||(S==8||0>=qs?cr(3):cr(2)),fr(this);var C=this.g.Z();this.X=C;e:if(xu(this)){var D=vl(this.g);g="";var Q=D.length,at=Mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bn(this),hs(this);var wt="";break e}this.h.i=new h.TextDecoder}for(S=0;S<Q;S++)this.h.h=!0,g+=this.h.i.decode(D[S],{stream:!(at&&S==Q-1)});D.length=0,this.h.g+=g,this.C=0,wt=this.h.g}else wt=this.g.oa();if(this.o=C==200,kt(this.i,this.u,this.A,this.l,this.R,Fe,C),this.o){if(this.T&&!this.K){e:{if(this.g){var ce,rn=this.g;if((ce=rn.g?rn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(ce)){var he=ce;break e}}he=null}if(C=he)Ns(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vs(this,C);else{this.o=!1,this.s=3,Be(12),bn(this),hs(this);break t}}if(this.P){C=!0;let Ne;for(;!this.J&&this.C<wt.length;)if(Ne=qr(this,wt),Ne==Uo){Fe==4&&(this.s=4,Be(14),C=!1),Ns(this.i,this.l,null,"[Incomplete Response]");break}else if(Ne==ml){this.s=4,Be(15),Ns(this.i,this.l,wt,"[Invalid Chunk]"),C=!1;break}else Ns(this.i,this.l,Ne,null),Vs(this,Ne);if(xu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||wt.length!=0||this.h.h||(this.s=1,Be(16),C=!1),this.o=this.o&&C,!C)Ns(this.i,this.l,wt,"[Invalid Chunked Response]"),bn(this),hs(this);else if(0<wt.length&&!this.W){this.W=!0;var Se=this.j;Se.g==this&&Se.ba&&!Se.M&&(Se.j.info("Great, no buffering proxy detected. Bytes received: "+wt.length),yr(Se),Se.M=!0,Be(11))}}else Ns(this.i,this.l,wt,null),Vs(this,wt);Fe==4&&bn(this),this.o&&!this.J&&(Fe==4?El(this.j,this):(this.o=!1,Gr(this)))}else nh(this.g),C==400&&0<wt.indexOf("Unknown SID")?(this.s=3,Be(12)):(this.s=0,Be(13)),bn(this),hs(this)}}}catch{}finally{}};function xu(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function qr(g,S){var C=g.C,D=S.indexOf(`
`,C);return D==-1?Uo:(C=Number(S.substring(C,D)),isNaN(C)?ml:(D+=1,D+C>S.length?Uo:(S=S.slice(D,D+C),g.C=D+C,S)))}In.prototype.cancel=function(){this.J=!0,bn(this)};function Gr(g){g.S=Date.now()+g.I,Cu(g,g.I)}function Cu(g,S){if(g.B!=null)throw Error("WatchDog timer not null");g.B=sn(w(g.ba,g),S)}function fr(g){g.B&&(h.clearTimeout(g.B),g.B=null)}In.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(pl(this.i,this.A),this.L!=2&&(cr(),Be(17)),bn(this),this.s=2,hs(this)):Cu(this,this.S-g)};function hs(g){g.j.G==0||g.J||El(g.j,g)}function bn(g){fr(g);var S=g.M;S&&typeof S.ma=="function"&&S.ma(),g.M=null,Ds(g.U),g.g&&(S=g.g,g.g=null,S.abort(),S.ma())}function Vs(g,S){try{var C=g.j;if(C.G!=0&&(C.g==g||ne(C.h,g))){if(!g.K&&ne(C.h,g)&&C.G==3){try{var D=C.Da.g.parse(S)}catch{D=null}if(Array.isArray(D)&&D.length==3){var Q=D;if(Q[0]==0){t:if(!C.u){if(C.g)if(C.g.F+3e3<g.F)Ko(C),Wo(C);else break t;Yo(C),Be(18)}}else C.za=Q[1],0<C.za-C.T&&37500>Q[2]&&C.F&&C.v==0&&!C.C&&(C.C=sn(w(C.Za,C),6e3));if(1>=ds(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else js(C,11)}else if((g.K||C.g==g)&&Ko(C),!Z(S))for(Q=C.Da.g.parse(S),S=0;S<Q.length;S++){let he=Q[S];if(C.T=he[0],he=he[1],C.G==2)if(he[0]=="c"){C.K=he[1],C.ia=he[2];const Se=he[3];Se!=null&&(C.la=Se,C.j.info("VER="+C.la));const Fe=he[4];Fe!=null&&(C.Aa=Fe,C.j.info("SVER="+C.Aa));const qs=he[5];qs!=null&&typeof qs=="number"&&0<qs&&(D=1.5*qs,C.L=D,C.j.info("backChannelRequestTimeoutMs_="+D)),D=C;const Ne=g.g;if(Ne){const ys=Ne.g?Ne.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ys){var at=D.h;at.g||ys.indexOf("spdy")==-1&&ys.indexOf("quic")==-1&&ys.indexOf("h2")==-1||(at.j=at.l,at.g=new Set,at.h&&(we(at,at.h),at.h=null))}if(D.D){const vs=Ne.g?Ne.g.getResponseHeader("X-HTTP-Session-Id"):null;vs&&(D.ya=vs,Bt(D.I,D.D,vs))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-g.F,C.j.info("Handshake RTT: "+C.R+"ms")),D=C;var wt=g;if(D.qa=Qo(D,D.J?D.ia:null,D.W),wt.K){pn(D.h,wt);var ce=wt,rn=D.L;rn&&(ce.I=rn),ce.B&&(fr(ce),Gr(ce)),D.g=wt}else Yi(D);0<C.i.length&&_r(C)}else he[0]!="stop"&&he[0]!="close"||js(C,7);else C.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?js(C,7):Go(C):he[0]!="noop"&&C.l&&C.l.ta(he),C.v=0)}}cr(4)}catch{}}var dr=class{constructor(g,S){this.g=g,this.map=S}};function fs(g){this.l=g||10,h.PerformanceNavigationTiming?(g=h.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wr(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function ds(g){return g.h?1:g.g?g.g.size:0}function ne(g,S){return g.h?g.h==S:g.g?g.g.has(S):!1}function we(g,S){g.g?g.g.add(S):g.h=S}function pn(g,S){g.h&&g.h==S?g.h=null:g.g&&g.g.has(S)&&g.g.delete(S)}fs.prototype.cancel=function(){if(this.i=ps(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function ps(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let S=g.i;for(const C of g.g.values())S=S.concat(C.D);return S}return M(g.i)}function pr(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(d(g)){for(var S=[],C=g.length,D=0;D<C;D++)S.push(g[D]);return S}S=[],C=0;for(D in g)S[C++]=g[D];return S}function mr(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(d(g)||typeof g=="string"){var S=[];g=g.length;for(var C=0;C<g;C++)S.push(C);return S}S=[],C=0;for(const D in g)S[C++]=D;return S}}}function Wt(g,S){if(g.forEach&&typeof g.forEach=="function")g.forEach(S,void 0);else if(d(g)||typeof g=="string")Array.prototype.forEach.call(g,S,void 0);else for(var C=mr(g),D=pr(g),Q=D.length,at=0;at<Q;at++)S.call(void 0,D[at],C&&C[at],g)}var Ce=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gl(g,S){if(g){g=g.split("&");for(var C=0;C<g.length;C++){var D=g[C].indexOf("="),Q=null;if(0<=D){var at=g[C].substring(0,D);Q=g[C].substring(D+1)}else at=g[C];S(at,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function We(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof We){this.h=g.h,Yr(this,g.j),this.o=g.o,this.g=g.g,Hi(this,g.s),this.l=g.l;var S=g.i,C=new qi;C.i=S.i,S.g&&(C.g=new Map(S.g),C.h=S.h),Hn(this,C),this.m=g.m}else g&&(S=String(g).match(Ce))?(this.h=!1,Yr(this,S[1]||"",!0),this.o=Rn(S[2]||""),this.g=Rn(S[3]||"",!0),Hi(this,S[4]),this.l=Rn(S[5]||"",!0),Hn(this,S[6]||"",!0),this.m=Rn(S[7]||"")):(this.h=!1,this.i=new qi(null,this.h))}We.prototype.toString=function(){var g=[],S=this.j;S&&g.push(ji(S,zs,!0),":");var C=this.g;return(C||S=="file")&&(g.push("//"),(S=this.o)&&g.push(ji(S,zs,!0),"@"),g.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&g.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(ji(C,C.charAt(0)=="/"?_l:Zr,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",ji(C,gr)),g.join("")};function Ue(g){return new We(g)}function Yr(g,S,C){g.j=C?Rn(S,!0):S,g.j&&(g.j=g.j.replace(/:$/,""))}function Hi(g,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);g.s=S}else g.s=null}function Hn(g,S,C){S instanceof qi?(g.i=S,mi(g.i,g.h)):(C||(S=ji(S,Ho)),g.i=new qi(S,g.h))}function Bt(g,S,C){g.i.set(S,C)}function pi(g){return Bt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Rn(g,S){return g?S?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function ji(g,S,C){return typeof g=="string"?(g=encodeURI(g).replace(S,Fo),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Fo(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var zs=/[#\/\?@]/g,Zr=/[#\?:]/g,_l=/[#\?]/g,Ho=/[#\?@]/g,gr=/#/g;function qi(g,S){this.h=this.g=null,this.i=g||null,this.j=!!S}function jn(g){g.g||(g.g=new Map,g.h=0,g.i&&gl(g.i,function(S,C){g.add(decodeURIComponent(S.replace(/\+/g," ")),C)}))}n=qi.prototype,n.add=function(g,S){jn(this),this.i=null,g=Lt(this,g);var C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(S),this.h+=1,this};function ms(g,S){jn(g),S=Lt(g,S),g.g.has(S)&&(g.i=null,g.h-=g.g.get(S).length,g.g.delete(S))}function Gi(g,S){return jn(g),S=Lt(g,S),g.g.has(S)}n.forEach=function(g,S){jn(this),this.g.forEach(function(C,D){C.forEach(function(Q){g.call(S,Q,D,this)},this)},this)},n.na=function(){jn(this);const g=Array.from(this.g.values()),S=Array.from(this.g.keys()),C=[];for(let D=0;D<S.length;D++){const Q=g[D];for(let at=0;at<Q.length;at++)C.push(S[D])}return C},n.V=function(g){jn(this);let S=[];if(typeof g=="string")Gi(this,g)&&(S=S.concat(this.g.get(Lt(this,g))));else{g=Array.from(this.g.values());for(let C=0;C<g.length;C++)S=S.concat(g[C])}return S},n.set=function(g,S){return jn(this),this.i=null,g=Lt(this,g),Gi(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[S]),this.h+=1,this},n.get=function(g,S){return g?(g=this.V(g),0<g.length?String(g[0]):S):S};function yl(g,S,C){ms(g,S),0<C.length&&(g.i=null,g.g.set(Lt(g,S),M(C)),g.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],S=Array.from(this.g.keys());for(var C=0;C<S.length;C++){var D=S[C];const at=encodeURIComponent(String(D)),wt=this.V(D);for(D=0;D<wt.length;D++){var Q=at;wt[D]!==""&&(Q+="="+encodeURIComponent(String(wt[D]))),g.push(Q)}}return this.i=g.join("&")};function Lt(g,S){return S=String(S),g.j&&(S=S.toLowerCase()),S}function mi(g,S){S&&!g.j&&(jn(g),g.i=null,g.g.forEach(function(C,D){var Q=D.toLowerCase();D!=Q&&(ms(this,D),yl(this,Q,C))},g)),g.j=S}function pe(g,S){const C=new Ti;if(h.Image){const D=new Image;D.onload=A(ti,C,"TestLoadImage: loaded",!0,S,D),D.onerror=A(ti,C,"TestLoadImage: error",!1,S,D),D.onabort=A(ti,C,"TestLoadImage: abort",!1,S,D),D.ontimeout=A(ti,C,"TestLoadImage: timeout",!1,S,D),h.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=g}else S(!1)}function wi(g,S){const C=new Ti,D=new AbortController,Q=setTimeout(()=>{D.abort(),ti(C,"TestPingServer: timeout",!1,S)},1e4);fetch(g,{signal:D.signal}).then(at=>{clearTimeout(Q),at.ok?ti(C,"TestPingServer: ok",!0,S):ti(C,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(Q),ti(C,"TestPingServer: error",!1,S)})}function ti(g,S,C,D,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),D(C)}catch{}}function Bs(){this.g=new zi}function Si(g,S,C){const D=C||"";try{Wt(g,function(Q,at){let wt=Q;m(Q)&&(wt=Ei(Q)),S.push(D+at+"="+encodeURIComponent(wt))})}catch(Q){throw S.push(D+"type="+encodeURIComponent("_badmap")),Q}}function ei(g){this.l=g.Ub||null,this.j=g.eb||!1}R(ei,cl),ei.prototype.g=function(){return new Wi(this.l,this.j)},ei.prototype.i=function(g){return function(){return g}}({});function Wi(g,S){ze.call(this),this.D=g,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Wi,ze),n=Wi.prototype,n.open=function(g,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=S,this.readyState=1,Pn(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(S.body=g),(this.D||h).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Me(this)),this.readyState=0},n.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Pn(this)),this.g&&(this.readyState=3,Pn(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Us(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function Us(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}n.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var S=g.value?g.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!g.done}))&&(this.response=this.responseText+=S)}g.done?Me(this):Pn(this),this.readyState==3&&Us(this)}},n.Ra=function(g){this.g&&(this.response=this.responseText=g,Me(this))},n.Qa=function(g){this.g&&(this.response=g,Me(this))},n.ga=function(){this.g&&Me(this)};function Me(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Pn(g)}n.setRequestHeader=function(g,S){this.u.append(g,S)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],S=this.h.entries();for(var C=S.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=S.next();return g.join(`\r
`)};function Pn(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Wi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function jo(g){let S="";return _t(g,function(C,D){S+=D,S+=":",S+=C,S+=`\r
`}),S}function un(g,S,C){t:{for(D in C){var D=!1;break t}D=!0}D||(C=jo(C),typeof g=="string"?C!=null&&encodeURIComponent(String(C)):Bt(g,S,C))}function ve(g){ze.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(ve,ze);var Kr=/^https?$/i,Fs=["POST","PUT"];n=ve.prototype,n.Ha=function(g){this.J=g},n.ea=function(g,S,C,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);S=S?S.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ui.g(),this.v=this.o?hl(this.o):hl(Ui),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(S,String(g),!0),this.B=!1}catch(at){Au(this,at);return}if(g=C||"",C=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var Q in D)C.set(Q,D[Q]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const at of D.keys())C.set(at,D.get(at));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(C.keys()).find(at=>at.toLowerCase()=="content-type"),Q=h.FormData&&g instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Fs,S,void 0))||D||Q||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[at,wt]of C)this.g.setRequestHeader(at,wt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{En(this),this.u=!0,this.g.send(g),this.u=!1}catch(at){Au(this,at)}};function Au(g,S){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=S,g.m=5,$r(g),gs(g)}function $r(g){g.A||(g.A=!0,ye(g,"complete"),ye(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,ye(this,"complete"),ye(this,"abort"),gs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gs(this,!0)),ve.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Kt(this):this.bb())},n.bb=function(){Kt(this)};function Kt(g){if(g.h&&typeof u<"u"&&(!g.v[1]||Mn(g)!=4||g.Z()!=2)){if(g.u&&Mn(g)==4)An(g.Ea,0,g);else if(ye(g,"readystatechange"),Mn(g)==4){g.h=!1;try{const wt=g.Z();t:switch(wt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break t;default:S=!1}var C;if(!(C=S)){var D;if(D=wt===0){var Q=String(g.D).match(Ce)[1]||null;!Q&&h.self&&h.self.location&&(Q=h.self.location.protocol.slice(0,-1)),D=!Kr.test(Q?Q.toLowerCase():"")}C=D}if(C)ye(g,"complete"),ye(g,"success");else{g.m=6;try{var at=2<Mn(g)?g.g.statusText:""}catch{at=""}g.l=at+" ["+g.Z()+"]",$r(g)}}finally{gs(g)}}}}function gs(g,S){if(g.g){En(g);const C=g.g,D=g.v[0]?()=>{}:null;g.g=null,g.v=null,S||ye(g,"ready");try{C.onreadystatechange=D}catch{}}}function En(g){g.I&&(h.clearTimeout(g.I),g.I=null)}n.isActive=function(){return!!this.g};function Mn(g){return g.g?g.g.readyState:0}n.Z=function(){try{return 2<Mn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(g){if(this.g){var S=this.g.responseText;return g&&S.indexOf(g)==0&&(S=S.substring(g.length)),Lo(S)}};function vl(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function nh(g){const S={};g=(g.g&&2<=Mn(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<g.length;D++){if(Z(g[D]))continue;var C=H(g[D]);const Q=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const at=S[Q]||[];S[Q]=at,at.push(C)}z(S,function(D){return D.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hs(g,S,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||S}function qo(g){this.Aa=0,this.i=[],this.j=new Ti,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hs("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hs("baseRetryDelayMs",5e3,g),this.cb=Hs("retryDelaySeedMs",1e4,g),this.Wa=Hs("forwardChannelMaxRetries",2,g),this.wa=Hs("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new fs(g&&g.concurrentRequestLimit),this.Da=new Bs,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=qo.prototype,n.la=8,n.G=1,n.connect=function(g,S,C,D){Be(0),this.W=g,this.H=S||{},C&&D!==void 0&&(this.H.OSID=C,this.H.OAID=D),this.F=this.X,this.I=Qo(this,null,this.W),_r(this)};function Go(g){if(Iu(g),g.G==3){var S=g.U++,C=Ue(g.I);if(Bt(C,"SID",g.K),Bt(C,"RID",S),Bt(C,"TYPE","terminate"),Qr(g,C),S=new In(g,g.j,S),S.L=2,S.v=pi(Ue(C)),C=!1,h.navigator&&h.navigator.sendBeacon)try{C=h.navigator.sendBeacon(S.v.toString(),"")}catch{}!C&&h.Image&&(new Image().src=S.v,C=!0),C||(S.g=Pu(S.j,null),S.g.ea(S.v)),S.F=Date.now(),Gr(S)}Ru(g)}function Wo(g){g.g&&(yr(g),g.g.cancel(),g.g=null)}function Iu(g){Wo(g),g.u&&(h.clearTimeout(g.u),g.u=null),Ko(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&h.clearTimeout(g.s),g.s=null)}function _r(g){if(!Wr(g.h)&&!g.s){g.s=!0;var S=g.Ga;Et||B(),vt||(Et(),vt=!0),Xt.add(S,g),g.B=0}}function ih(g,S){return ds(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=S.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=sn(w(g.Ga,g,S),$o(g,g.B)),g.B++,!0)}n.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const Q=new In(this,this.j,g);let at=this.o;if(this.S&&(at?(at=N(at),q(at,this.S)):at=this.S),this.m!==null||this.O||(Q.H=at,at=null),this.P)t:{for(var S=0,C=0;C<this.i.length;C++){e:{var D=this.i[C];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break e}D=void 0}if(D===void 0)break;if(S+=D,4096<S){S=C;break t}if(S===4096||C===this.i.length-1){S=C+1;break t}}S=1e3}else S=1e3;S=bl(this,Q,S),C=Ue(this.I),Bt(C,"RID",g),Bt(C,"CVER",22),this.D&&Bt(C,"X-HTTP-Session-Id",this.D),Qr(this,C),at&&(this.O?S="headers="+encodeURIComponent(String(jo(at)))+"&"+S:this.m&&un(C,this.m,at)),we(this.h,Q),this.Ua&&Bt(C,"TYPE","init"),this.P?(Bt(C,"$req",S),Bt(C,"SID","null"),Q.T=!0,Fi(Q,C,null)):Fi(Q,C,S),this.G=2}}else this.G==3&&(g?ni(this,g):this.i.length==0||Wr(this.h)||ni(this))};function ni(g,S){var C;S?C=S.l:C=g.U++;const D=Ue(g.I);Bt(D,"SID",g.K),Bt(D,"RID",C),Bt(D,"AID",g.T),Qr(g,D),g.m&&g.o&&un(D,g.m,g.o),C=new In(g,g.j,C,g.B+1),g.m===null&&(C.H=g.o),S&&(g.i=S.D.concat(g.i)),S=bl(g,C,1e3),C.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),we(g.h,C),Fi(C,D,S)}function Qr(g,S){g.H&&_t(g.H,function(C,D){Bt(S,D,C)}),g.l&&Wt({},function(C,D){Bt(S,D,C)})}function bl(g,S,C){C=Math.min(g.i.length,C);var D=g.l?w(g.l.Na,g.l,g):null;t:{var Q=g.i;let at=-1;for(;;){const wt=["count="+C];at==-1?0<C?(at=Q[0].g,wt.push("ofs="+at)):at=0:wt.push("ofs="+at);let ce=!0;for(let rn=0;rn<C;rn++){let he=Q[rn].g;const Se=Q[rn].map;if(he-=at,0>he)at=Math.max(0,Q[rn].g-100),ce=!1;else try{Si(Se,wt,"req"+he+"_")}catch{D&&D(Se)}}if(ce){D=wt.join("&");break t}}}return g=g.i.splice(0,C),S.D=g,D}function Yi(g){if(!g.g&&!g.u){g.Y=1;var S=g.Fa;Et||B(),vt||(Et(),vt=!0),Xt.add(S,g),g.v=0}}function Yo(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=sn(w(g.Fa,g),$o(g,g.v)),g.v++,!0)}n.Fa=function(){if(this.u=null,Zo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=sn(w(this.ab,this),g)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Be(10),Wo(this),Zo(this))};function yr(g){g.A!=null&&(h.clearTimeout(g.A),g.A=null)}function Zo(g){g.g=new In(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var S=Ue(g.qa);Bt(S,"RID","rpc"),Bt(S,"SID",g.K),Bt(S,"AID",g.T),Bt(S,"CI",g.F?"0":"1"),!g.F&&g.ja&&Bt(S,"TO",g.ja),Bt(S,"TYPE","xmlhttp"),Qr(g,S),g.m&&g.o&&un(S,g.m,g.o),g.L&&(g.g.I=g.L);var C=g.g;g=g.ia,C.L=1,C.v=pi(Ue(S)),C.m=null,C.P=!0,cs(C,g)}n.Za=function(){this.C!=null&&(this.C=null,Wo(this),Yo(this),Be(19))};function Ko(g){g.C!=null&&(h.clearTimeout(g.C),g.C=null)}function El(g,S){var C=null;if(g.g==S){Ko(g),yr(g),g.g=null;var D=2}else if(ne(g.h,S))C=S.D,pn(g.h,S),D=1;else return;if(g.G!=0){if(S.o)if(D==1){C=S.m?S.m.length:0,S=Date.now()-S.F;var Q=g.B;D=ur(),ye(D,new ln(D,C)),_r(g)}else Yi(g);else if(Q=S.s,Q==3||Q==0&&0<S.X||!(D==1&&ih(g,S)||D==2&&Yo(g)))switch(C&&0<C.length&&(S=g.h,S.i=S.i.concat(C)),Q){case 1:js(g,5);break;case 4:js(g,10);break;case 3:js(g,6);break;default:js(g,2)}}}function $o(g,S){let C=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(C*=2),C*S}function js(g,S){if(g.j.info("Error code "+S),S==2){var C=w(g.fb,g),D=g.Xa;const Q=!D;D=new We(D||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Yr(D,"https"),pi(D),Q?pe(D.toString(),C):wi(D.toString(),C)}else Be(2);g.G=0,g.l&&g.l.sa(S),Ru(g),Iu(g)}n.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Be(2)):(this.j.info("Failed to ping google.com"),Be(1))};function Ru(g){if(g.G=0,g.ka=[],g.l){const S=ps(g.h);(S.length!=0||g.i.length!=0)&&(k(g.ka,S),k(g.ka,g.i),g.h.i.length=0,M(g.i),g.i.length=0),g.l.ra()}}function Qo(g,S,C){var D=C instanceof We?Ue(C):new We(C);if(D.g!="")S&&(D.g=S+"."+D.g),Hi(D,D.s);else{var Q=h.location;D=Q.protocol,S=S?S+"."+Q.hostname:Q.hostname,Q=+Q.port;var at=new We(null);D&&Yr(at,D),S&&(at.g=S),Q&&Hi(at,Q),C&&(at.l=C),D=at}return C=g.D,S=g.ya,C&&S&&Bt(D,C,S),Bt(D,"VER",g.la),Qr(g,D),D}function Pu(g,S,C){if(S&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=g.Ca&&!g.pa?new ve(new ei({eb:C})):new ve(g.pa),S.Ha(g.J),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tl(){}n=Tl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Xr(){}Xr.prototype.g=function(g,S){return new mn(g,S)};function mn(g,S){ze.call(this),this.g=new qo(S),this.l=g,this.h=S&&S.messageUrlParams||null,g=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(g?g["X-WebChannel-Content-Type"]=S.messageContentType:g={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(g?g["X-WebChannel-Client-Profile"]=S.va:g={"X-WebChannel-Client-Profile":S.va}),this.g.S=g,(g=S&&S.Sb)&&!Z(g)&&(this.g.m=g),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!Z(S)&&(this.g.D=S,g=this.h,g!==null&&S in g&&(g=this.h,S in g&&delete g[S])),this.j=new ii(this)}R(mn,ze),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Go(this.g)},mn.prototype.o=function(g){var S=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.u&&(C={},C.__data__=Ei(g),g=C);S.i.push(new dr(S.Ya++,g)),S.G==3&&_r(S)},mn.prototype.N=function(){this.g.l=null,delete this.j,Go(this.g),delete this.g,mn.aa.N.call(this)};function _s(g){ls.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var S=g.__sm__;if(S){t:{for(const C in S){g=C;break t}g=void 0}(this.i=g)&&(g=this.i,S=S!==null&&g in S?S[g]:void 0),this.data=S}else this.data=g}R(_s,ls);function Mu(){fl.call(this),this.status=1}R(Mu,fl);function ii(g){this.g=g}R(ii,Tl),ii.prototype.ua=function(){ye(this.g,"a")},ii.prototype.ta=function(g){ye(this.g,new _s(g))},ii.prototype.sa=function(g){ye(this.g,new Mu)},ii.prototype.ra=function(){ye(this.g,"b")},Xr.prototype.createWebChannel=Xr.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,rR=function(){return new Xr},sR=function(){return ur()},iR=us,xv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ls.NO_ERROR=0,Ls.TIMEOUT=8,Ls.HTTP_ERROR=6,sm=Ls,Bi.COMPLETE="complete",nR=Bi,Vo.EventType=as,as.OPEN="a",as.CLOSE="b",as.ERROR="c",as.MESSAGE="d",ze.prototype.listen=ze.prototype.K,lf=Vo,ve.prototype.listenOnce=ve.prototype.L,ve.prototype.getLastError=ve.prototype.Ka,ve.prototype.getLastErrorCode=ve.prototype.Ba,ve.prototype.getStatus=ve.prototype.Z,ve.prototype.getResponseJson=ve.prototype.Oa,ve.prototype.getResponseText=ve.prototype.oa,ve.prototype.send=ve.prototype.ea,ve.prototype.setWithCredentials=ve.prototype.Ha,eR=ve}).apply(typeof Pp<"u"?Pp:typeof self<"u"?self:typeof window<"u"?window:{});const mx="@firebase/firestore",gx="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}li.UNAUTHENTICATED=new li(null),li.GOOGLE_CREDENTIALS=new li("google-credentials-uid"),li.FIRST_PARTY=new li("first-party-uid"),li.MOCK_USER=new li("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=new ug("@firebase/firestore");function hc(){return au.logLevel}function It(n,...t){if(au.logLevel<=ae.DEBUG){const e=t.map(Q0);au.debug(`Firestore (${$c}): ${n}`,...e)}}function Po(n,...t){if(au.logLevel<=ae.ERROR){const e=t.map(Q0);au.error(`Firestore (${$c}): ${n}`,...e)}}function Mc(n,...t){if(au.logLevel<=ae.WARN){const e=t.map(Q0);au.warn(`Firestore (${$c}): ${n}`,...e)}}function Q0(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,oR(n,i,e)}function oR(n,t,e){let i=`FIRESTORE (${$c}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw Po(i),new Error(i)}function xe(n,t,e,i){let s="Unexpected state";typeof e=="string"?s=e:i=e,n||oR(t,s,i)}function Zt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Rt extends Oo{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class B3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(li.UNAUTHENTICATED))}shutdown(){}}class U3{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class F3{constructor(t){this.t=t,this.currentUser=li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){xe(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,e(d)):Promise.resolve();let o=new So;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new So,t.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const d=o;t.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new So)}},0),u()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(xe(typeof i.accessToken=="string",31837,{l:i}),new aR(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return xe(t===null||typeof t=="string",2055,{h:t}),new li(t)}}class H3{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=li.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class j3{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new H3(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _x{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q3{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ss(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){xe(this.o===void 0,3512);const i=o=>{o.error!=null&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,It("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};const s=o=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new _x(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(xe(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new _x(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G3(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=G3(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<e&&(i+=t.charAt(s[o]%62))}return i}}function te(n,t){return n<t?-1:n>t?1:0}function Cv(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=n.codePointAt(e),s=t.codePointAt(e);if(i!==s){if(i<128&&s<128)return te(i,s);{const o=lR(),u=W3(o.encode(yx(n,e)),o.encode(yx(t,e)));return u!==0?u:te(i,s)}}e+=i>65535?2:1}return te(n.length,t.length)}function yx(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function W3(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return te(n[e],t[e]);return te(n.length,t.length)}function Oc(n,t,e){return n.length===t.length&&n.every((i,s)=>e(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=-62135596800,bx=1e6;class xn{static now(){return xn.fromMillis(Date.now())}static fromDate(t){return xn.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*bx);return new xn(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Rt(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Rt(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<vx)throw new Rt(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Rt(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bx}_compareTo(t){return this.seconds===t.seconds?te(this.nanoseconds,t.nanoseconds):te(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-vx;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{static fromTimestamp(t){return new Yt(t)}static min(){return new Yt(new xn(0,0))}static max(){return new Yt(new xn(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="__name__";class Pr{constructor(t,e,i){e===void 0?e=0:e>t.length&&Ft(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&Ft(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return Pr.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Pr?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let s=0;s<i;s++){const o=Pr.compareSegments(t.get(s),e.get(s));if(o!==0)return o}return te(t.length,e.length)}static compareSegments(t,e){const i=Pr.isNumericId(t),s=Pr.isNumericId(e);return i&&!s?-1:!i&&s?1:i&&s?Pr.extractNumericId(t).compare(Pr.extractNumericId(e)):Cv(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ua.fromString(t.substring(4,t.length-2))}}class Ke extends Pr{construct(t,e,i){return new Ke(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Rt(dt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(s=>s.length>0))}return new Ke(e)}static emptyPath(){return new Ke([])}}const Y3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zn extends Pr{construct(t,e,i){return new Zn(t,e,i)}static isValidIdentifier(t){return Y3.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ex}static keyField(){return new Zn([Ex])}static fromServerFormat(t){const e=[];let i="",s=0;const o=()=>{if(i.length===0)throw new Rt(dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let u=!1;for(;s<t.length;){const h=t[s];if(h==="\\"){if(s+1===t.length)throw new Rt(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Rt(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=d,s+=2}else h==="`"?(u=!u,s++):h!=="."||u?(i+=h,s++):(o(),s++)}if(o(),u)throw new Rt(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Zn(e)}static emptyPath(){return new Zn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(t){this.path=t}static fromPath(t){return new Nt(Ke.fromString(t))}static fromName(t){return new Nt(Ke.fromString(t).popFirst(5))}static empty(){return new Nt(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ke.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Ke.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Nt(new Ke(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf=-1;function Z3(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Yt.fromTimestamp(i===1e9?new xn(e+1,0):new xn(e,i));return new Ya(s,Nt.empty(),t)}function K3(n){return new Ya(n.readTime,n.key,Wf)}class Ya{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Ya(Yt.min(),Nt.empty(),Wf)}static max(){return new Ya(Yt.max(),Nt.empty(),Wf)}}function $3(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Nt.comparator(n.documentKey,t.documentKey),e!==0?e:te(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qc(n){if(n.code!==dt.FAILED_PRECONDITION||n.message!==Q3)throw n;It("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Ft(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new pt((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,s)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof pt?e:pt.resolve(e)}catch(e){return pt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):pt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):pt.reject(e)}static resolve(t){return new pt((e,i)=>{e(t)})}static reject(t){return new pt((e,i)=>{i(t)})}static waitFor(t){return new pt((e,i)=>{let s=0,o=0,u=!1;t.forEach(h=>{++s,h.next(()=>{++o,u&&o===s&&e()},d=>i(d))}),u=!0,o===s&&e()})}static or(t){let e=pt.resolve(!1);for(const i of t)e=e.next(s=>s?pt.resolve(s):i());return e}static forEach(t,e){const i=[];return t.forEach((s,o)=>{i.push(e.call(this,s,o))}),this.waitFor(i)}static mapArray(t,e){return new pt((i,s)=>{const o=t.length,u=new Array(o);let h=0;for(let d=0;d<o;d++){const m=d;e(t[m]).next(v=>{u[m]=v,++h,h===o&&i(u)},v=>s(v))}})}static doWhile(t,e){return new pt((i,s)=>{const o=()=>{t()===!0?e().next(()=>{o()},s):i()};o()})}}function J3(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Xc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>e.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Eg.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0=-1;function Tg(n){return n==null}function zm(n){return n===0&&1/n==-1/0}function tB(n){return typeof n=="number"&&Number.isInteger(n)&&!zm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="";function eB(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Tx(t)),t=nB(n.get(e),t);return Tx(t)}function nB(n,t){let e=t;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":e+="";break;case cR:e+="";break;default:e+=o}}return e}function Tx(n){return n+cR+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function gu(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function hR(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t,e){this.comparator=t,this.root=e||Yn.EMPTY}insert(t,e){return new nn(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Yn.BLACK,null,null))}remove(t){return new nn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Yn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return e+i.left.size;s<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Mp(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Mp(this.root,t,this.comparator,!1)}getReverseIterator(){return new Mp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Mp(this.root,t,this.comparator,!0)}}class Mp{constructor(t,e,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&s&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Yn{constructor(t,e,i,s,o){this.key=t,this.value=e,this.color=i??Yn.RED,this.left=s??Yn.EMPTY,this.right=o??Yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,s,o){return new Yn(t??this.key,e??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,e,i),null):o===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Yn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return Yn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ft(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ft(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ft(27949);return t+(this.isRed()?0:1)}}Yn.EMPTY=null,Yn.RED=!0,Yn.BLACK=!1;Yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ft(57766)}get value(){throw Ft(16141)}get color(){throw Ft(16727)}get left(){throw Ft(29726)}get right(){throw Ft(36894)}copy(t,e,i,s,o){return this}insert(t,e,i){return new Yn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(t){this.comparator=t,this.data=new nn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Sx(this.data.getIterator())}getIteratorFrom(t){return new Sx(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Cn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Cn(this.comparator);return e.data=t,e}}class Sx{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(t){this.fields=t,t.sort(Zn.comparator)}static empty(){return new er([])}unionWith(t){let e=new Cn(Zn.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new er(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Oc(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new fR("Invalid base64 string: "+o):o}}(t);return new $n(e)}static fromUint8Array(t){const e=function(s){let o="";for(let u=0;u<s.length;++u)o+=String.fromCharCode(s[u]);return o}(t);return new $n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return te(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}$n.EMPTY_BYTE_STRING=new $n("");const iB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Za(n){if(xe(!!n,39018),typeof n=="string"){let t=0;const e=iB.exec(n);if(xe(!!e,46558,{timestamp:n}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:fn(n.seconds),nanos:fn(n.nanos)}}function fn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ka(n){return typeof n=="string"?$n.fromBase64String(n):$n.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="server_timestamp",pR="__type__",mR="__previous_value__",gR="__local_write_time__";function J0(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[pR])===null||e===void 0?void 0:e.stringValue)===dR}function wg(n){const t=n.mapValue.fields[mR];return J0(t)?wg(t):t}function Yf(n){const t=Za(n.mapValue.fields[gR].timestampValue);return new xn(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(t,e,i,s,o,u,h,d,m,v){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=v}}const Bm="(default)";class Zf{constructor(t,e){this.projectId=t,this.database=e||Bm}static empty(){return new Zf("","")}get isDefaultDatabase(){return this.database===Bm}isEqual(t){return t instanceof Zf&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="__type__",rB="__max__",Op={mapValue:{}},yR="__vector__",Um="value";function $a(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?J0(n)?4:aB(n)?9007199254740991:oB(n)?10:11:Ft(28295,{value:n})}function zr(n,t){if(n===t)return!0;const e=$a(n);if(e!==$a(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Yf(n).isEqual(Yf(t));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const u=Za(s.timestampValue),h=Za(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(s,o){return Ka(s.bytesValue).isEqual(Ka(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(s,o){return fn(s.geoPointValue.latitude)===fn(o.geoPointValue.latitude)&&fn(s.geoPointValue.longitude)===fn(o.geoPointValue.longitude)}(n,t);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return fn(s.integerValue)===fn(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const u=fn(s.doubleValue),h=fn(o.doubleValue);return u===h?zm(u)===zm(h):isNaN(u)&&isNaN(h)}return!1}(n,t);case 9:return Oc(n.arrayValue.values||[],t.arrayValue.values||[],zr);case 10:case 11:return function(s,o){const u=s.mapValue.fields||{},h=o.mapValue.fields||{};if(wx(u)!==wx(h))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(h[d]===void 0||!zr(u[d],h[d])))return!1;return!0}(n,t);default:return Ft(52216,{left:n})}}function Kf(n,t){return(n.values||[]).find(e=>zr(e,t))!==void 0}function kc(n,t){if(n===t)return 0;const e=$a(n),i=$a(t);if(e!==i)return te(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return te(n.booleanValue,t.booleanValue);case 2:return function(o,u){const h=fn(o.integerValue||o.doubleValue),d=fn(u.integerValue||u.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(n,t);case 3:return xx(n.timestampValue,t.timestampValue);case 4:return xx(Yf(n),Yf(t));case 5:return Cv(n.stringValue,t.stringValue);case 6:return function(o,u){const h=Ka(o),d=Ka(u);return h.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(o,u){const h=o.split("/"),d=u.split("/");for(let m=0;m<h.length&&m<d.length;m++){const v=te(h[m],d[m]);if(v!==0)return v}return te(h.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,u){const h=te(fn(o.latitude),fn(u.latitude));return h!==0?h:te(fn(o.longitude),fn(u.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return Cx(n.arrayValue,t.arrayValue);case 10:return function(o,u){var h,d,m,v;const T=o.fields||{},w=u.fields||{},A=(h=T[Um])===null||h===void 0?void 0:h.arrayValue,R=(d=w[Um])===null||d===void 0?void 0:d.arrayValue,M=te(((m=A==null?void 0:A.values)===null||m===void 0?void 0:m.length)||0,((v=R==null?void 0:R.values)===null||v===void 0?void 0:v.length)||0);return M!==0?M:Cx(A,R)}(n.mapValue,t.mapValue);case 11:return function(o,u){if(o===Op.mapValue&&u===Op.mapValue)return 0;if(o===Op.mapValue)return 1;if(u===Op.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),m=u.fields||{},v=Object.keys(m);d.sort(),v.sort();for(let T=0;T<d.length&&T<v.length;++T){const w=Cv(d[T],v[T]);if(w!==0)return w;const A=kc(h[d[T]],m[v[T]]);if(A!==0)return A}return te(d.length,v.length)}(n.mapValue,t.mapValue);default:throw Ft(23264,{Pe:e})}}function xx(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return te(n,t);const e=Za(n),i=Za(t),s=te(e.seconds,i.seconds);return s!==0?s:te(e.nanos,i.nanos)}function Cx(n,t){const e=n.values||[],i=t.values||[];for(let s=0;s<e.length&&s<i.length;++s){const o=kc(e[s],i[s]);if(o)return o}return te(e.length,i.length)}function Dc(n){return Av(n)}function Av(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=Za(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Ka(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return Nt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",s=!0;for(const o of e.values||[])s?s=!1:i+=",",i+=Av(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let s="{",o=!0;for(const u of i)o?o=!1:s+=",",s+=`${u}:${Av(e.fields[u])}`;return s+"}"}(n.mapValue):Ft(61005,{value:n})}function rm(n){switch($a(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=wg(n);return t?16+rm(t):16;case 5:return 2*n.stringValue.length;case 6:return Ka(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+rm(o),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return gu(i.fields,(o,u)=>{s+=o.length+rm(u)}),s}(n.mapValue);default:throw Ft(13486,{value:n})}}function Ax(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Iv(n){return!!n&&"integerValue"in n}function tb(n){return!!n&&"arrayValue"in n}function Ix(n){return!!n&&"nullValue"in n}function Rx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function om(n){return!!n&&"mapValue"in n}function oB(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[_R])===null||e===void 0?void 0:e.stringValue)===yR}function xf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return gu(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=xf(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=xf(n.arrayValue.values[e]);return t}return Object.assign({},n)}function aB(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===rB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(t){this.value=t}static empty(){return new As({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!om(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=xf(e)}setAll(t){let e=Zn.emptyPath(),i={},s=[];t.forEach((u,h)=>{if(!e.isImmediateParentOf(h)){const d=this.getFieldsMap(e);this.applyChanges(d,i,s),i={},s=[],e=h.popLast()}u?i[h.lastSegment()]=xf(u):s.push(h.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,i,s)}delete(t){const e=this.field(t.popLast());om(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return zr(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=e.mapValue.fields[t.get(i)];om(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,i){gu(e,(s,o)=>t[s]=o);for(const s of i)delete t[s]}clone(){return new As(xf(this.value))}}function vR(n){const t=[];return gu(n.fields,(e,i)=>{const s=new Zn([e]);if(om(i)){const o=vR(i.mapValue).fields;if(o.length===0)t.push(s);else for(const u of o)t.push(s.child(u))}else t.push(s)}),new er(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(t,e,i,s,o,u,h){this.key=t,this.documentType=e,this.version=i,this.readTime=s,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(t){return new hi(t,0,Yt.min(),Yt.min(),Yt.min(),As.empty(),0)}static newFoundDocument(t,e,i,s){return new hi(t,1,e,Yt.min(),i,s,0)}static newNoDocument(t,e){return new hi(t,2,e,Yt.min(),Yt.min(),As.empty(),0)}static newUnknownDocument(t,e){return new hi(t,3,e,Yt.min(),Yt.min(),As.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=As.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=As.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof hi&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new hi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(t,e){this.position=t,this.inclusive=e}}function Px(n,t,e){let i=0;for(let s=0;s<n.position.length;s++){const o=t[s],u=n.position[s];if(o.field.isKeyField()?i=Nt.comparator(Nt.fromName(u.referenceValue),e.key):i=kc(u,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Mx(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!zr(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(t,e="asc"){this.field=t,this.dir=e}}function lB(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{}class vn extends bR{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new cB(t,e,i):e==="array-contains"?new dB(t,i):e==="in"?new pB(t,i):e==="not-in"?new mB(t,i):e==="array-contains-any"?new gB(t,i):new vn(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new hB(t,i):new fB(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(kc(e,this.value)):e!==null&&$a(this.value)===$a(e)&&this.matchesComparison(kc(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ft(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class or extends bR{constructor(t,e){super(),this.filters=t,this.op=e,this.Te=null}static create(t,e){return new or(t,e)}matches(t){return ER(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function ER(n){return n.op==="and"}function TR(n){return uB(n)&&ER(n)}function uB(n){for(const t of n.filters)if(t instanceof or)return!1;return!0}function Rv(n){if(n instanceof vn)return n.field.canonicalString()+n.op.toString()+Dc(n.value);if(TR(n))return n.filters.map(t=>Rv(t)).join(",");{const t=n.filters.map(e=>Rv(e)).join(",");return`${n.op}(${t})`}}function wR(n,t){return n instanceof vn?function(i,s){return s instanceof vn&&i.op===s.op&&i.field.isEqual(s.field)&&zr(i.value,s.value)}(n,t):n instanceof or?function(i,s){return s instanceof or&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,u,h)=>o&&wR(u,s.filters[h]),!0):!1}(n,t):void Ft(19439)}function SR(n){return n instanceof vn?function(e){return`${e.field.canonicalString()} ${e.op} ${Dc(e.value)}`}(n):n instanceof or?function(e){return e.op.toString()+" {"+e.getFilters().map(SR).join(" ,")+"}"}(n):"Filter"}class cB extends vn{constructor(t,e,i){super(t,e,i),this.key=Nt.fromName(i.referenceValue)}matches(t){const e=Nt.comparator(t.key,this.key);return this.matchesComparison(e)}}class hB extends vn{constructor(t,e){super(t,"in",e),this.keys=xR("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class fB extends vn{constructor(t,e){super(t,"not-in",e),this.keys=xR("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function xR(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>Nt.fromName(i.referenceValue))}class dB extends vn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return tb(e)&&Kf(e.arrayValue,this.value)}}class pB extends vn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Kf(this.value.arrayValue,e)}}class mB extends vn{constructor(t,e){super(t,"not-in",e)}matches(t){if(Kf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Kf(this.value.arrayValue,e)}}class gB extends vn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!tb(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Kf(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(t,e=null,i=[],s=[],o=null,u=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=u,this.endAt=h,this.Ie=null}}function Ox(n,t=null,e=[],i=[],s=null,o=null,u=null){return new _B(n,t,e,i,s,o,u)}function eb(n){const t=Zt(n);if(t.Ie===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>Rv(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Tg(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Dc(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Dc(i)).join(",")),t.Ie=e}return t.Ie}function nb(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!lB(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!wR(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Mx(n.startAt,t.startAt)&&Mx(n.endAt,t.endAt)}function Pv(n){return Nt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(t,e=null,i=[],s=[],o=null,u="F",h=null,d=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=d,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function yB(n,t,e,i,s,o,u,h){return new Jc(n,t,e,i,s,o,u,h)}function ib(n){return new Jc(n)}function kx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function CR(n){return n.collectionGroup!==null}function Cf(n){const t=Zt(n);if(t.Ee===null){t.Ee=[];const e=new Set;for(const o of t.explicitOrderBy)t.Ee.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Cn(Zn.comparator);return u.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.Ee.push(new $f(o,i))}),e.has(Zn.keyField().canonicalString())||t.Ee.push(new $f(Zn.keyField(),i))}return t.Ee}function Nr(n){const t=Zt(n);return t.de||(t.de=vB(t,Cf(n))),t.de}function vB(n,t){if(n.limitType==="F")return Ox(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new $f(s.field,o)});const e=n.endAt?new Fm(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Fm(n.startAt.position,n.startAt.inclusive):null;return Ox(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function Mv(n,t){const e=n.filters.concat([t]);return new Jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Hm(n,t,e){return new Jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Sg(n,t){return nb(Nr(n),Nr(t))&&n.limitType===t.limitType}function AR(n){return`${eb(Nr(n))}|lt:${n.limitType}`}function fc(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(s=>SR(s)).join(", ")}]`),Tg(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(s=>Dc(s)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(s=>Dc(s)).join(",")),`Target(${i})`}(Nr(n))}; limitType=${n.limitType})`}function xg(n,t){return t.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Nt.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,t)&&function(i,s){for(const o of Cf(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,t)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(n,t)&&function(i,s){return!(i.startAt&&!function(u,h,d){const m=Px(u,h,d);return u.inclusive?m<=0:m<0}(i.startAt,Cf(i),s)||i.endAt&&!function(u,h,d){const m=Px(u,h,d);return u.inclusive?m>=0:m>0}(i.endAt,Cf(i),s))}(n,t)}function bB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function IR(n){return(t,e)=>{let i=!1;for(const s of Cf(n)){const o=EB(s,t,e);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function EB(n,t,e){const i=n.field.isKeyField()?Nt.comparator(t.key,e.key):function(o,u,h){const d=u.data.field(o),m=h.data.field(o);return d!==null&&m!==null?kc(d,m):Ft(42886)}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ft(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return void(s[o]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[e]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){gu(this.inner,(e,i)=>{for(const[s,o]of i)t(s,o)})}isEmpty(){return hR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB=new nn(Nt.comparator);function Mo(){return TB}const RR=new nn(Nt.comparator);function uf(...n){let t=RR;for(const e of n)t=t.insert(e.key,e);return t}function PR(n){let t=RR;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function $l(){return Af()}function MR(){return Af()}function Af(){return new _u(n=>n.toString(),(n,t)=>n.isEqual(t))}const wB=new nn(Nt.comparator),SB=new Cn(Nt.comparator);function fe(...n){let t=SB;for(const e of n)t=t.add(e);return t}const xB=new Cn(te);function CB(){return xB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zm(t)?"-0":t}}function OR(n){return{integerValue:""+n}}function AB(n,t){return tB(t)?OR(t):sb(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(){this._=void 0}}function IB(n,t,e){return n instanceof jm?function(s,o){const u={fields:{[pR]:{stringValue:dR},[gR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&J0(o)&&(o=wg(o)),o&&(u.fields[mR]=o),{mapValue:u}}(e,t):n instanceof Qf?DR(n,t):n instanceof Xf?NR(n,t):function(s,o){const u=kR(s,o),h=Dx(u)+Dx(s.Re);return Iv(u)&&Iv(s.Re)?OR(h):sb(s.serializer,h)}(n,t)}function RB(n,t,e){return n instanceof Qf?DR(n,t):n instanceof Xf?NR(n,t):e}function kR(n,t){return n instanceof qm?function(i){return Iv(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}class jm extends Cg{}class Qf extends Cg{constructor(t){super(),this.elements=t}}function DR(n,t){const e=LR(t);for(const i of n.elements)e.some(s=>zr(s,i))||e.push(i);return{arrayValue:{values:e}}}class Xf extends Cg{constructor(t){super(),this.elements=t}}function NR(n,t){let e=LR(t);for(const i of n.elements)e=e.filter(s=>!zr(s,i));return{arrayValue:{values:e}}}class qm extends Cg{constructor(t,e){super(),this.serializer=t,this.Re=e}}function Dx(n){return fn(n.integerValue||n.doubleValue)}function LR(n){return tb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function PB(n,t){return n.field.isEqual(t.field)&&function(i,s){return i instanceof Qf&&s instanceof Qf||i instanceof Xf&&s instanceof Xf?Oc(i.elements,s.elements,zr):i instanceof qm&&s instanceof qm?zr(i.Re,s.Re):i instanceof jm&&s instanceof jm}(n.transform,t.transform)}class MB{constructor(t,e){this.version=t,this.transformResults=e}}class xo{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new xo}static exists(t){return new xo(void 0,t)}static updateTime(t){return new xo(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function am(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Ag{}function VR(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new BR(n.key,xo.none()):new yd(n.key,n.data,xo.none());{const e=n.data,i=As.empty();let s=new Cn(Zn.comparator);for(let o of t.fields)if(!s.has(o)){let u=e.field(o);u===null&&o.length>1&&(o=o.popLast(),u=e.field(o)),u===null?i.delete(o):i.set(o,u),s=s.add(o)}return new yu(n.key,i,new er(s.toArray()),xo.none())}}function OB(n,t,e){n instanceof yd?function(s,o,u){const h=s.value.clone(),d=Lx(s.fieldTransforms,o,u.transformResults);h.setAll(d),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,t,e):n instanceof yu?function(s,o,u){if(!am(s.precondition,o))return void o.convertToUnknownDocument(u.version);const h=Lx(s.fieldTransforms,o,u.transformResults),d=o.data;d.setAll(zR(s)),d.setAll(h),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,t,e):function(s,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,t,e)}function If(n,t,e,i){return n instanceof yd?function(o,u,h,d){if(!am(o.precondition,u))return h;const m=o.value.clone(),v=Vx(o.fieldTransforms,d,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(n,t,e,i):n instanceof yu?function(o,u,h,d){if(!am(o.precondition,u))return h;const m=Vx(o.fieldTransforms,d,u),v=u.data;return v.setAll(zR(o)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(T=>T.field))}(n,t,e,i):function(o,u,h){return am(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,t,e)}function kB(n,t){let e=null;for(const i of n.fieldTransforms){const s=t.data.field(i.field),o=kR(i.transform,s||null);o!=null&&(e===null&&(e=As.empty()),e.set(i.field,o))}return e||null}function Nx(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Oc(i,s,(o,u)=>PB(o,u))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class yd extends Ag{constructor(t,e,i,s=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class yu extends Ag{constructor(t,e,i,s,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function zR(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function Lx(n,t,e){const i=new Map;xe(n.length===e.length,32656,{Ve:e.length,me:n.length});for(let s=0;s<e.length;s++){const o=n[s],u=o.transform,h=t.data.field(o.field);i.set(o.field,RB(u,h,e[s]))}return i}function Vx(n,t,e){const i=new Map;for(const s of n){const o=s.transform,u=e.data.field(s.field);i.set(s.field,IB(o,u,t))}return i}class BR extends Ag{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DB extends Ag{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(t,e,i,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(t.key)&&OB(o,t,i[s])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=If(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=If(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=MR();return this.mutations.forEach(s=>{const o=t.get(s.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=e.has(s.key)?null:h;const d=VR(u,h);d!==null&&i.set(s.key,d),u.isValidDocument()||u.convertToNoDocument(Yt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),fe())}isEqual(t){return this.batchId===t.batchId&&Oc(this.mutations,t.mutations,(e,i)=>Nx(e,i))&&Oc(this.baseMutations,t.baseMutations,(e,i)=>Nx(e,i))}}class rb{constructor(t,e,i,s){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=s}static from(t,e,i){xe(t.mutations.length===i.length,58842,{fe:t.mutations.length,ge:i.length});let s=function(){return wB}();const o=t.mutations;for(let u=0;u<o.length;u++)s=s.insert(o[u].key,i[u].version);return new rb(t,e,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yn,ge;function zB(n){switch(n){case dt.OK:return Ft(64938);case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0;default:return Ft(15467,{code:n})}}function UR(n){if(n===void 0)return Po("GRPC error has no .code"),dt.UNKNOWN;switch(n){case yn.OK:return dt.OK;case yn.CANCELLED:return dt.CANCELLED;case yn.UNKNOWN:return dt.UNKNOWN;case yn.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case yn.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case yn.INTERNAL:return dt.INTERNAL;case yn.UNAVAILABLE:return dt.UNAVAILABLE;case yn.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case yn.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case yn.NOT_FOUND:return dt.NOT_FOUND;case yn.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case yn.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case yn.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case yn.ABORTED:return dt.ABORTED;case yn.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case yn.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case yn.DATA_LOSS:return dt.DATA_LOSS;default:return Ft(39323,{code:n})}}(ge=yn||(yn={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BB=new Ua([4294967295,4294967295],0);function zx(n){const t=lR().encode(n),e=new tR;return e.update(t),new Uint8Array(e.digest())}function Bx(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Ua([e,i],0),new Ua([s,o],0)]}class ob{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new cf(`Invalid padding: ${e}`);if(i<0)throw new cf(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new cf(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new cf(`Invalid padding when bitmap length is 0: ${e}`);this.pe=8*t.length-e,this.ye=Ua.fromNumber(this.pe)}we(t,e,i){let s=t.add(e.multiply(Ua.fromNumber(i)));return s.compare(BB)===1&&(s=new Ua([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const e=zx(t),[i,s]=Bx(e);for(let o=0;o<this.hashCount;o++){const u=this.we(i,s,o);if(!this.be(u))return!1}return!0}static create(t,e,i){const s=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),u=new ob(o,s,e);return i.forEach(h=>u.insert(h)),u}insert(t){if(this.pe===0)return;const e=zx(t),[i,s]=Bx(e);for(let o=0;o<this.hashCount;o++){const u=this.we(i,s,o);this.Se(u)}}Se(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class cf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(t,e,i,s,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const s=new Map;return s.set(t,vd.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Ig(Yt.min(),s,new nn(te),Mo(),fe())}}class vd{constructor(t,e,i,s,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new vd(i,e,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(t,e,i,s){this.De=t,this.removedTargetIds=e,this.key=i,this.ve=s}}class FR{constructor(t,e){this.targetId=t,this.Ce=e}}class HR{constructor(t,e,i=$n.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=s}}class Ux{constructor(){this.Fe=0,this.Me=Fx(),this.xe=$n.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=fe(),e=fe(),i=fe();return this.Me.forEach((s,o)=>{switch(o){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:i=i.add(s);break;default:Ft(38017,{changeType:o})}}),new vd(this.xe,this.Oe,t,e,i)}Qe(){this.Ne=!1,this.Me=Fx()}$e(t,e){this.Ne=!0,this.Me=this.Me.insert(t,e)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,xe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class UB{constructor(t){this.ze=t,this.je=new Map,this.He=Mo(),this.Je=kp(),this.Ye=kp(),this.Ze=new nn(te)}Xe(t){for(const e of t.De)t.ve&&t.ve.isFoundDocument()?this.et(e,t.ve):this.tt(e,t.key,t.ve);for(const e of t.removedTargetIds)this.tt(e,t.key,t.ve)}nt(t){this.forEachTarget(t,e=>{const i=this.rt(e);switch(t.state){case 0:this.it(e)&&i.ke(t.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(t.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(e);break;case 3:this.it(e)&&(i.Ge(),i.ke(t.resumeToken));break;case 4:this.it(e)&&(this.st(e),i.ke(t.resumeToken));break;default:Ft(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.je.forEach((i,s)=>{this.it(s)&&e(s)})}ot(t){const e=t.targetId,i=t.Ce.count,s=this._t(e);if(s){const o=s.target;if(Pv(o))if(i===0){const u=new Nt(o.path);this.tt(e,u,hi.newNoDocument(u,Yt.min()))}else xe(i===1,20013,{expectedCount:i});else{const u=this.ut(e);if(u!==i){const h=this.ct(t),d=h?this.lt(h,t,u):1;if(d!==0){this.st(e);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(e,m)}}}}}ct(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=e;let u,h;try{u=Ka(i).toUint8Array()}catch(d){if(d instanceof fR)return Mc("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new ob(u,s,o)}catch(d){return Mc(d instanceof cf?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.pe===0?null:h}lt(t,e,i){return e.Ce.count===i-this.Tt(t,e.targetId)?0:2}Tt(t,e){const i=this.ze.getRemoteKeysForTarget(e);let s=0;return i.forEach(o=>{const u=this.ze.Pt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;t.mightContain(h)||(this.tt(e,o,null),s++)}),s}It(t){const e=new Map;this.je.forEach((o,u)=>{const h=this._t(u);if(h){if(o.current&&Pv(h.target)){const d=new Nt(h.target.path);this.Et(d).has(u)||this.dt(u,d)||this.tt(u,d,hi.newNoDocument(d,t))}o.Le&&(e.set(u,o.qe()),o.Qe())}});let i=fe();this.Ye.forEach((o,u)=>{let h=!0;u.forEachWhile(d=>{const m=this._t(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.He.forEach((o,u)=>u.setReadTime(t));const s=new Ig(t,e,this.Ze,this.He,i);return this.He=Mo(),this.Je=kp(),this.Ye=kp(),this.Ze=new nn(te),s}et(t,e){if(!this.it(t))return;const i=this.dt(t,e.key)?2:0;this.rt(t).$e(e.key,i),this.He=this.He.insert(e.key,e),this.Je=this.Je.insert(e.key,this.Et(e.key).add(t)),this.Ye=this.Ye.insert(e.key,this.At(e.key).add(t))}tt(t,e,i){if(!this.it(t))return;const s=this.rt(t);this.dt(t,e)?s.$e(e,1):s.Ue(e),this.Ye=this.Ye.insert(e,this.At(e).delete(t)),this.Ye=this.Ye.insert(e,this.At(e).add(t)),i&&(this.He=this.He.insert(e,i))}removeTarget(t){this.je.delete(t)}ut(t){const e=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let e=this.je.get(t);return e||(e=new Ux,this.je.set(t,e)),e}At(t){let e=this.Ye.get(t);return e||(e=new Cn(te),this.Ye=this.Ye.insert(t,e)),e}Et(t){let e=this.Je.get(t);return e||(e=new Cn(te),this.Je=this.Je.insert(t,e)),e}it(t){const e=this._t(t)!==null;return e||It("WatchChangeAggregator","Detected inactive target",t),e}_t(t){const e=this.je.get(t);return e&&e.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new Ux),this.ze.getRemoteKeysForTarget(t).forEach(e=>{this.tt(t,e,null)})}dt(t,e){return this.ze.getRemoteKeysForTarget(t).has(e)}}function kp(){return new nn(Nt.comparator)}function Fx(){return new nn(Nt.comparator)}const FB={asc:"ASCENDING",desc:"DESCENDING"},HB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jB={and:"AND",or:"OR"};class qB{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Ov(n,t){return n.useProto3Json||Tg(t)?t:{value:t}}function Gm(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function jR(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function GB(n,t){return Gm(n,t.toTimestamp())}function Lr(n){return xe(!!n,49232),Yt.fromTimestamp(function(e){const i=Za(e);return new xn(i.seconds,i.nanos)}(n))}function ab(n,t){return kv(n,t).canonicalString()}function kv(n,t){const e=function(s){return new Ke(["projects",s.projectId,"databases",s.database])}(n).child("documents");return t===void 0?e:e.child(t)}function qR(n){const t=Ke.fromString(n);return xe(KR(t),10190,{key:t.toString()}),t}function Dv(n,t){return ab(n.databaseId,t.path)}function Uy(n,t){const e=qR(t);if(e.get(1)!==n.databaseId.projectId)throw new Rt(dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Rt(dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Nt(WR(e))}function GR(n,t){return ab(n.databaseId,t)}function WB(n){const t=qR(n);return t.length===4?Ke.emptyPath():WR(t)}function Nv(n){return new Ke(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function WR(n){return xe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Hx(n,t,e){return{name:Dv(n,t),fields:e.value.mapValue.fields}}function YB(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ft(39313,{state:m})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],o=function(m,v){return m.useProto3Json?(xe(v===void 0||typeof v=="string",58123),$n.fromBase64String(v||"")):(xe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),$n.fromUint8Array(v||new Uint8Array))}(n,t.targetChange.resumeToken),u=t.targetChange.cause,h=u&&function(m){const v=m.code===void 0?dt.UNKNOWN:UR(m.code);return new Rt(v,m.message||"")}(u);e=new HR(i,s,o,h||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=Uy(n,i.document.name),o=Lr(i.document.updateTime),u=i.document.createTime?Lr(i.document.createTime):Yt.min(),h=new As({mapValue:{fields:i.document.fields}}),d=hi.newFoundDocument(s,o,u,h),m=i.targetIds||[],v=i.removedTargetIds||[];e=new lm(m,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=Uy(n,i.document),o=i.readTime?Lr(i.readTime):Yt.min(),u=hi.newNoDocument(s,o),h=i.removedTargetIds||[];e=new lm([],h,u.key,u)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=Uy(n,i.document),o=i.removedTargetIds||[];e=new lm([],o,s,null)}else{if(!("filter"in t))return Ft(11601,{Vt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,u=new VB(s,o),h=i.targetId;e=new FR(h,u)}}return e}function ZB(n,t){let e;if(t instanceof yd)e={update:Hx(n,t.key,t.value)};else if(t instanceof BR)e={delete:Dv(n,t.key)};else if(t instanceof yu)e={update:Hx(n,t.key,t.data),updateMask:iU(t.fieldMask)};else{if(!(t instanceof DB))return Ft(16599,{ft:t.type});e={verify:Dv(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(o,u){const h=u.transform;if(h instanceof jm)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Qf)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Xf)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof qm)return{fieldPath:u.field.canonicalString(),increment:h.Re};throw Ft(20930,{transform:u.transform})}(0,i))),t.precondition.isNone||(e.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:GB(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ft(27497)}(n,t.precondition)),e}function KB(n,t){return n&&n.length>0?(xe(t!==void 0,14353),n.map(e=>function(s,o){let u=s.updateTime?Lr(s.updateTime):Lr(o);return u.isEqual(Yt.min())&&(u=Lr(o)),new MB(u,s.transformResults||[])}(e,t))):[]}function $B(n,t){return{documents:[GR(n,t.path)]}}function QB(n,t){const e={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=GR(n,s);const o=function(m){if(m.length!==0)return ZR(or.create(m,"and"))}(t.filters);o&&(e.structuredQuery.where=o);const u=function(m){if(m.length!==0)return m.map(v=>function(w){return{field:dc(w.field),direction:tU(w.dir)}}(v))}(t.orderBy);u&&(e.structuredQuery.orderBy=u);const h=Ov(n,t.limit);return h!==null&&(e.structuredQuery.limit=h),t.startAt&&(e.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(t.endAt)),{gt:e,parent:s}}function XB(n){let t=WB(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let s=null;if(i>0){xe(i===1,65062);const v=e.from[0];v.allDescendants?s=v.collectionId:t=t.child(v.collectionId)}let o=[];e.where&&(o=function(T){const w=YR(T);return w instanceof or&&TR(w)?w.getFilters():[w]}(e.where));let u=[];e.orderBy&&(u=function(T){return T.map(w=>function(R){return new $f(pc(R.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(w))}(e.orderBy));let h=null;e.limit&&(h=function(T){let w;return w=typeof T=="object"?T.value:T,Tg(w)?null:w}(e.limit));let d=null;e.startAt&&(d=function(T){const w=!!T.before,A=T.values||[];return new Fm(A,w)}(e.startAt));let m=null;return e.endAt&&(m=function(T){const w=!T.before,A=T.values||[];return new Fm(A,w)}(e.endAt)),yB(t,s,u,o,h,"F",d,m)}function JB(n,t){const e=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ft(28987,{purpose:s})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function YR(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=pc(e.unaryFilter.field);return vn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=pc(e.unaryFilter.field);return vn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=pc(e.unaryFilter.field);return vn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=pc(e.unaryFilter.field);return vn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ft(61313);default:return Ft(60726)}}(n):n.fieldFilter!==void 0?function(e){return vn.create(pc(e.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ft(58110);default:return Ft(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return or.create(e.compositeFilter.filters.map(i=>YR(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ft(1026)}}(e.compositeFilter.op))}(n):Ft(30097,{filter:n})}function tU(n){return FB[n]}function eU(n){return HB[n]}function nU(n){return jB[n]}function dc(n){return{fieldPath:n.canonicalString()}}function pc(n){return Zn.fromServerFormat(n.fieldPath)}function ZR(n){return n instanceof vn?function(e){if(e.op==="=="){if(Rx(e.value))return{unaryFilter:{field:dc(e.field),op:"IS_NAN"}};if(Ix(e.value))return{unaryFilter:{field:dc(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Rx(e.value))return{unaryFilter:{field:dc(e.field),op:"IS_NOT_NAN"}};if(Ix(e.value))return{unaryFilter:{field:dc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dc(e.field),op:eU(e.op),value:e.value}}}(n):n instanceof or?function(e){const i=e.getFilters().map(s=>ZR(s));return i.length===1?i[0]:{compositeFilter:{op:nU(e.op),filters:i}}}(n):Ft(54877,{filter:n})}function iU(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function KR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(t,e,i,s,o=Yt.min(),u=Yt.min(),h=$n.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(t){return new Na(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(t){this.wt=t}}function rU(n){const t=XB({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Hm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(){this.Cn=new aU}addToCollectionParentIndex(t,e){return this.Cn.add(e),pt.resolve()}getCollectionParents(t,e){return pt.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return pt.resolve()}deleteFieldIndex(t,e){return pt.resolve()}deleteAllFieldIndexes(t){return pt.resolve()}createTargetIndexes(t,e){return pt.resolve()}getDocumentsMatchingTarget(t,e){return pt.resolve(null)}getIndexType(t,e){return pt.resolve(0)}getFieldIndexes(t,e){return pt.resolve([])}getNextCollectionGroupToUpdate(t){return pt.resolve(null)}getMinOffset(t,e){return pt.resolve(Ya.min())}getMinOffsetFromCollectionGroup(t,e){return pt.resolve(Ya.min())}updateCollectionGroup(t,e,i){return pt.resolve()}updateIndexEntries(t,e){return pt.resolve()}}class aU{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e]||new Cn(Ke.comparator),o=!s.has(i);return this.index[e]=s.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e];return s&&s.has(i)}getEntries(t){return(this.index[t]||new Cn(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$R=41943040;class Pi{static withCacheSize(t){return new Pi(t,Pi.DEFAULT_COLLECTION_PERCENTILE,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pi.DEFAULT_COLLECTION_PERCENTILE=10,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pi.DEFAULT=new Pi($R,Pi.DEFAULT_COLLECTION_PERCENTILE,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pi.DISABLED=new Pi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new Nc(0)}static lr(){return new Nc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="LruGarbageCollector",lU=1048576;function Gx([n,t],[e,i]){const s=te(n,e);return s===0?te(t,i):s}class uU{constructor(t){this.Er=t,this.buffer=new Cn(Gx),this.dr=0}Ar(){return++this.dr}Rr(t){const e=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();Gx(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class cU{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){It(qx,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Xc(e)?It(qx,"Ignoring IndexedDB error during garbage collection: ",e):await Qc(e)}await this.mr(3e5)})}}class hU{constructor(t,e){this.gr=t,this.params=e}calculateTargetCount(t,e){return this.gr.pr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return pt.resolve(Eg.le);const i=new uU(e);return this.gr.forEachTarget(t,s=>i.Rr(s.sequenceNumber)).next(()=>this.gr.yr(t,s=>i.Rr(s))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.gr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.gr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(It("LruGarbageCollector","Garbage collection skipped; disabled"),pt.resolve(jx)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(It("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jx):this.wr(t,e))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,e){let i,s,o,u,h,d,m;const v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(It("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),s=this.params.maximumSequenceNumbersToCollect):s=T,u=Date.now(),this.nthSequenceNumber(t,s))).next(T=>(i=T,h=Date.now(),this.removeTargets(t,i,e))).next(T=>(o=T,d=Date.now(),this.removeOrphanedDocuments(t,i))).next(T=>(m=Date.now(),hc()<=ae.DEBUG&&It("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${s} in `+(h-u)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${T} documents in `+(m-d)+`ms
Total Duration: ${m-v}ms`),pt.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:T})))}}function fU(n,t){return new hU(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(){this.changes=new _u(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,hi.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?pt.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(t,e,i,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,e))).next(s=>(i!==null&&If(i.mutation,s,er.empty(),xn.now()),s))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,fe()).next(()=>i))}getLocalViewOfDocuments(t,e,i=fe()){const s=$l();return this.populateOverlays(t,s,e).next(()=>this.computeViews(t,e,s,i).next(o=>{let u=uf();return o.forEach((h,d)=>{u=u.insert(h,d.overlayedDocument)}),u}))}getOverlayedDocuments(t,e){const i=$l();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,fe()))}populateOverlays(t,e,i){const s=[];return i.forEach(o=>{e.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(t,s).next(o=>{o.forEach((u,h)=>{e.set(u,h)})})}computeViews(t,e,i,s){let o=Mo();const u=Af(),h=function(){return Af()}();return e.forEach((d,m)=>{const v=i.get(m.key);s.has(m.key)&&(v===void 0||v.mutation instanceof yu)?o=o.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),If(v.mutation,m,v.mutation.getFieldMask(),xn.now())):u.set(m.key,er.empty())}),this.recalculateAndSaveOverlays(t,o).next(d=>(d.forEach((m,v)=>u.set(m,v)),e.forEach((m,v)=>{var T;return h.set(m,new pU(v,(T=u.get(m))!==null&&T!==void 0?T:null))}),h))}recalculateAndSaveOverlays(t,e){const i=Af();let s=new nn((u,h)=>u-h),o=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(u=>{for(const h of u)h.keys().forEach(d=>{const m=e.get(d);if(m===null)return;let v=i.get(d)||er.empty();v=h.applyToLocalView(m,v),i.set(d,v);const T=(s.get(h.batchId)||fe()).add(d);s=s.insert(h.batchId,T)})}).next(()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,v=d.value,T=MR();v.forEach(w=>{if(!o.has(w)){const A=VR(e.get(w),i.get(w));A!==null&&T.set(w,A),o=o.add(w)}}),u.push(this.documentOverlayCache.saveOverlays(t,m,T))}return pt.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,s){return function(u){return Nt.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):CR(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,s):this.getDocumentsMatchingCollectionQuery(t,e,i,s)}getNextDocuments(t,e,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,s).next(o=>{const u=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,s-o.size):pt.resolve($l());let h=Wf,d=o;return u.next(m=>pt.forEach(m,(v,T)=>(h<T.largestBatchId&&(h=T.largestBatchId),o.get(v)?pt.resolve():this.remoteDocumentCache.getEntry(t,v).next(w=>{d=d.insert(v,w)}))).next(()=>this.populateOverlays(t,m,o)).next(()=>this.computeViews(t,d,m,fe())).next(v=>({batchId:h,changes:PR(v)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Nt(e)).next(i=>{let s=uf();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,e,i,s){const o=e.collectionGroup;let u=uf();return this.indexManager.getCollectionParents(t,o).next(h=>pt.forEach(h,d=>{const m=function(T,w){return new Jc(w,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(e,d.child(o));return this.getDocumentsMatchingCollectionQuery(t,m,i,s).next(v=>{v.forEach((T,w)=>{u=u.insert(T,w)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(t,e,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,s))).next(u=>{o.forEach((d,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,hi.newInvalidDocument(v)))});let h=uf();return u.forEach((d,m)=>{const v=o.get(d);v!==void 0&&If(v.mutation,m,er.empty(),xn.now()),xg(e,m)&&(h=h.insert(d,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,e){return pt.resolve(this.kr.get(e))}saveBundleMetadata(t,e){return this.kr.set(e.id,function(s){return{id:s.id,version:s.version,createTime:Lr(s.createTime)}}(e)),pt.resolve()}getNamedQuery(t,e){return pt.resolve(this.qr.get(e))}saveNamedQuery(t,e){return this.qr.set(e.name,function(s){return{name:s.name,query:rU(s.bundledQuery),readTime:Lr(s.readTime)}}(e)),pt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(){this.overlays=new nn(Nt.comparator),this.Qr=new Map}getOverlay(t,e){return pt.resolve(this.overlays.get(e))}getOverlays(t,e){const i=$l();return pt.forEach(e,s=>this.getOverlay(t,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((s,o)=>{this.St(t,e,o)}),pt.resolve()}removeOverlaysForBatchId(t,e,i){const s=this.Qr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(i)),pt.resolve()}getOverlaysForCollection(t,e,i){const s=$l(),o=e.length+1,u=new Nt(e.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!e.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return pt.resolve(s)}getOverlaysForCollectionGroup(t,e,i,s){let o=new nn((m,v)=>m-v);const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===e&&m.largestBatchId>i){let v=o.get(m.largestBatchId);v===null&&(v=$l(),o=o.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=$l(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,v)=>h.set(m,v)),!(h.size()>=s)););return pt.resolve(h)}St(t,e,i){const s=this.overlays.get(i.key);if(s!==null){const u=this.Qr.get(s.largestBatchId).delete(i.key);this.Qr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new LB(e,i));let o=this.Qr.get(e);o===void 0&&(o=fe(),this.Qr.set(e,o)),this.Qr.set(e,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(){this.sessionToken=$n.EMPTY_BYTE_STRING}getSessionToken(t){return pt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,pt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(){this.$r=new Cn(Vn.Ur),this.Kr=new Cn(Vn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,e){const i=new Vn(t,e);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.zr(new Vn(t,e))}jr(t,e){t.forEach(i=>this.removeReference(i,e))}Hr(t){const e=new Nt(new Ke([])),i=new Vn(e,t),s=new Vn(e,t+1),o=[];return this.Kr.forEachInRange([i,s],u=>{this.zr(u),o.push(u.key)}),o}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const e=new Nt(new Ke([])),i=new Vn(e,t),s=new Vn(e,t+1);let o=fe();return this.Kr.forEachInRange([i,s],u=>{o=o.add(u.key)}),o}containsKey(t){const e=new Vn(t,0),i=this.$r.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class Vn{constructor(t,e){this.key=t,this.Zr=e}static Ur(t,e){return Nt.comparator(t.key,e.key)||te(t.Zr,e.Zr)}static Wr(t,e){return te(t.Zr,e.Zr)||Nt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nr=1,this.Xr=new Cn(Vn.Ur)}checkEmpty(t){return pt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,s){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new NB(o,e,i,s);this.mutationQueue.push(u);for(const h of s)this.Xr=this.Xr.add(new Vn(h.key,o)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return pt.resolve(u)}lookupMutationBatch(t,e){return pt.resolve(this.ei(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=this.ti(i),o=s<0?0:s;return pt.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return pt.resolve(this.mutationQueue.length===0?X0:this.nr-1)}getAllMutationBatches(t){return pt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Vn(e,0),s=new Vn(e,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([i,s],u=>{const h=this.ei(u.Zr);o.push(h)}),pt.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Cn(te);return e.forEach(s=>{const o=new Vn(s,0),u=new Vn(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,u],h=>{i=i.add(h.Zr)})}),pt.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1;let o=i;Nt.isDocumentKey(o)||(o=o.child(""));const u=new Vn(new Nt(o),0);let h=new Cn(te);return this.Xr.forEachWhile(d=>{const m=d.key.path;return!!i.isPrefixOf(m)&&(m.length===s&&(h=h.add(d.Zr)),!0)},u),pt.resolve(this.ni(h))}ni(t){const e=[];return t.forEach(i=>{const s=this.ei(i);s!==null&&e.push(s)}),e}removeMutationBatch(t,e){xe(this.ri(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return pt.forEach(e.mutations,s=>{const o=new Vn(s.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Xr=i})}sr(t){}containsKey(t,e){const i=new Vn(e,0),s=this.Xr.firstAfterOrEqual(i);return pt.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,pt.resolve()}ri(t,e){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const e=this.ti(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(t){this.ii=t,this.docs=function(){return new nn(Nt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,s=this.docs.get(i),o=s?s.size:0,u=this.ii(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return pt.resolve(i?i.document.mutableCopy():hi.newInvalidDocument(e))}getEntries(t,e){let i=Mo();return e.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():hi.newInvalidDocument(s))}),pt.resolve(i)}getDocumentsMatchingQuery(t,e,i,s){let o=Mo();const u=e.path,h=new Nt(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:v}}=d.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||$3(K3(v),i)<=0||(s.has(v.key)||xg(e,v))&&(o=o.insert(v.key,v.mutableCopy()))}return pt.resolve(o)}getAllFromCollectionGroup(t,e,i,s){Ft(9500)}si(t,e){return pt.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new EU(this)}getSize(t){return pt.resolve(this.size)}}class EU extends dU{constructor(t){super(),this.Br=t}applyChanges(t){const e=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?e.push(this.Br.addEntry(t,s)):this.Br.removeEntry(i)}),pt.waitFor(e)}getFromCache(t,e){return this.Br.getEntry(t,e)}getAllFromCache(t,e){return this.Br.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(t){this.persistence=t,this.oi=new _u(e=>eb(e),nb),this.lastRemoteSnapshotVersion=Yt.min(),this.highestTargetId=0,this._i=0,this.ai=new lb,this.targetCount=0,this.ui=Nc.cr()}forEachTarget(t,e){return this.oi.forEach((i,s)=>e(s)),pt.resolve()}getLastRemoteSnapshotVersion(t){return pt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return pt.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),pt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this._i&&(this._i=e),pt.resolve()}Tr(t){this.oi.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ui=new Nc(e),this.highestTargetId=e),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,e){return this.Tr(e),this.targetCount+=1,pt.resolve()}updateTargetData(t,e){return this.Tr(e),pt.resolve()}removeTargetData(t,e){return this.oi.delete(e.target),this.ai.Hr(e.targetId),this.targetCount-=1,pt.resolve()}removeTargets(t,e,i){let s=0;const o=[];return this.oi.forEach((u,h)=>{h.sequenceNumber<=e&&i.get(h.targetId)===null&&(this.oi.delete(u),o.push(this.removeMatchingKeysForTargetId(t,h.targetId)),s++)}),pt.waitFor(o).next(()=>s)}getTargetCount(t){return pt.resolve(this.targetCount)}getTargetData(t,e){const i=this.oi.get(e)||null;return pt.resolve(i)}addMatchingKeys(t,e,i){return this.ai.Gr(e,i),pt.resolve()}removeMatchingKeys(t,e,i){this.ai.jr(e,i);const s=this.persistence.referenceDelegate,o=[];return s&&e.forEach(u=>{o.push(s.markPotentiallyOrphaned(t,u))}),pt.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.ai.Hr(e),pt.resolve()}getMatchingKeysForTargetId(t,e){const i=this.ai.Yr(e);return pt.resolve(i)}containsKey(t,e){return pt.resolve(this.ai.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(t,e){this.ci={},this.overlays={},this.li=new Eg(0),this.hi=!1,this.hi=!0,this.Pi=new yU,this.referenceDelegate=t(this),this.Ti=new TU(this),this.indexManager=new oU,this.remoteDocumentCache=function(s){return new bU(s)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new sU(e),this.Ei=new gU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new _U,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ci[t.toKey()];return i||(i=new vU(e,this.referenceDelegate),this.ci[t.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,e,i){It("MemoryPersistence","Starting transaction:",t);const s=new wU(this.li.next());return this.referenceDelegate.di(),i(s).next(o=>this.referenceDelegate.Ai(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ri(t,e){return pt.or(Object.values(this.ci).map(i=>()=>i.containsKey(t,e)))}}class wU extends X3{constructor(t){super(),this.currentSequenceNumber=t}}class ub{constructor(t){this.persistence=t,this.Vi=new lb,this.mi=null}static fi(t){return new ub(t)}get gi(){if(this.mi)return this.mi;throw Ft(60996)}addReference(t,e,i){return this.Vi.addReference(i,e),this.gi.delete(i.toString()),pt.resolve()}removeReference(t,e,i){return this.Vi.removeReference(i,e),this.gi.add(i.toString()),pt.resolve()}markPotentiallyOrphaned(t,e){return this.gi.add(e.toString()),pt.resolve()}removeTarget(t,e){this.Vi.Hr(e.targetId).forEach(s=>this.gi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(s=>{s.forEach(o=>this.gi.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}di(){this.mi=new Set}Ai(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pt.forEach(this.gi,i=>{const s=Nt.fromPath(i);return this.pi(t,s).next(o=>{o||e.removeEntry(s,Yt.min())})}).next(()=>(this.mi=null,e.apply(t)))}updateLimboDocument(t,e){return this.pi(t,e).next(i=>{i?this.gi.delete(e.toString()):this.gi.add(e.toString())})}Ii(t){return 0}pi(t,e){return pt.or([()=>pt.resolve(this.Vi.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ri(t,e)])}}class Wm{constructor(t,e){this.persistence=t,this.yi=new _u(i=>eB(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=fU(this,e)}static fi(t,e){return new Wm(t,e)}di(){}Ai(t){return pt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}pr(t){const e=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(s=>i+s))}br(t){let e=0;return this.yr(t,i=>{e++}).next(()=>e)}yr(t,e){return pt.forEach(this.yi,(i,s)=>this.Dr(t,i,s).next(o=>o?pt.resolve():e(s)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.si(t,u=>this.Dr(t,u,e).next(h=>{h||(i++,o.removeEntry(u,Yt.min()))})).next(()=>o.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.yi.set(e,t.currentSequenceNumber),pt.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.yi.set(i,t.currentSequenceNumber),pt.resolve()}removeReference(t,e,i){return this.yi.set(i,t.currentSequenceNumber),pt.resolve()}updateLimboDocument(t,e){return this.yi.set(e,t.currentSequenceNumber),pt.resolve()}Ii(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=rm(t.data.value)),e}Dr(t,e,i){return pt.or([()=>this.persistence.Ri(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.yi.get(e);return pt.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(t,e,i,s){this.targetId=t,this.fromCache=e,this.ds=i,this.As=s}static Rs(t,e){let i=fe(),s=fe();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new cb(t,e.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return GD()?8:J3(di())>0?6:4}()}initialize(t,e){this.ys=t,this.indexManager=e,this.Vs=!0}getDocumentsMatchingQuery(t,e,i,s){const o={result:null};return this.ws(t,e).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.bs(t,e,s,i).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new SU;return this.Ss(t,e,u).next(h=>{if(o.result=h,this.fs)return this.Ds(t,e,u,h.size)})}).next(()=>o.result)}Ds(t,e,i,s){return i.documentReadCount<this.gs?(hc()<=ae.DEBUG&&It("QueryEngine","SDK will not create cache indexes for query:",fc(e),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),pt.resolve()):(hc()<=ae.DEBUG&&It("QueryEngine","Query:",fc(e),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ps*s?(hc()<=ae.DEBUG&&It("QueryEngine","The SDK decides to create cache indexes for query:",fc(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Nr(e))):pt.resolve())}ws(t,e){if(kx(e))return pt.resolve(null);let i=Nr(e);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(e.limit!==null&&s===1&&(e=Hm(e,null,"F"),i=Nr(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{const u=fe(...o);return this.ys.getDocuments(t,u).next(h=>this.indexManager.getMinOffset(t,i).next(d=>{const m=this.vs(e,h);return this.Cs(e,m,u,d.readTime)?this.ws(t,Hm(e,null,"F")):this.Fs(t,m,e,d)}))})))}bs(t,e,i,s){return kx(e)||s.isEqual(Yt.min())?pt.resolve(null):this.ys.getDocuments(t,i).next(o=>{const u=this.vs(e,o);return this.Cs(e,u,i,s)?pt.resolve(null):(hc()<=ae.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),fc(e)),this.Fs(t,u,e,Z3(s,Wf)).next(h=>h))})}vs(t,e){let i=new Cn(IR(t));return e.forEach((s,o)=>{xg(t,o)&&(i=i.add(o))}),i}Cs(t,e,i,s){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(t,e,i){return hc()<=ae.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",fc(e)),this.ys.getDocumentsMatchingQuery(t,e,Ya.min(),i)}Fs(t,e,i,s){return this.ys.getDocumentsMatchingQuery(t,i,s).next(o=>(e.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="LocalStore",CU=3e8;class AU{constructor(t,e,i,s){this.persistence=t,this.Ms=e,this.serializer=s,this.xs=new nn(te),this.Os=new _u(o=>eb(o),nb),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(i)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new mU(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.xs))}}function IU(n,t,e,i){return new AU(n,t,e,i)}async function XR(n,t){const e=Zt(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let s;return e.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,e.Ls(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{const u=[],h=[];let d=fe();for(const m of s){u.push(m.batchId);for(const v of m.mutations)d=d.add(v.key)}for(const m of o){h.push(m.batchId);for(const v of m.mutations)d=d.add(v.key)}return e.localDocuments.getDocuments(i,d).next(m=>({ks:m,removedBatchIds:u,addedBatchIds:h}))})})}function RU(n,t){const e=Zt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),o=e.Bs.newChangeBuffer({trackRemovals:!0});return function(h,d,m,v){const T=m.batch,w=T.keys();let A=pt.resolve();return w.forEach(R=>{A=A.next(()=>v.getEntry(d,R)).next(M=>{const k=m.docVersions.get(R);xe(k!==null,48541),M.version.compareTo(k)<0&&(T.applyToRemoteDocument(M,m),M.isValidDocument()&&(M.setReadTime(m.commitVersion),v.addEntry(M)))})}),A.next(()=>h.mutationQueue.removeMutationBatch(d,T))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=fe();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,s))})}function JR(n){const t=Zt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ti.getLastRemoteSnapshotVersion(e))}function PU(n,t){const e=Zt(n),i=t.snapshotVersion;let s=e.xs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=e.Bs.newChangeBuffer({trackRemovals:!0});s=e.xs;const h=[];t.targetChanges.forEach((v,T)=>{const w=s.get(T);if(!w)return;h.push(e.Ti.removeMatchingKeys(o,v.removedDocuments,T).next(()=>e.Ti.addMatchingKeys(o,v.addedDocuments,T)));let A=w.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(T)!==null?A=A.withResumeToken($n.EMPTY_BYTE_STRING,Yt.min()).withLastLimboFreeSnapshotVersion(Yt.min()):v.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(v.resumeToken,i)),s=s.insert(T,A),function(M,k,U){return M.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=CU?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(w,A,v)&&h.push(e.Ti.updateTargetData(o,A))});let d=Mo(),m=fe();if(t.documentUpdates.forEach(v=>{t.resolvedLimboDocuments.has(v)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(o,v))}),h.push(MU(o,u,t.documentUpdates).next(v=>{d=v.qs,m=v.Qs})),!i.isEqual(Yt.min())){const v=e.Ti.getLastRemoteSnapshotVersion(o).next(T=>e.Ti.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(v)}return pt.waitFor(h).next(()=>u.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,d,m)).next(()=>d)}).then(o=>(e.xs=s,o))}function MU(n,t,e){let i=fe(),s=fe();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let u=Mo();return e.forEach((h,d)=>{const m=o.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(Yt.min())?(t.removeEntry(h,d.readTime),u=u.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(d),u=u.insert(h,d)):It(hb,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)}),{qs:u,Qs:s}})}function OU(n,t){const e=Zt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=X0),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function kU(n,t){const e=Zt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return e.Ti.getTargetData(i,t).next(o=>o?(s=o,pt.resolve(s)):e.Ti.allocateTargetId(i).next(u=>(s=new Na(t,u,"TargetPurposeListen",i.currentSequenceNumber),e.Ti.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=e.xs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.xs=e.xs.insert(i.targetId,i),e.Os.set(t,i.targetId)),i})}async function Lv(n,t,e){const i=Zt(n),s=i.xs.get(t),o=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",o,u=>i.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!Xc(u))throw u;It(hb,`Failed to update sequence numbers for target ${t}: ${u}`)}i.xs=i.xs.remove(t),i.Os.delete(s.target)}function Wx(n,t,e){const i=Zt(n);let s=Yt.min(),o=fe();return i.persistence.runTransaction("Execute query","readwrite",u=>function(d,m,v){const T=Zt(d),w=T.Os.get(v);return w!==void 0?pt.resolve(T.xs.get(w)):T.Ti.getTargetData(m,v)}(i,u,Nr(t)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(u,h.targetId).next(d=>{o=d})}).next(()=>i.Ms.getDocumentsMatchingQuery(u,t,e?s:Yt.min(),e?o:fe())).next(h=>(DU(i,bB(t),h),{documents:h,$s:o})))}function DU(n,t,e){let i=n.Ns.get(t)||Yt.min();e.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Ns.set(t,i)}class Yx{constructor(){this.activeTargetIds=CB()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class NU{constructor(){this.xo=new Yx,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,e,i){this.Oo[t]=e}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new Yx,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="ConnectivityMonitor";class Kx{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){It(Zx,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){It(Zx,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dp=null;function Vv(){return Dp===null?Dp=function(){return 268435456+Math.round(2147483648*Math.random())}():Dp++,"0x"+Dp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="RestConnection",VU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zU{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=e+"://"+t.host,this.Wo=`projects/${i}/databases/${s}`,this.Go=this.databaseId.database===Bm?`project_id=${i}`:`project_id=${i}&database_id=${s}`}zo(t,e,i,s,o){const u=Vv(),h=this.jo(t,e.toUriEncodedString());It(Fy,`Sending RPC '${t}' ${u}:`,h,i);const d={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(d,s,o);const{host:m}=new URL(h),v=el(m);return this.Jo(t,h,d,i,v).then(T=>(It(Fy,`Received RPC '${t}' ${u}: `,T),T),T=>{throw Mc(Fy,`RPC '${t}' ${u} failed with error: `,T,"url: ",h,"request:",i),T})}Yo(t,e,i,s,o,u){return this.zo(t,e,i,s,o)}Ho(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$c}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}jo(t,e){const i=VU[t];return`${this.Ko}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="WebChannelConnection";class UU extends zU{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,i,s,o){const u=Vv();return new Promise((h,d)=>{const m=new eR;m.setWithCredentials(!0),m.listenOnce(nR.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case sm.NO_ERROR:const T=m.getResponseJson();It(oi,`XHR for RPC '${t}' ${u} received:`,JSON.stringify(T)),h(T);break;case sm.TIMEOUT:It(oi,`RPC '${t}' ${u} timed out`),d(new Rt(dt.DEADLINE_EXCEEDED,"Request time out"));break;case sm.HTTP_ERROR:const w=m.getStatus();if(It(oi,`RPC '${t}' ${u} failed with status:`,w,"response text:",m.getResponseText()),w>0){let A=m.getResponseJson();Array.isArray(A)&&(A=A[0]);const R=A==null?void 0:A.error;if(R&&R.status&&R.message){const M=function(U){const Z=U.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(Z)>=0?Z:dt.UNKNOWN}(R.status);d(new Rt(M,R.message))}else d(new Rt(dt.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Rt(dt.UNAVAILABLE,"Connection failed."));break;default:Ft(9055,{h_:t,streamId:u,P_:m.getLastErrorCode(),T_:m.getLastError()})}}finally{It(oi,`RPC '${t}' ${u} completed.`)}});const v=JSON.stringify(s);It(oi,`RPC '${t}' ${u} sending request:`,s),m.send(e,"POST",v,i,15)})}I_(t,e,i){const s=Vv(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],u=rR(),h=sR(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Ho(d.initMessageHeaders,e,i),d.encodeInitMessageHeaders=!0;const v=o.join("");It(oi,`Creating RPC '${t}' stream ${s}: ${v}`,d);const T=u.createWebChannel(v,d);this.E_(T);let w=!1,A=!1;const R=new BU({Zo:k=>{A?It(oi,`Not sending because RPC '${t}' stream ${s} is closed:`,k):(w||(It(oi,`Opening RPC '${t}' stream ${s} transport.`),T.open(),w=!0),It(oi,`RPC '${t}' stream ${s} sending:`,k),T.send(k))},Xo:()=>T.close()}),M=(k,U,Z)=>{k.listen(U,J=>{try{Z(J)}catch(ut){setTimeout(()=>{throw ut},0)}})};return M(T,lf.EventType.OPEN,()=>{A||(It(oi,`RPC '${t}' stream ${s} transport opened.`),R.__())}),M(T,lf.EventType.CLOSE,()=>{A||(A=!0,It(oi,`RPC '${t}' stream ${s} transport closed`),R.u_(),this.d_(T))}),M(T,lf.EventType.ERROR,k=>{A||(A=!0,Mc(oi,`RPC '${t}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),R.u_(new Rt(dt.UNAVAILABLE,"The operation could not be completed")))}),M(T,lf.EventType.MESSAGE,k=>{var U;if(!A){const Z=k.data[0];xe(!!Z,16349);const J=Z,ut=(J==null?void 0:J.error)||((U=J[0])===null||U===void 0?void 0:U.error);if(ut){It(oi,`RPC '${t}' stream ${s} received error:`,ut);const rt=ut.status;let _t=function(V){const q=yn[V];if(q!==void 0)return UR(q)}(rt),z=ut.message;_t===void 0&&(_t=dt.INTERNAL,z="Unknown error status: "+rt+" with message "+ut.message),A=!0,R.u_(new Rt(_t,z)),T.close()}else It(oi,`RPC '${t}' stream ${s} received:`,Z),R.c_(Z)}}),M(h,iR.STAT_EVENT,k=>{k.stat===xv.PROXY?It(oi,`RPC '${t}' stream ${s} detected buffering proxy`):k.stat===xv.NOPROXY&&It(oi,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.a_()},0),R}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(e=>e===t)}}function Hy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(n){return new qB(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(t,e,i=1e3,s=1.5,o=6e4){this.xi=t,this.timerId=e,this.A_=i,this.R_=s,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const e=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),s=Math.max(0,e-i);s>0&&It("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="PersistentStream";class eP{constructor(t,e,i,s,o,u,h,d){this.xi=t,this.S_=i,this.D_=s,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new tP(t,e)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,e){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():e&&e.code===dt.RESOURCE_EXHAUSTED?(Po(e.toString()),Po("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):e&&e.code===dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(e)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),e=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.v_===e&&this.z_(i,s)},i=>{t(()=>{const s=new Rt(dt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(s)})})}z_(t,e){const i=this.G_(this.v_);this.stream=this.H_(t,e),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{i(()=>this.j_(s))}),this.stream.onMessage(s=>{i(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return It($x,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return e=>{this.xi.enqueueAndForget(()=>this.v_===t?e():(It($x,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FU extends eP{constructor(t,e,i,s,o,u){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,s,u),this.serializer=o}H_(t,e){return this.connection.I_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const e=YB(this.serializer,t),i=function(o){if(!("targetChange"in o))return Yt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Yt.min():u.readTime?Lr(u.readTime):Yt.min()}(t);return this.listener.Y_(e,i)}Z_(t){const e={};e.database=Nv(this.serializer),e.addTarget=function(o,u){let h;const d=u.target;if(h=Pv(d)?{documents:$B(o,d)}:{query:QB(o,d).gt},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=jR(o,u.resumeToken);const m=Ov(o,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(Yt.min())>0){h.readTime=Gm(o,u.snapshotVersion.toTimestamp());const m=Ov(o,u.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,t);const i=JB(this.serializer,t);i&&(e.labels=i),this.Q_(e)}X_(t){const e={};e.database=Nv(this.serializer),e.removeTarget=t,this.Q_(e)}}class HU extends eP{constructor(t,e,i,s,o,u){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,s,u),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,e){return this.connection.I_("Write",t,e)}J_(t){return xe(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,xe(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){xe(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const e=KB(t.writeResults,t.commitTime),i=Lr(t.commitTime);return this.listener.ra(i,e)}ia(){const t={};t.database=Nv(this.serializer),this.Q_(t)}ta(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>ZB(this.serializer,i))};this.Q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{}class qU extends jU{constructor(t,e,i,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new Rt(dt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,e,i,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.zo(t,kv(e,i),s,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Rt(dt.UNKNOWN,o.toString())})}Yo(t,e,i,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Yo(t,kv(e,i),s,u,h,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Rt(dt.UNKNOWN,u.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class GU{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Po(e),this.ua=!1):It("OnlineStateTracker",e)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu="RemoteStore";class WU{constructor(t,e,i,s,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(u=>{i.enqueueAndForget(async()=>{vu(this)&&(It(lu,"Restarting streams for network reachability change."),await async function(d){const m=Zt(d);m.da.add(4),await bd(m),m.Va.set("Unknown"),m.da.delete(4),await Pg(m)}(this))})}),this.Va=new GU(i,s)}}async function Pg(n){if(vu(n))for(const t of n.Aa)await t(!0)}async function bd(n){for(const t of n.Aa)await t(!1)}function nP(n,t){const e=Zt(n);e.Ea.has(t.targetId)||(e.Ea.set(t.targetId,t),mb(e)?pb(e):th(e).N_()&&db(e,t))}function fb(n,t){const e=Zt(n),i=th(e);e.Ea.delete(t),i.N_()&&iP(e,t),e.Ea.size===0&&(i.N_()?i.k_():vu(e)&&e.Va.set("Unknown"))}function db(n,t){if(n.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Yt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}th(n).Z_(t)}function iP(n,t){n.ma.Ke(t),th(n).X_(t)}function pb(n){n.ma=new UB({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>n.Ea.get(t)||null,Pt:()=>n.datastore.serializer.databaseId}),th(n).start(),n.Va.ca()}function mb(n){return vu(n)&&!th(n).O_()&&n.Ea.size>0}function vu(n){return Zt(n).da.size===0}function sP(n){n.ma=void 0}async function YU(n){n.Va.set("Online")}async function ZU(n){n.Ea.forEach((t,e)=>{db(n,t)})}async function KU(n,t){sP(n),mb(n)?(n.Va.Pa(t),pb(n)):n.Va.set("Unknown")}async function $U(n,t,e){if(n.Va.set("Online"),t instanceof HR&&t.state===2&&t.cause)try{await async function(s,o){const u=o.cause;for(const h of o.targetIds)s.Ea.has(h)&&(await s.remoteSyncer.rejectListen(h,u),s.Ea.delete(h),s.ma.removeTarget(h))}(n,t)}catch(i){It(lu,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Ym(n,i)}else if(t instanceof lm?n.ma.Xe(t):t instanceof FR?n.ma.ot(t):n.ma.nt(t),!e.isEqual(Yt.min()))try{const i=await JR(n.localStore);e.compareTo(i)>=0&&await function(o,u){const h=o.ma.It(u);return h.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const v=o.Ea.get(m);v&&o.Ea.set(m,v.withResumeToken(d.resumeToken,u))}}),h.targetMismatches.forEach((d,m)=>{const v=o.Ea.get(d);if(!v)return;o.Ea.set(d,v.withResumeToken($n.EMPTY_BYTE_STRING,v.snapshotVersion)),iP(o,d);const T=new Na(v.target,d,m,v.sequenceNumber);db(o,T)}),o.remoteSyncer.applyRemoteEvent(h)}(n,e)}catch(i){It(lu,"Failed to raise snapshot:",i),await Ym(n,i)}}async function Ym(n,t,e){if(!Xc(t))throw t;n.da.add(1),await bd(n),n.Va.set("Offline"),e||(e=()=>JR(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{It(lu,"Retrying IndexedDB access"),await e(),n.da.delete(1),await Pg(n)})}function rP(n,t){return t().catch(e=>Ym(n,e,t))}async function Mg(n){const t=Zt(n),e=Qa(t);let i=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:X0;for(;QU(t);)try{const s=await OU(t.localStore,i);if(s===null){t.Ia.length===0&&e.k_();break}i=s.batchId,XU(t,s)}catch(s){await Ym(t,s)}oP(t)&&aP(t)}function QU(n){return vu(n)&&n.Ia.length<10}function XU(n,t){n.Ia.push(t);const e=Qa(n);e.N_()&&e.ea&&e.ta(t.mutations)}function oP(n){return vu(n)&&!Qa(n).O_()&&n.Ia.length>0}function aP(n){Qa(n).start()}async function JU(n){Qa(n).ia()}async function t6(n){const t=Qa(n);for(const e of n.Ia)t.ta(e.mutations)}async function e6(n,t,e){const i=n.Ia.shift(),s=rb.from(i,t,e);await rP(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Mg(n)}async function n6(n,t){t&&Qa(n).ea&&await async function(i,s){if(function(u){return zB(u)&&u!==dt.ABORTED}(s.code)){const o=i.Ia.shift();Qa(i).L_(),await rP(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Mg(i)}}(n,t),oP(n)&&aP(n)}async function Qx(n,t){const e=Zt(n);e.asyncQueue.verifyOperationInProgress(),It(lu,"RemoteStore received new credentials");const i=vu(e);e.da.add(3),await bd(e),i&&e.Va.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.da.delete(3),await Pg(e)}async function i6(n,t){const e=Zt(n);t?(e.da.delete(2),await Pg(e)):t||(e.da.add(2),await bd(e),e.Va.set("Unknown"))}function th(n){return n.fa||(n.fa=function(e,i,s){const o=Zt(e);return o.oa(),new FU(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{e_:YU.bind(null,n),n_:ZU.bind(null,n),i_:KU.bind(null,n),Y_:$U.bind(null,n)}),n.Aa.push(async t=>{t?(n.fa.L_(),mb(n)?pb(n):n.Va.set("Unknown")):(await n.fa.stop(),sP(n))})),n.fa}function Qa(n){return n.ga||(n.ga=function(e,i,s){const o=Zt(e);return o.oa(),new HU(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:JU.bind(null,n),i_:n6.bind(null,n),na:t6.bind(null,n),ra:e6.bind(null,n)}),n.Aa.push(async t=>{t?(n.ga.L_(),await Mg(n)):(await n.ga.stop(),n.Ia.length>0&&(It(lu,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))})),n.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(t,e,i,s,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new So,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,s,o){const u=Date.now()+i,h=new gb(t,e,u,s,o);return h.start(i),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Rt(dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _b(n,t){if(Po("AsyncQueue",`${t}: ${n}`),Xc(n))return new Rt(dt.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{static emptySet(t){return new Sc(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||Nt.comparator(e.key,i.key):(e,i)=>Nt.comparator(e.key,i.key),this.keyedMap=uf(),this.sortedSet=new nn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Sc)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Sc;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this.pa=new nn(Nt.comparator)}track(t){const e=t.doc.key,i=this.pa.get(e);i?t.type!==0&&i.type===3?this.pa=this.pa.insert(e,t):t.type===3&&i.type!==1?this.pa=this.pa.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.pa=this.pa.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.pa=this.pa.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.pa=this.pa.remove(e):t.type===1&&i.type===2?this.pa=this.pa.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.pa=this.pa.insert(e,{type:2,doc:t.doc}):Ft(63341,{Vt:t,ya:i}):this.pa=this.pa.insert(e,t)}wa(){const t=[];return this.pa.inorderTraversal((e,i)=>{t.push(i)}),t}}class Lc{constructor(t,e,i,s,o,u,h,d,m){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(t,e,i,s,o){const u=[];return e.forEach(h=>{u.push({type:0,doc:h})}),new Lc(t,e,Sc.emptySet(e),u,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Sg(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==i[s].type||!e[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class r6{constructor(){this.queries=Jx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const s=Zt(e),o=s.queries;s.queries=Jx(),o.forEach((u,h)=>{for(const d of h.Sa)d.onError(i)})})(this,new Rt(dt.ABORTED,"Firestore shutting down"))}}function Jx(){return new _u(n=>AR(n),Sg)}async function lP(n,t){const e=Zt(n);let i=3;const s=t.query;let o=e.queries.get(s);o?!o.Da()&&t.va()&&(i=2):(o=new s6,i=t.va()?0:1);try{switch(i){case 0:o.ba=await e.onListen(s,!0);break;case 1:o.ba=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(u){const h=_b(u,`Initialization of query '${fc(t.query)}' failed`);return void t.onError(h)}e.queries.set(s,o),o.Sa.push(t),t.Fa(e.onlineState),o.ba&&t.Ma(o.ba)&&yb(e)}async function uP(n,t){const e=Zt(n),i=t.query;let s=3;const o=e.queries.get(i);if(o){const u=o.Sa.indexOf(t);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?s=t.va()?0:1:!o.Da()&&t.va()&&(s=2))}switch(s){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function o6(n,t){const e=Zt(n);let i=!1;for(const s of t){const o=s.query,u=e.queries.get(o);if(u){for(const h of u.Sa)h.Ma(s)&&(i=!0);u.ba=s}}i&&yb(e)}function a6(n,t,e){const i=Zt(n),s=i.queries.get(t);if(s)for(const o of s.Sa)o.onError(e);i.queries.delete(t)}function yb(n){n.Ca.forEach(t=>{t.next()})}var zv,tC;(tC=zv||(zv={})).xa="default",tC.Cache="cache";class cP{constructor(t,e,i){this.query=t,this.Oa=e,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new Lc(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Na?this.La(t)&&(this.Oa.next(t),e=!0):this.ka(t,this.onlineState)&&(this.qa(t),e=!0),this.Ba=t,e}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let e=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),e=!0),e}ka(t,e){if(!t.fromCache||!this.va())return!0;const i=e!=="Offline";return(!this.options.Qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}La(t){if(t.docChanges.length>0)return!0;const e=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}qa(t){t=Lc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==zv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(t){this.key=t}}class fP{constructor(t){this.key=t}}class l6{constructor(t,e){this.query=t,this.Ha=e,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=fe(),this.mutatedKeys=fe(),this.Za=IR(t),this.Xa=new Sc(this.Za)}get eu(){return this.Ha}tu(t,e){const i=e?e.nu:new Xx,s=e?e.Xa:this.Xa;let o=e?e.mutatedKeys:this.mutatedKeys,u=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((v,T)=>{const w=s.get(v),A=xg(this.query,T)?T:null,R=!!w&&this.mutatedKeys.has(w.key),M=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let k=!1;w&&A?w.data.isEqual(A.data)?R!==M&&(i.track({type:3,doc:A}),k=!0):this.ru(w,A)||(i.track({type:2,doc:A}),k=!0,(d&&this.Za(A,d)>0||m&&this.Za(A,m)<0)&&(h=!0)):!w&&A?(i.track({type:0,doc:A}),k=!0):w&&!A&&(i.track({type:1,doc:w}),k=!0,(d||m)&&(h=!0)),k&&(A?(u=u.add(A),o=M?o.add(v):o.delete(v)):(u=u.delete(v),o=o.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),o=o.delete(v.key),i.track({type:1,doc:v})}return{Xa:u,nu:i,Cs:h,mutatedKeys:o}}ru(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,s){const o=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const u=t.nu.wa();u.sort((v,T)=>function(A,R){const M=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ft(20277,{Vt:k})}};return M(A)-M(R)}(v.type,T.type)||this.Za(v.doc,T.doc)),this.iu(i),s=s!=null&&s;const h=e&&!s?this.su():[],d=this.Ya.size===0&&this.current&&!s?1:0,m=d!==this.Ja;return this.Ja=d,u.length!==0||m?{snapshot:new Lc(this.query,t.Xa,o,u,t.mutatedKeys,d===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:h}:{ou:h}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Xx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=fe(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const e=[];return t.forEach(i=>{this.Ya.has(i)||e.push(new fP(i))}),this.Ya.forEach(i=>{t.has(i)||e.push(new hP(i))}),e}au(t){this.Ha=t.$s,this.Ya=fe();const e=this.tu(t.documents);return this.applyChanges(e,!0)}uu(){return Lc.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const vb="SyncEngine";class u6{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class c6{constructor(t){this.key=t,this.cu=!1}}class h6{constructor(t,e,i,s,o,u){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.lu={},this.hu=new _u(h=>AR(h),Sg),this.Pu=new Map,this.Tu=new Set,this.Iu=new nn(Nt.comparator),this.Eu=new Map,this.du=new lb,this.Au={},this.Ru=new Map,this.Vu=Nc.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function f6(n,t,e=!0){const i=yP(n);let s;const o=i.hu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.uu()):s=await dP(i,t,e,!0),s}async function d6(n,t){const e=yP(n);await dP(e,t,!0,!1)}async function dP(n,t,e,i){const s=await kU(n.localStore,Nr(t)),o=s.targetId,u=n.sharedClientState.addLocalQueryTarget(o,e);let h;return i&&(h=await p6(n,t,o,u==="current",s.resumeToken)),n.isPrimaryClient&&e&&nP(n.remoteStore,s),h}async function p6(n,t,e,i,s){n.fu=(T,w,A)=>async function(M,k,U,Z){let J=k.view.tu(U);J.Cs&&(J=await Wx(M.localStore,k.query,!1).then(({documents:z})=>k.view.tu(z,J)));const ut=Z&&Z.targetChanges.get(k.targetId),rt=Z&&Z.targetMismatches.get(k.targetId)!=null,_t=k.view.applyChanges(J,M.isPrimaryClient,ut,rt);return nC(M,k.targetId,_t.ou),_t.snapshot}(n,T,w,A);const o=await Wx(n.localStore,t,!0),u=new l6(t,o.$s),h=u.tu(o.documents),d=vd.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",s),m=u.applyChanges(h,n.isPrimaryClient,d);nC(n,e,m.ou);const v=new u6(t,e,u);return n.hu.set(t,v),n.Pu.has(e)?n.Pu.get(e).push(t):n.Pu.set(e,[t]),m.snapshot}async function m6(n,t,e){const i=Zt(n),s=i.hu.get(t),o=i.Pu.get(s.targetId);if(o.length>1)return i.Pu.set(s.targetId,o.filter(u=>!Sg(u,t))),void i.hu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Lv(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),e&&fb(i.remoteStore,s.targetId),Bv(i,s.targetId)}).catch(Qc)):(Bv(i,s.targetId),await Lv(i.localStore,s.targetId,!0))}async function g6(n,t){const e=Zt(n),i=e.hu.get(t),s=e.Pu.get(i.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),fb(e.remoteStore,i.targetId))}async function _6(n,t,e){const i=S6(n);try{const s=await function(u,h){const d=Zt(u),m=xn.now(),v=h.reduce((A,R)=>A.add(R.key),fe());let T,w;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let R=Mo(),M=fe();return d.Bs.getEntries(A,v).next(k=>{R=k,R.forEach((U,Z)=>{Z.isValidDocument()||(M=M.add(U))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,R)).next(k=>{T=k;const U=[];for(const Z of h){const J=kB(Z,T.get(Z.key).overlayedDocument);J!=null&&U.push(new yu(Z.key,J,vR(J.value.mapValue),xo.exists(!0)))}return d.mutationQueue.addMutationBatch(A,m,U,h)}).next(k=>{w=k;const U=k.applyToLocalDocumentSet(T,M);return d.documentOverlayCache.saveOverlays(A,k.batchId,U)})}).then(()=>({batchId:w.batchId,changes:PR(T)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(u,h,d){let m=u.Au[u.currentUser.toKey()];m||(m=new nn(te)),m=m.insert(h,d),u.Au[u.currentUser.toKey()]=m}(i,s.batchId,e),await Ed(i,s.changes),await Mg(i.remoteStore)}catch(s){const o=_b(s,"Failed to persist write");e.reject(o)}}async function pP(n,t){const e=Zt(n);try{const i=await PU(e.localStore,t);t.targetChanges.forEach((s,o)=>{const u=e.Eu.get(o);u&&(xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.cu=!0:s.modifiedDocuments.size>0?xe(u.cu,14607):s.removedDocuments.size>0&&(xe(u.cu,42227),u.cu=!1))}),await Ed(e,i,t)}catch(i){await Qc(i)}}function eC(n,t,e){const i=Zt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const s=[];i.hu.forEach((o,u)=>{const h=u.view.Fa(t);h.snapshot&&s.push(h.snapshot)}),function(u,h){const d=Zt(u);d.onlineState=h;let m=!1;d.queries.forEach((v,T)=>{for(const w of T.Sa)w.Fa(h)&&(m=!0)}),m&&yb(d)}(i.eventManager,t),s.length&&i.lu.Y_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function y6(n,t,e){const i=Zt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const s=i.Eu.get(t),o=s&&s.key;if(o){let u=new nn(Nt.comparator);u=u.insert(o,hi.newNoDocument(o,Yt.min()));const h=fe().add(o),d=new Ig(Yt.min(),new Map,new nn(te),u,h);await pP(i,d),i.Iu=i.Iu.remove(o),i.Eu.delete(t),bb(i)}else await Lv(i.localStore,t,!1).then(()=>Bv(i,t,e)).catch(Qc)}async function v6(n,t){const e=Zt(n),i=t.batch.batchId;try{const s=await RU(e.localStore,t);gP(e,i,null),mP(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Ed(e,s)}catch(s){await Qc(s)}}async function b6(n,t,e){const i=Zt(n);try{const s=await function(u,h){const d=Zt(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return d.mutationQueue.lookupMutationBatch(m,h).next(T=>(xe(T!==null,37113),v=T.keys(),d.mutationQueue.removeMutationBatch(m,T))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,v,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>d.localDocuments.getDocuments(m,v))})}(i.localStore,t);gP(i,t,e),mP(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Ed(i,s)}catch(s){await Qc(s)}}function mP(n,t){(n.Ru.get(t)||[]).forEach(e=>{e.resolve()}),n.Ru.delete(t)}function gP(n,t,e){const i=Zt(n);let s=i.Au[i.currentUser.toKey()];if(s){const o=s.get(t);o&&(e?o.reject(e):o.resolve(),s=s.remove(t)),i.Au[i.currentUser.toKey()]=s}}function Bv(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Pu.get(t))n.hu.delete(i),e&&n.lu.gu(i,e);n.Pu.delete(t),n.isPrimaryClient&&n.du.Hr(t).forEach(i=>{n.du.containsKey(i)||_P(n,i)})}function _P(n,t){n.Tu.delete(t.path.canonicalString());const e=n.Iu.get(t);e!==null&&(fb(n.remoteStore,e),n.Iu=n.Iu.remove(t),n.Eu.delete(e),bb(n))}function nC(n,t,e){for(const i of e)i instanceof hP?(n.du.addReference(i.key,t),E6(n,i)):i instanceof fP?(It(vb,"Document no longer in limbo: "+i.key),n.du.removeReference(i.key,t),n.du.containsKey(i.key)||_P(n,i.key)):Ft(19791,{pu:i})}function E6(n,t){const e=t.key,i=e.path.canonicalString();n.Iu.get(e)||n.Tu.has(i)||(It(vb,"New document in limbo: "+e),n.Tu.add(i),bb(n))}function bb(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){const t=n.Tu.values().next().value;n.Tu.delete(t);const e=new Nt(Ke.fromString(t)),i=n.Vu.next();n.Eu.set(i,new c6(e)),n.Iu=n.Iu.insert(e,i),nP(n.remoteStore,new Na(Nr(ib(e.path)),i,"TargetPurposeLimboResolution",Eg.le))}}async function Ed(n,t,e){const i=Zt(n),s=[],o=[],u=[];i.hu.isEmpty()||(i.hu.forEach((h,d)=>{u.push(i.fu(d,t,e).then(m=>{var v;if((m||e)&&i.isPrimaryClient){const T=m?!m.fromCache:(v=e==null?void 0:e.targetChanges.get(d.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(d.targetId,T?"current":"not-current")}if(m){s.push(m);const T=cb.Rs(d.targetId,m);o.push(T)}}))}),await Promise.all(u),i.lu.Y_(s),await async function(d,m){const v=Zt(d);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>pt.forEach(m,w=>pt.forEach(w.ds,A=>v.persistence.referenceDelegate.addReference(T,w.targetId,A)).next(()=>pt.forEach(w.As,A=>v.persistence.referenceDelegate.removeReference(T,w.targetId,A)))))}catch(T){if(!Xc(T))throw T;It(hb,"Failed to update sequence numbers: "+T)}for(const T of m){const w=T.targetId;if(!T.fromCache){const A=v.xs.get(w),R=A.snapshotVersion,M=A.withLastLimboFreeSnapshotVersion(R);v.xs=v.xs.insert(w,M)}}}(i.localStore,o))}async function T6(n,t){const e=Zt(n);if(!e.currentUser.isEqual(t)){It(vb,"User change. New user:",t.toKey());const i=await XR(e.localStore,t);e.currentUser=t,function(o,u){o.Ru.forEach(h=>{h.forEach(d=>{d.reject(new Rt(dt.CANCELLED,u))})}),o.Ru.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Ed(e,i.ks)}}function w6(n,t){const e=Zt(n),i=e.Eu.get(t);if(i&&i.cu)return fe().add(i.key);{let s=fe();const o=e.Pu.get(t);if(!o)return s;for(const u of o){const h=e.hu.get(u);s=s.unionWith(h.view.eu)}return s}}function yP(n){const t=Zt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=pP.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=w6.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=y6.bind(null,t),t.lu.Y_=o6.bind(null,t.eventManager),t.lu.gu=a6.bind(null,t.eventManager),t}function S6(n){const t=Zt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=v6.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=b6.bind(null,t),t}class Zm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Rg(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,e){return null}Cu(t,e){return null}Du(t){return IU(this.persistence,new xU,t.initialUser,this.serializer)}Su(t){return new QR(ub.fi,this.serializer)}bu(t){return new NU}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zm.provider={build:()=>new Zm};class x6 extends Zm{constructor(t){super(),this.cacheSizeBytes=t}vu(t,e){xe(this.persistence.referenceDelegate instanceof Wm,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new cU(i,t.asyncQueue,e)}Su(t){const e=this.cacheSizeBytes!==void 0?Pi.withCacheSize(this.cacheSizeBytes):Pi.DEFAULT;return new QR(i=>Wm.fi(i,e),this.serializer)}}class Uv{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>eC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=T6.bind(null,this.syncEngine),await i6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new r6}()}createDatastore(t){const e=Rg(t.databaseInfo.databaseId),i=function(o){return new UU(o)}(t.databaseInfo);return function(o,u,h,d){return new qU(o,u,h,d)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,s,o,u,h){return new WU(i,s,o,u,h)}(this.localStore,this.datastore,t.asyncQueue,e=>eC(this.syncEngine,e,0),function(){return Kx.C()?new Kx:new LU}())}createSyncEngine(t,e){return function(s,o,u,h,d,m,v){const T=new h6(s,o,u,h,d,m);return v&&(T.mu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(s){const o=Zt(s);It(lu,"RemoteStore shutting down."),o.da.add(5),await bd(o),o.Ra.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Uv.provider={build:()=>new Uv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):Po("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="FirestoreClient";class C6{constructor(t,e,i,s,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=s,this.user=li.UNAUTHENTICATED,this.clientId=uR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async u=>{It(Xa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(i,u=>(It(Xa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new So;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=_b(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function jy(n,t){n.asyncQueue.verifyOperationInProgress(),It(Xa,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await XR(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function iC(n,t){n.asyncQueue.verifyOperationInProgress();const e=await A6(n);It(Xa,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>Qx(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>Qx(t.remoteStore,s)),n._onlineComponents=t}async function A6(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){It(Xa,"Using user provided OfflineComponentProvider");try{await jy(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(s){return s.name==="FirebaseError"?s.code===dt.FAILED_PRECONDITION||s.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(e))throw e;Mc("Error using user provided cache. Falling back to memory cache: "+e),await jy(n,new Zm)}}else It(Xa,"Using default OfflineComponentProvider"),await jy(n,new x6(void 0));return n._offlineComponents}async function bP(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(It(Xa,"Using user provided OnlineComponentProvider"),await iC(n,n._uninitializedComponentsProvider._online)):(It(Xa,"Using default OnlineComponentProvider"),await iC(n,new Uv))),n._onlineComponents}function I6(n){return bP(n).then(t=>t.syncEngine)}async function EP(n){const t=await bP(n),e=t.eventManager;return e.onListen=f6.bind(null,t.syncEngine),e.onUnlisten=m6.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=d6.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=g6.bind(null,t.syncEngine),e}function R6(n,t,e={}){const i=new So;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,d,m){const v=new vP({next:w=>{v.xu(),u.enqueueAndForget(()=>uP(o,T));const A=w.docs.has(h);!A&&w.fromCache?m.reject(new Rt(dt.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&w.fromCache&&d&&d.source==="server"?m.reject(new Rt(dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(w)},error:w=>m.reject(w)}),T=new cP(ib(h.path),v,{includeMetadataChanges:!0,Qa:!0});return lP(o,T)}(await EP(n),n.asyncQueue,t,e,i)),i.promise}function P6(n,t,e={}){const i=new So;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,d,m){const v=new vP({next:w=>{v.xu(),u.enqueueAndForget(()=>uP(o,T)),w.fromCache&&d.source==="server"?m.reject(new Rt(dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(w)},error:w=>m.reject(w)}),T=new cP(h,v,{includeMetadataChanges:!0,Qa:!0});return lP(o,T)}(await EP(n),n.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(n,t,e){if(!e)throw new Rt(dt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function M6(n,t,e,i){if(t===!0&&i===!0)throw new Rt(dt.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function rC(n){if(!Nt.isDocumentKey(n))throw new Rt(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function oC(n){if(Nt.isDocumentKey(n))throw new Rt(dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Og(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Ft(12329,{type:typeof n})}function uu(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Rt(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Og(n);throw new Rt(dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function O6(n,t){if(t<=0)throw new Rt(dt.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP="firestore.googleapis.com",aC=!0;class lC{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new Rt(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=SP,this.ssl=aC}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:aC;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=$R;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<lU)throw new Rt(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}M6("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TP((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Rt(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Rt(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Rt(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class kg{constructor(t,e,i,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Rt(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Rt(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lC(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new B3;switch(i.type){case"firstParty":return new j3(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Rt(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=sC.get(e);i&&(It("ComponentProvider","Removing Datastore"),sC.delete(e),i.terminate())}(this),Promise.resolve()}}function k6(n,t,e,i={}){var s;n=uu(n,kg);const o=el(t),u=n._getSettings(),h=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),d=`${t}:${e}`;o&&(l0(`https://${d}`),u0("Firestore",!0)),u.host!==SP&&u.host!==d&&Mc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:d,ssl:o,emulatorOptions:i});if(!ja(m,h)&&(n._setSettings(m),i.mockUserToken)){let v,T;if(typeof i.mockUserToken=="string")v=i.mockUserToken,T=li.MOCK_USER;else{v=QA(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new Rt(dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new li(w)}n._authCredentials=new U3(new aR(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new rl(this.firestore,t,this._query)}}class ki{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fa(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ki(this.firestore,t,this._key)}}class Fa extends rl{constructor(t,e,i){super(t,e,ib(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ki(this.firestore,null,new Nt(t))}withConverter(t){return new Fa(this.firestore,t,this._path)}}function xP(n,t,...e){if(n=Kn(n),wP("collection","path",t),n instanceof kg){const i=Ke.fromString(t,...e);return oC(i),new Fa(n,null,i)}{if(!(n instanceof ki||n instanceof Fa))throw new Rt(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ke.fromString(t,...e));return oC(i),new Fa(n.firestore,null,i)}}function CP(n,t,...e){if(n=Kn(n),arguments.length===1&&(t=uR.newId()),wP("doc","path",t),n instanceof kg){const i=Ke.fromString(t,...e);return rC(i),new ki(n,null,new Nt(i))}{if(!(n instanceof ki||n instanceof Fa))throw new Rt(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ke.fromString(t,...e));return rC(i),new ki(n.firestore,n instanceof Fa?n.converter:null,new Nt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="AsyncQueue";class cC{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new tP(this,"async_queue_retry"),this.rc=()=>{const i=Hy();i&&It(uC,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=t;const e=Hy();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const e=Hy();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const e=new So;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!Xc(t))throw t;It(uC,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const e=this.sc.then(()=>(this.ec=!0,t().catch(i=>{throw this.Xu=i,this.ec=!1,Po("INTERNAL UNHANDLED ERROR: ",hC(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=e,e}enqueueAfterDelay(t,e,i){this.oc(),this.nc.indexOf(t)>-1&&(e=0);const s=gb.createAndSchedule(this,t,e,i,o=>this.uc(o));return this.Zu.push(s),s}oc(){this.Xu&&Ft(47125,{cc:hC(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const e of this.Zu)if(e.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.Zu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const e=this.Zu.indexOf(t);this.Zu.splice(e,1)}}function hC(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class Dg extends kg{constructor(t,e,i,s){super(t,e,i,s),this.type="firestore",this._queue=new cC,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new cC(t),this._firestoreClient=void 0,await t}}}function D6(n,t){const e=typeof n=="object"?n:f0(),i=typeof n=="string"?n:Bm,s=cg(e,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=ZA("firestore");o&&k6(s,...o)}return s}function Eb(n){if(n._terminated)throw new Rt(dt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||N6(n),n._firestoreClient}function N6(n){var t,e,i;const s=n._freezeSettings(),o=function(h,d,m,v){return new sB(h,d,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,TP(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((e=s.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new C6(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Vc($n.fromBase64String(t))}catch(e){throw new Rt(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Vc($n.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Rt(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Rt(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Rt(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return te(this._lat,t._lat)||te(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6=/^__.*__$/;class V6{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new yu(t,this.data,this.fieldMask,e,this.fieldTransforms):new yd(t,this.data,e,this.fieldTransforms)}}function IP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ft(40011,{Ic:n})}}class xb{constructor(t,e,i,s,o,u){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new xb(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),s=this.dc({path:i,Rc:!1});return s.Vc(t),s}mc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),s=this.dc({path:i,Rc:!1});return s.Ec(),s}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return Km(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(IP(this.Ic)&&L6.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class z6{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Rg(t)}bc(t,e,i,s=!1){return new xb({Ic:t,methodName:e,wc:i,path:Zn.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function RP(n){const t=n._freezeSettings(),e=Rg(n._databaseId);return new z6(n._databaseId,!!t.ignoreUndefinedProperties,e)}function B6(n,t,e,i,s,o={}){const u=n.bc(o.merge||o.mergeFields?2:0,t,e,s);OP("Data must be an object, but it was:",u,i);const h=PP(i,u);let d,m;if(o.merge)d=new er(u.fieldMask),m=u.fieldTransforms;else if(o.mergeFields){const v=[];for(const T of o.mergeFields){const w=F6(t,T,e);if(!u.contains(w))throw new Rt(dt.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);j6(v,w)||v.push(w)}d=new er(v),m=u.fieldTransforms.filter(T=>d.covers(T.field))}else d=null,m=u.fieldTransforms;return new V6(new As(h),d,m)}function U6(n,t,e,i=!1){return Cb(e,n.bc(i?4:3,t))}function Cb(n,t){if(MP(n=Kn(n)))return OP("Unsupported field value:",t,n),PP(n,t);if(n instanceof AP)return function(i,s){if(!IP(s.Ic))throw s.gc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(i,s){const o=[];let u=0;for(const h of i){let d=Cb(h,s.fc(u));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),u++}return{arrayValue:{values:o}}}(n,t)}return function(i,s){if((i=Kn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return AB(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=xn.fromDate(i);return{timestampValue:Gm(s.serializer,o)}}if(i instanceof xn){const o=new xn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Gm(s.serializer,o)}}if(i instanceof wb)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Vc)return{bytesValue:jR(s.serializer,i._byteString)};if(i instanceof ki){const o=s.databaseId,u=i.firestore._databaseId;if(!u.isEqual(o))throw s.gc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ab(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Sb)return function(u,h){return{mapValue:{fields:{[_R]:{stringValue:yR},[Um]:{arrayValue:{values:u.toArray().map(m=>{if(typeof m!="number")throw h.gc("VectorValues must only contain numeric values.");return sb(h.serializer,m)})}}}}}}(i,s);throw s.gc(`Unsupported field value: ${Og(i)}`)}(n,t)}function PP(n,t){const e={};return hR(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):gu(n,(i,s)=>{const o=Cb(s,t.Ac(i));o!=null&&(e[i]=o)}),{mapValue:{fields:e}}}function MP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof xn||n instanceof wb||n instanceof Vc||n instanceof ki||n instanceof AP||n instanceof Sb)}function OP(n,t,e){if(!MP(e)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(e)){const i=Og(e);throw i==="an object"?t.gc(n+" a custom object"):t.gc(n+" "+i)}}function F6(n,t,e){if((t=Kn(t))instanceof Tb)return t._internalPath;if(typeof t=="string")return kP(n,t);throw Km("Field path arguments must be of type string or ",n,!1,void 0,e)}const H6=new RegExp("[~\\*/\\[\\]]");function kP(n,t,e){if(t.search(H6)>=0)throw Km(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Tb(...t.split("."))._internalPath}catch{throw Km(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Km(n,t,e,i,s){const o=i&&!i.isEmpty(),u=s!==void 0;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||u)&&(d+=" (found",o&&(d+=` in field ${i}`),u&&(d+=` in document ${s}`),d+=")"),new Rt(dt.INVALID_ARGUMENT,h+n+d)}function j6(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(t,e,i,s,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ki(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new q6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Ab("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class q6 extends DP{data(){return super.data()}}function Ab(n,t){return typeof t=="string"?kP(n,t):t instanceof Tb?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Rt(dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ib{}class Rb extends Ib{}function NP(n,t,...e){let i=[];t instanceof Ib&&i.push(t),i=i.concat(e),function(o){const u=o.filter(d=>d instanceof Mb).length,h=o.filter(d=>d instanceof Pb).length;if(u>1||u>0&&h>0)throw new Rt(dt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)n=s._apply(n);return n}class Pb extends Rb{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new Pb(t,e,i)}_apply(t){const e=this._parse(t);return zP(t._query,e),new rl(t.firestore,t.converter,Mv(t._query,e))}_parse(t){const e=RP(t.firestore);return function(o,u,h,d,m,v,T){let w;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Rt(dt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){dC(T,v);const R=[];for(const M of T)R.push(fC(d,o,M));w={arrayValue:{values:R}}}else w=fC(d,o,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||dC(T,v),w=U6(h,u,T,v==="in"||v==="not-in");return vn.create(m,v,w)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class Mb extends Ib{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Mb(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:or.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(s,o){let u=s;const h=o.getFlattenedFilters();for(const d of h)zP(u,d),u=Mv(u,d)}(t._query,e),new rl(t.firestore,t.converter,Mv(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ob extends Rb{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Ob(t,e)}_apply(t){const e=function(s,o,u){if(s.startAt!==null)throw new Rt(dt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Rt(dt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $f(o,u)}(t._query,this._field,this._direction);return new rl(t.firestore,t.converter,function(s,o){const u=s.explicitOrderBy.concat([o]);return new Jc(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,e))}}function LP(n,t="asc"){const e=t,i=Ab("orderBy",n);return Ob._create(i,e)}class kb extends Rb{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new kb(t,e,i)}_apply(t){return new rl(t.firestore,t.converter,Hm(t._query,this._limit,this._limitType))}}function VP(n){return O6("limit",n),kb._create("limit",n,"F")}function fC(n,t,e){if(typeof(e=Kn(e))=="string"){if(e==="")throw new Rt(dt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CR(t)&&e.indexOf("/")!==-1)throw new Rt(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Ke.fromString(e));if(!Nt.isDocumentKey(i))throw new Rt(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ax(n,new Nt(i))}if(e instanceof ki)return Ax(n,e._key);throw new Rt(dt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Og(e)}.`)}function dC(n,t){if(!Array.isArray(n)||n.length===0)throw new Rt(dt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function zP(n,t){const e=function(s,o){for(const u of s)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new Rt(dt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Rt(dt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class W6{convertValue(t,e="none"){switch($a(t)){case 0:return null;case 1:return t.booleanValue;case 2:return fn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ka(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Ft(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return gu(t,(s,o)=>{i[s]=this.convertValue(o,e)}),i}convertVectorValue(t){var e,i,s;const o=(s=(i=(e=t.fields)===null||e===void 0?void 0:e[Um].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(u=>fn(u.doubleValue));return new Sb(o)}convertGeoPoint(t){return new wb(fn(t.latitude),fn(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=wg(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Yf(t));default:return null}}convertTimestamp(t){const e=Za(t);return new xn(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Ke.fromString(t);xe(KR(i),9688,{name:t});const s=new Zf(i.get(1),i.get(3)),o=new Nt(i.popFirst(5));return s.isEqual(e)||Po(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(n,t,e){let i;return i=n?n.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class BP extends DP{constructor(t,e,i,s,o,u){super(t,e,i,s,u),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new um(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(Ab("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class um extends BP{data(t={}){return super.data(t)}}class Z6{constructor(t,e,i,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new hf(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new um(this._firestore,this._userDataWriter,i.key,i,new hf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Rt(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(h=>{const d=new um(s._firestore,s._userDataWriter,h.doc.key,h.doc,new hf(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new um(s._firestore,s._userDataWriter,h.doc.key,h.doc,new hf(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,v=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),v=u.indexOf(h.doc.key)),{type:K6(h.type),doc:d,oldIndex:m,newIndex:v}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function K6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ft(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(n){n=uu(n,ki);const t=uu(n.firestore,Dg);return R6(Eb(t),n._key).then(e=>J6(t,n,e))}class UP extends W6{constructor(t){super(),this.firestore=t}convertBytes(t){return new Vc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ki(this.firestore,null,e)}}function FP(n){n=uu(n,rl);const t=uu(n.firestore,Dg),e=Eb(t),i=new UP(t);return G6(n._query),P6(e,n._query).then(s=>new Z6(t,i,n,s))}function Q6(n,t,e){n=uu(n,ki);const i=uu(n.firestore,Dg),s=Y6(n.converter,t);return X6(i,[B6(RP(i),"setDoc",n._key,s,n.converter!==null,e).toMutation(n._key,xo.none())])}function X6(n,t){return function(i,s){const o=new So;return i.asyncQueue.enqueueAndForget(async()=>_6(await I6(i),s,o)),o.promise}(Eb(n),t)}function J6(n,t,e){const i=e.docs.get(t._key),s=new UP(n);return new BP(n,s,t._key,i,new hf(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(s){$c=s})(fu),tu(new qa("firestore",(i,{instanceIdentifier:s,options:o})=>{const u=i.getProvider("app").getImmediate(),h=new Dg(new F3(i.getProvider("auth-internal")),new q3(u,i.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Rt(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zf(m.options.projectId,v)}(u,s),u);return o=Object.assign({useFetchStreams:e},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Or(mx,gx,t),Or(mx,gx,"esm2017")})();const t5={apiKey:"AIzaSyDdwctagHhj-kj_JPZLhsmrJm4korAkdu4",authDomain:"monitoringaquarium-52f11.firebaseapp.com",projectId:"monitoringaquarium-52f11",storageBucket:"monitoringaquarium-52f11.appspot.com",messagingSenderId:"426687097538",appId:"1:426687097538:web:28d11407fcecd635e3295b",measurementId:"G-J192Z92LPE",databaseURL:"https://monitoringaquarium-52f11-default-rtdb.firebaseio.com"},Db=i1(t5),cu=xV(Db),Ng=D6(Db),e5=L3(Db);async function n5(n){const t=xP(Ng,"users",n,"location"),e=NP(t,LP("timestamp","desc"),VP(30)),i=await FP(e),s=[];return i.forEach(o=>{const u=o.data();u.latitude&&u.longitude&&s.push({id:o.id,lat:u.latitude,lng:u.longitude})}),s.reverse()}async function i5(n){const t=xP(Ng,"users",n,"sensor"),e=NP(t,LP("__name__","desc"),VP(50)),i=await FP(e),s=[];return i.docs.reverse().forEach(o=>{const u=o.data();s.push({id:o.id,temp:u.temp||0,humidity:u.humidity||0})}),s}function s5(){const[n,t]=$.useState(""),[e,i]=$.useState(""),[s,o]=$.useState(""),u=qc(),h=async d=>{d.preventDefault();try{await f2(cu,n,e),u("/dashboard")}catch(m){o(m.message)}};return gt.jsxs("div",{className:"bg-gradient-to-br from-blue-100 to-blue-300 min-h-screen flex flex-col items-center justify-center px-4",children:[gt.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-blue-800 mb-6 drop-shadow-lg",children:"Web Monitoring Aquarium"}),gt.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-xl w-full max-w-md transition-all duration-500 hover:shadow-2xl",children:[gt.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-800",children:"Login"}),gt.jsxs("form",{onSubmit:h,className:"space-y-5",children:[gt.jsxs("div",{children:[gt.jsx("label",{htmlFor:"email",className:"block font-medium mb-1 text-gray-700",children:"Email"}),gt.jsx("input",{type:"email",id:"email",className:"w-full px-4 py-2 border rounded focus:ring-2 focus:ring-blue-400 focus:outline-none",required:!0,value:n,onChange:d=>t(d.target.value)})]}),gt.jsxs("div",{children:[gt.jsx("label",{htmlFor:"password",className:"block font-medium mb-1 text-gray-700",children:"Password"}),gt.jsx("input",{type:"password",id:"password",className:"w-full px-4 py-2 border rounded focus:ring-2 focus:ring-blue-400 focus:outline-none",required:!0,value:e,onChange:d=>i(d.target.value)})]}),s&&gt.jsx("p",{className:"text-sm text-red-600 text-center",children:s}),gt.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition-all duration-300",children:"Login"}),gt.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Belum punya akun?"," ",gt.jsx(og,{to:"/register",className:"text-blue-500 hover:underline",children:"Daftar"})]})]})]})]})}function r5(){const n=qc(),[t,e]=$.useState({firstName:"",lastName:"",dob:"",phone:"",address:"",age:"",email:"",password:"",confirmPassword:""}),[i,s]=$.useState(""),o=h=>{e(d=>({...d,[h.target.id]:h.target.value}))},u=async h=>{if(h.preventDefault(),t.password!==t.confirmPassword)return s("Password tidak cocok.");try{const m=(await h2(cu,t.email,t.password)).user.uid;await Q6(CP(Ng,"users",m),{...t,password:void 0,confirmPassword:void 0}),n("/dashboard")}catch(d){s("Gagal registrasi: "+d.message)}};return gt.jsx("div",{className:"bg-gray-100 flex items-center justify-center min-h-screen",children:gt.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md w-full max-w-md",children:[gt.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Register"}),gt.jsxs("form",{onSubmit:u,className:"space-y-3",children:[["firstName","lastName","dob","phone","address","age","email","password","confirmPassword"].map(h=>gt.jsx("input",{type:h.includes("password")?"password":h==="dob"?"date":h==="email"?"email":"text",id:h,placeholder:h==="firstName"?"Nama Depan":h==="lastName"?"Nama Belakang":h==="dob"?"Tanggal Lahir":h==="phone"?"Nomor HP":h==="address"?"Alamat":h==="age"?"Umur":h==="email"?"Email":h==="password"?"Password":"Konfirmasi Password",className:"w-full px-4 py-2 border rounded",required:!0,value:t[h],onChange:o},h)),gt.jsx("p",{className:"text-red-500 text-center text-sm",children:i}),gt.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700",children:"Daftar"})]}),gt.jsxs("p",{className:"text-center mt-4 text-sm",children:["Sudah punya akun? ",gt.jsx(og,{to:"/",className:"text-blue-500",children:"Login"})]})]})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Td(n){return n+.5|0}const La=(n,t,e)=>Math.max(Math.min(n,e),t);function ff(n){return La(Td(n*2.55),0,255)}function Ha(n){return La(Td(n*255),0,255)}function _o(n){return La(Td(n/2.55)/100,0,1)}function pC(n){return La(Td(n*100),0,100)}const Cs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Fv=[..."0123456789ABCDEF"],o5=n=>Fv[n&15],a5=n=>Fv[(n&240)>>4]+Fv[n&15],Np=n=>(n&240)>>4===(n&15),l5=n=>Np(n.r)&&Np(n.g)&&Np(n.b)&&Np(n.a);function u5(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Cs[n[1]]*17,g:255&Cs[n[2]]*17,b:255&Cs[n[3]]*17,a:t===5?Cs[n[4]]*17:255}:(t===7||t===9)&&(e={r:Cs[n[1]]<<4|Cs[n[2]],g:Cs[n[3]]<<4|Cs[n[4]],b:Cs[n[5]]<<4|Cs[n[6]],a:t===9?Cs[n[7]]<<4|Cs[n[8]]:255})),e}const c5=(n,t)=>n<255?t(n):"";function h5(n){var t=l5(n)?o5:a5;return n?"#"+t(n.r)+t(n.g)+t(n.b)+c5(n.a,t):void 0}const f5=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function HP(n,t,e){const i=t*Math.min(e,1-e),s=(o,u=(o+n/30)%12)=>e-i*Math.max(Math.min(u-3,9-u,1),-1);return[s(0),s(8),s(4)]}function d5(n,t,e){const i=(s,o=(s+n/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function p5(n,t,e){const i=HP(n,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function m5(n,t,e,i,s){return n===s?(t-e)/i+(t<e?6:0):t===s?(e-n)/i+2:(n-t)/i+4}function Nb(n){const e=n.r/255,i=n.g/255,s=n.b/255,o=Math.max(e,i,s),u=Math.min(e,i,s),h=(o+u)/2;let d,m,v;return o!==u&&(v=o-u,m=h>.5?v/(2-o-u):v/(o+u),d=m5(e,i,s,v,o),d=d*60+.5),[d|0,m||0,h]}function Lb(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(Ha)}function Vb(n,t,e){return Lb(HP,n,t,e)}function g5(n,t,e){return Lb(p5,n,t,e)}function _5(n,t,e){return Lb(d5,n,t,e)}function jP(n){return(n%360+360)%360}function y5(n){const t=f5.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?ff(+t[5]):Ha(+t[5]));const s=jP(+t[2]),o=+t[3]/100,u=+t[4]/100;return t[1]==="hwb"?i=g5(s,o,u):t[1]==="hsv"?i=_5(s,o,u):i=Vb(s,o,u),{r:i[0],g:i[1],b:i[2],a:e}}function v5(n,t){var e=Nb(n);e[0]=jP(e[0]+t),e=Vb(e),n.r=e[0],n.g=e[1],n.b=e[2]}function b5(n){if(!n)return;const t=Nb(n),e=t[0],i=pC(t[1]),s=pC(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${_o(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}const mC={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},gC={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function E5(){const n={},t=Object.keys(gC),e=Object.keys(mC);let i,s,o,u,h;for(i=0;i<t.length;i++){for(u=h=t[i],s=0;s<e.length;s++)o=e[s],h=h.replace(o,mC[o]);o=parseInt(gC[u],16),n[h]=[o>>16&255,o>>8&255,o&255]}return n}let Lp;function T5(n){Lp||(Lp=E5(),Lp.transparent=[0,0,0,0]);const t=Lp[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const w5=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function S5(n){const t=w5.exec(n);let e=255,i,s,o;if(t){if(t[7]!==i){const u=+t[7];e=t[8]?ff(u):La(u*255,0,255)}return i=+t[1],s=+t[3],o=+t[5],i=255&(t[2]?ff(i):La(i,0,255)),s=255&(t[4]?ff(s):La(s,0,255)),o=255&(t[6]?ff(o):La(o,0,255)),{r:i,g:s,b:o,a:e}}}function x5(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${_o(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const qy=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,uc=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function C5(n,t,e){const i=uc(_o(n.r)),s=uc(_o(n.g)),o=uc(_o(n.b));return{r:Ha(qy(i+e*(uc(_o(t.r))-i))),g:Ha(qy(s+e*(uc(_o(t.g))-s))),b:Ha(qy(o+e*(uc(_o(t.b))-o))),a:n.a+e*(t.a-n.a)}}function Vp(n,t,e){if(n){let i=Nb(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=Vb(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function qP(n,t){return n&&Object.assign(t||{},n)}function _C(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Ha(n[3]))):(t=qP(n,{r:0,g:0,b:0,a:1}),t.a=Ha(t.a)),t}function A5(n){return n.charAt(0)==="r"?S5(n):y5(n)}class Jf{constructor(t){if(t instanceof Jf)return t;const e=typeof t;let i;e==="object"?i=_C(t):e==="string"&&(i=u5(t)||T5(t)||A5(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=qP(this._rgb);return t&&(t.a=_o(t.a)),t}set rgb(t){this._rgb=_C(t)}rgbString(){return this._valid?x5(this._rgb):void 0}hexString(){return this._valid?h5(this._rgb):void 0}hslString(){return this._valid?b5(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let o;const u=e===o?.5:e,h=2*u-1,d=i.a-s.a,m=((h*d===-1?h:(h+d)/(1+h*d))+1)/2;o=1-m,i.r=255&m*i.r+o*s.r+.5,i.g=255&m*i.g+o*s.g+.5,i.b=255&m*i.b+o*s.b+.5,i.a=u*i.a+(1-u)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=C5(this._rgb,t._rgb,e)),this}clone(){return new Jf(this.rgb)}alpha(t){return this._rgb.a=Ha(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Td(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Vp(this._rgb,2,t),this}darken(t){return Vp(this._rgb,2,-t),this}saturate(t){return Vp(this._rgb,1,t),this}desaturate(t){return Vp(this._rgb,1,-t),this}rotate(t){return v5(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function po(){}const I5=(()=>{let n=0;return()=>n++})();function Ge(n){return n==null}function Bn(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Te(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ps(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Ar(n,t){return Ps(n)?n:t}function _e(n,t){return typeof n>"u"?t:n}const R5=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Ze(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Re(n,t,e,i){let s,o,u;if(Bn(n))for(o=n.length,s=0;s<o;s++)t.call(e,n[s],s);else if(Te(n))for(u=Object.keys(n),o=u.length,s=0;s<o;s++)t.call(e,n[u[s]],u[s])}function $m(n,t){let e,i,s,o;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],o=t[e],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function Qm(n){if(Bn(n))return n.map(Qm);if(Te(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let s=0;for(;s<i;++s)t[e[s]]=Qm(n[e[s]]);return t}return n}function GP(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function P5(n,t,e,i){if(!GP(n))return;const s=t[n],o=e[n];Te(s)&&Te(o)?td(s,o,i):t[n]=Qm(o)}function td(n,t,e){const i=Bn(t)?t:[t],s=i.length;if(!Te(n))return n;e=e||{};const o=e.merger||P5;let u;for(let h=0;h<s;++h){if(u=i[h],!Te(u))continue;const d=Object.keys(u);for(let m=0,v=d.length;m<v;++m)o(d[m],n,u,e)}return n}function Rf(n,t){return td(n,t,{merger:M5})}function M5(n,t,e){if(!GP(n))return;const i=t[n],s=e[n];Te(i)&&Te(s)?Rf(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=Qm(s))}const yC={"":n=>n,x:n=>n.x,y:n=>n.y};function O5(n){const t=n.split("."),e=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function k5(n){const t=O5(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Xm(n,t){return(yC[t]||(yC[t]=k5(t)))(n)}function zb(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Jm=n=>typeof n<"u",Ja=n=>typeof n=="function",vC=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function D5(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Un=Math.PI,Vr=2*Un,N5=Vr+Un,tg=Number.POSITIVE_INFINITY,L5=Un/180,nr=Un/2,Hl=Un/4,bC=Un*2/3,WP=Math.log10,zc=Math.sign;function Pf(n,t,e){return Math.abs(n-t)<e}function EC(n){const t=Math.round(n);n=Pf(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(WP(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function V5(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((s,o)=>s-o).pop(),t}function z5(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function ed(n){return!z5(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function B5(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function U5(n,t,e){let i,s,o;for(i=0,s=n.length;i<s;i++)o=n[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Ql(n){return n*(Un/180)}function F5(n){return n*(180/Un)}function TC(n){if(!Ps(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function H5(n,t){const e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*Un&&(o+=Vr),{angle:o,distance:s}}function Hv(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function j5(n,t){return(n-t+N5)%Vr-Un}function Pa(n){return(n%Vr+Vr)%Vr}function YP(n,t,e,i){const s=Pa(n),o=Pa(t),u=Pa(e),h=Pa(o-s),d=Pa(u-s),m=Pa(s-o),v=Pa(s-u);return s===o||s===u||i&&o===u||h>d&&m<v}function Is(n,t,e){return Math.max(t,Math.min(e,n))}function q5(n){return Is(n,-32768,32767)}function df(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function Bb(n,t,e){e=e||(u=>n[u]<t);let i=n.length-1,s=0,o;for(;i-s>1;)o=s+i>>1,e(o)?s=o:i=o;return{lo:s,hi:i}}const Xl=(n,t,e,i)=>Bb(n,e,i?s=>{const o=n[s][t];return o<e||o===e&&n[s+1][t]===e}:s=>n[s][t]<e),G5=(n,t,e)=>Bb(n,e,i=>n[i][t]>=e);function W5(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}const ZP=["push","pop","shift","splice","unshift"];function Y5(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),ZP.forEach(e=>{const i="_onData"+zb(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...o){const u=s.apply(this,o);return n._chartjs.listeners.forEach(h=>{typeof h[i]=="function"&&h[i](...o)}),u}})})}function wC(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(ZP.forEach(o=>{delete n[o]}),delete n._chartjs)}function Z5(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const KP=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function $P(n,t){let e=[],i=!1;return function(...s){e=s,i||(i=!0,KP.call(window,()=>{i=!1,n.apply(t,e)}))}}function K5(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const Ub=n=>n==="start"?"left":n==="end"?"right":"center",ai=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,$5=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function Q5(n,t,e){const i=t.length;let s=0,o=i;if(n._sorted){const{iScale:u,vScale:h,_parsed:d}=n,m=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,v=u.axis,{min:T,max:w,minDefined:A,maxDefined:R}=u.getUserBounds();if(A){if(s=Math.min(Xl(d,v,T).lo,e?i:Xl(t,v,u.getPixelForValue(T)).lo),m){const M=d.slice(0,s+1).reverse().findIndex(k=>!Ge(k[h.axis]));s-=Math.max(0,M)}s=Is(s,0,i-1)}if(R){let M=Math.max(Xl(d,u.axis,w,!0).hi+1,e?0:Xl(t,v,u.getPixelForValue(w),!0).hi+1);if(m){const k=d.slice(M-1).findIndex(U=>!Ge(U[h.axis]));M+=Math.max(0,k)}o=Is(M,s,i)-s}else o=i-s}return{start:s,count:o}}function X5(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=s,!0;const o=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,s),o}const zp=n=>n===0||n===1,SC=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Vr/e)),xC=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Vr/e)+1,Mf={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*nr)+1,easeOutSine:n=>Math.sin(n*nr),easeInOutSine:n=>-.5*(Math.cos(Un*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>zp(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>zp(n)?n:SC(n,.075,.3),easeOutElastic:n=>zp(n)?n:xC(n,.075,.3),easeInOutElastic(n){return zp(n)?n:n<.5?.5*SC(n*2,.1125,.45):.5+.5*xC(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Mf.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Mf.easeInBounce(n*2)*.5:Mf.easeOutBounce(n*2-1)*.5+.5};function Fb(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function CC(n){return Fb(n)?n:new Jf(n)}function Gy(n){return Fb(n)?n:new Jf(n).saturate(.5).darken(.1).hexString()}const J5=["x","y","borderWidth","radius","tension"],tF=["color","borderColor","backgroundColor"];function eF(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:tF},numbers:{type:"number",properties:J5}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function nF(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const AC=new Map;function iF(n,t){t=t||{};const e=n+JSON.stringify(t);let i=AC.get(e);return i||(i=new Intl.NumberFormat(n,t),AC.set(e,i)),i}function QP(n,t,e){return iF(t,e).format(n)}const sF={values(n){return Bn(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let s,o=n;if(e.length>1){const m=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(m<1e-4||m>1e15)&&(s="scientific"),o=rF(n,e)}const u=WP(Math.abs(o)),h=isNaN(u)?1:Math.max(Math.min(-1*Math.floor(u),20),0),d={notation:s,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(d,this.options.ticks.format),QP(n,i,d)}};function rF(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var XP={formatters:sF};function oF(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:XP.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const hu=Object.create(null),jv=Object.create(null);function Of(n,t){if(!t)return n;const e=t.split(".");for(let i=0,s=e.length;i<s;++i){const o=e[i];n=n[o]||(n[o]=Object.create(null))}return n}function Wy(n,t,e){return typeof t=="string"?td(Of(n,t),e):td(Of(n,""),t)}class aF{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>Gy(s.backgroundColor),this.hoverBorderColor=(i,s)=>Gy(s.borderColor),this.hoverColor=(i,s)=>Gy(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Wy(this,t,e)}get(t){return Of(this,t)}describe(t,e){return Wy(jv,t,e)}override(t,e){return Wy(hu,t,e)}route(t,e,i,s){const o=Of(this,t),u=Of(this,i),h="_"+e;Object.defineProperties(o,{[h]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const d=this[h],m=u[s];return Te(d)?Object.assign({},m,d):_e(d,m)},set(d){this[h]=d}}})}apply(t){t.forEach(e=>e(this))}}var dn=new aF({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[eF,nF,oF]);function lF(n){return!n||Ge(n.size)||Ge(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function IC(n,t,e,i,s){let o=t[s];return o||(o=t[s]=n.measureText(s).width,e.push(s)),o>i&&(i=o),i}function jl(n,t,e){const i=n.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function RC(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function qv(n,t,e,i){JP(n,t,e,i,null)}function JP(n,t,e,i,s){let o,u,h,d,m,v,T,w;const A=t.pointStyle,R=t.rotation,M=t.radius;let k=(R||0)*L5;if(A&&typeof A=="object"&&(o=A.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(k),n.drawImage(A,-A.width/2,-A.height/2,A.width,A.height),n.restore();return}if(!(isNaN(M)||M<=0)){switch(n.beginPath(),A){default:s?n.ellipse(e,i,s/2,M,0,0,Vr):n.arc(e,i,M,0,Vr),n.closePath();break;case"triangle":v=s?s/2:M,n.moveTo(e+Math.sin(k)*v,i-Math.cos(k)*M),k+=bC,n.lineTo(e+Math.sin(k)*v,i-Math.cos(k)*M),k+=bC,n.lineTo(e+Math.sin(k)*v,i-Math.cos(k)*M),n.closePath();break;case"rectRounded":m=M*.516,d=M-m,u=Math.cos(k+Hl)*d,T=Math.cos(k+Hl)*(s?s/2-m:d),h=Math.sin(k+Hl)*d,w=Math.sin(k+Hl)*(s?s/2-m:d),n.arc(e-T,i-h,m,k-Un,k-nr),n.arc(e+w,i-u,m,k-nr,k),n.arc(e+T,i+h,m,k,k+nr),n.arc(e-w,i+u,m,k+nr,k+Un),n.closePath();break;case"rect":if(!R){d=Math.SQRT1_2*M,v=s?s/2:d,n.rect(e-v,i-d,2*v,2*d);break}k+=Hl;case"rectRot":T=Math.cos(k)*(s?s/2:M),u=Math.cos(k)*M,h=Math.sin(k)*M,w=Math.sin(k)*(s?s/2:M),n.moveTo(e-T,i-h),n.lineTo(e+w,i-u),n.lineTo(e+T,i+h),n.lineTo(e-w,i+u),n.closePath();break;case"crossRot":k+=Hl;case"cross":T=Math.cos(k)*(s?s/2:M),u=Math.cos(k)*M,h=Math.sin(k)*M,w=Math.sin(k)*(s?s/2:M),n.moveTo(e-T,i-h),n.lineTo(e+T,i+h),n.moveTo(e+w,i-u),n.lineTo(e-w,i+u);break;case"star":T=Math.cos(k)*(s?s/2:M),u=Math.cos(k)*M,h=Math.sin(k)*M,w=Math.sin(k)*(s?s/2:M),n.moveTo(e-T,i-h),n.lineTo(e+T,i+h),n.moveTo(e+w,i-u),n.lineTo(e-w,i+u),k+=Hl,T=Math.cos(k)*(s?s/2:M),u=Math.cos(k)*M,h=Math.sin(k)*M,w=Math.sin(k)*(s?s/2:M),n.moveTo(e-T,i-h),n.lineTo(e+T,i+h),n.moveTo(e+w,i-u),n.lineTo(e-w,i+u);break;case"line":u=s?s/2:Math.cos(k)*M,h=Math.sin(k)*M,n.moveTo(e-u,i-h),n.lineTo(e+u,i+h);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(k)*(s?s/2:M),i+Math.sin(k)*M);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function nd(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Hb(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function jb(n){n.restore()}function uF(n,t,e,i,s){if(!t)return n.lineTo(e.x,e.y);if(s==="middle"){const o=(t.x+e.x)/2;n.lineTo(o,t.y),n.lineTo(o,e.y)}else s==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function cF(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function hF(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Ge(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function fF(n,t,e,i,s){if(s.strikethrough||s.underline){const o=n.measureText(i),u=t-o.actualBoundingBoxLeft,h=t+o.actualBoundingBoxRight,d=e-o.actualBoundingBoxAscent,m=e+o.actualBoundingBoxDescent,v=s.strikethrough?(d+m)/2:m;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(u,v),n.lineTo(h,v),n.stroke()}}function dF(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function id(n,t,e,i,s,o={}){const u=Bn(t)?t:[t],h=o.strokeWidth>0&&o.strokeColor!=="";let d,m;for(n.save(),n.font=s.string,hF(n,o),d=0;d<u.length;++d)m=u[d],o.backdrop&&dF(n,o.backdrop),h&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),Ge(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(m,e,i,o.maxWidth)),n.fillText(m,e,i,o.maxWidth),fF(n,e,i,m,o),i+=Number(s.lineHeight);n.restore()}function Gv(n,t){const{x:e,y:i,w:s,h:o,radius:u}=t;n.arc(e+u.topLeft,i+u.topLeft,u.topLeft,1.5*Un,Un,!0),n.lineTo(e,i+o-u.bottomLeft),n.arc(e+u.bottomLeft,i+o-u.bottomLeft,u.bottomLeft,Un,nr,!0),n.lineTo(e+s-u.bottomRight,i+o),n.arc(e+s-u.bottomRight,i+o-u.bottomRight,u.bottomRight,nr,0,!0),n.lineTo(e+s,i+u.topRight),n.arc(e+s-u.topRight,i+u.topRight,u.topRight,0,-nr,!0),n.lineTo(e+u.topLeft,i)}const pF=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,mF=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function gF(n,t){const e=(""+n).match(pF);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const _F=n=>+n||0;function tM(n,t){const e={},i=Te(t),s=i?Object.keys(t):t,o=Te(n)?i?u=>_e(n[u],n[t[u]]):u=>n[u]:()=>n;for(const u of s)e[u]=_F(o(u));return e}function yF(n){return tM(n,{top:"y",right:"x",bottom:"y",left:"x"})}function kf(n){return tM(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Ms(n){const t=yF(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function fi(n,t){n=n||{},t=t||dn.font;let e=_e(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=_e(n.style,t.style);i&&!(""+i).match(mF)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:_e(n.family,t.family),lineHeight:gF(_e(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:_e(n.weight,t.weight),string:""};return s.string=lF(s),s}function Bp(n,t,e,i){let s,o,u;for(s=0,o=n.length;s<o;++s)if(u=n[s],u!==void 0&&u!==void 0)return u}function vF(n,t,e){const{min:i,max:s}=n,o=R5(t,(s-i)/2),u=(h,d)=>e&&h===0?0:h+d;return{min:u(i,-Math.abs(o)),max:u(s,o)}}function bu(n,t){return Object.assign(Object.create(n),t)}function qb(n,t=[""],e,i,s=()=>n[0]){const o=e||n;typeof i>"u"&&(i=sM("_fallback",n));const u={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:s,override:h=>qb([h,...n],t,o,i)};return new Proxy(u,{deleteProperty(h,d){return delete h[d],delete h._keys,delete n[0][d],!0},get(h,d){return nM(h,d,()=>AF(d,t,n,h))},getOwnPropertyDescriptor(h,d){return Reflect.getOwnPropertyDescriptor(h._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(h,d){return MC(h).includes(d)},ownKeys(h){return MC(h)},set(h,d,m){const v=h._storage||(h._storage=s());return h[d]=v[d]=m,delete h._keys,!0}})}function Bc(n,t,e,i){const s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:eM(n,i),setContext:o=>Bc(n,o,e,i),override:o=>Bc(n.override(o),t,e,i)};return new Proxy(s,{deleteProperty(o,u){return delete o[u],delete n[u],!0},get(o,u,h){return nM(o,u,()=>EF(o,u,h))},getOwnPropertyDescriptor(o,u){return o._descriptors.allKeys?Reflect.has(n,u)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,u)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,u){return Reflect.has(n,u)},ownKeys(){return Reflect.ownKeys(n)},set(o,u,h){return n[u]=h,delete o[u],!0}})}function eM(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:Ja(e)?e:()=>e,isIndexable:Ja(i)?i:()=>i}}const bF=(n,t)=>n?n+zb(t):t,Gb=(n,t)=>Te(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function nM(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function EF(n,t,e){const{_proxy:i,_context:s,_subProxy:o,_descriptors:u}=n;let h=i[t];return Ja(h)&&u.isScriptable(t)&&(h=TF(t,h,n,e)),Bn(h)&&h.length&&(h=wF(t,h,n,u.isIndexable)),Gb(t,h)&&(h=Bc(h,s,o&&o[t],u)),h}function TF(n,t,e,i){const{_proxy:s,_context:o,_subProxy:u,_stack:h}=e;if(h.has(n))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+n);h.add(n);let d=t(o,u||i);return h.delete(n),Gb(n,d)&&(d=Wb(s._scopes,s,n,d)),d}function wF(n,t,e,i){const{_proxy:s,_context:o,_subProxy:u,_descriptors:h}=e;if(typeof o.index<"u"&&i(n))return t[o.index%t.length];if(Te(t[0])){const d=t,m=s._scopes.filter(v=>v!==d);t=[];for(const v of d){const T=Wb(m,s,n,v);t.push(Bc(T,o,u&&u[n],h))}}return t}function iM(n,t,e){return Ja(n)?n(t,e):n}const SF=(n,t)=>n===!0?t:typeof n=="string"?Xm(t,n):void 0;function xF(n,t,e,i,s){for(const o of t){const u=SF(e,o);if(u){n.add(u);const h=iM(u._fallback,e,s);if(typeof h<"u"&&h!==e&&h!==i)return h}else if(u===!1&&typeof i<"u"&&e!==i)return null}return!1}function Wb(n,t,e,i){const s=t._rootScopes,o=iM(t._fallback,e,i),u=[...n,...s],h=new Set;h.add(i);let d=PC(h,u,e,o||e,i);return d===null||typeof o<"u"&&o!==e&&(d=PC(h,u,o,d,i),d===null)?!1:qb(Array.from(h),[""],s,o,()=>CF(t,e,i))}function PC(n,t,e,i,s){for(;e;)e=xF(n,t,e,i,s);return e}function CF(n,t,e){const i=n._getTarget();t in i||(i[t]={});const s=i[t];return Bn(s)&&Te(e)?e:s||{}}function AF(n,t,e,i){let s;for(const o of t)if(s=sM(bF(o,n),e),typeof s<"u")return Gb(n,s)?Wb(e,i,n,s):s}function sM(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function MC(n){let t=n._keys;return t||(t=n._keys=IF(n._scopes)),t}function IF(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}const RF=Number.EPSILON||1e-14,Uc=(n,t)=>t<n.length&&!n[t].skip&&n[t],rM=n=>n==="x"?"y":"x";function PF(n,t,e,i){const s=n.skip?t:n,o=t,u=e.skip?t:e,h=Hv(o,s),d=Hv(u,o);let m=h/(h+d),v=d/(h+d);m=isNaN(m)?0:m,v=isNaN(v)?0:v;const T=i*m,w=i*v;return{previous:{x:o.x-T*(u.x-s.x),y:o.y-T*(u.y-s.y)},next:{x:o.x+w*(u.x-s.x),y:o.y+w*(u.y-s.y)}}}function MF(n,t,e){const i=n.length;let s,o,u,h,d,m=Uc(n,0);for(let v=0;v<i-1;++v)if(d=m,m=Uc(n,v+1),!(!d||!m)){if(Pf(t[v],0,RF)){e[v]=e[v+1]=0;continue}s=e[v]/t[v],o=e[v+1]/t[v],h=Math.pow(s,2)+Math.pow(o,2),!(h<=9)&&(u=3/Math.sqrt(h),e[v]=s*u*t[v],e[v+1]=o*u*t[v])}}function OF(n,t,e="x"){const i=rM(e),s=n.length;let o,u,h,d=Uc(n,0);for(let m=0;m<s;++m){if(u=h,h=d,d=Uc(n,m+1),!h)continue;const v=h[e],T=h[i];u&&(o=(v-u[e])/3,h[`cp1${e}`]=v-o,h[`cp1${i}`]=T-o*t[m]),d&&(o=(d[e]-v)/3,h[`cp2${e}`]=v+o,h[`cp2${i}`]=T+o*t[m])}}function kF(n,t="x"){const e=rM(t),i=n.length,s=Array(i).fill(0),o=Array(i);let u,h,d,m=Uc(n,0);for(u=0;u<i;++u)if(h=d,d=m,m=Uc(n,u+1),!!d){if(m){const v=m[t]-d[t];s[u]=v!==0?(m[e]-d[e])/v:0}o[u]=h?m?zc(s[u-1])!==zc(s[u])?0:(s[u-1]+s[u])/2:s[u-1]:s[u]}MF(n,s,o),OF(n,o,t)}function Up(n,t,e){return Math.max(Math.min(n,e),t)}function DF(n,t){let e,i,s,o,u,h=nd(n[0],t);for(e=0,i=n.length;e<i;++e)u=o,o=h,h=e<i-1&&nd(n[e+1],t),o&&(s=n[e],u&&(s.cp1x=Up(s.cp1x,t.left,t.right),s.cp1y=Up(s.cp1y,t.top,t.bottom)),h&&(s.cp2x=Up(s.cp2x,t.left,t.right),s.cp2y=Up(s.cp2y,t.top,t.bottom)))}function NF(n,t,e,i,s){let o,u,h,d;if(t.spanGaps&&(n=n.filter(m=>!m.skip)),t.cubicInterpolationMode==="monotone")kF(n,s);else{let m=i?n[n.length-1]:n[0];for(o=0,u=n.length;o<u;++o)h=n[o],d=PF(m,h,n[Math.min(o+1,u-(i?0:1))%u],t.tension),h.cp1x=d.previous.x,h.cp1y=d.previous.y,h.cp2x=d.next.x,h.cp2y=d.next.y,m=h}t.capBezierPoints&&DF(n,e)}function Yb(){return typeof window<"u"&&typeof document<"u"}function Zb(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function eg(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const Lg=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function LF(n,t){return Lg(n).getPropertyValue(t)}const VF=["top","right","bottom","left"];function Jl(n,t,e){const i={};e=e?"-"+e:"";for(let s=0;s<4;s++){const o=VF[s];i[o]=parseFloat(n[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const zF=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function BF(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:s,offsetY:o}=i;let u=!1,h,d;if(zF(s,o,n.target))h=s,d=o;else{const m=t.getBoundingClientRect();h=i.clientX-m.left,d=i.clientY-m.top,u=!0}return{x:h,y:d,box:u}}function Yl(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,s=Lg(e),o=s.boxSizing==="border-box",u=Jl(s,"padding"),h=Jl(s,"border","width"),{x:d,y:m,box:v}=BF(n,e),T=u.left+(v&&h.left),w=u.top+(v&&h.top);let{width:A,height:R}=t;return o&&(A-=u.width+h.width,R-=u.height+h.height),{x:Math.round((d-T)/A*e.width/i),y:Math.round((m-w)/R*e.height/i)}}function UF(n,t,e){let i,s;if(t===void 0||e===void 0){const o=n&&Zb(n);if(!o)t=n.clientWidth,e=n.clientHeight;else{const u=o.getBoundingClientRect(),h=Lg(o),d=Jl(h,"border","width"),m=Jl(h,"padding");t=u.width-m.width-d.width,e=u.height-m.height-d.height,i=eg(h.maxWidth,o,"clientWidth"),s=eg(h.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||tg,maxHeight:s||tg}}const Fp=n=>Math.round(n*10)/10;function FF(n,t,e,i){const s=Lg(n),o=Jl(s,"margin"),u=eg(s.maxWidth,n,"clientWidth")||tg,h=eg(s.maxHeight,n,"clientHeight")||tg,d=UF(n,t,e);let{width:m,height:v}=d;if(s.boxSizing==="content-box"){const w=Jl(s,"border","width"),A=Jl(s,"padding");m-=A.width+w.width,v-=A.height+w.height}return m=Math.max(0,m-o.width),v=Math.max(0,i?m/i:v-o.height),m=Fp(Math.min(m,u,d.maxWidth)),v=Fp(Math.min(v,h,d.maxHeight)),m&&!v&&(v=Fp(m/2)),(t!==void 0||e!==void 0)&&i&&d.height&&v>d.height&&(v=d.height,m=Fp(Math.floor(v*i))),{width:m,height:v}}function OC(n,t,e){const i=t||1,s=Math.floor(n.height*i),o=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const u=n.canvas;return u.style&&(e||!u.style.height&&!u.style.width)&&(u.style.height=`${n.height}px`,u.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||u.height!==s||u.width!==o?(n.currentDevicePixelRatio=i,u.height=s,u.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const HF=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};Yb()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function kC(n,t){const e=LF(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Zl(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function jF(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function qF(n,t,e,i){const s={x:n.cp2x,y:n.cp2y},o={x:t.cp1x,y:t.cp1y},u=Zl(n,s,e),h=Zl(s,o,e),d=Zl(o,t,e),m=Zl(u,h,e),v=Zl(h,d,e);return Zl(m,v,e)}const GF=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},WF=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function xc(n,t,e){return n?GF(t,e):WF()}function oM(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function aM(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function lM(n){return n==="angle"?{between:YP,compare:j5,normalize:Pa}:{between:df,compare:(t,e)=>t-e,normalize:t=>t}}function DC({start:n,end:t,count:e,loop:i,style:s}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:s}}function YF(n,t,e){const{property:i,start:s,end:o}=e,{between:u,normalize:h}=lM(i),d=t.length;let{start:m,end:v,loop:T}=n,w,A;if(T){for(m+=d,v+=d,w=0,A=d;w<A&&u(h(t[m%d][i]),s,o);++w)m--,v--;m%=d,v%=d}return v<m&&(v+=d),{start:m,end:v,loop:T,style:n.style}}function ZF(n,t,e){if(!e)return[n];const{property:i,start:s,end:o}=e,u=t.length,{compare:h,between:d,normalize:m}=lM(i),{start:v,end:T,loop:w,style:A}=YF(n,t,e),R=[];let M=!1,k=null,U,Z,J;const ut=()=>d(s,J,U)&&h(s,J)!==0,rt=()=>h(o,U)===0||d(o,J,U),_t=()=>M||ut(),z=()=>!M||rt();for(let N=v,V=v;N<=T;++N)Z=t[N%u],!Z.skip&&(U=m(Z[i]),U!==J&&(M=d(U,s,o),k===null&&_t()&&(k=h(U,s)===0?N:V),k!==null&&z()&&(R.push(DC({start:k,end:N,loop:w,count:u,style:A})),k=null),V=N,J=U));return k!==null&&R.push(DC({start:k,end:T,loop:w,count:u,style:A})),R}function KF(n,t){const e=[],i=n.segments;for(let s=0;s<i.length;s++){const o=ZF(i[s],n.points,t);o.length&&e.push(...o)}return e}function $F(n,t,e,i){let s=0,o=t-1;if(e&&!i)for(;s<t&&!n[s].skip;)s++;for(;s<t&&n[s].skip;)s++;for(s%=t,e&&(o+=s);o>s&&n[o%t].skip;)o--;return o%=t,{start:s,end:o}}function QF(n,t,e,i){const s=n.length,o=[];let u=t,h=n[t],d;for(d=t+1;d<=e;++d){const m=n[d%s];m.skip||m.stop?h.skip||(i=!1,o.push({start:t%s,end:(d-1)%s,loop:i}),t=u=m.stop?d:null):(u=d,h.skip&&(t=d)),h=m}return u!==null&&o.push({start:t%s,end:u%s,loop:i}),o}function XF(n,t){const e=n.points,i=n.options.spanGaps,s=e.length;if(!s)return[];const o=!!n._loop,{start:u,end:h}=$F(e,s,o,i);if(i===!0)return NC(n,[{start:u,end:h,loop:o}],e,t);const d=h<u?h+s:h,m=!!n._fullLoop&&u===0&&h===s-1;return NC(n,QF(e,u,d,m),e,t)}function NC(n,t,e,i){return!i||!i.setContext||!e?t:JF(n,t,e,i)}function JF(n,t,e,i){const s=n._chart.getContext(),o=LC(n.options),{_datasetIndex:u,options:{spanGaps:h}}=n,d=e.length,m=[];let v=o,T=t[0].start,w=T;function A(R,M,k,U){const Z=h?-1:1;if(R!==M){for(R+=d;e[R%d].skip;)R-=Z;for(;e[M%d].skip;)M+=Z;R%d!==M%d&&(m.push({start:R%d,end:M%d,loop:k,style:U}),v=U,T=M%d)}}for(const R of t){T=h?T:R.start;let M=e[T%d],k;for(w=T+1;w<=R.end;w++){const U=e[w%d];k=LC(i.setContext(bu(s,{type:"segment",p0:M,p1:U,p0DataIndex:(w-1)%d,p1DataIndex:w%d,datasetIndex:u}))),t9(k,v)&&A(T,w-1,R.loop,v),M=U,v=k}T<w-1&&A(T,w-1,R.loop,v)}return m}function LC(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function t9(n,t){if(!t)return!1;const e=[],i=function(s,o){return Fb(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function Hp(n,t,e){return n.options.clip?n[e]:t[e]}function e9(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Hp(e,t,"left"),right:Hp(e,t,"right"),top:Hp(i,t,"top"),bottom:Hp(i,t,"bottom")}:t}function n9(n,t){const e=t._clip;if(e.disabled)return!1;const i=e9(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class i9{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const o=e.listeners[s],u=e.duration;o.forEach(h=>h({chart:t,initial:e.initial,numSteps:u,currentStep:Math.min(i-e.start,u)}))}_refresh(){this._request||(this._running=!0,this._request=KP.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const o=i.items;let u=o.length-1,h=!1,d;for(;u>=0;--u)d=o[u],d._active?(d._total>i.duration&&(i.duration=d._total),d.tick(t),h=!0):(o[u]=o[o.length-1],o.pop());h&&(s.draw(),this._notify(s,i,t,"progress")),o.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var mo=new i9;const VC="transparent",s9={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=CC(n||VC),s=i.valid&&CC(t||VC);return s&&s.valid?s.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class r9{constructor(t,e,i,s){const o=e[i];s=Bp([t.to,s,o,t.from]);const u=Bp([t.from,o,s]);this._active=!0,this._fn=t.fn||s9[t.type||typeof u],this._easing=Mf[t.easing]||Mf.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=u,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],o=i-this._start,u=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(u,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=Bp([t.to,e,s,t.from]),this._from=Bp([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,o=this._from,u=this._loop,h=this._to;let d;if(this._active=o!==h&&(u||e<i),!this._active){this._target[s]=h,this._notify(!0);return}if(e<0){this._target[s]=o;return}d=e/i%2,d=u&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[s]=this._fn(o,h,d)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}}class uM{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Te(t))return;const e=Object.keys(dn.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const o=t[s];if(!Te(o))return;const u={};for(const h of e)u[h]=o[h];(Bn(o.properties)&&o.properties||[s]).forEach(h=>{(h===s||!i.has(h))&&i.set(h,u)})})}_animateOptions(t,e){const i=e.options,s=a9(t,i);if(!s)return[];const o=this._createAnimations(s,i);return i.$shared&&o9(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,s=[],o=t.$animations||(t.$animations={}),u=Object.keys(e),h=Date.now();let d;for(d=u.length-1;d>=0;--d){const m=u[d];if(m.charAt(0)==="$")continue;if(m==="options"){s.push(...this._animateOptions(t,e));continue}const v=e[m];let T=o[m];const w=i.get(m);if(T)if(w&&T.active()){T.update(w,v,h);continue}else T.cancel();if(!w||!w.duration){t[m]=v;continue}o[m]=T=new r9(w,t,m,v),s.push(T)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return mo.add(this._chart,i),!0}}function o9(n,t){const e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const o=n[i[s]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function a9(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function zC(n,t){const e=n&&n.options||{},i=e.reverse,s=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:s,end:i?s:o}}function l9(n,t,e){if(e===!1)return!1;const i=zC(n,e),s=zC(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function u9(n){let t,e,i,s;return Te(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:n===!1}}function cM(n,t){const e=[],i=n._getSortedDatasetMetas(t);let s,o;for(s=0,o=i.length;s<o;++s)e.push(i[s].index);return e}function BC(n,t,e,i={}){const s=n.keys,o=i.mode==="single";let u,h,d,m;if(t===null)return;let v=!1;for(u=0,h=s.length;u<h;++u){if(d=+s[u],d===e){if(v=!0,i.all)continue;break}m=n.values[d],Ps(m)&&(o||t===0||zc(t)===zc(m))&&(t+=m)}return!v&&!i.all?0:t}function c9(n,t){const{iScale:e,vScale:i}=t,s=e.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",u=Object.keys(n),h=new Array(u.length);let d,m,v;for(d=0,m=u.length;d<m;++d)v=u[d],h[d]={[s]:v,[o]:n[v]};return h}function Yy(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function h9(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function f9(n){const{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function d9(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function UC(n,t,e,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const o=n[s.index];if(e&&o>0||!e&&o<0)return s.index}return null}function FC(n,t){const{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:o,vScale:u,index:h}=i,d=o.axis,m=u.axis,v=h9(o,u,i),T=t.length;let w;for(let A=0;A<T;++A){const R=t[A],{[d]:M,[m]:k}=R,U=R._stacks||(R._stacks={});w=U[m]=d9(s,v,M),w[h]=k,w._top=UC(w,u,!0,i.type),w._bottom=UC(w,u,!1,i.type);const Z=w._visualValues||(w._visualValues={});Z[h]=k}}function Zy(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function p9(n,t){return bu(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function m9(n,t,e){return bu(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Jh(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const s of t){const o=s._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const Ky=n=>n==="reset"||n==="none",HC=(n,t)=>t?n:Object.assign({},n),g9=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:cM(e,!0),values:null};class Df{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Yy(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Jh(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(T,w,A,R)=>T==="x"?w:T==="r"?R:A,o=e.xAxisID=_e(i.xAxisID,Zy(t,"x")),u=e.yAxisID=_e(i.yAxisID,Zy(t,"y")),h=e.rAxisID=_e(i.rAxisID,Zy(t,"r")),d=e.indexAxis,m=e.iAxisID=s(d,o,u,h),v=e.vAxisID=s(d,u,o,h);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(u),e.rScale=this.getScaleForId(h),e.iScale=this.getScaleForId(m),e.vScale=this.getScaleForId(v)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&wC(this._data,this),t._stacked&&Jh(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Te(e)){const s=this._cachedMeta;this._data=c9(e,s)}else if(i!==e){if(i){wC(i,this);const s=this._cachedMeta;Jh(s),s._parsed=[]}e&&Object.isExtensible(e)&&Y5(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const o=e._stacked;e._stacked=Yy(e.vScale,e),e.stack!==i.stack&&(s=!0,Jh(e),e.stack=i.stack),this._resyncElements(t),(s||o!==e._stacked)&&(FC(this,e._parsed),e._stacked=Yy(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:o,_stacked:u}=i,h=o.axis;let d=t===0&&e===s.length?!0:i._sorted,m=t>0&&i._parsed[t-1],v,T,w;if(this._parsing===!1)i._parsed=s,i._sorted=!0,w=s;else{Bn(s[t])?w=this.parseArrayData(i,s,t,e):Te(s[t])?w=this.parseObjectData(i,s,t,e):w=this.parsePrimitiveData(i,s,t,e);const A=()=>T[h]===null||m&&T[h]<m[h];for(v=0;v<e;++v)i._parsed[v+t]=T=w[v],d&&(A()&&(d=!1),m=T);i._sorted=d}u&&FC(this,w)}parsePrimitiveData(t,e,i,s){const{iScale:o,vScale:u}=t,h=o.axis,d=u.axis,m=o.getLabels(),v=o===u,T=new Array(s);let w,A,R;for(w=0,A=s;w<A;++w)R=w+i,T[w]={[h]:v||o.parse(m[R],R),[d]:u.parse(e[R],R)};return T}parseArrayData(t,e,i,s){const{xScale:o,yScale:u}=t,h=new Array(s);let d,m,v,T;for(d=0,m=s;d<m;++d)v=d+i,T=e[v],h[d]={x:o.parse(T[0],v),y:u.parse(T[1],v)};return h}parseObjectData(t,e,i,s){const{xScale:o,yScale:u}=t,{xAxisKey:h="x",yAxisKey:d="y"}=this._parsing,m=new Array(s);let v,T,w,A;for(v=0,T=s;v<T;++v)w=v+i,A=e[w],m[v]={x:o.parse(Xm(A,h),w),y:u.parse(Xm(A,d),w)};return m}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,o=this._cachedMeta,u=e[t.axis],h={keys:cM(s,!0),values:e._stacks[t.axis]._visualValues};return BC(h,u,o.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const o=i[e.axis];let u=o===null?NaN:o;const h=s&&i._stacks[e.axis];s&&h&&(s.values=h,u=BC(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,u),t.max=Math.max(t.max,u)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,o=i._sorted&&t===i.iScale,u=s.length,h=this._getOtherScale(t),d=g9(e,i,this.chart),m={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:v,max:T}=f9(h);let w,A;function R(){A=s[w];const M=A[h.axis];return!Ps(A[t.axis])||v>M||T<M}for(w=0;w<u&&!(!R()&&(this.updateRangeFromParsed(m,t,A,d),o));++w);if(o){for(w=u-1;w>=0;--w)if(!R()){this.updateRangeFromParsed(m,t,A,d);break}}return m}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,o,u;for(s=0,o=e.length;s<o;++s)u=e[s][t.axis],Ps(u)&&i.push(u);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=u9(_e(this.options.clip,l9(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],o=e.chartArea,u=[],h=this._drawStart||0,d=this._drawCount||s.length-h,m=this.options.drawActiveElementsOnTop;let v;for(i.dataset&&i.dataset.draw(t,o,h,d),v=h;v<h+d;++v){const T=s[v];T.hidden||(T.active&&m?u.push(T):T.draw(t,o))}for(v=0;v<u.length;++v)u[v].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const u=this._cachedMeta.data[t];o=u.$context||(u.$context=m9(this.getContext(),t,u)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=p9(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s=e==="active",o=this._cachedDataOpts,u=t+"-"+e,h=o[u],d=this.enableOptionSharing&&Jm(i);if(h)return HC(h,d);const m=this.chart.config,v=m.datasetElementScopeKeys(this._type,t),T=s?[`${t}Hover`,"hover",t,""]:[t,""],w=m.getOptionScopes(this.getDataset(),v),A=Object.keys(dn.elements[t]),R=()=>this.getContext(i,s,e),M=m.resolveNamedOptions(w,A,R,T);return M.$shared&&(M.$shared=d,o[u]=Object.freeze(HC(M,d))),M}_resolveAnimations(t,e,i){const s=this.chart,o=this._cachedDataOpts,u=`animation-${e}`,h=o[u];if(h)return h;let d;if(s.options.animation!==!1){const v=this.chart.config,T=v.datasetAnimationScopeKeys(this._type,e),w=v.getOptionScopes(this.getDataset(),T);d=v.createResolver(w,this.getContext(t,i,e))}const m=new uM(s,d&&d.animations);return d&&d._cacheable&&(o[u]=Object.freeze(m)),m}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Ky(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,o=this.getSharedOptions(i),u=this.includeOptions(e,o)||o!==s;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:u}}updateElement(t,e,i,s){Ky(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!Ky(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const o=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[h,d,m]of this._syncList)this[h](d,m);this._syncList=[];const s=i.length,o=e.length,u=Math.min(o,s);u&&this.parse(0,u),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,e,i=!0){const s=this._cachedMeta,o=s.data,u=t+e;let h;const d=m=>{for(m.length+=e,h=m.length-1;h>=u;h--)m[h]=m[h-e]};for(d(o),h=t;h<u;++h)o[h]=new this.dataElementType;this._parsing&&d(s._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&Jh(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Qt(Df,"defaults",{}),Qt(Df,"datasetElementType",null),Qt(Df,"dataElementType",null);class cm extends Df{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:s=[],_dataset:o}=e,u=this.chart._animationsDisabled;let{start:h,count:d}=Q5(e,s,u);this._drawStart=h,this._drawCount=d,X5(e)&&(h=0,d=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=s;const m=this.resolveDatasetElementOptions(t);this.options.showLine||(m.borderWidth=0),m.segment=this.options.segment,this.updateElement(i,void 0,{animated:!u,options:m},t),this.updateElements(s,h,d,t)}updateElements(t,e,i,s){const o=s==="reset",{iScale:u,vScale:h,_stacked:d,_dataset:m}=this._cachedMeta,{sharedOptions:v,includeOptions:T}=this._getSharedOptions(e,s),w=u.axis,A=h.axis,{spanGaps:R,segment:M}=this.options,k=ed(R)?R:Number.POSITIVE_INFINITY,U=this.chart._animationsDisabled||o||s==="none",Z=e+i,J=t.length;let ut=e>0&&this.getParsed(e-1);for(let rt=0;rt<J;++rt){const _t=t[rt],z=U?_t:{};if(rt<e||rt>=Z){z.skip=!0;continue}const N=this.getParsed(rt),V=Ge(N[A]),q=z[w]=u.getPixelForValue(N[w],rt),H=z[A]=o||V?h.getBasePixel():h.getPixelForValue(d?this.applyStack(h,N,d):N[A],rt);z.skip=isNaN(q)||isNaN(H)||V,z.stop=rt>0&&Math.abs(N[w]-ut[w])>k,M&&(z.parsed=N,z.raw=m.data[rt]),T&&(z.options=v||this.resolveDataElementOptions(rt,_t.active?"active":s)),U||this.updateElement(_t,rt,z,s),ut=N}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const o=s[0].size(this.resolveDataElementOptions(0)),u=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,u)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Qt(cm,"id","line"),Qt(cm,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Qt(cm,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function ql(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Kb{constructor(t){Qt(this,"options");this.options=t||{}}static override(t){Object.assign(Kb.prototype,t)}init(){}formats(){return ql()}parse(){return ql()}format(){return ql()}add(){return ql()}diff(){return ql()}startOf(){return ql()}endOf(){return ql()}}var _9={_date:Kb};function y9(n,t,e,i){const{controller:s,data:o,_sorted:u}=n,h=s._cachedMeta.iScale,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(h&&t===h.axis&&t!=="r"&&u&&o.length){const m=h._reversePixels?G5:Xl;if(i){if(s._sharedOptions){const v=o[0],T=typeof v.getRange=="function"&&v.getRange(t);if(T){const w=m(o,t,e-T),A=m(o,t,e+T);return{lo:w.lo,hi:A.hi}}}}else{const v=m(o,t,e);if(d){const{vScale:T}=s._cachedMeta,{_parsed:w}=n,A=w.slice(0,v.lo+1).reverse().findIndex(M=>!Ge(M[T.axis]));v.lo-=Math.max(0,A);const R=w.slice(v.hi).findIndex(M=>!Ge(M[T.axis]));v.hi+=Math.max(0,R)}return v}}return{lo:0,hi:o.length-1}}function Vg(n,t,e,i,s){const o=n.getSortedVisibleDatasetMetas(),u=e[t];for(let h=0,d=o.length;h<d;++h){const{index:m,data:v}=o[h],{lo:T,hi:w}=y9(o[h],t,u,s);for(let A=T;A<=w;++A){const R=v[A];R.skip||i(R,m,A)}}}function v9(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,s){const o=t?Math.abs(i.x-s.x):0,u=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(u,2))}}function $y(n,t,e,i,s){const o=[];return!s&&!n.isPointInArea(t)||Vg(n,e,t,function(h,d,m){!s&&!nd(h,n.chartArea,0)||h.inRange(t.x,t.y,i)&&o.push({element:h,datasetIndex:d,index:m})},!0),o}function b9(n,t,e,i){let s=[];function o(u,h,d){const{startAngle:m,endAngle:v}=u.getProps(["startAngle","endAngle"],i),{angle:T}=H5(u,{x:t.x,y:t.y});YP(T,m,v)&&s.push({element:u,datasetIndex:h,index:d})}return Vg(n,e,t,o),s}function E9(n,t,e,i,s,o){let u=[];const h=v9(e);let d=Number.POSITIVE_INFINITY;function m(v,T,w){const A=v.inRange(t.x,t.y,s);if(i&&!A)return;const R=v.getCenterPoint(s);if(!(!!o||n.isPointInArea(R))&&!A)return;const k=h(t,R);k<d?(u=[{element:v,datasetIndex:T,index:w}],d=k):k===d&&u.push({element:v,datasetIndex:T,index:w})}return Vg(n,e,t,m),u}function Qy(n,t,e,i,s,o){return!o&&!n.isPointInArea(t)?[]:e==="r"&&!i?b9(n,t,e,s):E9(n,t,e,i,s,o)}function jC(n,t,e,i,s){const o=[],u=e==="x"?"inXRange":"inYRange";let h=!1;return Vg(n,e,t,(d,m,v)=>{d[u]&&d[u](t[e],s)&&(o.push({element:d,datasetIndex:m,index:v}),h=h||d.inRange(t.x,t.y,s))}),i&&!h?[]:o}var T9={modes:{index(n,t,e,i){const s=Yl(t,n),o=e.axis||"x",u=e.includeInvisible||!1,h=e.intersect?$y(n,s,o,i,u):Qy(n,s,o,!1,i,u),d=[];return h.length?(n.getSortedVisibleDatasetMetas().forEach(m=>{const v=h[0].index,T=m.data[v];T&&!T.skip&&d.push({element:T,datasetIndex:m.index,index:v})}),d):[]},dataset(n,t,e,i){const s=Yl(t,n),o=e.axis||"xy",u=e.includeInvisible||!1;let h=e.intersect?$y(n,s,o,i,u):Qy(n,s,o,!1,i,u);if(h.length>0){const d=h[0].datasetIndex,m=n.getDatasetMeta(d).data;h=[];for(let v=0;v<m.length;++v)h.push({element:m[v],datasetIndex:d,index:v})}return h},point(n,t,e,i){const s=Yl(t,n),o=e.axis||"xy",u=e.includeInvisible||!1;return $y(n,s,o,i,u)},nearest(n,t,e,i){const s=Yl(t,n),o=e.axis||"xy",u=e.includeInvisible||!1;return Qy(n,s,o,e.intersect,i,u)},x(n,t,e,i){const s=Yl(t,n);return jC(n,s,"x",e.intersect,i)},y(n,t,e,i){const s=Yl(t,n);return jC(n,s,"y",e.intersect,i)}}};const hM=["left","top","right","bottom"];function tf(n,t){return n.filter(e=>e.pos===t)}function qC(n,t){return n.filter(e=>hM.indexOf(e.pos)===-1&&e.box.axis===t)}function ef(n,t){return n.sort((e,i)=>{const s=t?i:e,o=t?e:i;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function w9(n){const t=[];let e,i,s,o,u,h;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],{position:o,options:{stack:u,stackWeight:h=1}}=s,t.push({index:e,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:u&&o+u,stackWeight:h});return t}function S9(n){const t={};for(const e of n){const{stack:i,pos:s,stackWeight:o}=e;if(!i||!hM.includes(s))continue;const u=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});u.count++,u.weight+=o}return t}function x9(n,t){const e=S9(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let o,u,h;for(o=0,u=n.length;o<u;++o){h=n[o];const{fullSize:d}=h.box,m=e[h.stack],v=m&&h.stackWeight/m.weight;h.horizontal?(h.width=v?v*i:d&&t.availableWidth,h.height=s):(h.width=i,h.height=v?v*s:d&&t.availableHeight)}return e}function C9(n){const t=w9(n),e=ef(t.filter(m=>m.box.fullSize),!0),i=ef(tf(t,"left"),!0),s=ef(tf(t,"right")),o=ef(tf(t,"top"),!0),u=ef(tf(t,"bottom")),h=qC(t,"x"),d=qC(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:s.concat(d).concat(u).concat(h),chartArea:tf(t,"chartArea"),vertical:i.concat(s).concat(d),horizontal:o.concat(u).concat(h)}}function GC(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function fM(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function A9(n,t,e,i){const{pos:s,box:o}=e,u=n.maxPadding;if(!Te(s)){e.size&&(n[s]-=e.size);const T=i[e.stack]||{size:0,count:1};T.size=Math.max(T.size,e.horizontal?o.height:o.width),e.size=T.size/T.count,n[s]+=e.size}o.getPadding&&fM(u,o.getPadding());const h=Math.max(0,t.outerWidth-GC(u,n,"left","right")),d=Math.max(0,t.outerHeight-GC(u,n,"top","bottom")),m=h!==n.w,v=d!==n.h;return n.w=h,n.h=d,e.horizontal?{same:m,other:v}:{same:v,other:m}}function I9(n){const t=n.maxPadding;function e(i){const s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function R9(n,t){const e=t.maxPadding;function i(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(u=>{o[u]=Math.max(t[u],e[u])}),o}return i(n?["left","right"]:["top","bottom"])}function pf(n,t,e,i){const s=[];let o,u,h,d,m,v;for(o=0,u=n.length,m=0;o<u;++o){h=n[o],d=h.box,d.update(h.width||t.w,h.height||t.h,R9(h.horizontal,t));const{same:T,other:w}=A9(t,e,h,i);m|=T&&s.length,v=v||w,d.fullSize||s.push(h)}return m&&pf(s,t,e,i)||v}function jp(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function WC(n,t,e,i){const s=e.padding;let{x:o,y:u}=t;for(const h of n){const d=h.box,m=i[h.stack]||{placed:0,weight:1},v=h.stackWeight/m.weight||1;if(h.horizontal){const T=t.w*v,w=m.size||d.height;Jm(m.start)&&(u=m.start),d.fullSize?jp(d,s.left,u,e.outerWidth-s.right-s.left,w):jp(d,t.left+m.placed,u,T,w),m.start=u,m.placed+=T,u=d.bottom}else{const T=t.h*v,w=m.size||d.width;Jm(m.start)&&(o=m.start),d.fullSize?jp(d,o,s.top,w,e.outerHeight-s.bottom-s.top):jp(d,o,t.top+m.placed,w,T),m.start=o,m.placed+=T,o=d.right}}t.x=o,t.y=u}var Rs={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const s=Ms(n.options.layout.padding),o=Math.max(t-s.width,0),u=Math.max(e-s.height,0),h=C9(n.boxes),d=h.vertical,m=h.horizontal;Re(n.boxes,M=>{typeof M.beforeLayout=="function"&&M.beforeLayout()});const v=d.reduce((M,k)=>k.box.options&&k.box.options.display===!1?M:M+1,0)||1,T=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:o,availableHeight:u,vBoxMaxWidth:o/2/v,hBoxMaxHeight:u/2}),w=Object.assign({},s);fM(w,Ms(i));const A=Object.assign({maxPadding:w,w:o,h:u,x:s.left,y:s.top},s),R=x9(d.concat(m),T);pf(h.fullSize,A,T,R),pf(d,A,T,R),pf(m,A,T,R)&&pf(d,A,T,R),I9(A),WC(h.leftAndTop,A,T,R),A.x+=A.w,A.y+=A.h,WC(h.rightAndBottom,A,T,R),n.chartArea={left:A.left,top:A.top,right:A.left+A.w,bottom:A.top+A.h,height:A.h,width:A.w},Re(h.chartArea,M=>{const k=M.box;Object.assign(k,n.chartArea),k.update(A.w,A.h,{left:0,top:0,right:0,bottom:0})})}};class dM{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class P9 extends dM{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const hm="$chartjs",M9={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},YC=n=>n===null||n==="";function O9(n,t){const e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[hm]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",YC(s)){const o=kC(n,"width");o!==void 0&&(n.width=o)}if(YC(i))if(n.style.height==="")n.height=n.width/(t||2);else{const o=kC(n,"height");o!==void 0&&(n.height=o)}return n}const pM=HF?{passive:!0}:!1;function k9(n,t,e){n&&n.addEventListener(t,e,pM)}function D9(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,pM)}function N9(n,t){const e=M9[n.type]||n.type,{x:i,y:s}=Yl(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function ng(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function L9(n,t,e){const i=n.canvas,s=new MutationObserver(o=>{let u=!1;for(const h of o)u=u||ng(h.addedNodes,i),u=u&&!ng(h.removedNodes,i);u&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function V9(n,t,e){const i=n.canvas,s=new MutationObserver(o=>{let u=!1;for(const h of o)u=u||ng(h.removedNodes,i),u=u&&!ng(h.addedNodes,i);u&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const sd=new Map;let ZC=0;function mM(){const n=window.devicePixelRatio;n!==ZC&&(ZC=n,sd.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function z9(n,t){sd.size||window.addEventListener("resize",mM),sd.set(n,t)}function B9(n){sd.delete(n),sd.size||window.removeEventListener("resize",mM)}function U9(n,t,e){const i=n.canvas,s=i&&Zb(i);if(!s)return;const o=$P((h,d)=>{const m=s.clientWidth;e(h,d),m<s.clientWidth&&e()},window),u=new ResizeObserver(h=>{const d=h[0],m=d.contentRect.width,v=d.contentRect.height;m===0&&v===0||o(m,v)});return u.observe(s),z9(n,o),u}function Xy(n,t,e){e&&e.disconnect(),t==="resize"&&B9(n)}function F9(n,t,e){const i=n.canvas,s=$P(o=>{n.ctx!==null&&e(N9(o,n))},n);return k9(i,t,s),s}class H9 extends dM{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(O9(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[hm])return!1;const i=e[hm].initial;["height","width"].forEach(o=>{const u=i[o];Ge(u)?e.removeAttribute(o):e.setAttribute(o,u)});const s=i.style||{};return Object.keys(s).forEach(o=>{e.style[o]=s[o]}),e.width=e.width,delete e[hm],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),u={attach:L9,detach:V9,resize:U9}[e]||F9;s[e]=u(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:Xy,detach:Xy,resize:Xy}[e]||D9)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return FF(t,e,i,s)}isAttached(t){const e=t&&Zb(t);return!!(e&&e.isConnected)}}function j9(n){return!Yb()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?P9:H9}var Kp;let Eu=(Kp=class{constructor(){Qt(this,"x");Qt(this,"y");Qt(this,"active",!1);Qt(this,"options");Qt(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return ed(this.x)&&ed(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach(o=>{s[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),s}},Qt(Kp,"defaults",{}),Qt(Kp,"defaultRoutes"),Kp);function q9(n,t){const e=n.options.ticks,i=G9(n),s=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?Y9(t):[],u=o.length,h=o[0],d=o[u-1],m=[];if(u>s)return Z9(t,m,o,u/s),m;const v=W9(o,t,s);if(u>0){let T,w;const A=u>1?Math.round((d-h)/(u-1)):null;for(qp(t,m,v,Ge(A)?0:h-A,h),T=0,w=u-1;T<w;T++)qp(t,m,v,o[T],o[T+1]);return qp(t,m,v,d,Ge(A)?t.length:d+A),m}return qp(t,m,v),m}function G9(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),s=n._maxLength/e;return Math.floor(Math.min(i,s))}function W9(n,t,e){const i=K9(n),s=t.length/e;if(!i)return Math.max(s,1);const o=V5(i);for(let u=0,h=o.length-1;u<h;u++){const d=o[u];if(d>s)return d}return Math.max(s,1)}function Y9(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function Z9(n,t,e,i){let s=0,o=e[0],u;for(i=Math.ceil(i),u=0;u<n.length;u++)u===o&&(t.push(n[u]),s++,o=e[s*i])}function qp(n,t,e,i,s){const o=_e(i,0),u=Math.min(_e(s,n.length),n.length);let h=0,d,m,v;for(e=Math.ceil(e),s&&(d=s-i,e=d/Math.floor(d/e)),v=o;v<0;)h++,v=Math.round(o+h*e);for(m=Math.max(o,0);m<u;m++)m===v&&(t.push(n[m]),h++,v=Math.round(o+h*e))}function K9(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const $9=n=>n==="left"?"right":n==="right"?"left":n,KC=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,$C=(n,t)=>Math.min(t||n,n);function QC(n,t){const e=[],i=n.length/t,s=n.length;let o=0;for(;o<s;o+=i)e.push(n[Math.floor(o)]);return e}function Q9(n,t,e){const i=n.ticks.length,s=Math.min(t,i-1),o=n._startPixel,u=n._endPixel,h=1e-6;let d=n.getPixelForTick(s),m;if(!(e&&(i===1?m=Math.max(d-o,u-d):t===0?m=(n.getPixelForTick(1)-d)/2:m=(d-n.getPixelForTick(s-1))/2,d+=s<t?m:-m,d<o-h||d>u+h)))return d}function X9(n,t){Re(n,e=>{const i=e.gc,s=i.length/2;let o;if(s>t){for(o=0;o<s;++o)delete e.data[i[o]];i.splice(0,s)}})}function nf(n){return n.drawTicks?n.tickLength:0}function XC(n,t){if(!n.display)return 0;const e=fi(n.font,t),i=Ms(n.padding);return(Bn(n.text)?n.text.length:1)*e.lineHeight+i.height}function J9(n,t){return bu(n,{scale:t,type:"scale"})}function tH(n,t,e){return bu(n,{tick:e,index:t,type:"tick"})}function eH(n,t,e){let i=Ub(n);return(e&&t!=="right"||!e&&t==="right")&&(i=$9(i)),i}function nH(n,t,e,i){const{top:s,left:o,bottom:u,right:h,chart:d}=n,{chartArea:m,scales:v}=d;let T=0,w,A,R;const M=u-s,k=h-o;if(n.isHorizontal()){if(A=ai(i,o,h),Te(e)){const U=Object.keys(e)[0],Z=e[U];R=v[U].getPixelForValue(Z)+M-t}else e==="center"?R=(m.bottom+m.top)/2+M-t:R=KC(n,e,t);w=h-o}else{if(Te(e)){const U=Object.keys(e)[0],Z=e[U];A=v[U].getPixelForValue(Z)-k+t}else e==="center"?A=(m.left+m.right)/2-k+t:A=KC(n,e,t);R=ai(i,u,s),T=e==="left"?-nr:nr}return{titleX:A,titleY:R,maxWidth:w,rotation:T}}class eh extends Eu{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=Ar(t,Number.POSITIVE_INFINITY),e=Ar(e,Number.NEGATIVE_INFINITY),i=Ar(i,Number.POSITIVE_INFINITY),s=Ar(s,Number.NEGATIVE_INFINITY),{min:Ar(t,i),max:Ar(e,s),minDefined:Ps(t),maxDefined:Ps(e)}}getMinMax(t){let{min:e,max:i,minDefined:s,maxDefined:o}=this.getUserBounds(),u;if(s&&o)return{min:e,max:i};const h=this.getMatchingVisibleMetas();for(let d=0,m=h.length;d<m;++d)u=h[d].controller.getMinMax(this,t),s||(e=Math.min(e,u.min)),o||(i=Math.max(i,u.max));return e=o&&e>i?i:e,i=s&&e>i?e:i,{min:Ar(e,Ar(i,e)),max:Ar(i,Ar(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ze(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:o,ticks:u}=this.options,h=u.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=vF(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=h<this.ticks.length;this._convertTicksToLabels(d?QC(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),u.display&&(u.autoSkip||u.source==="auto")&&(this.ticks=q9(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ze(this.options.afterUpdate,[this])}beforeSetDimensions(){Ze(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ze(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ze(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ze(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,o;for(i=0,s=t.length;i<s;i++)o=t[i],o.label=Ze(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){Ze(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ze(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=$C(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,o=e.maxRotation;let u=s,h,d,m;if(!this._isVisible()||!e.display||s>=o||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const v=this._getLabelSizes(),T=v.widest.width,w=v.highest.height,A=Is(this.chart.width-T,0,this.maxWidth);h=t.offset?this.maxWidth/i:A/(i-1),T+6>h&&(h=A/(i-(t.offset?.5:1)),d=this.maxHeight-nf(t.grid)-e.padding-XC(t.title,this.chart.options.font),m=Math.sqrt(T*T+w*w),u=F5(Math.min(Math.asin(Is((v.highest.height+6)/h,-1,1)),Math.asin(Is(d/m,-1,1))-Math.asin(Is(w/m,-1,1)))),u=Math.max(s,Math.min(o,u))),this.labelRotation=u}afterCalculateLabelRotation(){Ze(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ze(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:o}}=this,u=this._isVisible(),h=this.isHorizontal();if(u){const d=XC(s,e.options.font);if(h?(t.width=this.maxWidth,t.height=nf(o)+d):(t.height=this.maxHeight,t.width=nf(o)+d),i.display&&this.ticks.length){const{first:m,last:v,widest:T,highest:w}=this._getLabelSizes(),A=i.padding*2,R=Ql(this.labelRotation),M=Math.cos(R),k=Math.sin(R);if(h){const U=i.mirror?0:k*T.width+M*w.height;t.height=Math.min(this.maxHeight,t.height+U+A)}else{const U=i.mirror?0:M*T.width+k*w.height;t.width=Math.min(this.maxWidth,t.width+U+A)}this._calculatePadding(m,v,k,M)}}this._handleMargins(),h?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:o,padding:u},position:h}=this.options,d=this.labelRotation!==0,m=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const v=this.getPixelForTick(0)-this.left,T=this.right-this.getPixelForTick(this.ticks.length-1);let w=0,A=0;d?m?(w=s*t.width,A=i*e.height):(w=i*t.height,A=s*e.width):o==="start"?A=e.width:o==="end"?w=t.width:o!=="inner"&&(w=t.width/2,A=e.width/2),this.paddingLeft=Math.max((w-v+u)*this.width/(this.width-v),0),this.paddingRight=Math.max((A-T+u)*this.width/(this.width-T),0)}else{let v=e.height/2,T=t.height/2;o==="start"?(v=0,T=t.height):o==="end"&&(v=e.height,T=0),this.paddingTop=v+u,this.paddingBottom=T+u}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ze(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)Ge(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=QC(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:s,_longestTextCache:o}=this,u=[],h=[],d=Math.floor(e/$C(e,i));let m=0,v=0,T,w,A,R,M,k,U,Z,J,ut,rt;for(T=0;T<e;T+=d){if(R=t[T].label,M=this._resolveTickFontOptions(T),s.font=k=M.string,U=o[k]=o[k]||{data:{},gc:[]},Z=M.lineHeight,J=ut=0,!Ge(R)&&!Bn(R))J=IC(s,U.data,U.gc,J,R),ut=Z;else if(Bn(R))for(w=0,A=R.length;w<A;++w)rt=R[w],!Ge(rt)&&!Bn(rt)&&(J=IC(s,U.data,U.gc,J,rt),ut+=Z);u.push(J),h.push(ut),m=Math.max(J,m),v=Math.max(ut,v)}X9(o,e);const _t=u.indexOf(m),z=h.indexOf(v),N=V=>({width:u[V]||0,height:h[V]||0});return{first:N(0),last:N(e-1),widest:N(_t),highest:N(z),widths:u,heights:h}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return q5(this._alignToPixels?jl(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=tH(this.getContext(),t,i))}return this.$context||(this.$context=J9(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Ql(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),o=this._getLabelSizes(),u=t.autoSkipPadding||0,h=o?o.widest.width+u:0,d=o?o.highest.height+u:0;return this.isHorizontal()?d*i>h*s?h/i:d/s:d*s<h*i?d/i:h/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:o,position:u,border:h}=s,d=o.offset,m=this.isHorizontal(),T=this.ticks.length+(d?1:0),w=nf(o),A=[],R=h.setContext(this.getContext()),M=R.display?R.width:0,k=M/2,U=function(nt){return jl(i,nt,M)};let Z,J,ut,rt,_t,z,N,V,q,H,W,F;if(u==="top")Z=U(this.bottom),z=this.bottom-w,V=Z-k,H=U(t.top)+k,F=t.bottom;else if(u==="bottom")Z=U(this.top),H=t.top,F=U(t.bottom)-k,z=Z+k,V=this.top+w;else if(u==="left")Z=U(this.right),_t=this.right-w,N=Z-k,q=U(t.left)+k,W=t.right;else if(u==="right")Z=U(this.left),q=t.left,W=U(t.right)-k,_t=Z+k,N=this.left+w;else if(e==="x"){if(u==="center")Z=U((t.top+t.bottom)/2+.5);else if(Te(u)){const nt=Object.keys(u)[0],Et=u[nt];Z=U(this.chart.scales[nt].getPixelForValue(Et))}H=t.top,F=t.bottom,z=Z+k,V=z+w}else if(e==="y"){if(u==="center")Z=U((t.left+t.right)/2);else if(Te(u)){const nt=Object.keys(u)[0],Et=u[nt];Z=U(this.chart.scales[nt].getPixelForValue(Et))}_t=Z-k,N=_t-w,q=t.left,W=t.right}const ee=_e(s.ticks.maxTicksLimit,T),Gt=Math.max(1,Math.ceil(T/ee));for(J=0;J<T;J+=Gt){const nt=this.getContext(J),Et=o.setContext(nt),vt=h.setContext(nt),Xt=Et.lineWidth,B=Et.color,lt=vt.dash||[],bt=vt.dashOffset,mt=Et.tickWidth,xt=Et.tickColor,At=Et.tickBorderDash||[],Tt=Et.tickBorderDashOffset;ut=Q9(this,J,d),ut!==void 0&&(rt=jl(i,ut,Xt),m?_t=N=q=W=rt:z=V=H=F=rt,A.push({tx1:_t,ty1:z,tx2:N,ty2:V,x1:q,y1:H,x2:W,y2:F,width:Xt,color:B,borderDash:lt,borderDashOffset:bt,tickWidth:mt,tickColor:xt,tickBorderDash:At,tickBorderDashOffset:Tt}))}return this._ticksLength=T,this._borderValue=Z,A}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:o}=i,u=this.isHorizontal(),h=this.ticks,{align:d,crossAlign:m,padding:v,mirror:T}=o,w=nf(i.grid),A=w+v,R=T?-v:A,M=-Ql(this.labelRotation),k=[];let U,Z,J,ut,rt,_t,z,N,V,q,H,W,F="middle";if(s==="top")_t=this.bottom-R,z=this._getXAxisLabelAlignment();else if(s==="bottom")_t=this.top+R,z=this._getXAxisLabelAlignment();else if(s==="left"){const Gt=this._getYAxisLabelAlignment(w);z=Gt.textAlign,rt=Gt.x}else if(s==="right"){const Gt=this._getYAxisLabelAlignment(w);z=Gt.textAlign,rt=Gt.x}else if(e==="x"){if(s==="center")_t=(t.top+t.bottom)/2+A;else if(Te(s)){const Gt=Object.keys(s)[0],nt=s[Gt];_t=this.chart.scales[Gt].getPixelForValue(nt)+A}z=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")rt=(t.left+t.right)/2-A;else if(Te(s)){const Gt=Object.keys(s)[0],nt=s[Gt];rt=this.chart.scales[Gt].getPixelForValue(nt)}z=this._getYAxisLabelAlignment(w).textAlign}e==="y"&&(d==="start"?F="top":d==="end"&&(F="bottom"));const ee=this._getLabelSizes();for(U=0,Z=h.length;U<Z;++U){J=h[U],ut=J.label;const Gt=o.setContext(this.getContext(U));N=this.getPixelForTick(U)+o.labelOffset,V=this._resolveTickFontOptions(U),q=V.lineHeight,H=Bn(ut)?ut.length:1;const nt=H/2,Et=Gt.color,vt=Gt.textStrokeColor,Xt=Gt.textStrokeWidth;let B=z;u?(rt=N,z==="inner"&&(U===Z-1?B=this.options.reverse?"left":"right":U===0?B=this.options.reverse?"right":"left":B="center"),s==="top"?m==="near"||M!==0?W=-H*q+q/2:m==="center"?W=-ee.highest.height/2-nt*q+q:W=-ee.highest.height+q/2:m==="near"||M!==0?W=q/2:m==="center"?W=ee.highest.height/2-nt*q:W=ee.highest.height-H*q,T&&(W*=-1),M!==0&&!Gt.showLabelBackdrop&&(rt+=q/2*Math.sin(M))):(_t=N,W=(1-H)*q/2);let lt;if(Gt.showLabelBackdrop){const bt=Ms(Gt.backdropPadding),mt=ee.heights[U],xt=ee.widths[U];let At=W-bt.top,Tt=0-bt.left;switch(F){case"middle":At-=mt/2;break;case"bottom":At-=mt;break}switch(z){case"center":Tt-=xt/2;break;case"right":Tt-=xt;break;case"inner":U===Z-1?Tt-=xt:U>0&&(Tt-=xt/2);break}lt={left:Tt,top:At,width:xt+bt.width,height:mt+bt.height,color:Gt.backdropColor}}k.push({label:ut,font:V,textOffset:W,options:{rotation:M,color:Et,strokeColor:vt,strokeWidth:Xt,textAlign:B,textBaseline:F,translation:[rt,_t],backdrop:lt}})}return k}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Ql(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:o}}=this.options,u=this._getLabelSizes(),h=t+o,d=u.widest.width;let m,v;return e==="left"?s?(v=this.right+o,i==="near"?m="left":i==="center"?(m="center",v+=d/2):(m="right",v+=d)):(v=this.right-h,i==="near"?m="right":i==="center"?(m="center",v-=d/2):(m="left",v=this.left)):e==="right"?s?(v=this.left+o,i==="near"?m="right":i==="center"?(m="center",v-=d/2):(m="left",v-=d)):(v=this.left+h,i==="near"?m="left":i==="center"?(m="center",v+=d/2):(m="right",v=this.right)):m="right",{textAlign:m,x:v}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:o,height:u}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,o,u),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(o=>o.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,u;const h=(d,m,v)=>{!v.width||!v.color||(i.save(),i.lineWidth=v.width,i.strokeStyle=v.color,i.setLineDash(v.borderDash||[]),i.lineDashOffset=v.borderDashOffset,i.beginPath(),i.moveTo(d.x,d.y),i.lineTo(m.x,m.y),i.stroke(),i.restore())};if(e.display)for(o=0,u=s.length;o<u;++o){const d=s[o];e.drawOnChartArea&&h({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),e.drawTicks&&h({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,o=i.setContext(this.getContext()),u=i.display?o.width:0;if(!u)return;const h=s.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let m,v,T,w;this.isHorizontal()?(m=jl(t,this.left,u)-u/2,v=jl(t,this.right,h)+h/2,T=w=d):(T=jl(t,this.top,u)-u/2,w=jl(t,this.bottom,h)+h/2,m=v=d),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(m,T),e.lineTo(v,w),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&Hb(i,s);const o=this.getLabelItems(t);for(const u of o){const h=u.options,d=u.font,m=u.label,v=u.textOffset;id(i,m,0,v,d,h)}s&&jb(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const o=fi(i.font),u=Ms(i.padding),h=i.align;let d=o.lineHeight/2;e==="bottom"||e==="center"||Te(e)?(d+=u.bottom,Bn(i.text)&&(d+=o.lineHeight*(i.text.length-1))):d+=u.top;const{titleX:m,titleY:v,maxWidth:T,rotation:w}=nH(this,d,e,h);id(t,i.text,0,0,o,{color:i.color,maxWidth:T,rotation:w,textAlign:eH(h,e,s),textBaseline:"middle",translation:[m,v]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=_e(t.grid&&t.grid.z,-1),s=_e(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==eh.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let o,u;for(o=0,u=e.length;o<u;++o){const h=e[o];h[i]===this.id&&(!t||h.type===t)&&s.push(h)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return fi(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Gp{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;rH(e)&&(i=this.register(e));const s=this.items,o=t.id,u=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in s||(s[o]=t,iH(t,u,i),this.override&&dn.override(t.id,t.overrides)),u}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in dn[s]&&(delete dn[s][i],this.override&&delete hu[i])}}function iH(n,t,e){const i=td(Object.create(null),[e?dn.get(e):{},dn.get(t),n.defaults]);dn.set(t,i),n.defaultRoutes&&sH(t,n.defaultRoutes),n.descriptors&&dn.describe(t,n.descriptors)}function sH(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),s=i.pop(),o=[n].concat(i).join("."),u=t[e].split("."),h=u.pop(),d=u.join(".");dn.route(o,s,d,h)})}function rH(n){return"id"in n&&"defaults"in n}class oH{constructor(){this.controllers=new Gp(Df,"datasets",!0),this.elements=new Gp(Eu,"elements"),this.plugins=new Gp(Object,"plugins"),this.scales=new Gp(eh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{const o=i||this._getRegistryForType(s);i||o.isForType(s)||o===this.plugins&&s.id?this._exec(t,o,s):Re(s,u=>{const h=i||this._getRegistryForType(u);this._exec(t,h,u)})})}_exec(t,e,i){const s=zb(t);Ze(i["before"+s],[],i),e[t](i),Ze(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var Rr=new oH;class aH{constructor(){this._init=[]}notify(t,e,i,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=s?this._descriptors(t).filter(s):this._descriptors(t),u=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),u}_notify(t,e,i,s){s=s||{};for(const o of t){const u=o.plugin,h=u[i],d=[e,s,o.options];if(Ze(h,d,u)===!1&&s.cancelable)return!1}return!0}invalidate(){Ge(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=_e(i.options&&i.options.plugins,{}),o=lH(i);return s===!1&&!e?[]:cH(t,o,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(o,u)=>o.filter(h=>!u.some(d=>h.plugin.id===d.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function lH(n){const t={},e=[],i=Object.keys(Rr.plugins.items);for(let o=0;o<i.length;o++)e.push(Rr.getPlugin(i[o]));const s=n.plugins||[];for(let o=0;o<s.length;o++){const u=s[o];e.indexOf(u)===-1&&(e.push(u),t[u.id]=!0)}return{plugins:e,localIds:t}}function uH(n,t){return!t&&n===!1?null:n===!0?{}:n}function cH(n,{plugins:t,localIds:e},i,s){const o=[],u=n.getContext();for(const h of t){const d=h.id,m=uH(i[d],s);m!==null&&o.push({plugin:h,options:hH(n.config,{plugin:h,local:e[d]},m,u)})}return o}function hH(n,{plugin:t,local:e},i,s){const o=n.pluginScopeKeys(t),u=n.getOptionScopes(i,o);return e&&t.defaults&&u.push(t.defaults),n.createResolver(u,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Wv(n,t){const e=dn.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function fH(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function dH(n,t){return n===t?"_index_":"_value_"}function JC(n){if(n==="x"||n==="y"||n==="r")return n}function pH(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Yv(n,...t){if(JC(n))return n;for(const e of t){const i=e.axis||pH(e.position)||n.length>1&&JC(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function tA(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function mH(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return tA(n,"x",e[0])||tA(n,"y",e[0])}return{}}function gH(n,t){const e=hu[n.type]||{scales:{}},i=t.scales||{},s=Wv(n.type,t),o=Object.create(null);return Object.keys(i).forEach(u=>{const h=i[u];if(!Te(h))return console.error(`Invalid scale configuration for scale: ${u}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${u}`);const d=Yv(u,h,mH(u,n),dn.scales[h.type]),m=dH(d,s),v=e.scales||{};o[u]=Rf(Object.create(null),[{axis:d},h,v[d],v[m]])}),n.data.datasets.forEach(u=>{const h=u.type||n.type,d=u.indexAxis||Wv(h,t),v=(hu[h]||{}).scales||{};Object.keys(v).forEach(T=>{const w=fH(T,d),A=u[w+"AxisID"]||w;o[A]=o[A]||Object.create(null),Rf(o[A],[{axis:w},i[A],v[T]])})}),Object.keys(o).forEach(u=>{const h=o[u];Rf(h,[dn.scales[h.type],dn.scale])}),o}function gM(n){const t=n.options||(n.options={});t.plugins=_e(t.plugins,{}),t.scales=gH(n,t)}function _M(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function _H(n){return n=n||{},n.data=_M(n.data),gM(n),n}const eA=new Map,yM=new Set;function Wp(n,t){let e=eA.get(n);return e||(e=t(),eA.set(n,e),yM.add(e)),e}const sf=(n,t,e)=>{const i=Xm(t,e);i!==void 0&&n.add(i)};class yH{constructor(t){this._config=_H(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=_M(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),gM(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Wp(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Wp(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Wp(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Wp(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:o}=this,u=this._cachedScopes(t,i),h=u.get(e);if(h)return h;const d=new Set;e.forEach(v=>{t&&(d.add(t),v.forEach(T=>sf(d,t,T))),v.forEach(T=>sf(d,s,T)),v.forEach(T=>sf(d,hu[o]||{},T)),v.forEach(T=>sf(d,dn,T)),v.forEach(T=>sf(d,jv,T))});const m=Array.from(d);return m.length===0&&m.push(Object.create(null)),yM.has(e)&&u.set(e,m),m}chartOptionScopes(){const{options:t,type:e}=this;return[t,hu[e]||{},dn.datasets[e]||{},{type:e},dn,jv]}resolveNamedOptions(t,e,i,s=[""]){const o={$shared:!0},{resolver:u,subPrefixes:h}=nA(this._resolverCache,t,s);let d=u;if(bH(u,e)){o.$shared=!1,i=Ja(i)?i():i;const m=this.createResolver(t,i,h);d=Bc(u,i,m)}for(const m of e)o[m]=d[m];return o}createResolver(t,e,i=[""],s){const{resolver:o}=nA(this._resolverCache,t,i);return Te(e)?Bc(o,e,void 0,s):o}}function nA(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const s=e.join();let o=i.get(s);return o||(o={resolver:qb(t,e),subPrefixes:e.filter(h=>!h.toLowerCase().includes("hover"))},i.set(s,o)),o}const vH=n=>Te(n)&&Object.getOwnPropertyNames(n).some(t=>Ja(n[t]));function bH(n,t){const{isScriptable:e,isIndexable:i}=eM(n);for(const s of t){const o=e(s),u=i(s),h=(u||o)&&n[s];if(o&&(Ja(h)||vH(h))||u&&Bn(h))return!0}return!1}var EH="4.5.0";const TH=["top","bottom","left","right","chartArea"];function iA(n,t){return n==="top"||n==="bottom"||TH.indexOf(n)===-1&&t==="x"}function sA(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function rA(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Ze(e&&e.onComplete,[n],t)}function wH(n){const t=n.chart,e=t.options.animation;Ze(e&&e.onProgress,[n],t)}function vM(n){return Yb()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const fm={},oA=n=>{const t=vM(n);return Object.values(fm).filter(e=>e.canvas===t).pop()};function SH(n,t,e){const i=Object.keys(n);for(const s of i){const o=+s;if(o>=t){const u=n[s];delete n[s],(e>0||o>t)&&(n[o+e]=u)}}}function xH(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}var Ra;let zg=(Ra=class{static register(...t){Rr.add(...t),aA()}static unregister(...t){Rr.remove(...t),aA()}constructor(t,e){const i=this.config=new yH(e),s=vM(t),o=oA(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const u=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||j9(s)),this.platform.updateConfig(i);const h=this.platform.acquireContext(s,u.aspectRatio),d=h&&h.canvas,m=d&&d.height,v=d&&d.width;if(this.id=I5(),this.ctx=h,this.canvas=d,this.width=v,this.height=m,this._options=u,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new aH,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=K5(T=>this.update(T),u.resizeDelay||0),this._dataChanges=[],fm[this.id]=this,!h||!d){console.error("Failed to create chart: can't acquire context from the given item");return}mo.listen(this,"complete",rA),mo.listen(this,"progress",wH),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:o}=this;return Ge(t)?e&&o?o:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Rr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():OC(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return RC(this.canvas,this.ctx),this}stop(){return mo.stop(this),this}resize(t,e){mo.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,u=this.platform.getMaximumSize(s,t,e,o),h=i.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=u.width,this.height=u.height,this._aspectRatio=this.aspectRatio,OC(this,h,!0)&&(this.notifyPlugins("resize",{size:u}),Ze(i.onResize,[this,u],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Re(e,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((u,h)=>(u[h]=!1,u),{});let o=[];e&&(o=o.concat(Object.keys(e).map(u=>{const h=e[u],d=Yv(u,h),m=d==="r",v=d==="x";return{options:h,dposition:m?"chartArea":v?"bottom":"left",dtype:m?"radialLinear":v?"category":"linear"}}))),Re(o,u=>{const h=u.options,d=h.id,m=Yv(d,h),v=_e(h.type,u.dtype);(h.position===void 0||iA(h.position,m)!==iA(u.dposition))&&(h.position=u.dposition),s[d]=!0;let T=null;if(d in i&&i[d].type===v)T=i[d];else{const w=Rr.getScale(v);T=new w({id:d,type:v,ctx:this.ctx,chart:this}),i[T.id]=T}T.init(h,t)}),Re(s,(u,h)=>{u||delete i[h]}),Re(i,u=>{Rs.configure(this,u,u.options),Rs.addBox(this,u)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,o)=>s.index-o.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(sA("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const o=e[i];let u=this.getDatasetMeta(i);const h=o.type||this.config.type;if(u.type&&u.type!==h&&(this._destroyDatasetMeta(i),u=this.getDatasetMeta(i)),u.type=h,u.indexAxis=o.indexAxis||Wv(h,this.options),u.order=o.order||0,u.index=i,u.label=""+o.label,u.visible=this.isDatasetVisible(i),u.controller)u.controller.updateIndex(i),u.controller.linkScales();else{const d=Rr.getController(h),{datasetElementType:m,dataElementType:v}=dn.datasets[h];Object.assign(d,{dataElementType:Rr.getElement(v),datasetElementType:m&&Rr.getElement(m)}),u.controller=new d(this,i),t.push(u.controller)}}return this._updateMetasets(),t}_resetElements(){Re(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let u=0;for(let m=0,v=this.data.datasets.length;m<v;m++){const{controller:T}=this.getDatasetMeta(m),w=!s&&o.indexOf(T)===-1;T.buildOrUpdateElements(w),u=Math.max(+T.getMaxOverflow(),u)}u=this._minPadding=i.layout.autoPadding?u:0,this._updateLayout(u),s||Re(o,m=>{m.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(sA("z","_idx"));const{_active:h,_lastEvent:d}=this;d?this._eventHandler(d,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){Re(this.scales,t=>{Rs.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!vC(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:o}of e){const u=i==="_removeElements"?-o:o;SH(t,s,u)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(u=>u[0]===o).map((u,h)=>h+","+u.splice(1).join(","))),s=i(0);for(let o=1;o<e;o++)if(!vC(s,i(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Rs.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],Re(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Ja(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(mo.has(this)?this.attached&&!mo.running(this)&&mo.start(this):(this.draw(),rA({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,o;for(s=0,o=e.length;s<o;++s){const u=e[s];(!t||u.visible)&&i.push(u)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=n9(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&Hb(e,s),t.controller.draw(),s&&jb(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return nd(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const o=T9.modes[e];return typeof o=="function"?o(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter(o=>o&&o._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=bu(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",o=this.getDatasetMeta(t),u=o.controller._resolveAnimations(void 0,s);Jm(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),u.update(o,{visible:i}),this.update(h=>h.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),mo.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),RC(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete fm[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,u)=>{e.addEventListener(this,o,u),t[o]=u},s=(o,u,h)=>{o.offsetX=u,o.offsetY=h,this._eventHandler(o)};Re(this.options.events,o=>i(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(d,m)=>{e.addEventListener(this,d,m),t[d]=m},s=(d,m)=>{t[d]&&(e.removeEventListener(this,d,m),delete t[d])},o=(d,m)=>{this.canvas&&this.resize(d,m)};let u;const h=()=>{s("attach",h),this.attached=!0,this.resize(),i("resize",o),i("detach",u)};u=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),i("attach",h)},e.isAttached(this.canvas)?h():u()}unbindEvents(){Re(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Re(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let o,u,h,d;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),h=0,d=t.length;h<d;++h){u=t[h];const m=u&&this.getDatasetMeta(u.datasetIndex).controller;m&&m[s+"HoverStyle"](u.element,u.datasetIndex,u.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:u})=>{const h=this.getDatasetMeta(o);if(!h)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:h.data[u],index:u}});!$m(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const s=this.options.hover,o=(d,m)=>d.filter(v=>!m.some(T=>v.datasetIndex===T.datasetIndex&&v.index===T.index)),u=o(e,t),h=i?t:o(t,e);u.length&&this.updateHoverStyle(u,s.mode,!1),h.length&&s.mode&&this.updateHoverStyle(h,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=u=>(u.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:o}=this,u=e,h=this._getActiveElements(t,s,i,u),d=D5(t),m=xH(t,this._lastEvent,i,d);i&&(this._lastEvent=null,Ze(o.onHover,[t,h,this],this),d&&Ze(o.onClick,[t,h,this],this));const v=!$m(h,s);return(v||e)&&(this._active=h,this._updateHoverStyles(h,s,e)),this._lastEvent=m,v}_getActiveElements(t,e,i,s){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}},Qt(Ra,"defaults",dn),Qt(Ra,"instances",fm),Qt(Ra,"overrides",hu),Qt(Ra,"registry",Rr),Qt(Ra,"version",EH),Qt(Ra,"getChart",oA),Ra);function aA(){return Re(zg.instances,n=>n._plugins.invalidate())}function bM(n,t,e=t){n.lineCap=_e(e.borderCapStyle,t.borderCapStyle),n.setLineDash(_e(e.borderDash,t.borderDash)),n.lineDashOffset=_e(e.borderDashOffset,t.borderDashOffset),n.lineJoin=_e(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=_e(e.borderWidth,t.borderWidth),n.strokeStyle=_e(e.borderColor,t.borderColor)}function CH(n,t,e){n.lineTo(e.x,e.y)}function AH(n){return n.stepped?uF:n.tension||n.cubicInterpolationMode==="monotone"?cF:CH}function EM(n,t,e={}){const i=n.length,{start:s=0,end:o=i-1}=e,{start:u,end:h}=t,d=Math.max(s,u),m=Math.min(o,h),v=s<u&&o<u||s>h&&o>h;return{count:i,start:d,loop:t.loop,ilen:m<d&&!v?i+m-d:m-d}}function IH(n,t,e,i){const{points:s,options:o}=t,{count:u,start:h,loop:d,ilen:m}=EM(s,e,i),v=AH(o);let{move:T=!0,reverse:w}=i||{},A,R,M;for(A=0;A<=m;++A)R=s[(h+(w?m-A:A))%u],!R.skip&&(T?(n.moveTo(R.x,R.y),T=!1):v(n,M,R,w,o.stepped),M=R);return d&&(R=s[(h+(w?m:0))%u],v(n,M,R,w,o.stepped)),!!d}function RH(n,t,e,i){const s=t.points,{count:o,start:u,ilen:h}=EM(s,e,i),{move:d=!0,reverse:m}=i||{};let v=0,T=0,w,A,R,M,k,U;const Z=ut=>(u+(m?h-ut:ut))%o,J=()=>{M!==k&&(n.lineTo(v,k),n.lineTo(v,M),n.lineTo(v,U))};for(d&&(A=s[Z(0)],n.moveTo(A.x,A.y)),w=0;w<=h;++w){if(A=s[Z(w)],A.skip)continue;const ut=A.x,rt=A.y,_t=ut|0;_t===R?(rt<M?M=rt:rt>k&&(k=rt),v=(T*v+ut)/++T):(J(),n.lineTo(ut,rt),R=_t,T=0,M=k=rt),U=rt}J()}function Zv(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?RH:IH}function PH(n){return n.stepped?jF:n.tension||n.cubicInterpolationMode==="monotone"?qF:Zl}function MH(n,t,e,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,i)&&s.closePath()),bM(n,t.options),n.stroke(s)}function OH(n,t,e,i){const{segments:s,options:o}=t,u=Zv(t);for(const h of s)bM(n,o,h.style),n.beginPath(),u(n,t,h,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const kH=typeof Path2D=="function";function DH(n,t,e,i){kH&&!t.options.segment?MH(n,t,e,i):OH(n,t,e,i)}class mf extends Eu{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;NF(this._points,i,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=XF(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,s=t[e],o=this.points,u=KF(this,{property:e,start:s,end:s});if(!u.length)return;const h=[],d=PH(i);let m,v;for(m=0,v=u.length;m<v;++m){const{start:T,end:w}=u[m],A=o[T],R=o[w];if(A===R){h.push(A);continue}const M=Math.abs((s-A[e])/(R[e]-A[e])),k=d(A,R,M,i.stepped);k[e]=t[e],h.push(k)}return h.length===1?h[0]:h}pathSegment(t,e,i){return Zv(this)(t,this,e,i)}path(t,e,i){const s=this.segments,o=Zv(this);let u=this._loop;e=e||0,i=i||this.points.length-e;for(const h of s)u&=o(t,this,h,{start:e,end:e+i-1});return!!u}draw(t,e,i,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),DH(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Qt(mf,"id","line"),Qt(mf,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Qt(mf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Qt(mf,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function lA(n,t,e,i){const s=n.options,{[e]:o}=n.getProps([e],i);return Math.abs(t-o)<s.radius+s.hitRadius}class dm extends Eu{constructor(e){super();Qt(this,"parsed");Qt(this,"skip");Qt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,s){const o=this.options,{x:u,y:h}=this.getProps(["x","y"],s);return Math.pow(e-u,2)+Math.pow(i-h,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,i){return lA(this,e,"x",i)}inYRange(e,i){return lA(this,e,"y",i)}getCenterPoint(e){const{x:i,y:s}=this.getProps(["x","y"],e);return{x:i,y:s}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const s=i&&e.borderWidth||0;return(i+s)*2}draw(e,i){const s=this.options;this.skip||s.radius<.1||!nd(this,i,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,qv(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}Qt(dm,"id","point"),Qt(dm,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Qt(dm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const uA=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},NH=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class cA extends Eu{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Ze(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=fi(i.font),o=s.size,u=this._computeTitleHeight(),{boxWidth:h,itemHeight:d}=uA(i,o);let m,v;e.font=s.string,this.isHorizontal()?(m=this.maxWidth,v=this._fitRows(u,o,h,d)+10):(v=this.maxHeight,m=this._fitCols(u,s,h,d)+10),this.width=Math.min(m,t.maxWidth||this.maxWidth),this.height=Math.min(v,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:o,maxWidth:u,options:{labels:{padding:h}}}=this,d=this.legendHitBoxes=[],m=this.lineWidths=[0],v=s+h;let T=t;o.textAlign="left",o.textBaseline="middle";let w=-1,A=-v;return this.legendItems.forEach((R,M)=>{const k=i+e/2+o.measureText(R.text).width;(M===0||m[m.length-1]+k+2*h>u)&&(T+=v,m[m.length-(M>0?0:1)]=0,A+=v,w++),d[M]={left:0,top:A,row:w,width:k,height:s},m[m.length-1]+=k+h}),T}_fitCols(t,e,i,s){const{ctx:o,maxHeight:u,options:{labels:{padding:h}}}=this,d=this.legendHitBoxes=[],m=this.columnSizes=[],v=u-t;let T=h,w=0,A=0,R=0,M=0;return this.legendItems.forEach((k,U)=>{const{itemWidth:Z,itemHeight:J}=LH(i,e,o,k,s);U>0&&A+J+2*h>v&&(T+=w+h,m.push({width:w,height:A}),R+=w+h,M++,w=A=0),d[U]={left:R,top:A,col:M,width:Z,height:J},w=Math.max(w,Z),A+=J+h}),T+=w,m.push({width:w,height:A}),T}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:o}}=this,u=xc(o,this.left,this.width);if(this.isHorizontal()){let h=0,d=ai(i,this.left+s,this.right-this.lineWidths[h]);for(const m of e)h!==m.row&&(h=m.row,d=ai(i,this.left+s,this.right-this.lineWidths[h])),m.top+=this.top+t+s,m.left=u.leftForLtr(u.x(d),m.width),d+=m.width+s}else{let h=0,d=ai(i,this.top+t+s,this.bottom-this.columnSizes[h].height);for(const m of e)m.col!==h&&(h=m.col,d=ai(i,this.top+t+s,this.bottom-this.columnSizes[h].height)),m.top=d,m.left+=this.left+s,m.left=u.leftForLtr(u.x(m.left),m.width),d+=m.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Hb(t,this),this._draw(),jb(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:o,labels:u}=t,h=dn.color,d=xc(t.rtl,this.left,this.width),m=fi(u.font),{padding:v}=u,T=m.size,w=T/2;let A;this.drawTitle(),s.textAlign=d.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=m.string;const{boxWidth:R,boxHeight:M,itemHeight:k}=uA(u,T),U=function(_t,z,N){if(isNaN(R)||R<=0||isNaN(M)||M<0)return;s.save();const V=_e(N.lineWidth,1);if(s.fillStyle=_e(N.fillStyle,h),s.lineCap=_e(N.lineCap,"butt"),s.lineDashOffset=_e(N.lineDashOffset,0),s.lineJoin=_e(N.lineJoin,"miter"),s.lineWidth=V,s.strokeStyle=_e(N.strokeStyle,h),s.setLineDash(_e(N.lineDash,[])),u.usePointStyle){const q={radius:M*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:V},H=d.xPlus(_t,R/2),W=z+w;JP(s,q,H,W,u.pointStyleWidth&&R)}else{const q=z+Math.max((T-M)/2,0),H=d.leftForLtr(_t,R),W=kf(N.borderRadius);s.beginPath(),Object.values(W).some(F=>F!==0)?Gv(s,{x:H,y:q,w:R,h:M,radius:W}):s.rect(H,q,R,M),s.fill(),V!==0&&s.stroke()}s.restore()},Z=function(_t,z,N){id(s,N.text,_t,z+k/2,m,{strikethrough:N.hidden,textAlign:d.textAlign(N.textAlign)})},J=this.isHorizontal(),ut=this._computeTitleHeight();J?A={x:ai(o,this.left+v,this.right-i[0]),y:this.top+v+ut,line:0}:A={x:this.left+v,y:ai(o,this.top+ut+v,this.bottom-e[0].height),line:0},oM(this.ctx,t.textDirection);const rt=k+v;this.legendItems.forEach((_t,z)=>{s.strokeStyle=_t.fontColor,s.fillStyle=_t.fontColor;const N=s.measureText(_t.text).width,V=d.textAlign(_t.textAlign||(_t.textAlign=u.textAlign)),q=R+w+N;let H=A.x,W=A.y;d.setWidth(this.width),J?z>0&&H+q+v>this.right&&(W=A.y+=rt,A.line++,H=A.x=ai(o,this.left+v,this.right-i[A.line])):z>0&&W+rt>this.bottom&&(H=A.x=H+e[A.line].width+v,A.line++,W=A.y=ai(o,this.top+ut+v,this.bottom-e[A.line].height));const F=d.x(H);if(U(F,W,_t),H=$5(V,H+R+w,J?H+q:this.right,t.rtl),Z(d.x(H),W,_t),J)A.x+=q+v;else if(typeof _t.text!="string"){const ee=m.lineHeight;A.y+=TM(_t,ee)+v}else A.y+=rt}),aM(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=fi(e.font),s=Ms(e.padding);if(!e.display)return;const o=xc(t.rtl,this.left,this.width),u=this.ctx,h=e.position,d=i.size/2,m=s.top+d;let v,T=this.left,w=this.width;if(this.isHorizontal())w=Math.max(...this.lineWidths),v=this.top+m,T=ai(t.align,T,this.right-w);else{const R=this.columnSizes.reduce((M,k)=>Math.max(M,k.height),0);v=m+ai(t.align,this.top,this.bottom-R-t.labels.padding-this._computeTitleHeight())}const A=ai(h,T,T+w);u.textAlign=o.textAlign(Ub(h)),u.textBaseline="middle",u.strokeStyle=e.color,u.fillStyle=e.color,u.font=i.string,id(u,e.text,A,v,i)}_computeTitleHeight(){const t=this.options.title,e=fi(t.font),i=Ms(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,o;if(df(t,this.left,this.right)&&df(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(s=o[i],df(t,s.left,s.left+s.width)&&df(e,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!BH(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,o=NH(s,i);s&&!o&&Ze(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!o&&Ze(e.onHover,[t,i,this],this)}else i&&Ze(e.onClick,[t,i,this],this)}}function LH(n,t,e,i,s){const o=VH(i,n,t,e),u=zH(s,i,t.lineHeight);return{itemWidth:o,itemHeight:u}}function VH(n,t,e,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((o,u)=>o.length>u.length?o:u)),t+e.size/2+i.measureText(s).width}function zH(n,t,e){let i=n;return typeof t.text!="string"&&(i=TM(t,e)),i}function TM(n,t){const e=n.text?n.text.length:0;return t*e}function BH(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var UH={id:"legend",_element:cA,start(n,t,e){const i=n.legend=new cA({ctx:n.ctx,options:e,chart:n});Rs.configure(n,i,e),Rs.addBox(n,i)},stop(n){Rs.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;Rs.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,s=e.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:s,color:o,useBorderRadius:u,borderRadius:h}}=n.legend.options;return n._getSortedDatasetMetas().map(d=>{const m=d.controller.getStyle(e?0:void 0),v=Ms(m.borderWidth);return{text:t[d.index].label,fillStyle:m.backgroundColor,fontColor:o,hidden:!d.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(v.width+v.height)/4,strokeStyle:m.borderColor,pointStyle:i||m.pointStyle,rotation:m.rotation,textAlign:s||m.textAlign,borderRadius:u&&(h||m.borderRadius),datasetIndex:d.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class wM extends Eu{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const s=Bn(i.text)?i.text.length:1;this._padding=Ms(i.padding);const o=s*fi(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:s,right:o,options:u}=this,h=u.align;let d=0,m,v,T;return this.isHorizontal()?(v=ai(h,i,o),T=e+t,m=o-i):(u.position==="left"?(v=i+t,T=ai(h,s,e),d=Un*-.5):(v=o-t,T=ai(h,e,s),d=Un*.5),m=s-e),{titleX:v,titleY:T,maxWidth:m,rotation:d}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=fi(e.font),o=i.lineHeight/2+this._padding.top,{titleX:u,titleY:h,maxWidth:d,rotation:m}=this._drawArgs(o);id(t,e.text,0,0,i,{color:e.color,maxWidth:d,rotation:m,textAlign:Ub(e.align),textBaseline:"middle",translation:[u,h]})}}function FH(n,t){const e=new wM({ctx:n.ctx,options:t,chart:n});Rs.configure(n,e,t),Rs.addBox(n,e),n.titleBlock=e}var HH={id:"title",_element:wM,start(n,t,e){FH(n,e)},stop(n){const t=n.titleBlock;Rs.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;Rs.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const gf={average(n){if(!n.length)return!1;let t,e,i=new Set,s=0,o=0;for(t=0,e=n.length;t<e;++t){const h=n[t].element;if(h&&h.hasValue()){const d=h.tooltipPosition();i.add(d.x),s+=d.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((h,d)=>h+d)/i.size,y:s/o}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,s=Number.POSITIVE_INFINITY,o,u,h;for(o=0,u=n.length;o<u;++o){const d=n[o].element;if(d&&d.hasValue()){const m=d.getCenterPoint(),v=Hv(t,m);v<s&&(s=v,h=d)}}if(h){const d=h.tooltipPosition();e=d.x,i=d.y}return{x:e,y:i}}};function Ir(n,t){return t&&(Bn(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function go(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function jH(n,t){const{element:e,datasetIndex:i,index:s}=t,o=n.getDatasetMeta(i).controller,{label:u,value:h}=o.getLabelAndValue(s);return{chart:n,label:u,parsed:o.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:h,dataset:o.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function hA(n,t){const e=n.chart.ctx,{body:i,footer:s,title:o}=n,{boxWidth:u,boxHeight:h}=t,d=fi(t.bodyFont),m=fi(t.titleFont),v=fi(t.footerFont),T=o.length,w=s.length,A=i.length,R=Ms(t.padding);let M=R.height,k=0,U=i.reduce((ut,rt)=>ut+rt.before.length+rt.lines.length+rt.after.length,0);if(U+=n.beforeBody.length+n.afterBody.length,T&&(M+=T*m.lineHeight+(T-1)*t.titleSpacing+t.titleMarginBottom),U){const ut=t.displayColors?Math.max(h,d.lineHeight):d.lineHeight;M+=A*ut+(U-A)*d.lineHeight+(U-1)*t.bodySpacing}w&&(M+=t.footerMarginTop+w*v.lineHeight+(w-1)*t.footerSpacing);let Z=0;const J=function(ut){k=Math.max(k,e.measureText(ut).width+Z)};return e.save(),e.font=m.string,Re(n.title,J),e.font=d.string,Re(n.beforeBody.concat(n.afterBody),J),Z=t.displayColors?u+2+t.boxPadding:0,Re(i,ut=>{Re(ut.before,J),Re(ut.lines,J),Re(ut.after,J)}),Z=0,e.font=v.string,Re(n.footer,J),e.restore(),k+=R.width,{width:k,height:M}}function qH(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function GH(n,t,e,i){const{x:s,width:o}=i,u=e.caretSize+e.caretPadding;if(n==="left"&&s+o+u>t.width||n==="right"&&s-o-u<0)return!0}function WH(n,t,e,i){const{x:s,width:o}=e,{width:u,chartArea:{left:h,right:d}}=n;let m="center";return i==="center"?m=s<=(h+d)/2?"left":"right":s<=o/2?m="left":s>=u-o/2&&(m="right"),GH(m,n,t,e)&&(m="center"),m}function fA(n,t,e){const i=e.yAlign||t.yAlign||qH(n,e);return{xAlign:e.xAlign||t.xAlign||WH(n,t,e,i),yAlign:i}}function YH(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function ZH(n,t,e){let{y:i,height:s}=n;return t==="top"?i+=e:t==="bottom"?i-=s+e:i-=s/2,i}function dA(n,t,e,i){const{caretSize:s,caretPadding:o,cornerRadius:u}=n,{xAlign:h,yAlign:d}=e,m=s+o,{topLeft:v,topRight:T,bottomLeft:w,bottomRight:A}=kf(u);let R=YH(t,h);const M=ZH(t,d,m);return d==="center"?h==="left"?R+=m:h==="right"&&(R-=m):h==="left"?R-=Math.max(v,w)+s:h==="right"&&(R+=Math.max(T,A)+s),{x:Is(R,0,i.width-t.width),y:Is(M,0,i.height-t.height)}}function Yp(n,t,e){const i=Ms(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function pA(n){return Ir([],go(n))}function KH(n,t,e){return bu(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function mA(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const SM={beforeTitle:po,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:po,beforeBody:po,beforeLabel:po,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Ge(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:po,afterBody:po,beforeFooter:po,footer:po,afterFooter:po};function Ri(n,t,e,i){const s=n[t].call(e,i);return typeof s>"u"?SM[t].call(e,i):s}class Kv extends Eu{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,o=new uM(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=KH(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,s=Ri(i,"beforeTitle",this,t),o=Ri(i,"title",this,t),u=Ri(i,"afterTitle",this,t);let h=[];return h=Ir(h,go(s)),h=Ir(h,go(o)),h=Ir(h,go(u)),h}getBeforeBody(t,e){return pA(Ri(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return Re(t,o=>{const u={before:[],lines:[],after:[]},h=mA(i,o);Ir(u.before,go(Ri(h,"beforeLabel",this,o))),Ir(u.lines,Ri(h,"label",this,o)),Ir(u.after,go(Ri(h,"afterLabel",this,o))),s.push(u)}),s}getAfterBody(t,e){return pA(Ri(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=Ri(i,"beforeFooter",this,t),o=Ri(i,"footer",this,t),u=Ri(i,"afterFooter",this,t);let h=[];return h=Ir(h,go(s)),h=Ir(h,go(o)),h=Ir(h,go(u)),h}_createItems(t){const e=this._active,i=this.chart.data,s=[],o=[],u=[];let h=[],d,m;for(d=0,m=e.length;d<m;++d)h.push(jH(this.chart,e[d]));return t.filter&&(h=h.filter((v,T,w)=>t.filter(v,T,w,i))),t.itemSort&&(h=h.sort((v,T)=>t.itemSort(v,T,i))),Re(h,v=>{const T=mA(t.callbacks,v);s.push(Ri(T,"labelColor",this,v)),o.push(Ri(T,"labelPointStyle",this,v)),u.push(Ri(T,"labelTextColor",this,v))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=u,this.dataPoints=h,h}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let o,u=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const h=gf[i.position].call(this,s,this._eventPosition);u=this._createItems(i),this.title=this.getTitle(u,i),this.beforeBody=this.getBeforeBody(u,i),this.body=this.getBody(u,i),this.afterBody=this.getAfterBody(u,i),this.footer=this.getFooter(u,i);const d=this._size=hA(this,i),m=Object.assign({},h,d),v=fA(this.chart,i,m),T=dA(i,m,v,this.chart);this.xAlign=v.xAlign,this.yAlign=v.yAlign,o={opacity:1,x:T.x,y:T.y,width:d.width,height:d.height,caretX:h.x,caretY:h.y}}this._tooltipItems=u,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const o=this.getCaretPosition(t,i,s);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:o}=this,{caretSize:u,cornerRadius:h}=i,{topLeft:d,topRight:m,bottomLeft:v,bottomRight:T}=kf(h),{x:w,y:A}=t,{width:R,height:M}=e;let k,U,Z,J,ut,rt;return o==="center"?(ut=A+M/2,s==="left"?(k=w,U=k-u,J=ut+u,rt=ut-u):(k=w+R,U=k+u,J=ut-u,rt=ut+u),Z=k):(s==="left"?U=w+Math.max(d,v)+u:s==="right"?U=w+R-Math.max(m,T)-u:U=this.caretX,o==="top"?(J=A,ut=J-u,k=U-u,Z=U+u):(J=A+M,ut=J+u,k=U+u,Z=U-u),rt=J),{x1:k,x2:U,x3:Z,y1:J,y2:ut,y3:rt}}drawTitle(t,e,i){const s=this.title,o=s.length;let u,h,d;if(o){const m=xc(i.rtl,this.x,this.width);for(t.x=Yp(this,i.titleAlign,i),e.textAlign=m.textAlign(i.titleAlign),e.textBaseline="middle",u=fi(i.titleFont),h=i.titleSpacing,e.fillStyle=i.titleColor,e.font=u.string,d=0;d<o;++d)e.fillText(s[d],m.x(t.x),t.y+u.lineHeight/2),t.y+=u.lineHeight+h,d+1===o&&(t.y+=i.titleMarginBottom-h)}}_drawColorBox(t,e,i,s,o){const u=this.labelColors[i],h=this.labelPointStyles[i],{boxHeight:d,boxWidth:m}=o,v=fi(o.bodyFont),T=Yp(this,"left",o),w=s.x(T),A=d<v.lineHeight?(v.lineHeight-d)/2:0,R=e.y+A;if(o.usePointStyle){const M={radius:Math.min(m,d)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},k=s.leftForLtr(w,m)+m/2,U=R+d/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,qv(t,M,k,U),t.strokeStyle=u.borderColor,t.fillStyle=u.backgroundColor,qv(t,M,k,U)}else{t.lineWidth=Te(u.borderWidth)?Math.max(...Object.values(u.borderWidth)):u.borderWidth||1,t.strokeStyle=u.borderColor,t.setLineDash(u.borderDash||[]),t.lineDashOffset=u.borderDashOffset||0;const M=s.leftForLtr(w,m),k=s.leftForLtr(s.xPlus(w,1),m-2),U=kf(u.borderRadius);Object.values(U).some(Z=>Z!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Gv(t,{x:M,y:R,w:m,h:d,radius:U}),t.fill(),t.stroke(),t.fillStyle=u.backgroundColor,t.beginPath(),Gv(t,{x:k,y:R+1,w:m-2,h:d-2,radius:U}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(M,R,m,d),t.strokeRect(M,R,m,d),t.fillStyle=u.backgroundColor,t.fillRect(k,R+1,m-2,d-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:o,bodyAlign:u,displayColors:h,boxHeight:d,boxWidth:m,boxPadding:v}=i,T=fi(i.bodyFont);let w=T.lineHeight,A=0;const R=xc(i.rtl,this.x,this.width),M=function(N){e.fillText(N,R.x(t.x+A),t.y+w/2),t.y+=w+o},k=R.textAlign(u);let U,Z,J,ut,rt,_t,z;for(e.textAlign=u,e.textBaseline="middle",e.font=T.string,t.x=Yp(this,k,i),e.fillStyle=i.bodyColor,Re(this.beforeBody,M),A=h&&k!=="right"?u==="center"?m/2+v:m+2+v:0,ut=0,_t=s.length;ut<_t;++ut){for(U=s[ut],Z=this.labelTextColors[ut],e.fillStyle=Z,Re(U.before,M),J=U.lines,h&&J.length&&(this._drawColorBox(e,t,ut,R,i),w=Math.max(T.lineHeight,d)),rt=0,z=J.length;rt<z;++rt)M(J[rt]),w=T.lineHeight;Re(U.after,M)}A=0,w=T.lineHeight,Re(this.afterBody,M),t.y-=o}drawFooter(t,e,i){const s=this.footer,o=s.length;let u,h;if(o){const d=xc(i.rtl,this.x,this.width);for(t.x=Yp(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=d.textAlign(i.footerAlign),e.textBaseline="middle",u=fi(i.footerFont),e.fillStyle=i.footerColor,e.font=u.string,h=0;h<o;++h)e.fillText(s[h],d.x(t.x),t.y+u.lineHeight/2),t.y+=u.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:o,yAlign:u}=this,{x:h,y:d}=t,{width:m,height:v}=i,{topLeft:T,topRight:w,bottomLeft:A,bottomRight:R}=kf(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(h+T,d),u==="top"&&this.drawCaret(t,e,i,s),e.lineTo(h+m-w,d),e.quadraticCurveTo(h+m,d,h+m,d+w),u==="center"&&o==="right"&&this.drawCaret(t,e,i,s),e.lineTo(h+m,d+v-R),e.quadraticCurveTo(h+m,d+v,h+m-R,d+v),u==="bottom"&&this.drawCaret(t,e,i,s),e.lineTo(h+A,d+v),e.quadraticCurveTo(h,d+v,h,d+v-A),u==="center"&&o==="left"&&this.drawCaret(t,e,i,s),e.lineTo(h,d+T),e.quadraticCurveTo(h,d,h+T,d),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,o=i&&i.y;if(s||o){const u=gf[t.position].call(this,this._active,this._eventPosition);if(!u)return;const h=this._size=hA(this,t),d=Object.assign({},u,this._size),m=fA(e,t,d),v=dA(t,d,m,e);(s._to!==v.x||o._to!==v.y)&&(this.xAlign=m.xAlign,this.yAlign=m.yAlign,this.width=h.width,this.height=h.height,this.caretX=u.x,this.caretY=u.y,this._resolveAnimations().update(this,v))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const u=Ms(e.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&h&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,s,e),oM(t,e.textDirection),o.y+=u.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),aM(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map(({datasetIndex:h,index:d})=>{const m=this.chart.getDatasetMeta(h);if(!m)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:m.data[d],index:d}}),o=!$m(i,s),u=this._positionChanged(s,e);(o||u)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],u=this._getActiveElements(t,o,e,i),h=this._positionChanged(u,t),d=e||!$m(u,o)||h;return d&&(this._active=u,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),d}_getActiveElements(t,e,i,s){const o=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const u=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&u.reverse(),u}_positionChanged(t,e){const{caretX:i,caretY:s,options:o}=this,u=gf[o.position].call(this,t,e);return u!==!1&&(i!==u.x||s!==u.y)}}Qt(Kv,"positioners",gf);var $H={id:"tooltip",_element:Kv,positioners:gf,afterInit(n,t,e){e&&(n.tooltip=new Kv({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:SM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const QH=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function XH(n,t,e,i){const s=n.indexOf(t);if(s===-1)return QH(n,t,e,i);const o=n.lastIndexOf(t);return s!==o?e:s}const JH=(n,t)=>n===null?null:Is(Math.round(n),0,t);function gA(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class $v extends eh{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:s,label:o}of e)i[s]===o&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Ge(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:XH(i,t,_e(e,t),this._addedLabels),JH(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let u=t;u<=e;u++)s.push({value:u});return s}getLabelForValue(t){return gA.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Qt($v,"id","category"),Qt($v,"defaults",{ticks:{callback:gA}});function t8(n,t){const e=[],{bounds:s,step:o,min:u,max:h,precision:d,count:m,maxTicks:v,maxDigits:T,includeBounds:w}=n,A=o||1,R=v-1,{min:M,max:k}=t,U=!Ge(u),Z=!Ge(h),J=!Ge(m),ut=(k-M)/(T+1);let rt=EC((k-M)/R/A)*A,_t,z,N,V;if(rt<1e-14&&!U&&!Z)return[{value:M},{value:k}];V=Math.ceil(k/rt)-Math.floor(M/rt),V>R&&(rt=EC(V*rt/R/A)*A),Ge(d)||(_t=Math.pow(10,d),rt=Math.ceil(rt*_t)/_t),s==="ticks"?(z=Math.floor(M/rt)*rt,N=Math.ceil(k/rt)*rt):(z=M,N=k),U&&Z&&o&&B5((h-u)/o,rt/1e3)?(V=Math.round(Math.min((h-u)/rt,v)),rt=(h-u)/V,z=u,N=h):J?(z=U?u:z,N=Z?h:N,V=m-1,rt=(N-z)/V):(V=(N-z)/rt,Pf(V,Math.round(V),rt/1e3)?V=Math.round(V):V=Math.ceil(V));const q=Math.max(TC(rt),TC(z));_t=Math.pow(10,Ge(d)?q:d),z=Math.round(z*_t)/_t,N=Math.round(N*_t)/_t;let H=0;for(U&&(w&&z!==u?(e.push({value:u}),z<u&&H++,Pf(Math.round((z+H*rt)*_t)/_t,u,_A(u,ut,n))&&H++):z<u&&H++);H<V;++H){const W=Math.round((z+H*rt)*_t)/_t;if(Z&&W>h)break;e.push({value:W})}return Z&&w&&N!==h?e.length&&Pf(e[e.length-1].value,h,_A(h,ut,n))?e[e.length-1].value=h:e.push({value:h}):(!Z||N===h)&&e.push({value:N}),e}function _A(n,t,{horizontal:e,minRotation:i}){const s=Ql(i),o=(e?Math.sin(s):Math.cos(s))||.001,u=.75*t*(""+n).length;return Math.min(t/o,u)}class e8 extends eh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Ge(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:o}=this;const u=d=>s=e?s:d,h=d=>o=i?o:d;if(t){const d=zc(s),m=zc(o);d<0&&m<0?h(0):d>0&&m>0&&u(0)}if(s===o){let d=o===0?1:Math.abs(o*.05);h(o+d),t||u(s-d)}this.min=s,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,u=t8(s,o);return t.bounds==="ticks"&&U5(u,this,"value"),t.reverse?(u.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),u}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return QP(t,this.chart.options.locale,this.options.ticks.format)}}class Qv extends e8{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Ps(t)?t:0,this.max=Ps(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Ql(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Qt(Qv,"id","linear"),Qt(Qv,"defaults",{ticks:{callback:XP.formatters.numeric}});const Bg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Mi=Object.keys(Bg);function yA(n,t){return n-t}function vA(n,t){if(Ge(t))return null;const e=n._adapter,{parser:i,round:s,isoWeekday:o}=n._parseOpts;let u=t;return typeof i=="function"&&(u=i(u)),Ps(u)||(u=typeof i=="string"?e.parse(u,i):e.parse(u)),u===null?null:(s&&(u=s==="week"&&(ed(o)||o===!0)?e.startOf(u,"isoWeek",o):e.startOf(u,s)),+u)}function bA(n,t,e,i){const s=Mi.length;for(let o=Mi.indexOf(n);o<s-1;++o){const u=Bg[Mi[o]],h=u.steps?u.steps:Number.MAX_SAFE_INTEGER;if(u.common&&Math.ceil((e-t)/(h*u.size))<=i)return Mi[o]}return Mi[s-1]}function n8(n,t,e,i,s){for(let o=Mi.length-1;o>=Mi.indexOf(e);o--){const u=Mi[o];if(Bg[u].common&&n._adapter.diff(s,i,u)>=t-1)return u}return Mi[e?Mi.indexOf(e):0]}function i8(n){for(let t=Mi.indexOf(n)+1,e=Mi.length;t<e;++t)if(Bg[Mi[t]].common)return Mi[t]}function EA(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:s}=Bb(e,t),o=e[i]>=t?e[i]:e[s];n[o]=!0}}function s8(n,t,e,i){const s=n._adapter,o=+s.startOf(t[0].value,i),u=t[t.length-1].value;let h,d;for(h=o;h<=u;h=+s.add(h,1,i))d=e[h],d>=0&&(t[d].major=!0);return t}function TA(n,t,e){const i=[],s={},o=t.length;let u,h;for(u=0;u<o;++u)h=t[u],s[h]=u,i.push({value:h,major:!1});return o===0||!e?i:s8(n,i,s,e)}class ig extends eh{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new _9._date(t.adapters.date);s.init(e),Rf(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:vA(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:o,minDefined:u,maxDefined:h}=this.getUserBounds();function d(m){!u&&!isNaN(m.min)&&(s=Math.min(s,m.min)),!h&&!isNaN(m.max)&&(o=Math.max(o,m.max))}(!u||!h)&&(d(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&d(this.getMinMax(!1))),s=Ps(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),o=Ps(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,u=this.max,h=W5(s,o,u);return this._unit=e.unit||(i.autoSkip?bA(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):n8(this,h.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:i8(this._unit),this.initOffsets(s),t.reverse&&h.reverse(),TA(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const u=t.length<3?.5:.25;e=Is(e,0,u),i=Is(i,0,u),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,o=s.time,u=o.unit||bA(o.minUnit,e,i,this._getLabelCapacity(e)),h=_e(s.ticks.stepSize,1),d=u==="week"?o.isoWeekday:!1,m=ed(d)||d===!0,v={};let T=e,w,A;if(m&&(T=+t.startOf(T,"isoWeek",d)),T=+t.startOf(T,m?"day":u),t.diff(i,e,u)>1e5*h)throw new Error(e+" and "+i+" are too far apart with stepSize of "+h+" "+u);const R=s.ticks.source==="data"&&this.getDataTimestamps();for(w=T,A=0;w<i;w=+t.add(w,h,u),A++)EA(v,w,R);return(w===i||s.bounds==="ticks"||A===1)&&EA(v,w,R),Object.keys(v).sort(yA).map(M=>+M)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,o=this._unit,u=e||s[o];return this._adapter.format(t,u)}_tickFormatFunction(t,e,i,s){const o=this.options,u=o.ticks.callback;if(u)return Ze(u,[t,e,i],this);const h=o.time.displayFormats,d=this._unit,m=this._majorUnit,v=d&&h[d],T=m&&h[m],w=i[e],A=m&&T&&w&&w.major;return this._adapter.format(t,s||(A?T:v))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=Ql(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(s),u=Math.sin(s),h=this._resolveTickFontOptions(0).size;return{w:i*o+h*u,h:i*u+h*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,TA(this,[t],this._majorUnit),s),u=this._getLabelSize(o),h=Math.floor(this.isHorizontal()?this.width/u.w:this.height/u.h)-1;return h>0?h:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,i=s.length;e<i;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(vA(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Z5(t.sort(yA))}}Qt(ig,"id","time"),Qt(ig,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Zp(n,t,e){let i=0,s=n.length-1,o,u,h,d;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=Xl(n,"pos",t)),{pos:o,time:h}=n[i],{pos:u,time:d}=n[s]):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=Xl(n,"time",t)),{time:o,pos:h}=n[i],{time:u,pos:d}=n[s]);const m=u-o;return m?h+(d-h)*(t-o)/m:h}class wA extends ig{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Zp(e,this.min),this._tableRange=Zp(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],o=[];let u,h,d,m,v;for(u=0,h=t.length;u<h;++u)m=t[u],m>=e&&m<=i&&s.push(m);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(u=0,h=s.length;u<h;++u)v=s[u+1],d=s[u-1],m=s[u],Math.round((v+d)/2)!==m&&o.push({time:m,pos:u/(h-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((s,o)=>s-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Zp(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Zp(this._table,i*this._tableRange+this._minPos,!0)}}Qt(wA,"id","timeseries"),Qt(wA,"defaults",ig.defaults);const xM="label";function SA(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function r8(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function CM(n,t){n.labels=t}function AM(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xM;const i=[];n.datasets=t.map(s=>{const o=n.datasets.find(u=>u[e]===s[e]);return!o||!s.data||i.includes(o)?{...s}:(i.push(o),Object.assign(o,s),o)})}function o8(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xM;const e={labels:[],datasets:[]};return CM(e,n.labels),AM(e,n.datasets,t),e}function a8(n,t){const{height:e=150,width:i=300,redraw:s=!1,datasetIdKey:o,type:u,data:h,options:d,plugins:m=[],fallbackContent:v,updateMode:T,...w}=n,A=$.useRef(null),R=$.useRef(null),M=()=>{A.current&&(R.current=new zg(A.current,{type:u,data:o8(h,o),options:d&&{...d},plugins:m}),SA(t,R.current))},k=()=>{SA(t,null),R.current&&(R.current.destroy(),R.current=null)};return $.useEffect(()=>{!s&&R.current&&d&&r8(R.current,d)},[s,d]),$.useEffect(()=>{!s&&R.current&&CM(R.current.config.data,h.labels)},[s,h.labels]),$.useEffect(()=>{!s&&R.current&&h.datasets&&AM(R.current.config.data,h.datasets,o)},[s,h.datasets]),$.useEffect(()=>{R.current&&(s?(k(),setTimeout(M)):R.current.update(T))},[s,d,h.labels,h.datasets,T]),$.useEffect(()=>{R.current&&(k(),setTimeout(M))},[u]),$.useEffect(()=>(M(),()=>k()),[]),Cc.createElement("canvas",{ref:A,role:"img",height:e,width:i,...w},v)}const l8=$.forwardRef(a8);function u8(n,t){return zg.register(t),$.forwardRef((e,i)=>Cc.createElement(l8,{...e,ref:i,type:n}))}const c8=u8("line",cm);function IM(n,t){const e=$.useRef(t);$.useEffect(function(){t!==e.current&&n.attributionControl!=null&&(e.current!=null&&n.attributionControl.removeAttribution(e.current),t!=null&&n.attributionControl.addAttribution(t)),e.current=t},[n,t])}function h8(n,t,e){t.center!==e.center&&n.setLatLng(t.center),t.radius!=null&&t.radius!==e.radius&&n.setRadius(t.radius)}const f8=1;function d8(n){return Object.freeze({__version:f8,map:n})}function RM(n,t){return Object.freeze({...n,...t})}const $b=$.createContext(null);function Qb(){const n=$.use($b);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function p8(n){function t(e,i){const{instance:s,context:o}=n(e).current;$.useImperativeHandle(i,()=>s);const{children:u}=e;return u==null?null:Cc.createElement($b,{value:o},u)}return $.forwardRef(t)}function m8(n){function t(e,i){const[s,o]=$.useState(!1),{instance:u}=n(e,o).current;$.useImperativeHandle(i,()=>u),$.useEffect(function(){s&&u.update()},[u,s,e.children]);const h=u._contentNode;return h?ID.createPortal(e.children,h):null}return $.forwardRef(t)}function g8(n){function t(e,i){const{instance:s}=n(e).current;return $.useImperativeHandle(i,()=>s),null}return $.forwardRef(t)}function Xb(n,t){const e=$.useRef(void 0);$.useEffect(function(){return t!=null&&n.instance.on(t),e.current=t,function(){e.current!=null&&n.instance.off(e.current),e.current=null}},[n,t])}function Ug(n,t){const e=n.pane??t.pane;return e?{...n,pane:e}:n}function _8(n,t){return function(i,s){const o=Qb(),u=n(Ug(i,o),o);return IM(o.map,i.attribution),Xb(u.current,i.eventHandlers),t(u.current,o,i,s),u}}var _f={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var y8=_f.exports,xA;function v8(){return xA||(xA=1,function(n,t){(function(e,i){i(t)})(y8,function(e){var i="1.9.4";function s(l){var f,_,E,x;for(_=1,E=arguments.length;_<E;_++){x=arguments[_];for(f in x)l[f]=x[f]}return l}var o=Object.create||function(){function l(){}return function(f){return l.prototype=f,new l}}();function u(l,f){var _=Array.prototype.slice;if(l.bind)return l.bind.apply(l,_.call(arguments,1));var E=_.call(arguments,2);return function(){return l.apply(f,E.length?E.concat(_.call(arguments)):arguments)}}var h=0;function d(l){return"_leaflet_id"in l||(l._leaflet_id=++h),l._leaflet_id}function m(l,f,_){var E,x,P,j;return j=function(){E=!1,x&&(P.apply(_,x),x=!1)},P=function(){E?x=arguments:(l.apply(_,arguments),setTimeout(j,f),E=!0)},P}function v(l,f,_){var E=f[1],x=f[0],P=E-x;return l===E&&_?l:((l-x)%P+P)%P+x}function T(){return!1}function w(l,f){if(f===!1)return l;var _=Math.pow(10,f===void 0?6:f);return Math.round(l*_)/_}function A(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function R(l){return A(l).split(/\s+/)}function M(l,f){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?o(l.options):{});for(var _ in f)l.options[_]=f[_];return l.options}function k(l,f,_){var E=[];for(var x in l)E.push(encodeURIComponent(_?x.toUpperCase():x)+"="+encodeURIComponent(l[x]));return(!f||f.indexOf("?")===-1?"?":"&")+E.join("&")}var U=/\{ *([\w_ -]+) *\}/g;function Z(l,f){return l.replace(U,function(_,E){var x=f[E];if(x===void 0)throw new Error("No value provided for variable "+_);return typeof x=="function"&&(x=x(f)),x})}var J=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function ut(l,f){for(var _=0;_<l.length;_++)if(l[_]===f)return _;return-1}var rt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function _t(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var z=0;function N(l){var f=+new Date,_=Math.max(0,16-(f-z));return z=f+_,window.setTimeout(l,_)}var V=window.requestAnimationFrame||_t("RequestAnimationFrame")||N,q=window.cancelAnimationFrame||_t("CancelAnimationFrame")||_t("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function H(l,f,_){if(_&&V===N)l.call(f);else return V.call(window,u(l,f))}function W(l){l&&q.call(window,l)}var F={__proto__:null,extend:s,create:o,bind:u,get lastId(){return h},stamp:d,throttle:m,wrapNum:v,falseFn:T,formatNum:w,trim:A,splitWords:R,setOptions:M,getParamString:k,template:Z,isArray:J,indexOf:ut,emptyImageUrl:rt,requestFn:V,cancelFn:q,requestAnimFrame:H,cancelAnimFrame:W};function ee(){}ee.extend=function(l){var f=function(){M(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},_=f.__super__=this.prototype,E=o(_);E.constructor=f,f.prototype=E;for(var x in this)Object.prototype.hasOwnProperty.call(this,x)&&x!=="prototype"&&x!=="__super__"&&(f[x]=this[x]);return l.statics&&s(f,l.statics),l.includes&&(Gt(l.includes),s.apply(null,[E].concat(l.includes))),s(E,l),delete E.statics,delete E.includes,E.options&&(E.options=_.options?o(_.options):{},s(E.options,l.options)),E._initHooks=[],E.callInitHooks=function(){if(!this._initHooksCalled){_.callInitHooks&&_.callInitHooks.call(this),this._initHooksCalled=!0;for(var P=0,j=E._initHooks.length;P<j;P++)E._initHooks[P].call(this)}},f},ee.include=function(l){var f=this.prototype.options;return s(this.prototype,l),l.options&&(this.prototype.options=f,this.mergeOptions(l.options)),this},ee.mergeOptions=function(l){return s(this.prototype.options,l),this},ee.addInitHook=function(l){var f=Array.prototype.slice.call(arguments,1),_=typeof l=="function"?l:function(){this[l].apply(this,f)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(_),this};function Gt(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=J(l)?l:[l];for(var f=0;f<l.length;f++)l[f]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var nt={on:function(l,f,_){if(typeof l=="object")for(var E in l)this._on(E,l[E],f);else{l=R(l);for(var x=0,P=l.length;x<P;x++)this._on(l[x],f,_)}return this},off:function(l,f,_){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var E in l)this._off(E,l[E],f);else{l=R(l);for(var x=arguments.length===1,P=0,j=l.length;P<j;P++)x?this._off(l[P]):this._off(l[P],f,_)}return this},_on:function(l,f,_,E){if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}if(this._listens(l,f,_)===!1){_===this&&(_=void 0);var x={fn:f,ctx:_};E&&(x.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(x)}},_off:function(l,f,_){var E,x,P;if(this._events&&(E=this._events[l],!!E)){if(arguments.length===1){if(this._firingCount)for(x=0,P=E.length;x<P;x++)E[x].fn=T;delete this._events[l];return}if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}var j=this._listens(l,f,_);if(j!==!1){var X=E[j];this._firingCount&&(X.fn=T,this._events[l]=E=E.slice()),E.splice(j,1)}}},fire:function(l,f,_){if(!this.listens(l,_))return this;var E=s({},f,{type:l,target:this,sourceTarget:f&&f.sourceTarget||this});if(this._events){var x=this._events[l];if(x){this._firingCount=this._firingCount+1||1;for(var P=0,j=x.length;P<j;P++){var X=x[P],ot=X.fn;X.once&&this.off(l,ot,X.ctx),ot.call(X.ctx||this,E)}this._firingCount--}}return _&&this._propagateEvent(E),this},listens:function(l,f,_,E){typeof l!="string"&&console.warn('"string" type argument expected');var x=f;typeof f!="function"&&(E=!!f,x=void 0,_=void 0);var P=this._events&&this._events[l];if(P&&P.length&&this._listens(l,x,_)!==!1)return!0;if(E){for(var j in this._eventParents)if(this._eventParents[j].listens(l,f,_,E))return!0}return!1},_listens:function(l,f,_){if(!this._events)return!1;var E=this._events[l]||[];if(!f)return!!E.length;_===this&&(_=void 0);for(var x=0,P=E.length;x<P;x++)if(E[x].fn===f&&E[x].ctx===_)return x;return!1},once:function(l,f,_){if(typeof l=="object")for(var E in l)this._on(E,l[E],f,!0);else{l=R(l);for(var x=0,P=l.length;x<P;x++)this._on(l[x],f,_,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[d(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[d(l)],this},_propagateEvent:function(l){for(var f in this._eventParents)this._eventParents[f].fire(l.type,s({layer:l.target,propagatedFrom:l.target},l),!0)}};nt.addEventListener=nt.on,nt.removeEventListener=nt.clearAllEventListeners=nt.off,nt.addOneTimeEventListener=nt.once,nt.fireEvent=nt.fire,nt.hasEventListeners=nt.listens;var Et=ee.extend(nt);function vt(l,f,_){this.x=_?Math.round(l):l,this.y=_?Math.round(f):f}var Xt=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};vt.prototype={clone:function(){return new vt(this.x,this.y)},add:function(l){return this.clone()._add(B(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(B(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new vt(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new vt(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Xt(this.x),this.y=Xt(this.y),this},distanceTo:function(l){l=B(l);var f=l.x-this.x,_=l.y-this.y;return Math.sqrt(f*f+_*_)},equals:function(l){return l=B(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=B(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function B(l,f,_){return l instanceof vt?l:J(l)?new vt(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new vt(l.x,l.y):new vt(l,f,_)}function lt(l,f){if(l)for(var _=f?[l,f]:l,E=0,x=_.length;E<x;E++)this.extend(_[E])}lt.prototype={extend:function(l){var f,_;if(!l)return this;if(l instanceof vt||typeof l[0]=="number"||"x"in l)f=_=B(l);else if(l=bt(l),f=l.min,_=l.max,!f||!_)return this;return!this.min&&!this.max?(this.min=f.clone(),this.max=_.clone()):(this.min.x=Math.min(f.x,this.min.x),this.max.x=Math.max(_.x,this.max.x),this.min.y=Math.min(f.y,this.min.y),this.max.y=Math.max(_.y,this.max.y)),this},getCenter:function(l){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var f,_;return typeof l[0]=="number"||l instanceof vt?l=B(l):l=bt(l),l instanceof lt?(f=l.min,_=l.max):f=_=l,f.x>=this.min.x&&_.x<=this.max.x&&f.y>=this.min.y&&_.y<=this.max.y},intersects:function(l){l=bt(l);var f=this.min,_=this.max,E=l.min,x=l.max,P=x.x>=f.x&&E.x<=_.x,j=x.y>=f.y&&E.y<=_.y;return P&&j},overlaps:function(l){l=bt(l);var f=this.min,_=this.max,E=l.min,x=l.max,P=x.x>f.x&&E.x<_.x,j=x.y>f.y&&E.y<_.y;return P&&j},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var f=this.min,_=this.max,E=Math.abs(f.x-_.x)*l,x=Math.abs(f.y-_.y)*l;return bt(B(f.x-E,f.y-x),B(_.x+E,_.y+x))},equals:function(l){return l?(l=bt(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function bt(l,f){return!l||l instanceof lt?l:new lt(l,f)}function mt(l,f){if(l)for(var _=f?[l,f]:l,E=0,x=_.length;E<x;E++)this.extend(_[E])}mt.prototype={extend:function(l){var f=this._southWest,_=this._northEast,E,x;if(l instanceof At)E=l,x=l;else if(l instanceof mt){if(E=l._southWest,x=l._northEast,!E||!x)return this}else return l?this.extend(Tt(l)||xt(l)):this;return!f&&!_?(this._southWest=new At(E.lat,E.lng),this._northEast=new At(x.lat,x.lng)):(f.lat=Math.min(E.lat,f.lat),f.lng=Math.min(E.lng,f.lng),_.lat=Math.max(x.lat,_.lat),_.lng=Math.max(x.lng,_.lng)),this},pad:function(l){var f=this._southWest,_=this._northEast,E=Math.abs(f.lat-_.lat)*l,x=Math.abs(f.lng-_.lng)*l;return new mt(new At(f.lat-E,f.lng-x),new At(_.lat+E,_.lng+x))},getCenter:function(){return new At((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new At(this.getNorth(),this.getWest())},getSouthEast:function(){return new At(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof At||"lat"in l?l=Tt(l):l=xt(l);var f=this._southWest,_=this._northEast,E,x;return l instanceof mt?(E=l.getSouthWest(),x=l.getNorthEast()):E=x=l,E.lat>=f.lat&&x.lat<=_.lat&&E.lng>=f.lng&&x.lng<=_.lng},intersects:function(l){l=xt(l);var f=this._southWest,_=this._northEast,E=l.getSouthWest(),x=l.getNorthEast(),P=x.lat>=f.lat&&E.lat<=_.lat,j=x.lng>=f.lng&&E.lng<=_.lng;return P&&j},overlaps:function(l){l=xt(l);var f=this._southWest,_=this._northEast,E=l.getSouthWest(),x=l.getNorthEast(),P=x.lat>f.lat&&E.lat<_.lat,j=x.lng>f.lng&&E.lng<_.lng;return P&&j},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,f){return l?(l=xt(l),this._southWest.equals(l.getSouthWest(),f)&&this._northEast.equals(l.getNorthEast(),f)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function xt(l,f){return l instanceof mt?l:new mt(l,f)}function At(l,f,_){if(isNaN(l)||isNaN(f))throw new Error("Invalid LatLng object: ("+l+", "+f+")");this.lat=+l,this.lng=+f,_!==void 0&&(this.alt=+_)}At.prototype={equals:function(l,f){if(!l)return!1;l=Tt(l);var _=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return _<=(f===void 0?1e-9:f)},toString:function(l){return"LatLng("+w(this.lat,l)+", "+w(this.lng,l)+")"},distanceTo:function(l){return de.distance(this,Tt(l))},wrap:function(){return de.wrapLatLng(this)},toBounds:function(l){var f=180*l/40075017,_=f/Math.cos(Math.PI/180*this.lat);return xt([this.lat-f,this.lng-_],[this.lat+f,this.lng+_])},clone:function(){return new At(this.lat,this.lng,this.alt)}};function Tt(l,f,_){return l instanceof At?l:J(l)&&typeof l[0]!="object"?l.length===3?new At(l[0],l[1],l[2]):l.length===2?new At(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new At(l.lat,"lng"in l?l.lng:l.lon,l.alt):f===void 0?null:new At(l,f,_)}var Pe={latLngToPoint:function(l,f){var _=this.projection.project(l),E=this.scale(f);return this.transformation._transform(_,E)},pointToLatLng:function(l,f){var _=this.scale(f),E=this.transformation.untransform(l,_);return this.projection.unproject(E)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var f=this.projection.bounds,_=this.scale(l),E=this.transformation.transform(f.min,_),x=this.transformation.transform(f.max,_);return new lt(E,x)},infinite:!1,wrapLatLng:function(l){var f=this.wrapLng?v(l.lng,this.wrapLng,!0):l.lng,_=this.wrapLat?v(l.lat,this.wrapLat,!0):l.lat,E=l.alt;return new At(_,f,E)},wrapLatLngBounds:function(l){var f=l.getCenter(),_=this.wrapLatLng(f),E=f.lat-_.lat,x=f.lng-_.lng;if(E===0&&x===0)return l;var P=l.getSouthWest(),j=l.getNorthEast(),X=new At(P.lat-E,P.lng-x),ot=new At(j.lat-E,j.lng-x);return new mt(X,ot)}},de=s({},Pe,{wrapLng:[-180,180],R:6371e3,distance:function(l,f){var _=Math.PI/180,E=l.lat*_,x=f.lat*_,P=Math.sin((f.lat-l.lat)*_/2),j=Math.sin((f.lng-l.lng)*_/2),X=P*P+Math.cos(E)*Math.cos(x)*j*j,ot=2*Math.atan2(Math.sqrt(X),Math.sqrt(1-X));return this.R*ot}}),Ni=6378137,os={R:Ni,MAX_LATITUDE:85.0511287798,project:function(l){var f=Math.PI/180,_=this.MAX_LATITUDE,E=Math.max(Math.min(_,l.lat),-_),x=Math.sin(E*f);return new vt(this.R*l.lng*f,this.R*Math.log((1+x)/(1-x))/2)},unproject:function(l){var f=180/Math.PI;return new At((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*f,l.x*f/this.R)},bounds:function(){var l=Ni*Math.PI;return new lt([-l,-l],[l,l])}()};function Li(l,f,_,E){if(J(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=f,this._c=_,this._d=E}Li.prototype={transform:function(l,f){return this._transform(l.clone(),f)},_transform:function(l,f){return f=f||1,l.x=f*(this._a*l.x+this._b),l.y=f*(this._c*l.y+this._d),l},untransform:function(l,f){return f=f||1,new vt((l.x/f-this._b)/this._a,(l.y/f-this._d)/this._c)}};function Vi(l,f,_,E){return new Li(l,f,_,E)}var Os=s({},de,{code:"EPSG:3857",projection:os,transformation:function(){var l=.5/(Math.PI*os.R);return Vi(l,.5,-l,.5)}()}),Ur=s({},Os,{code:"EPSG:900913"});function Do(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function ol(l,f){var _="",E,x,P,j,X,ot;for(E=0,P=l.length;E<P;E++){for(X=l[E],x=0,j=X.length;x<j;x++)ot=X[x],_+=(x?"L":"M")+ot.x+" "+ot.y;_+=f?kt.svg?"z":"x":""}return _||"M0 0"}var Qn=document.documentElement.style,No="ActiveXObject"in window,al=No&&!document.addEventListener,Fr="msLaunchUri"in navigator&&!("documentMode"in document),ks=Jn("webkit"),Tu=Jn("android"),Hr=Jn("android 2")||Jn("android 3"),ll=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),wu=Tu&&Jn("Google")&&ll<537&&!("AudioNode"in window),ze=!!window.opera,ye=!Fr&&Jn("chrome"),Xn=Jn("gecko")&&!ks&&!ze&&!No,An=!ye&&Jn("safari"),ul=Jn("phantom"),Su="OTransition"in Qn,jr=navigator.platform.indexOf("Win")===0,lr=No&&"transition"in Qn,Ds="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Hr,Ei="MozPerspective"in Qn,Lo=!window.L_DISABLE_3D&&(lr||Ds||Ei)&&!Su&&!ul,zi=typeof orientation<"u"||Jn("mobile"),cl=zi&&ks,hl=zi&&Ds,Vo=!window.PointerEvent&&window.MSPointerEvent,as=!!(window.PointerEvent||Vo),ls="ontouchstart"in window||!!window.TouchEvent,fl=!window.L_NO_TOUCH&&(ls||as),us=zi&&ze,dl=zi&&Xn,ur=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,zo=function(){var l=!1;try{var f=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",T,f),window.removeEventListener("testPassiveEventSupport",T,f)}catch{}return l}(),cr=function(){return!!document.createElement("canvas").getContext}(),Bo=!!(document.createElementNS&&Do("svg").createSVGRect),Be=!!Bo&&function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ln=!Bo&&function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var f=l.firstChild;return f.style.behavior="url(#default#VML)",f&&typeof f.adj=="object"}catch{return!1}}(),sn=navigator.platform.indexOf("Mac")===0,Ti=navigator.platform.indexOf("Linux")===0;function Jn(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var kt={ie:No,ielt9:al,edge:Fr,webkit:ks,android:Tu,android23:Hr,androidStock:wu,opera:ze,chrome:ye,gecko:Xn,safari:An,phantom:ul,opera12:Su,win:jr,ie3d:lr,webkit3d:Ds,gecko3d:Ei,any3d:Lo,mobile:zi,mobileWebkit:cl,mobileWebkit3d:hl,msPointer:Vo,pointer:as,touch:fl,touchNative:ls,mobileOpera:us,mobileGecko:dl,retina:ur,passiveEvents:zo,canvas:cr,svg:Bo,vml:ln,inlineSvg:Be,mac:sn,linux:Ti},Ns=kt.msPointer?"MSPointerDown":"pointerdown",pl=kt.msPointer?"MSPointerMove":"pointermove",hr=kt.msPointer?"MSPointerUp":"pointerup",Ls=kt.msPointer?"MSPointerCancel":"pointercancel",Bi={touchstart:Ns,touchmove:pl,touchend:hr,touchcancel:Ls},Ui={touchstart:Gr,touchmove:qr,touchend:qr,touchcancel:qr},Fn={},In=!1;function Je(l,f,_){return f==="touchstart"&&xu(),Ui[f]?(_=Ui[f].bind(this,_),l.addEventListener(Bi[f],_,!1),_):(console.warn("wrong event specified:",f),T)}function ml(l,f,_){if(!Bi[f]){console.warn("wrong event specified:",f);return}l.removeEventListener(Bi[f],_,!1)}function Uo(l){Fn[l.pointerId]=l}function Fi(l){Fn[l.pointerId]&&(Fn[l.pointerId]=l)}function cs(l){delete Fn[l.pointerId]}function xu(){In||(document.addEventListener(Ns,Uo,!0),document.addEventListener(pl,Fi,!0),document.addEventListener(hr,cs,!0),document.addEventListener(Ls,cs,!0),In=!0)}function qr(l,f){if(f.pointerType!==(f.MSPOINTER_TYPE_MOUSE||"mouse")){f.touches=[];for(var _ in Fn)f.touches.push(Fn[_]);f.changedTouches=[f],l(f)}}function Gr(l,f){f.MSPOINTER_TYPE_TOUCH&&f.pointerType===f.MSPOINTER_TYPE_TOUCH&&Me(f),qr(l,f)}function Cu(l){var f={},_,E;for(E in l)_=l[E],f[E]=_&&_.bind?_.bind(l):_;return l=f,f.type="dblclick",f.detail=2,f.isTrusted=!1,f._simulated=!0,f}var fr=200;function hs(l,f){l.addEventListener("dblclick",f);var _=0,E;function x(P){if(P.detail!==1){E=P.detail;return}if(!(P.pointerType==="mouse"||P.sourceCapabilities&&!P.sourceCapabilities.firesTouchEvents)){var j=jo(P);if(!(j.some(function(ot){return ot instanceof HTMLLabelElement&&ot.attributes.for})&&!j.some(function(ot){return ot instanceof HTMLInputElement||ot instanceof HTMLSelectElement}))){var X=Date.now();X-_<=fr?(E++,E===2&&f(Cu(P))):E=1,_=X}}}return l.addEventListener("click",x),{dblclick:f,simDblclick:x}}function bn(l,f){l.removeEventListener("dblclick",f.dblclick),l.removeEventListener("click",f.simDblclick)}var Vs=Hi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),dr=Hi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),fs=dr==="webkitTransition"||dr==="OTransition"?dr+"End":"transitionend";function Wr(l){return typeof l=="string"?document.getElementById(l):l}function ds(l,f){var _=l.style[f]||l.currentStyle&&l.currentStyle[f];if((!_||_==="auto")&&document.defaultView){var E=document.defaultView.getComputedStyle(l,null);_=E?E[f]:null}return _==="auto"?null:_}function ne(l,f,_){var E=document.createElement(l);return E.className=f||"",_&&_.appendChild(E),E}function we(l){var f=l.parentNode;f&&f.removeChild(l)}function pn(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function ps(l){var f=l.parentNode;f&&f.lastChild!==l&&f.appendChild(l)}function pr(l){var f=l.parentNode;f&&f.firstChild!==l&&f.insertBefore(l,f.firstChild)}function mr(l,f){if(l.classList!==void 0)return l.classList.contains(f);var _=We(l);return _.length>0&&new RegExp("(^|\\s)"+f+"(\\s|$)").test(_)}function Wt(l,f){if(l.classList!==void 0)for(var _=R(f),E=0,x=_.length;E<x;E++)l.classList.add(_[E]);else if(!mr(l,f)){var P=We(l);gl(l,(P?P+" ":"")+f)}}function Ce(l,f){l.classList!==void 0?l.classList.remove(f):gl(l,A((" "+We(l)+" ").replace(" "+f+" "," ")))}function gl(l,f){l.className.baseVal===void 0?l.className=f:l.className.baseVal=f}function We(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function Ue(l,f){"opacity"in l.style?l.style.opacity=f:"filter"in l.style&&Yr(l,f)}function Yr(l,f){var _=!1,E="DXImageTransform.Microsoft.Alpha";try{_=l.filters.item(E)}catch{if(f===1)return}f=Math.round(f*100),_?(_.Enabled=f!==100,_.Opacity=f):l.style.filter+=" progid:"+E+"(opacity="+f+")"}function Hi(l){for(var f=document.documentElement.style,_=0;_<l.length;_++)if(l[_]in f)return l[_];return!1}function Hn(l,f,_){var E=f||new vt(0,0);l.style[Vs]=(kt.ie3d?"translate("+E.x+"px,"+E.y+"px)":"translate3d("+E.x+"px,"+E.y+"px,0)")+(_?" scale("+_+")":"")}function Bt(l,f){l._leaflet_pos=f,kt.any3d?Hn(l,f):(l.style.left=f.x+"px",l.style.top=f.y+"px")}function pi(l){return l._leaflet_pos||new vt(0,0)}var Rn,ji,Fo;if("onselectstart"in document)Rn=function(){Lt(window,"selectstart",Me)},ji=function(){pe(window,"selectstart",Me)};else{var zs=Hi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Rn=function(){if(zs){var l=document.documentElement.style;Fo=l[zs],l[zs]="none"}},ji=function(){zs&&(document.documentElement.style[zs]=Fo,Fo=void 0)}}function Zr(){Lt(window,"dragstart",Me)}function _l(){pe(window,"dragstart",Me)}var Ho,gr;function qi(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(jn(),Ho=l,gr=l.style.outlineStyle,l.style.outlineStyle="none",Lt(window,"keydown",jn))}function jn(){Ho&&(Ho.style.outlineStyle=gr,Ho=void 0,gr=void 0,pe(window,"keydown",jn))}function ms(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function Gi(l){var f=l.getBoundingClientRect();return{x:f.width/l.offsetWidth||1,y:f.height/l.offsetHeight||1,boundingClientRect:f}}var yl={__proto__:null,TRANSFORM:Vs,TRANSITION:dr,TRANSITION_END:fs,get:Wr,getStyle:ds,create:ne,remove:we,empty:pn,toFront:ps,toBack:pr,hasClass:mr,addClass:Wt,removeClass:Ce,setClass:gl,getClass:We,setOpacity:Ue,testProp:Hi,setTransform:Hn,setPosition:Bt,getPosition:pi,get disableTextSelection(){return Rn},get enableTextSelection(){return ji},disableImageDrag:Zr,enableImageDrag:_l,preventOutline:qi,restoreOutline:jn,getSizedParentNode:ms,getScale:Gi};function Lt(l,f,_,E){if(f&&typeof f=="object")for(var x in f)Bs(l,x,f[x],_);else{f=R(f);for(var P=0,j=f.length;P<j;P++)Bs(l,f[P],_,E)}return this}var mi="_leaflet_events";function pe(l,f,_,E){if(arguments.length===1)wi(l),delete l[mi];else if(f&&typeof f=="object")for(var x in f)Si(l,x,f[x],_);else if(f=R(f),arguments.length===2)wi(l,function(X){return ut(f,X)!==-1});else for(var P=0,j=f.length;P<j;P++)Si(l,f[P],_,E);return this}function wi(l,f){for(var _ in l[mi]){var E=_.split(/\d/)[0];(!f||f(E))&&Si(l,E,null,null,_)}}var ti={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Bs(l,f,_,E){var x=f+d(_)+(E?"_"+d(E):"");if(l[mi]&&l[mi][x])return this;var P=function(X){return _.call(E||l,X||window.event)},j=P;!kt.touchNative&&kt.pointer&&f.indexOf("touch")===0?P=Je(l,f,P):kt.touch&&f==="dblclick"?P=hs(l,P):"addEventListener"in l?f==="touchstart"||f==="touchmove"||f==="wheel"||f==="mousewheel"?l.addEventListener(ti[f]||f,P,kt.passiveEvents?{passive:!1}:!1):f==="mouseenter"||f==="mouseleave"?(P=function(X){X=X||window.event,Fs(l,X)&&j(X)},l.addEventListener(ti[f],P,!1)):l.addEventListener(f,j,!1):l.attachEvent("on"+f,P),l[mi]=l[mi]||{},l[mi][x]=P}function Si(l,f,_,E,x){x=x||f+d(_)+(E?"_"+d(E):"");var P=l[mi]&&l[mi][x];if(!P)return this;!kt.touchNative&&kt.pointer&&f.indexOf("touch")===0?ml(l,f,P):kt.touch&&f==="dblclick"?bn(l,P):"removeEventListener"in l?l.removeEventListener(ti[f]||f,P,!1):l.detachEvent("on"+f,P),l[mi][x]=null}function ei(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function Wi(l){return Bs(l,"wheel",ei),this}function Us(l){return Lt(l,"mousedown touchstart dblclick contextmenu",ei),l._leaflet_disable_click=!0,this}function Me(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function Pn(l){return Me(l),ei(l),this}function jo(l){if(l.composedPath)return l.composedPath();for(var f=[],_=l.target;_;)f.push(_),_=_.parentNode;return f}function un(l,f){if(!f)return new vt(l.clientX,l.clientY);var _=Gi(f),E=_.boundingClientRect;return new vt((l.clientX-E.left)/_.x-f.clientLeft,(l.clientY-E.top)/_.y-f.clientTop)}var ve=kt.linux&&kt.chrome?window.devicePixelRatio:kt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Kr(l){return kt.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/ve:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function Fs(l,f){var _=f.relatedTarget;if(!_)return!0;try{for(;_&&_!==l;)_=_.parentNode}catch{return!1}return _!==l}var Au={__proto__:null,on:Lt,off:pe,stopPropagation:ei,disableScrollPropagation:Wi,disableClickPropagation:Us,preventDefault:Me,stop:Pn,getPropagationPath:jo,getMousePosition:un,getWheelDelta:Kr,isExternalTarget:Fs,addListener:Lt,removeListener:pe},$r=Et.extend({run:function(l,f,_,E){this.stop(),this._el=l,this._inProgress=!0,this._duration=_||.25,this._easeOutPower=1/Math.max(E||.5,.2),this._startPos=pi(l),this._offset=f.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=H(this._animate,this),this._step()},_step:function(l){var f=+new Date-this._startTime,_=this._duration*1e3;f<_?this._runFrame(this._easeOut(f/_),l):(this._runFrame(1),this._complete())},_runFrame:function(l,f){var _=this._startPos.add(this._offset.multiplyBy(l));f&&_._round(),Bt(this._el,_),this.fire("step")},_complete:function(){W(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),Kt=Et.extend({options:{crs:Os,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,f){f=M(this,f),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),f.maxBounds&&this.setMaxBounds(f.maxBounds),f.zoom!==void 0&&(this._zoom=this._limitZoom(f.zoom)),f.center&&f.zoom!==void 0&&this.setView(Tt(f.center),f.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=dr&&kt.any3d&&!kt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Lt(this._proxy,fs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,f,_){if(f=f===void 0?this._zoom:this._limitZoom(f),l=this._limitCenter(Tt(l),f,this.options.maxBounds),_=_||{},this._stop(),this._loaded&&!_.reset&&_!==!0){_.animate!==void 0&&(_.zoom=s({animate:_.animate},_.zoom),_.pan=s({animate:_.animate,duration:_.duration},_.pan));var E=this._zoom!==f?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,f,_.zoom):this._tryAnimatedPan(l,_.pan);if(E)return clearTimeout(this._sizeTimer),this}return this._resetView(l,f,_.pan&&_.pan.noMoveStart),this},setZoom:function(l,f){return this._loaded?this.setView(this.getCenter(),l,{zoom:f}):(this._zoom=l,this)},zoomIn:function(l,f){return l=l||(kt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,f)},zoomOut:function(l,f){return l=l||(kt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,f)},setZoomAround:function(l,f,_){var E=this.getZoomScale(f),x=this.getSize().divideBy(2),P=l instanceof vt?l:this.latLngToContainerPoint(l),j=P.subtract(x).multiplyBy(1-1/E),X=this.containerPointToLatLng(x.add(j));return this.setView(X,f,{zoom:_})},_getBoundsCenterZoom:function(l,f){f=f||{},l=l.getBounds?l.getBounds():xt(l);var _=B(f.paddingTopLeft||f.padding||[0,0]),E=B(f.paddingBottomRight||f.padding||[0,0]),x=this.getBoundsZoom(l,!1,_.add(E));if(x=typeof f.maxZoom=="number"?Math.min(f.maxZoom,x):x,x===1/0)return{center:l.getCenter(),zoom:x};var P=E.subtract(_).divideBy(2),j=this.project(l.getSouthWest(),x),X=this.project(l.getNorthEast(),x),ot=this.unproject(j.add(X).divideBy(2).add(P),x);return{center:ot,zoom:x}},fitBounds:function(l,f){if(l=xt(l),!l.isValid())throw new Error("Bounds are not valid.");var _=this._getBoundsCenterZoom(l,f);return this.setView(_.center,_.zoom,f)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,f){return this.setView(l,this._zoom,{pan:f})},panBy:function(l,f){if(l=B(l).round(),f=f||{},!l.x&&!l.y)return this.fire("moveend");if(f.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new $r,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),f.noMoveStart||this.fire("movestart"),f.animate!==!1){Wt(this._mapPane,"leaflet-pan-anim");var _=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,_,f.duration||.25,f.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,f,_){if(_=_||{},_.animate===!1||!kt.any3d)return this.setView(l,f,_);this._stop();var E=this.project(this.getCenter()),x=this.project(l),P=this.getSize(),j=this._zoom;l=Tt(l),f=f===void 0?j:f;var X=Math.max(P.x,P.y),ot=X*this.getZoomScale(j,f),yt=x.distanceTo(E)||1,Ct=1.42,Pt=Ct*Ct;function Ot($e){var Ts=$e?-1:1,Ys=$e?ot:X,Tr=ot*ot-X*X+Ts*Pt*Pt*yt*yt,Zs=2*Ys*Pt*yt,kl=Tr/Zs,Uu=Math.sqrt(kl*kl+1)-kl,Dl=Uu<1e-9?-18:Math.log(Uu);return Dl}function qt($e){return(Math.exp($e)-Math.exp(-$e))/2}function He($e){return(Math.exp($e)+Math.exp(-$e))/2}function tn($e){return qt($e)/He($e)}var On=Ot(0);function xi($e){return X*(He(On)/He(On+Ct*$e))}function Pd($e){return X*(He(On)*tn(On+Ct*$e)-qt(On))/Pt}function Md($e){return 1-Math.pow(1-$e,1.5)}var Ol=Date.now(),oa=(Ot(1)-On)/Ct,Od=_.duration?1e3*_.duration:1e3*oa*.8;function aa(){var $e=(Date.now()-Ol)/Od,Ts=Md($e)*oa;$e<=1?(this._flyToFrame=H(aa,this),this._move(this.unproject(E.add(x.subtract(E).multiplyBy(Pd(Ts)/yt)),j),this.getScaleZoom(X/xi(Ts),j),{flyTo:!0})):this._move(l,f)._moveEnd(!0)}return this._moveStart(!0,_.noMoveStart),aa.call(this),this},flyToBounds:function(l,f){var _=this._getBoundsCenterZoom(l,f);return this.flyTo(_.center,_.zoom,f)},setMaxBounds:function(l){return l=xt(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var f=this.options.minZoom;return this.options.minZoom=l,this._loaded&&f!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var f=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&f!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,f){this._enforcingBounds=!0;var _=this.getCenter(),E=this._limitCenter(_,this._zoom,xt(l));return _.equals(E)||this.panTo(E,f),this._enforcingBounds=!1,this},panInside:function(l,f){f=f||{};var _=B(f.paddingTopLeft||f.padding||[0,0]),E=B(f.paddingBottomRight||f.padding||[0,0]),x=this.project(this.getCenter()),P=this.project(l),j=this.getPixelBounds(),X=bt([j.min.add(_),j.max.subtract(E)]),ot=X.getSize();if(!X.contains(P)){this._enforcingBounds=!0;var yt=P.subtract(X.getCenter()),Ct=X.extend(P).getSize().subtract(ot);x.x+=yt.x<0?-Ct.x:Ct.x,x.y+=yt.y<0?-Ct.y:Ct.y,this.panTo(this.unproject(x),f),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=s({animate:!1,pan:!0},l===!0?{animate:!0}:l);var f=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var _=this.getSize(),E=f.divideBy(2).round(),x=_.divideBy(2).round(),P=E.subtract(x);return!P.x&&!P.y?this:(l.animate&&l.pan?this.panBy(P):(l.pan&&this._rawPanBy(P),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:f,newSize:_}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=s({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var f=u(this._handleGeolocationResponse,this),_=u(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(f,_,l):navigator.geolocation.getCurrentPosition(f,_,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var f=l.code,_=l.message||(f===1?"permission denied":f===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:f,message:"Geolocation error: "+_+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var f=l.coords.latitude,_=l.coords.longitude,E=new At(f,_),x=E.toBounds(l.coords.accuracy*2),P=this._locateOptions;if(P.setView){var j=this.getBoundsZoom(x);this.setView(E,P.maxZoom?Math.min(j,P.maxZoom):j)}var X={latlng:E,bounds:x,timestamp:l.timestamp};for(var ot in l.coords)typeof l.coords[ot]=="number"&&(X[ot]=l.coords[ot]);this.fire("locationfound",X)}},addHandler:function(l,f){if(!f)return this;var _=this[l]=new f(this);return this._handlers.push(_),this.options[l]&&_.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),we(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(W(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)we(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,f){var _="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),E=ne("div",_,f||this._mapPane);return l&&(this._panes[l]=E),E},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),f=this.unproject(l.getBottomLeft()),_=this.unproject(l.getTopRight());return new mt(f,_)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,f,_){l=xt(l),_=B(_||[0,0]);var E=this.getZoom()||0,x=this.getMinZoom(),P=this.getMaxZoom(),j=l.getNorthWest(),X=l.getSouthEast(),ot=this.getSize().subtract(_),yt=bt(this.project(X,E),this.project(j,E)).getSize(),Ct=kt.any3d?this.options.zoomSnap:1,Pt=ot.x/yt.x,Ot=ot.y/yt.y,qt=f?Math.max(Pt,Ot):Math.min(Pt,Ot);return E=this.getScaleZoom(qt,E),Ct&&(E=Math.round(E/(Ct/100))*(Ct/100),E=f?Math.ceil(E/Ct)*Ct:Math.floor(E/Ct)*Ct),Math.max(x,Math.min(P,E))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new vt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,f){var _=this._getTopLeftPoint(l,f);return new lt(_,_.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,f){var _=this.options.crs;return f=f===void 0?this._zoom:f,_.scale(l)/_.scale(f)},getScaleZoom:function(l,f){var _=this.options.crs;f=f===void 0?this._zoom:f;var E=_.zoom(l*_.scale(f));return isNaN(E)?1/0:E},project:function(l,f){return f=f===void 0?this._zoom:f,this.options.crs.latLngToPoint(Tt(l),f)},unproject:function(l,f){return f=f===void 0?this._zoom:f,this.options.crs.pointToLatLng(B(l),f)},layerPointToLatLng:function(l){var f=B(l).add(this.getPixelOrigin());return this.unproject(f)},latLngToLayerPoint:function(l){var f=this.project(Tt(l))._round();return f._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(Tt(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(xt(l))},distance:function(l,f){return this.options.crs.distance(Tt(l),Tt(f))},containerPointToLayerPoint:function(l){return B(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return B(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var f=this.containerPointToLayerPoint(B(l));return this.layerPointToLatLng(f)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Tt(l)))},mouseEventToContainerPoint:function(l){return un(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var f=this._container=Wr(l);if(f){if(f._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Lt(f,"scroll",this._onScroll,this),this._containerId=d(f)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&kt.any3d,Wt(l,"leaflet-container"+(kt.touch?" leaflet-touch":"")+(kt.retina?" leaflet-retina":"")+(kt.ielt9?" leaflet-oldie":"")+(kt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var f=ds(l,"position");f!=="absolute"&&f!=="relative"&&f!=="fixed"&&f!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Bt(this._mapPane,new vt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Wt(l.markerPane,"leaflet-zoom-hide"),Wt(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,f,_){Bt(this._mapPane,new vt(0,0));var E=!this._loaded;this._loaded=!0,f=this._limitZoom(f),this.fire("viewprereset");var x=this._zoom!==f;this._moveStart(x,_)._move(l,f)._moveEnd(x),this.fire("viewreset"),E&&this.fire("load")},_moveStart:function(l,f){return l&&this.fire("zoomstart"),f||this.fire("movestart"),this},_move:function(l,f,_,E){f===void 0&&(f=this._zoom);var x=this._zoom!==f;return this._zoom=f,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),E?_&&_.pinch&&this.fire("zoom",_):((x||_&&_.pinch)&&this.fire("zoom",_),this.fire("move",_)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return W(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){Bt(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[d(this._container)]=this;var f=l?pe:Lt;f(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&f(window,"resize",this._onResize,this),kt.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){W(this._resizeRequest),this._resizeRequest=H(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,f){for(var _=[],E,x=f==="mouseout"||f==="mouseover",P=l.target||l.srcElement,j=!1;P;){if(E=this._targets[d(P)],E&&(f==="click"||f==="preclick")&&this._draggableMoved(E)){j=!0;break}if(E&&E.listens(f,!0)&&(x&&!Fs(P,l)||(_.push(E),x))||P===this._container)break;P=P.parentNode}return!_.length&&!j&&!x&&this.listens(f,!0)&&(_=[this]),_},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var f=l.target||l.srcElement;if(!(!this._loaded||f._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(f))){var _=l.type;_==="mousedown"&&qi(f),this._fireDOMEvent(l,_)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,f,_){if(l.type==="click"){var E=s({},l);E.type="preclick",this._fireDOMEvent(E,E.type,_)}var x=this._findEventTargets(l,f);if(_){for(var P=[],j=0;j<_.length;j++)_[j].listens(f,!0)&&P.push(_[j]);x=P.concat(x)}if(x.length){f==="contextmenu"&&Me(l);var X=x[0],ot={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var yt=X.getLatLng&&(!X._radius||X._radius<=10);ot.containerPoint=yt?this.latLngToContainerPoint(X.getLatLng()):this.mouseEventToContainerPoint(l),ot.layerPoint=this.containerPointToLayerPoint(ot.containerPoint),ot.latlng=yt?X.getLatLng():this.layerPointToLatLng(ot.layerPoint)}for(j=0;j<x.length;j++)if(x[j].fire(f,ot,!0),ot.originalEvent._stopped||x[j].options.bubblingMouseEvents===!1&&ut(this._mouseEvents,f)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,f=this._handlers.length;l<f;l++)this._handlers[l].disable()},whenReady:function(l,f){return this._loaded?l.call(f||this,{target:this}):this.on("load",l,f),this},_getMapPanePos:function(){return pi(this._mapPane)||new vt(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,f){var _=l&&f!==void 0?this._getNewPixelOrigin(l,f):this.getPixelOrigin();return _.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,f){var _=this.getSize()._divideBy(2);return this.project(l,f)._subtract(_)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,f,_){var E=this._getNewPixelOrigin(_,f);return this.project(l,f)._subtract(E)},_latLngBoundsToNewLayerBounds:function(l,f,_){var E=this._getNewPixelOrigin(_,f);return bt([this.project(l.getSouthWest(),f)._subtract(E),this.project(l.getNorthWest(),f)._subtract(E),this.project(l.getSouthEast(),f)._subtract(E),this.project(l.getNorthEast(),f)._subtract(E)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,f,_){if(!_)return l;var E=this.project(l,f),x=this.getSize().divideBy(2),P=new lt(E.subtract(x),E.add(x)),j=this._getBoundsOffset(P,_,f);return Math.abs(j.x)<=1&&Math.abs(j.y)<=1?l:this.unproject(E.add(j),f)},_limitOffset:function(l,f){if(!f)return l;var _=this.getPixelBounds(),E=new lt(_.min.add(l),_.max.add(l));return l.add(this._getBoundsOffset(E,f))},_getBoundsOffset:function(l,f,_){var E=bt(this.project(f.getNorthEast(),_),this.project(f.getSouthWest(),_)),x=E.min.subtract(l.min),P=E.max.subtract(l.max),j=this._rebound(x.x,-P.x),X=this._rebound(x.y,-P.y);return new vt(j,X)},_rebound:function(l,f){return l+f>0?Math.round(l-f)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(f))},_limitZoom:function(l){var f=this.getMinZoom(),_=this.getMaxZoom(),E=kt.any3d?this.options.zoomSnap:1;return E&&(l=Math.round(l/E)*E),Math.max(f,Math.min(_,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ce(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,f){var _=this._getCenterOffset(l)._trunc();return(f&&f.animate)!==!0&&!this.getSize().contains(_)?!1:(this.panBy(_,f),!0)},_createAnimProxy:function(){var l=this._proxy=ne("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(f){var _=Vs,E=this._proxy.style[_];Hn(this._proxy,this.project(f.center,f.zoom),this.getZoomScale(f.zoom,1)),E===this._proxy.style[_]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){we(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),f=this.getZoom();Hn(this._proxy,this.project(l,f),this.getZoomScale(f,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,f,_){if(this._animatingZoom)return!0;if(_=_||{},!this._zoomAnimated||_.animate===!1||this._nothingToAnimate()||Math.abs(f-this._zoom)>this.options.zoomAnimationThreshold)return!1;var E=this.getZoomScale(f),x=this._getCenterOffset(l)._divideBy(1-1/E);return _.animate!==!0&&!this.getSize().contains(x)?!1:(H(function(){this._moveStart(!0,_.noMoveStart||!1)._animateZoom(l,f,!0)},this),!0)},_animateZoom:function(l,f,_,E){this._mapPane&&(_&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=f,Wt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:f,noUpdate:E}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ce(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function gs(l,f){return new Kt(l,f)}var En=ee.extend({options:{position:"topright"},initialize:function(l){M(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var f=this._map;return f&&f.removeControl(this),this.options.position=l,f&&f.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var f=this._container=this.onAdd(l),_=this.getPosition(),E=l._controlCorners[_];return Wt(f,"leaflet-control"),_.indexOf("bottom")!==-1?E.insertBefore(f,E.firstChild):E.appendChild(f),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(we(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),Mn=function(l){return new En(l)};Kt.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},f="leaflet-",_=this._controlContainer=ne("div",f+"control-container",this._container);function E(x,P){var j=f+x+" "+f+P;l[x+P]=ne("div",j,_)}E("top","left"),E("top","right"),E("bottom","left"),E("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)we(this._controlCorners[l]);we(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var vl=En.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,f,_,E){return _<E?-1:E<_?1:0}},initialize:function(l,f,_){M(this,_),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var E in l)this._addLayer(l[E],E);for(E in f)this._addLayer(f[E],E,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return En.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,f){return this._addLayer(l,f),this._map?this._update():this},addOverlay:function(l,f){return this._addLayer(l,f,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var f=this._getLayer(d(l));return f&&this._layers.splice(this._layers.indexOf(f),1),this._map?this._update():this},expand:function(){Wt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(Wt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):Ce(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ce(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",f=this._container=ne("div",l),_=this.options.collapsed;f.setAttribute("aria-haspopup",!0),Us(f),Wi(f);var E=this._section=ne("section",l+"-list");_&&(this._map.on("click",this.collapse,this),Lt(f,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var x=this._layersLink=ne("a",l+"-toggle",f);x.href="#",x.title="Layers",x.setAttribute("role","button"),Lt(x,{keydown:function(P){P.keyCode===13&&this._expandSafely()},click:function(P){Me(P),this._expandSafely()}},this),_||this.expand(),this._baseLayersList=ne("div",l+"-base",E),this._separator=ne("div",l+"-separator",E),this._overlaysList=ne("div",l+"-overlays",E),f.appendChild(E)},_getLayer:function(l){for(var f=0;f<this._layers.length;f++)if(this._layers[f]&&d(this._layers[f].layer)===l)return this._layers[f]},_addLayer:function(l,f,_){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:f,overlay:_}),this.options.sortLayers&&this._layers.sort(u(function(E,x){return this.options.sortFunction(E.layer,x.layer,E.name,x.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;pn(this._baseLayersList),pn(this._overlaysList),this._layerControlInputs=[];var l,f,_,E,x=0;for(_=0;_<this._layers.length;_++)E=this._layers[_],this._addItem(E),f=f||E.overlay,l=l||!E.overlay,x+=E.overlay?0:1;return this.options.hideSingleBase&&(l=l&&x>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=f&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var f=this._getLayer(d(l.target)),_=f.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;_&&this._map.fire(_,f)},_createRadioElement:function(l,f){var _='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(f?' checked="checked"':"")+"/>",E=document.createElement("div");return E.innerHTML=_,E.firstChild},_addItem:function(l){var f=document.createElement("label"),_=this._map.hasLayer(l.layer),E;l.overlay?(E=document.createElement("input"),E.type="checkbox",E.className="leaflet-control-layers-selector",E.defaultChecked=_):E=this._createRadioElement("leaflet-base-layers_"+d(this),_),this._layerControlInputs.push(E),E.layerId=d(l.layer),Lt(E,"click",this._onInputClick,this);var x=document.createElement("span");x.innerHTML=" "+l.name;var P=document.createElement("span");f.appendChild(P),P.appendChild(E),P.appendChild(x);var j=l.overlay?this._overlaysList:this._baseLayersList;return j.appendChild(f),this._checkDisabledLayers(),f},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,f,_,E=[],x=[];this._handlingClick=!0;for(var P=l.length-1;P>=0;P--)f=l[P],_=this._getLayer(f.layerId).layer,f.checked?E.push(_):f.checked||x.push(_);for(P=0;P<x.length;P++)this._map.hasLayer(x[P])&&this._map.removeLayer(x[P]);for(P=0;P<E.length;P++)this._map.hasLayer(E[P])||this._map.addLayer(E[P]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,f,_,E=this._map.getZoom(),x=l.length-1;x>=0;x--)f=l[x],_=this._getLayer(f.layerId).layer,f.disabled=_.options.minZoom!==void 0&&E<_.options.minZoom||_.options.maxZoom!==void 0&&E>_.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,Lt(l,"click",Me),this.expand();var f=this;setTimeout(function(){pe(l,"click",Me),f._preventClick=!1})}}),nh=function(l,f,_){return new vl(l,f,_)},Hs=En.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var f="leaflet-control-zoom",_=ne("div",f+" leaflet-bar"),E=this.options;return this._zoomInButton=this._createButton(E.zoomInText,E.zoomInTitle,f+"-in",_,this._zoomIn),this._zoomOutButton=this._createButton(E.zoomOutText,E.zoomOutTitle,f+"-out",_,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),_},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,f,_,E,x){var P=ne("a",_,E);return P.innerHTML=l,P.href="#",P.title=f,P.setAttribute("role","button"),P.setAttribute("aria-label",f),Us(P),Lt(P,"click",Pn),Lt(P,"click",x,this),Lt(P,"click",this._refocusOnMap,this),P},_updateDisabled:function(){var l=this._map,f="leaflet-disabled";Ce(this._zoomInButton,f),Ce(this._zoomOutButton,f),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(Wt(this._zoomOutButton,f),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(Wt(this._zoomInButton,f),this._zoomInButton.setAttribute("aria-disabled","true"))}});Kt.mergeOptions({zoomControl:!0}),Kt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Hs,this.addControl(this.zoomControl))});var qo=function(l){return new Hs(l)},Go=En.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var f="leaflet-control-scale",_=ne("div",f),E=this.options;return this._addScales(E,f+"-line",_),l.on(E.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),_},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,f,_){l.metric&&(this._mScale=ne("div",f,_)),l.imperial&&(this._iScale=ne("div",f,_))},_update:function(){var l=this._map,f=l.getSize().y/2,_=l.distance(l.containerPointToLatLng([0,f]),l.containerPointToLatLng([this.options.maxWidth,f]));this._updateScales(_)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var f=this._getRoundNum(l),_=f<1e3?f+" m":f/1e3+" km";this._updateScale(this._mScale,_,f/l)},_updateImperial:function(l){var f=l*3.2808399,_,E,x;f>5280?(_=f/5280,E=this._getRoundNum(_),this._updateScale(this._iScale,E+" mi",E/_)):(x=this._getRoundNum(f),this._updateScale(this._iScale,x+" ft",x/f))},_updateScale:function(l,f,_){l.style.width=Math.round(this.options.maxWidth*_)+"px",l.innerHTML=f},_getRoundNum:function(l){var f=Math.pow(10,(Math.floor(l)+"").length-1),_=l/f;return _=_>=10?10:_>=5?5:_>=3?3:_>=2?2:1,f*_}}),Wo=function(l){return new Go(l)},Iu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',_r=En.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(kt.inlineSvg?Iu+" ":"")+"Leaflet</a>"},initialize:function(l){M(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=ne("div","leaflet-control-attribution"),Us(this._container);for(var f in l._layers)l._layers[f].getAttribution&&this.addAttribution(l._layers[f].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var f in this._attributions)this._attributions[f]&&l.push(f);var _=[];this.options.prefix&&_.push(this.options.prefix),l.length&&_.push(l.join(", ")),this._container.innerHTML=_.join(' <span aria-hidden="true">|</span> ')}}});Kt.mergeOptions({attributionControl:!0}),Kt.addInitHook(function(){this.options.attributionControl&&new _r().addTo(this)});var ih=function(l){return new _r(l)};En.Layers=vl,En.Zoom=Hs,En.Scale=Go,En.Attribution=_r,Mn.layers=nh,Mn.zoom=qo,Mn.scale=Wo,Mn.attribution=ih;var ni=ee.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ni.addTo=function(l,f){return l.addHandler(f,this),this};var Qr={Events:nt},bl=kt.touch?"touchstart mousedown":"mousedown",Yi=Et.extend({options:{clickTolerance:3},initialize:function(l,f,_,E){M(this,E),this._element=l,this._dragStartTarget=f||l,this._preventOutline=_},enable:function(){this._enabled||(Lt(this._dragStartTarget,bl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Yi._dragging===this&&this.finishDrag(!0),pe(this._dragStartTarget,bl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!mr(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){Yi._dragging===this&&this.finishDrag();return}if(!(Yi._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(Yi._dragging=this,this._preventOutline&&qi(this._element),Zr(),Rn(),!this._moving)){this.fire("down");var f=l.touches?l.touches[0]:l,_=ms(this._element);this._startPoint=new vt(f.clientX,f.clientY),this._startPos=pi(this._element),this._parentScale=Gi(_);var E=l.type==="mousedown";Lt(document,E?"mousemove":"touchmove",this._onMove,this),Lt(document,E?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var f=l.touches&&l.touches.length===1?l.touches[0]:l,_=new vt(f.clientX,f.clientY)._subtract(this._startPoint);!_.x&&!_.y||Math.abs(_.x)+Math.abs(_.y)<this.options.clickTolerance||(_.x/=this._parentScale.x,_.y/=this._parentScale.y,Me(l),this._moved||(this.fire("dragstart"),this._moved=!0,Wt(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Wt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(_),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),Bt(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){Ce(document.body,"leaflet-dragging"),this._lastTarget&&(Ce(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),pe(document,"mousemove touchmove",this._onMove,this),pe(document,"mouseup touchend touchcancel",this._onUp,this),_l(),ji();var f=this._moved&&this._moving;this._moving=!1,Yi._dragging=!1,f&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function Yo(l,f,_){var E,x=[1,4,2,8],P,j,X,ot,yt,Ct,Pt,Ot;for(P=0,Ct=l.length;P<Ct;P++)l[P]._code=_s(l[P],f);for(X=0;X<4;X++){for(Pt=x[X],E=[],P=0,Ct=l.length,j=Ct-1;P<Ct;j=P++)ot=l[P],yt=l[j],ot._code&Pt?yt._code&Pt||(Ot=mn(yt,ot,Pt,f,_),Ot._code=_s(Ot,f),E.push(Ot)):(yt._code&Pt&&(Ot=mn(yt,ot,Pt,f,_),Ot._code=_s(Ot,f),E.push(Ot)),E.push(ot));l=E}return l}function yr(l,f){var _,E,x,P,j,X,ot,yt,Ct;if(!l||l.length===0)throw new Error("latlngs not passed");g(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Pt=Tt([0,0]),Ot=xt(l),qt=Ot.getNorthWest().distanceTo(Ot.getSouthWest())*Ot.getNorthEast().distanceTo(Ot.getNorthWest());qt<1700&&(Pt=Zo(l));var He=l.length,tn=[];for(_=0;_<He;_++){var On=Tt(l[_]);tn.push(f.project(Tt([On.lat-Pt.lat,On.lng-Pt.lng])))}for(X=ot=yt=0,_=0,E=He-1;_<He;E=_++)x=tn[_],P=tn[E],j=x.y*P.x-P.y*x.x,ot+=(x.x+P.x)*j,yt+=(x.y+P.y)*j,X+=j*3;X===0?Ct=tn[0]:Ct=[ot/X,yt/X];var xi=f.unproject(B(Ct));return Tt([xi.lat+Pt.lat,xi.lng+Pt.lng])}function Zo(l){for(var f=0,_=0,E=0,x=0;x<l.length;x++){var P=Tt(l[x]);f+=P.lat,_+=P.lng,E++}return Tt([f/E,_/E])}var Ko={__proto__:null,clipPolygon:Yo,polygonCenter:yr,centroid:Zo};function El(l,f){if(!f||!l.length)return l.slice();var _=f*f;return l=Pu(l,_),l=Ru(l,_),l}function $o(l,f,_){return Math.sqrt(ii(l,f,_,!0))}function js(l,f,_){return ii(l,f,_)}function Ru(l,f){var _=l.length,E=typeof Uint8Array<"u"?Uint8Array:Array,x=new E(_);x[0]=x[_-1]=1,Qo(l,x,f,0,_-1);var P,j=[];for(P=0;P<_;P++)x[P]&&j.push(l[P]);return j}function Qo(l,f,_,E,x){var P=0,j,X,ot;for(X=E+1;X<=x-1;X++)ot=ii(l[X],l[E],l[x],!0),ot>P&&(j=X,P=ot);P>_&&(f[j]=1,Qo(l,f,_,E,j),Qo(l,f,_,j,x))}function Pu(l,f){for(var _=[l[0]],E=1,x=0,P=l.length;E<P;E++)Mu(l[E],l[x])>f&&(_.push(l[E]),x=E);return x<P-1&&_.push(l[P-1]),_}var Tl;function Xr(l,f,_,E,x){var P=E?Tl:_s(l,_),j=_s(f,_),X,ot,yt;for(Tl=j;;){if(!(P|j))return[l,f];if(P&j)return!1;X=P||j,ot=mn(l,f,X,_,x),yt=_s(ot,_),X===P?(l=ot,P=yt):(f=ot,j=yt)}}function mn(l,f,_,E,x){var P=f.x-l.x,j=f.y-l.y,X=E.min,ot=E.max,yt,Ct;return _&8?(yt=l.x+P*(ot.y-l.y)/j,Ct=ot.y):_&4?(yt=l.x+P*(X.y-l.y)/j,Ct=X.y):_&2?(yt=ot.x,Ct=l.y+j*(ot.x-l.x)/P):_&1&&(yt=X.x,Ct=l.y+j*(X.x-l.x)/P),new vt(yt,Ct,x)}function _s(l,f){var _=0;return l.x<f.min.x?_|=1:l.x>f.max.x&&(_|=2),l.y<f.min.y?_|=4:l.y>f.max.y&&(_|=8),_}function Mu(l,f){var _=f.x-l.x,E=f.y-l.y;return _*_+E*E}function ii(l,f,_,E){var x=f.x,P=f.y,j=_.x-x,X=_.y-P,ot=j*j+X*X,yt;return ot>0&&(yt=((l.x-x)*j+(l.y-P)*X)/ot,yt>1?(x=_.x,P=_.y):yt>0&&(x+=j*yt,P+=X*yt)),j=l.x-x,X=l.y-P,E?j*j+X*X:new vt(x,P)}function g(l){return!J(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function S(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),g(l)}function C(l,f){var _,E,x,P,j,X,ot,yt;if(!l||l.length===0)throw new Error("latlngs not passed");g(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Ct=Tt([0,0]),Pt=xt(l),Ot=Pt.getNorthWest().distanceTo(Pt.getSouthWest())*Pt.getNorthEast().distanceTo(Pt.getNorthWest());Ot<1700&&(Ct=Zo(l));var qt=l.length,He=[];for(_=0;_<qt;_++){var tn=Tt(l[_]);He.push(f.project(Tt([tn.lat-Ct.lat,tn.lng-Ct.lng])))}for(_=0,E=0;_<qt-1;_++)E+=He[_].distanceTo(He[_+1])/2;if(E===0)yt=He[0];else for(_=0,P=0;_<qt-1;_++)if(j=He[_],X=He[_+1],x=j.distanceTo(X),P+=x,P>E){ot=(P-E)/x,yt=[X.x-ot*(X.x-j.x),X.y-ot*(X.y-j.y)];break}var On=f.unproject(B(yt));return Tt([On.lat+Ct.lat,On.lng+Ct.lng])}var D={__proto__:null,simplify:El,pointToSegmentDistance:$o,closestPointOnSegment:js,clipSegment:Xr,_getEdgeIntersection:mn,_getBitCode:_s,_sqClosestPointOnSegment:ii,isFlat:g,_flat:S,polylineCenter:C},Q={project:function(l){return new vt(l.lng,l.lat)},unproject:function(l){return new At(l.y,l.x)},bounds:new lt([-180,-90],[180,90])},at={R:6378137,R_MINOR:6356752314245179e-9,bounds:new lt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var f=Math.PI/180,_=this.R,E=l.lat*f,x=this.R_MINOR/_,P=Math.sqrt(1-x*x),j=P*Math.sin(E),X=Math.tan(Math.PI/4-E/2)/Math.pow((1-j)/(1+j),P/2);return E=-_*Math.log(Math.max(X,1e-10)),new vt(l.lng*f*_,E)},unproject:function(l){for(var f=180/Math.PI,_=this.R,E=this.R_MINOR/_,x=Math.sqrt(1-E*E),P=Math.exp(-l.y/_),j=Math.PI/2-2*Math.atan(P),X=0,ot=.1,yt;X<15&&Math.abs(ot)>1e-7;X++)yt=x*Math.sin(j),yt=Math.pow((1-yt)/(1+yt),x/2),ot=Math.PI/2-2*Math.atan(P*yt)-j,j+=ot;return new At(j*f,l.x*f/_)}},wt={__proto__:null,LonLat:Q,Mercator:at,SphericalMercator:os},ce=s({},de,{code:"EPSG:3395",projection:at,transformation:function(){var l=.5/(Math.PI*at.R);return Vi(l,.5,-l,.5)}()}),rn=s({},de,{code:"EPSG:4326",projection:Q,transformation:Vi(1/180,1,-1/180,.5)}),he=s({},Pe,{projection:Q,transformation:Vi(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,f){var _=f.lng-l.lng,E=f.lat-l.lat;return Math.sqrt(_*_+E*E)},infinite:!0});Pe.Earth=de,Pe.EPSG3395=ce,Pe.EPSG3857=Os,Pe.EPSG900913=Ur,Pe.EPSG4326=rn,Pe.Simple=he;var Se=Et.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[d(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[d(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var f=l.target;if(f.hasLayer(this)){if(this._map=f,this._zoomAnimated=f._zoomAnimated,this.getEvents){var _=this.getEvents();f.on(_,this),this.once("remove",function(){f.off(_,this)},this)}this.onAdd(f),this.fire("add"),f.fire("layeradd",{layer:this})}}});Kt.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var f=d(l);return this._layers[f]?this:(this._layers[f]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var f=d(l);return this._layers[f]?(this._loaded&&l.onRemove(this),delete this._layers[f],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return d(l)in this._layers},eachLayer:function(l,f){for(var _ in this._layers)l.call(f,this._layers[_]);return this},_addLayers:function(l){l=l?J(l)?l:[l]:[];for(var f=0,_=l.length;f<_;f++)this.addLayer(l[f])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[d(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var f=d(l);this._zoomBoundLayers[f]&&(delete this._zoomBoundLayers[f],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,f=-1/0,_=this._getZoomSpan();for(var E in this._zoomBoundLayers){var x=this._zoomBoundLayers[E].options;l=x.minZoom===void 0?l:Math.min(l,x.minZoom),f=x.maxZoom===void 0?f:Math.max(f,x.maxZoom)}this._layersMaxZoom=f===-1/0?void 0:f,this._layersMinZoom=l===1/0?void 0:l,_!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Fe=Se.extend({initialize:function(l,f){M(this,f),this._layers={};var _,E;if(l)for(_=0,E=l.length;_<E;_++)this.addLayer(l[_])},addLayer:function(l){var f=this.getLayerId(l);return this._layers[f]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var f=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[f]&&this._map.removeLayer(this._layers[f]),delete this._layers[f],this},hasLayer:function(l){var f=typeof l=="number"?l:this.getLayerId(l);return f in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var f=Array.prototype.slice.call(arguments,1),_,E;for(_ in this._layers)E=this._layers[_],E[l]&&E[l].apply(E,f);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,f){for(var _ in this._layers)l.call(f,this._layers[_]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return d(l)}}),qs=function(l,f){return new Fe(l,f)},Ne=Fe.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),Fe.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),Fe.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new mt;for(var f in this._layers){var _=this._layers[f];l.extend(_.getBounds?_.getBounds():_.getLatLng())}return l}}),ys=function(l,f){return new Ne(l,f)},vs=ee.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){M(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,f){var _=this._getIconUrl(l);if(!_){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var E=this._createImg(_,f&&f.tagName==="IMG"?f:null);return this._setIconStyles(E,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),E},_setIconStyles:function(l,f){var _=this.options,E=_[f+"Size"];typeof E=="number"&&(E=[E,E]);var x=B(E),P=B(f==="shadow"&&_.shadowAnchor||_.iconAnchor||x&&x.divideBy(2,!0));l.className="leaflet-marker-"+f+" "+(_.className||""),P&&(l.style.marginLeft=-P.x+"px",l.style.marginTop=-P.y+"px"),x&&(l.style.width=x.x+"px",l.style.height=x.y+"px")},_createImg:function(l,f){return f=f||document.createElement("img"),f.src=l,f},_getIconUrl:function(l){return kt.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function Ou(l){return new vs(l)}var Xo=vs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof Xo.imagePath!="string"&&(Xo.imagePath=this._detectIconPath()),(this.options.imagePath||Xo.imagePath)+vs.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var f=function(_,E,x){var P=E.exec(_);return P&&P[x]};return l=f(l,/^url\((['"])?(.+)\1\)$/,2),l&&f(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=ne("div","leaflet-default-icon-path",document.body),f=ds(l,"background-image")||ds(l,"backgroundImage");if(document.body.removeChild(l),f=this._stripUrl(f),f)return f;var _=document.querySelector('link[href$="leaflet.css"]');return _?_.href.substring(0,_.href.length-11-1):""}}),sh=ni.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new Yi(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Wt(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ce(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var f=this._marker,_=f._map,E=this._marker.options.autoPanSpeed,x=this._marker.options.autoPanPadding,P=pi(f._icon),j=_.getPixelBounds(),X=_.getPixelOrigin(),ot=bt(j.min._subtract(X).add(x),j.max._subtract(X).subtract(x));if(!ot.contains(P)){var yt=B((Math.max(ot.max.x,P.x)-ot.max.x)/(j.max.x-ot.max.x)-(Math.min(ot.min.x,P.x)-ot.min.x)/(j.min.x-ot.min.x),(Math.max(ot.max.y,P.y)-ot.max.y)/(j.max.y-ot.max.y)-(Math.min(ot.min.y,P.y)-ot.min.y)/(j.min.y-ot.min.y)).multiplyBy(E);_.panBy(yt,{animate:!1}),this._draggable._newPos._add(yt),this._draggable._startPos._add(yt),Bt(f._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=H(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(W(this._panRequest),this._panRequest=H(this._adjustPan.bind(this,l)))},_onDrag:function(l){var f=this._marker,_=f._shadow,E=pi(f._icon),x=f._map.layerPointToLatLng(E);_&&Bt(_,E),f._latlng=x,l.latlng=x,l.oldLatLng=this._oldLatLng,f.fire("move",l).fire("drag",l)},_onDragEnd:function(l){W(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),Jo=Se.extend({options:{icon:new Xo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,f){M(this,f),this._latlng=Tt(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var f=this._latlng;return this._latlng=Tt(l),this.update(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,f="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),_=l.icon.createIcon(this._icon),E=!1;_!==this._icon&&(this._icon&&this._removeIcon(),E=!0,l.title&&(_.title=l.title),_.tagName==="IMG"&&(_.alt=l.alt||"")),Wt(_,f),l.keyboard&&(_.tabIndex="0",_.setAttribute("role","button")),this._icon=_,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Lt(_,"focus",this._panOnFocus,this);var x=l.icon.createShadow(this._shadow),P=!1;x!==this._shadow&&(this._removeShadow(),P=!0),x&&(Wt(x,f),x.alt=""),this._shadow=x,l.opacity<1&&this._updateOpacity(),E&&this.getPane().appendChild(this._icon),this._initInteraction(),x&&P&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&pe(this._icon,"focus",this._panOnFocus,this),we(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&we(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&Bt(this._icon,l),this._shadow&&Bt(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var f=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(f)},_initInteraction:function(){if(this.options.interactive&&(Wt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),sh)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new sh(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&Ue(this._icon,l),this._shadow&&Ue(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var f=this.options.icon.options,_=f.iconSize?B(f.iconSize):B(0,0),E=f.iconAnchor?B(f.iconAnchor):B(0,0);l.panInside(this._latlng,{paddingTopLeft:E,paddingBottomRight:_.subtract(E)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function rh(l,f){return new Jo(l,f)}var Gs=Se.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return M(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),wl=Gs.extend({options:{fill:!0,radius:10},initialize:function(l,f){M(this,f),this._latlng=Tt(l),this._radius=this.options.radius},setLatLng:function(l){var f=this._latlng;return this._latlng=Tt(l),this.redraw(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var f=l&&l.radius||this._radius;return Gs.prototype.setStyle.call(this,l),this.setRadius(f),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,f=this._radiusY||l,_=this._clickTolerance(),E=[l+_,f+_];this._pxBounds=new lt(this._point.subtract(E),this._point.add(E))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Sd(l,f){return new wl(l,f)}var oh=wl.extend({initialize:function(l,f,_){if(typeof f=="number"&&(f=s({},_,{radius:f})),M(this,f),this._latlng=Tt(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new mt(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:Gs.prototype.setStyle,_project:function(){var l=this._latlng.lng,f=this._latlng.lat,_=this._map,E=_.options.crs;if(E.distance===de.distance){var x=Math.PI/180,P=this._mRadius/de.R/x,j=_.project([f+P,l]),X=_.project([f-P,l]),ot=j.add(X).divideBy(2),yt=_.unproject(ot).lat,Ct=Math.acos((Math.cos(P*x)-Math.sin(f*x)*Math.sin(yt*x))/(Math.cos(f*x)*Math.cos(yt*x)))/x;(isNaN(Ct)||Ct===0)&&(Ct=P/Math.cos(Math.PI/180*f)),this._point=ot.subtract(_.getPixelOrigin()),this._radius=isNaN(Ct)?0:ot.x-_.project([yt,l-Ct]).x,this._radiusY=ot.y-j.y}else{var Pt=E.unproject(E.project(this._latlng).subtract([this._mRadius,0]));this._point=_.latLngToLayerPoint(this._latlng),this._radius=this._point.x-_.latLngToLayerPoint(Pt).x}this._updateBounds()}});function Hg(l,f,_){return new oh(l,f,_)}var Ws=Gs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,f){M(this,f),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var f=1/0,_=null,E=ii,x,P,j=0,X=this._parts.length;j<X;j++)for(var ot=this._parts[j],yt=1,Ct=ot.length;yt<Ct;yt++){x=ot[yt-1],P=ot[yt];var Pt=E(l,x,P,!0);Pt<f&&(f=Pt,_=E(l,x,P))}return _&&(_.distance=Math.sqrt(f)),_},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return C(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,f){return f=f||this._defaultShape(),l=Tt(l),f.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new mt,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return g(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var f=[],_=g(l),E=0,x=l.length;E<x;E++)_?(f[E]=Tt(l[E]),this._bounds.extend(f[E])):f[E]=this._convertLatLngs(l[E]);return f},_project:function(){var l=new lt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),f=new vt(l,l);this._rawPxBounds&&(this._pxBounds=new lt([this._rawPxBounds.min.subtract(f),this._rawPxBounds.max.add(f)]))},_projectLatlngs:function(l,f,_){var E=l[0]instanceof At,x=l.length,P,j;if(E){for(j=[],P=0;P<x;P++)j[P]=this._map.latLngToLayerPoint(l[P]),_.extend(j[P]);f.push(j)}else for(P=0;P<x;P++)this._projectLatlngs(l[P],f,_)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var f=this._parts,_,E,x,P,j,X,ot;for(_=0,x=0,P=this._rings.length;_<P;_++)for(ot=this._rings[_],E=0,j=ot.length;E<j-1;E++)X=Xr(ot[E],ot[E+1],l,E,!0),X&&(f[x]=f[x]||[],f[x].push(X[0]),(X[1]!==ot[E+1]||E===j-2)&&(f[x].push(X[1]),x++))}},_simplifyPoints:function(){for(var l=this._parts,f=this.options.smoothFactor,_=0,E=l.length;_<E;_++)l[_]=El(l[_],f)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,f){var _,E,x,P,j,X,ot=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(_=0,P=this._parts.length;_<P;_++)for(X=this._parts[_],E=0,j=X.length,x=j-1;E<j;x=E++)if(!(!f&&E===0)&&$o(l,X[x],X[E])<=ot)return!0;return!1}});function jg(l,f){return new Ws(l,f)}Ws._flat=S;var ta=Ws.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var f=Ws.prototype._convertLatLngs.call(this,l),_=f.length;return _>=2&&f[0]instanceof At&&f[0].equals(f[_-1])&&f.pop(),f},_setLatLngs:function(l){Ws.prototype._setLatLngs.call(this,l),g(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return g(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,f=this.options.weight,_=new vt(f,f);if(l=new lt(l.min.subtract(_),l.max.add(_)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var E=0,x=this._rings.length,P;E<x;E++)P=Yo(this._rings[E],l,!0),P.length&&this._parts.push(P)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var f=!1,_,E,x,P,j,X,ot,yt;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(P=0,ot=this._parts.length;P<ot;P++)for(_=this._parts[P],j=0,yt=_.length,X=yt-1;j<yt;X=j++)E=_[j],x=_[X],E.y>l.y!=x.y>l.y&&l.x<(x.x-E.x)*(l.y-E.y)/(x.y-E.y)+E.x&&(f=!f);return f||Ws.prototype._containsPoint.call(this,l,!0)}});function gi(l,f){return new ta(l,f)}var _i=Ne.extend({initialize:function(l,f){M(this,f),this._layers={},l&&this.addData(l)},addData:function(l){var f=J(l)?l:l.features,_,E,x;if(f){for(_=0,E=f.length;_<E;_++)x=f[_],(x.geometries||x.geometry||x.features||x.coordinates)&&this.addData(x);return this}var P=this.options;if(P.filter&&!P.filter(l))return this;var j=Sl(l,P);return j?(j.feature=ea(l),j.defaultOptions=j.options,this.resetStyle(j),P.onEachFeature&&P.onEachFeature(l,j),this.addLayer(j)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=s({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(f){this._setLayerStyle(f,l)},this)},_setLayerStyle:function(l,f){l.setStyle&&(typeof f=="function"&&(f=f(l.feature)),l.setStyle(f))}});function Sl(l,f){var _=l.type==="Feature"?l.geometry:l,E=_?_.coordinates:null,x=[],P=f&&f.pointToLayer,j=f&&f.coordsToLatLng||ku,X,ot,yt,Ct;if(!E&&!_)return null;switch(_.type){case"Point":return X=j(E),ah(P,l,X,f);case"MultiPoint":for(yt=0,Ct=E.length;yt<Ct;yt++)X=j(E[yt]),x.push(ah(P,l,X,f));return new Ne(x);case"LineString":case"MultiLineString":return ot=xl(E,_.type==="LineString"?0:1,j),new Ws(ot,f);case"Polygon":case"MultiPolygon":return ot=xl(E,_.type==="Polygon"?1:2,j),new ta(ot,f);case"GeometryCollection":for(yt=0,Ct=_.geometries.length;yt<Ct;yt++){var Pt=Sl({geometry:_.geometries[yt],type:"Feature",properties:l.properties},f);Pt&&x.push(Pt)}return new Ne(x);case"FeatureCollection":for(yt=0,Ct=_.features.length;yt<Ct;yt++){var Ot=Sl(_.features[yt],f);Ot&&x.push(Ot)}return new Ne(x);default:throw new Error("Invalid GeoJSON object.")}}function ah(l,f,_,E){return l?l(f,_):new Jo(_,E&&E.markersInheritOptions&&E)}function ku(l){return new At(l[1],l[0],l[2])}function xl(l,f,_){for(var E=[],x=0,P=l.length,j;x<P;x++)j=f?xl(l[x],f-1,_):(_||ku)(l[x]),E.push(j);return E}function Cl(l,f){return l=Tt(l),l.alt!==void 0?[w(l.lng,f),w(l.lat,f),w(l.alt,f)]:[w(l.lng,f),w(l.lat,f)]}function Du(l,f,_,E){for(var x=[],P=0,j=l.length;P<j;P++)x.push(f?Du(l[P],g(l[P])?0:f-1,_,E):Cl(l[P],E));return!f&&_&&x.length>0&&x.push(x[0].slice()),x}function Zi(l,f){return l.feature?s({},l.feature,{geometry:f}):ea(f)}function ea(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var Jr={toGeoJSON:function(l){return Zi(this,{type:"Point",coordinates:Cl(this.getLatLng(),l)})}};Jo.include(Jr),oh.include(Jr),wl.include(Jr),Ws.include({toGeoJSON:function(l){var f=!g(this._latlngs),_=Du(this._latlngs,f?1:0,!1,l);return Zi(this,{type:(f?"Multi":"")+"LineString",coordinates:_})}}),ta.include({toGeoJSON:function(l){var f=!g(this._latlngs),_=f&&!g(this._latlngs[0]),E=Du(this._latlngs,_?2:f?1:0,!0,l);return f||(E=[E]),Zi(this,{type:(_?"Multi":"")+"Polygon",coordinates:E})}}),Fe.include({toMultiPoint:function(l){var f=[];return this.eachLayer(function(_){f.push(_.toGeoJSON(l).geometry.coordinates)}),Zi(this,{type:"MultiPoint",coordinates:f})},toGeoJSON:function(l){var f=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(f==="MultiPoint")return this.toMultiPoint(l);var _=f==="GeometryCollection",E=[];return this.eachLayer(function(x){if(x.toGeoJSON){var P=x.toGeoJSON(l);if(_)E.push(P.geometry);else{var j=ea(P);j.type==="FeatureCollection"?E.push.apply(E,j.features):E.push(j)}}}),_?Zi(this,{geometries:E,type:"GeometryCollection"}):{type:"FeatureCollection",features:E}}});function Nu(l,f){return new _i(l,f)}var xd=Nu,bs=Se.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,f,_){this._url=l,this._bounds=xt(f),M(this,_)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Wt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){we(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&ps(this._image),this},bringToBack:function(){return this._map&&pr(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=xt(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",f=this._image=l?this._url:ne("img");if(Wt(f,"leaflet-image-layer"),this._zoomAnimated&&Wt(f,"leaflet-zoom-animated"),this.options.className&&Wt(f,this.options.className),f.onselectstart=T,f.onmousemove=T,f.onload=u(this.fire,this,"load"),f.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=f.src;return}f.src=this._url,f.alt=this.options.alt},_animateZoom:function(l){var f=this._map.getZoomScale(l.zoom),_=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;Hn(this._image,_,f)},_reset:function(){var l=this._image,f=new lt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),_=f.getSize();Bt(l,f.min),l.style.width=_.x+"px",l.style.height=_.y+"px"},_updateOpacity:function(){Ue(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),na=function(l,f,_){return new bs(l,f,_)},Lu=bs.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",f=this._image=l?this._url:ne("video");if(Wt(f,"leaflet-image-layer"),this._zoomAnimated&&Wt(f,"leaflet-zoom-animated"),this.options.className&&Wt(f,this.options.className),f.onselectstart=T,f.onmousemove=T,f.onloadeddata=u(this.fire,this,"load"),l){for(var _=f.getElementsByTagName("source"),E=[],x=0;x<_.length;x++)E.push(_[x].src);this._url=_.length>0?E:[f.src];return}J(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(f.style,"objectFit")&&(f.style.objectFit="fill"),f.autoplay=!!this.options.autoplay,f.loop=!!this.options.loop,f.muted=!!this.options.muted,f.playsInline=!!this.options.playsInline;for(var P=0;P<this._url.length;P++){var j=ne("source");j.src=this._url[P],f.appendChild(j)}}});function Cd(l,f,_){return new Lu(l,f,_)}var vr=bs.extend({_initImage:function(){var l=this._image=this._url;Wt(l,"leaflet-image-layer"),this._zoomAnimated&&Wt(l,"leaflet-zoom-animated"),this.options.className&&Wt(l,this.options.className),l.onselectstart=T,l.onmousemove=T}});function Ad(l,f,_){return new vr(l,f,_)}var Ki=Se.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,f){l&&(l instanceof At||J(l))?(this._latlng=Tt(l),M(this,f)):(M(this,l),this._source=f),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&Ue(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&Ue(this._container,1),this.bringToFront(),this.options.interactive&&(Wt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(Ue(this._container,0),this._removeTimeout=setTimeout(u(we,void 0,this._container),200)):we(this._container),this.options.interactive&&(Ce(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=Tt(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ps(this._container),this},bringToBack:function(){return this._map&&pr(this._container),this},_prepareOpen:function(l){var f=this._source;if(!f._map)return!1;if(f instanceof Ne){f=null;var _=this._source._layers;for(var E in _)if(_[E]._map){f=_[E];break}if(!f)return!1;this._source=f}if(!l)if(f.getCenter)l=f.getCenter();else if(f.getLatLng)l=f.getLatLng();else if(f.getBounds)l=f.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,f=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof f=="string")l.innerHTML=f;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(f)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),f=B(this.options.offset),_=this._getAnchor();this._zoomAnimated?Bt(this._container,l.add(_)):f=f.add(l).add(_);var E=this._containerBottom=-f.y,x=this._containerLeft=-Math.round(this._containerWidth/2)+f.x;this._container.style.bottom=E+"px",this._container.style.left=x+"px"}},_getAnchor:function(){return[0,0]}});Kt.include({_initOverlay:function(l,f,_,E){var x=f;return x instanceof l||(x=new l(E).setContent(f)),_&&x.setLatLng(_),x}}),Se.include({_initOverlay:function(l,f,_,E){var x=_;return x instanceof l?(M(x,E),x._source=this):(x=f&&!E?f:new l(E,this),x.setContent(_)),x}});var Al=Ki.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,Ki.prototype.openOn.call(this,l)},onAdd:function(l){Ki.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Gs||this._source.on("preclick",ei))},onRemove:function(l){Ki.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Gs||this._source.off("preclick",ei))},getEvents:function(){var l=Ki.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",f=this._container=ne("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),_=this._wrapper=ne("div",l+"-content-wrapper",f);if(this._contentNode=ne("div",l+"-content",_),Us(f),Wi(this._contentNode),Lt(f,"contextmenu",ei),this._tipContainer=ne("div",l+"-tip-container",f),this._tip=ne("div",l+"-tip",this._tipContainer),this.options.closeButton){var E=this._closeButton=ne("a",l+"-close-button",f);E.setAttribute("role","button"),E.setAttribute("aria-label","Close popup"),E.href="#close",E.innerHTML='<span aria-hidden="true">&#215;</span>',Lt(E,"click",function(x){Me(x),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,f=l.style;f.width="",f.whiteSpace="nowrap";var _=l.offsetWidth;_=Math.min(_,this.options.maxWidth),_=Math.max(_,this.options.minWidth),f.width=_+1+"px",f.whiteSpace="",f.height="";var E=l.offsetHeight,x=this.options.maxHeight,P="leaflet-popup-scrolled";x&&E>x?(f.height=x+"px",Wt(l,P)):Ce(l,P),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var f=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),_=this._getAnchor();Bt(this._container,f.add(_))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,f=parseInt(ds(this._container,"marginBottom"),10)||0,_=this._container.offsetHeight+f,E=this._containerWidth,x=new vt(this._containerLeft,-_-this._containerBottom);x._add(pi(this._container));var P=l.layerPointToContainerPoint(x),j=B(this.options.autoPanPadding),X=B(this.options.autoPanPaddingTopLeft||j),ot=B(this.options.autoPanPaddingBottomRight||j),yt=l.getSize(),Ct=0,Pt=0;P.x+E+ot.x>yt.x&&(Ct=P.x+E-yt.x+ot.x),P.x-Ct-X.x<0&&(Ct=P.x-X.x),P.y+_+ot.y>yt.y&&(Pt=P.y+_-yt.y+ot.y),P.y-Pt-X.y<0&&(Pt=P.y-X.y),(Ct||Pt)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([Ct,Pt]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),qg=function(l,f){return new Al(l,f)};Kt.mergeOptions({closePopupOnClick:!0}),Kt.include({openPopup:function(l,f,_){return this._initOverlay(Al,l,f,_).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),Se.include({bindPopup:function(l,f){return this._popup=this._initOverlay(Al,this._popup,l,f),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof Ne||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){Pn(l);var f=l.layer||l.target;if(this._popup._source===f&&!(f instanceof Gs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=f,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var Vu=Ki.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){Ki.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){Ki.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=Ki.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",f=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ne("div",f),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var f,_,E=this._map,x=this._container,P=E.latLngToContainerPoint(E.getCenter()),j=E.layerPointToContainerPoint(l),X=this.options.direction,ot=x.offsetWidth,yt=x.offsetHeight,Ct=B(this.options.offset),Pt=this._getAnchor();X==="top"?(f=ot/2,_=yt):X==="bottom"?(f=ot/2,_=0):X==="center"?(f=ot/2,_=yt/2):X==="right"?(f=0,_=yt/2):X==="left"?(f=ot,_=yt/2):j.x<P.x?(X="right",f=0,_=yt/2):(X="left",f=ot+(Ct.x+Pt.x)*2,_=yt/2),l=l.subtract(B(f,_,!0)).add(Ct).add(Pt),Ce(x,"leaflet-tooltip-right"),Ce(x,"leaflet-tooltip-left"),Ce(x,"leaflet-tooltip-top"),Ce(x,"leaflet-tooltip-bottom"),Wt(x,"leaflet-tooltip-"+X),Bt(x,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&Ue(this._container,l)},_animateZoom:function(l){var f=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(f)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Gg=function(l,f){return new Vu(l,f)};Kt.include({openTooltip:function(l,f,_){return this._initOverlay(Vu,l,f,_).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),Se.include({bindTooltip:function(l,f){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Vu,this._tooltip,l,f),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var f=l?"off":"on",_={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?_.add=this._openTooltip:(_.mouseover=this._openTooltip,_.mouseout=this.closeTooltip,_.click=this._openTooltip,this._map?this._addFocusListeners():_.add=this._addFocusListeners),this._tooltip.options.sticky&&(_.mousemove=this._moveTooltip),this[f](_),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof Ne||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var f=typeof l.getElement=="function"&&l.getElement();f&&(Lt(f,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),Lt(f,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var f=typeof l.getElement=="function"&&l.getElement();f&&f.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var f=this;this._map.once("moveend",function(){f._openOnceFlag=!1,f._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var f=l.latlng,_,E;this._tooltip.options.sticky&&l.originalEvent&&(_=this._map.mouseEventToContainerPoint(l.originalEvent),E=this._map.containerPointToLayerPoint(_),f=this._map.layerPointToLatLng(E)),this._tooltip.setLatLng(f)}});var lh=vs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var f=l&&l.tagName==="DIV"?l:document.createElement("div"),_=this.options;if(_.html instanceof Element?(pn(f),f.appendChild(_.html)):f.innerHTML=_.html!==!1?_.html:"",_.bgPos){var E=B(_.bgPos);f.style.backgroundPosition=-E.x+"px "+-E.y+"px"}return this._setIconStyles(f,"icon"),f},createShadow:function(){return null}});function Id(l){return new lh(l)}vs.Default=Xo;var to=Se.extend({options:{tileSize:256,opacity:1,updateWhenIdle:kt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){M(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),we(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ps(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(pr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof vt?l:new vt(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var f=this.getPane().children,_=-l(-1/0,1/0),E=0,x=f.length,P;E<x;E++)P=f[E].style.zIndex,f[E]!==this._container&&P&&(_=l(_,+P));isFinite(_)&&(this.options.zIndex=_+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!kt.ielt9){Ue(this._container,this.options.opacity);var l=+new Date,f=!1,_=!1;for(var E in this._tiles){var x=this._tiles[E];if(!(!x.current||!x.loaded)){var P=Math.min(1,(l-x.loaded)/200);Ue(x.el,P),P<1?f=!0:(x.active?_=!0:this._onOpaqueTile(x),x.active=!0)}}_&&!this._noPrune&&this._pruneTiles(),f&&(W(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this))}},_onOpaqueTile:T,_initContainer:function(){this._container||(this._container=ne("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,f=this.options.maxZoom;if(l!==void 0){for(var _ in this._levels)_=Number(_),this._levels[_].el.children.length||_===l?(this._levels[_].el.style.zIndex=f-Math.abs(l-_),this._onUpdateLevel(_)):(we(this._levels[_].el),this._removeTilesAtZoom(_),this._onRemoveLevel(_),delete this._levels[_]);var E=this._levels[l],x=this._map;return E||(E=this._levels[l]={},E.el=ne("div","leaflet-tile-container leaflet-zoom-animated",this._container),E.el.style.zIndex=f,E.origin=x.project(x.unproject(x.getPixelOrigin()),l).round(),E.zoom=l,this._setZoomTransform(E,x.getCenter(),x.getZoom()),T(E.el.offsetWidth),this._onCreateLevel(E)),this._level=E,E}},_onUpdateLevel:T,_onRemoveLevel:T,_onCreateLevel:T,_pruneTiles:function(){if(this._map){var l,f,_=this._map.getZoom();if(_>this.options.maxZoom||_<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)f=this._tiles[l],f.retain=f.current;for(l in this._tiles)if(f=this._tiles[l],f.current&&!f.active){var E=f.coords;this._retainParent(E.x,E.y,E.z,E.z-5)||this._retainChildren(E.x,E.y,E.z,E.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var f in this._tiles)this._tiles[f].coords.z===l&&this._removeTile(f)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)we(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,f,_,E){var x=Math.floor(l/2),P=Math.floor(f/2),j=_-1,X=new vt(+x,+P);X.z=+j;var ot=this._tileCoordsToKey(X),yt=this._tiles[ot];return yt&&yt.active?(yt.retain=!0,!0):(yt&&yt.loaded&&(yt.retain=!0),j>E?this._retainParent(x,P,j,E):!1)},_retainChildren:function(l,f,_,E){for(var x=2*l;x<2*l+2;x++)for(var P=2*f;P<2*f+2;P++){var j=new vt(x,P);j.z=_+1;var X=this._tileCoordsToKey(j),ot=this._tiles[X];if(ot&&ot.active){ot.retain=!0;continue}else ot&&ot.loaded&&(ot.retain=!0);_+1<E&&this._retainChildren(x,P,_+1,E)}},_resetView:function(l){var f=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),f,f)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var f=this.options;return f.minNativeZoom!==void 0&&l<f.minNativeZoom?f.minNativeZoom:f.maxNativeZoom!==void 0&&f.maxNativeZoom<l?f.maxNativeZoom:l},_setView:function(l,f,_,E){var x=Math.round(f);this.options.maxZoom!==void 0&&x>this.options.maxZoom||this.options.minZoom!==void 0&&x<this.options.minZoom?x=void 0:x=this._clampZoom(x);var P=this.options.updateWhenZooming&&x!==this._tileZoom;(!E||P)&&(this._tileZoom=x,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),x!==void 0&&this._update(l),_||this._pruneTiles(),this._noPrune=!!_),this._setZoomTransforms(l,f)},_setZoomTransforms:function(l,f){for(var _ in this._levels)this._setZoomTransform(this._levels[_],l,f)},_setZoomTransform:function(l,f,_){var E=this._map.getZoomScale(_,l.zoom),x=l.origin.multiplyBy(E).subtract(this._map._getNewPixelOrigin(f,_)).round();kt.any3d?Hn(l.el,x,E):Bt(l.el,x)},_resetGrid:function(){var l=this._map,f=l.options.crs,_=this._tileSize=this.getTileSize(),E=this._tileZoom,x=this._map.getPixelWorldBounds(this._tileZoom);x&&(this._globalTileRange=this._pxBoundsToTileRange(x)),this._wrapX=f.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,f.wrapLng[0]],E).x/_.x),Math.ceil(l.project([0,f.wrapLng[1]],E).x/_.y)],this._wrapY=f.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([f.wrapLat[0],0],E).y/_.x),Math.ceil(l.project([f.wrapLat[1],0],E).y/_.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var f=this._map,_=f._animatingZoom?Math.max(f._animateToZoom,f.getZoom()):f.getZoom(),E=f.getZoomScale(_,this._tileZoom),x=f.project(l,this._tileZoom).floor(),P=f.getSize().divideBy(E*2);return new lt(x.subtract(P),x.add(P))},_update:function(l){var f=this._map;if(f){var _=this._clampZoom(f.getZoom());if(l===void 0&&(l=f.getCenter()),this._tileZoom!==void 0){var E=this._getTiledPixelBounds(l),x=this._pxBoundsToTileRange(E),P=x.getCenter(),j=[],X=this.options.keepBuffer,ot=new lt(x.getBottomLeft().subtract([X,-X]),x.getTopRight().add([X,-X]));if(!(isFinite(x.min.x)&&isFinite(x.min.y)&&isFinite(x.max.x)&&isFinite(x.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var yt in this._tiles){var Ct=this._tiles[yt].coords;(Ct.z!==this._tileZoom||!ot.contains(new vt(Ct.x,Ct.y)))&&(this._tiles[yt].current=!1)}if(Math.abs(_-this._tileZoom)>1){this._setView(l,_);return}for(var Pt=x.min.y;Pt<=x.max.y;Pt++)for(var Ot=x.min.x;Ot<=x.max.x;Ot++){var qt=new vt(Ot,Pt);if(qt.z=this._tileZoom,!!this._isValidTile(qt)){var He=this._tiles[this._tileCoordsToKey(qt)];He?He.current=!0:j.push(qt)}}if(j.sort(function(On,xi){return On.distanceTo(P)-xi.distanceTo(P)}),j.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var tn=document.createDocumentFragment();for(Ot=0;Ot<j.length;Ot++)this._addTile(j[Ot],tn);this._level.el.appendChild(tn)}}}},_isValidTile:function(l){var f=this._map.options.crs;if(!f.infinite){var _=this._globalTileRange;if(!f.wrapLng&&(l.x<_.min.x||l.x>_.max.x)||!f.wrapLat&&(l.y<_.min.y||l.y>_.max.y))return!1}if(!this.options.bounds)return!0;var E=this._tileCoordsToBounds(l);return xt(this.options.bounds).overlaps(E)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var f=this._map,_=this.getTileSize(),E=l.scaleBy(_),x=E.add(_),P=f.unproject(E,l.z),j=f.unproject(x,l.z);return[P,j]},_tileCoordsToBounds:function(l){var f=this._tileCoordsToNwSe(l),_=new mt(f[0],f[1]);return this.options.noWrap||(_=this._map.wrapLatLngBounds(_)),_},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var f=l.split(":"),_=new vt(+f[0],+f[1]);return _.z=+f[2],_},_removeTile:function(l){var f=this._tiles[l];f&&(we(f.el),delete this._tiles[l],this.fire("tileunload",{tile:f.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){Wt(l,"leaflet-tile");var f=this.getTileSize();l.style.width=f.x+"px",l.style.height=f.y+"px",l.onselectstart=T,l.onmousemove=T,kt.ielt9&&this.options.opacity<1&&Ue(l,this.options.opacity)},_addTile:function(l,f){var _=this._getTilePos(l),E=this._tileCoordsToKey(l),x=this.createTile(this._wrapCoords(l),u(this._tileReady,this,l));this._initTile(x),this.createTile.length<2&&H(u(this._tileReady,this,l,null,x)),Bt(x,_),this._tiles[E]={el:x,coords:l,current:!0},f.appendChild(x),this.fire("tileloadstart",{tile:x,coords:l})},_tileReady:function(l,f,_){f&&this.fire("tileerror",{error:f,tile:_,coords:l});var E=this._tileCoordsToKey(l);_=this._tiles[E],_&&(_.loaded=+new Date,this._map._fadeAnimated?(Ue(_.el,0),W(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this)):(_.active=!0,this._pruneTiles()),f||(Wt(_.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:_.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),kt.ielt9||!this._map._fadeAnimated?H(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var f=new vt(this._wrapX?v(l.x,this._wrapX):l.x,this._wrapY?v(l.y,this._wrapY):l.y);return f.z=l.z,f},_pxBoundsToTileRange:function(l){var f=this.getTileSize();return new lt(l.min.unscaleBy(f).floor(),l.max.unscaleBy(f).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function $i(l){return new to(l)}var eo=to.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,f){this._url=l,f=M(this,f),f.detectRetina&&kt.retina&&f.maxZoom>0?(f.tileSize=Math.floor(f.tileSize/2),f.zoomReverse?(f.zoomOffset--,f.minZoom=Math.min(f.maxZoom,f.minZoom+1)):(f.zoomOffset++,f.maxZoom=Math.max(f.minZoom,f.maxZoom-1)),f.minZoom=Math.max(0,f.minZoom)):f.zoomReverse?f.minZoom=Math.min(f.maxZoom,f.minZoom):f.maxZoom=Math.max(f.minZoom,f.maxZoom),typeof f.subdomains=="string"&&(f.subdomains=f.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,f){return this._url===l&&f===void 0&&(f=!0),this._url=l,f||this.redraw(),this},createTile:function(l,f){var _=document.createElement("img");return Lt(_,"load",u(this._tileOnLoad,this,f,_)),Lt(_,"error",u(this._tileOnError,this,f,_)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(_.referrerPolicy=this.options.referrerPolicy),_.alt="",_.src=this.getTileUrl(l),_},getTileUrl:function(l){var f={r:kt.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var _=this._globalTileRange.max.y-l.y;this.options.tms&&(f.y=_),f["-y"]=_}return Z(this._url,s(f,this.options))},_tileOnLoad:function(l,f){kt.ielt9?setTimeout(u(l,this,null,f),0):l(null,f)},_tileOnError:function(l,f,_){var E=this.options.errorTileUrl;E&&f.getAttribute("src")!==E&&(f.src=E),l(_,f)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,f=this.options.maxZoom,_=this.options.zoomReverse,E=this.options.zoomOffset;return _&&(l=f-l),l+E},_getSubdomain:function(l){var f=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[f]},_abortLoading:function(){var l,f;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(f=this._tiles[l].el,f.onload=T,f.onerror=T,!f.complete)){f.src=rt;var _=this._tiles[l].coords;we(f),delete this._tiles[l],this.fire("tileabort",{tile:f,coords:_})}},_removeTile:function(l){var f=this._tiles[l];if(f)return f.el.setAttribute("src",rt),to.prototype._removeTile.call(this,l)},_tileReady:function(l,f,_){if(!(!this._map||_&&_.getAttribute("src")===rt))return to.prototype._tileReady.call(this,l,f,_)}});function yi(l,f){return new eo(l,f)}var vi=eo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,f){this._url=l;var _=s({},this.defaultWmsParams);for(var E in f)E in this.options||(_[E]=f[E]);f=M(this,f);var x=f.detectRetina&&kt.retina?2:1,P=this.getTileSize();_.width=P.x*x,_.height=P.y*x,this.wmsParams=_},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var f=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[f]=this._crs.code,eo.prototype.onAdd.call(this,l)},getTileUrl:function(l){var f=this._tileCoordsToNwSe(l),_=this._crs,E=bt(_.project(f[0]),_.project(f[1])),x=E.min,P=E.max,j=(this._wmsVersion>=1.3&&this._crs===rn?[x.y,x.x,P.y,P.x]:[x.x,x.y,P.x,P.y]).join(","),X=eo.prototype.getTileUrl.call(this,l);return X+k(this.wmsParams,X,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+j},setParams:function(l,f){return s(this.wmsParams,l),f||this.redraw(),this}});function ia(l,f){return new vi(l,f)}eo.WMS=vi,yi.wms=ia;var Qi=Se.extend({options:{padding:.1},initialize:function(l){M(this,l),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Wt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,f){var _=this._map.getZoomScale(f,this._zoom),E=this._map.getSize().multiplyBy(.5+this.options.padding),x=this._map.project(this._center,f),P=E.multiplyBy(-_).add(x).subtract(this._map._getNewPixelOrigin(l,f));kt.any3d?Hn(this._container,P,_):Bt(this._container,P)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,f=this._map.getSize(),_=this._map.containerPointToLayerPoint(f.multiplyBy(-l)).round();this._bounds=new lt(_,_.add(f.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Il=Qi.extend({options:{tolerance:0},getEvents:function(){var l=Qi.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Qi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");Lt(l,"mousemove",this._onMouseMove,this),Lt(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Lt(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){W(this._redrawRequest),delete this._ctx,we(this._container),pe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var f in this._layers)l=this._layers[f],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qi.prototype._update.call(this);var l=this._bounds,f=this._container,_=l.getSize(),E=kt.retina?2:1;Bt(f,l.min),f.width=E*_.x,f.height=E*_.y,f.style.width=_.x+"px",f.style.height=_.y+"px",kt.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){Qi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[d(l)]=l;var f=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=f),this._drawLast=f,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var f=l._order,_=f.next,E=f.prev;_?_.prev=E:this._drawLast=E,E?E.next=_:this._drawFirst=_,delete l._order,delete this._layers[d(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var f=l.options.dashArray.split(/[, ]+/),_=[],E,x;for(x=0;x<f.length;x++){if(E=Number(f[x]),isNaN(E))return;_.push(E)}l.options._dashArray=_}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||H(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var f=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new lt,this._redrawBounds.extend(l._pxBounds.min.subtract([f,f])),this._redrawBounds.extend(l._pxBounds.max.add([f,f]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var f=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,f.x,f.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,f=this._redrawBounds;if(this._ctx.save(),f){var _=f.getSize();this._ctx.beginPath(),this._ctx.rect(f.min.x,f.min.y,_.x,_.y),this._ctx.clip()}this._drawing=!0;for(var E=this._drawFirst;E;E=E.next)l=E.layer,(!f||l._pxBounds&&l._pxBounds.intersects(f))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,f){if(this._drawing){var _,E,x,P,j=l._parts,X=j.length,ot=this._ctx;if(X){for(ot.beginPath(),_=0;_<X;_++){for(E=0,x=j[_].length;E<x;E++)P=j[_][E],ot[E?"lineTo":"moveTo"](P.x,P.y);f&&ot.closePath()}this._fillStroke(ot,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var f=l._point,_=this._ctx,E=Math.max(Math.round(l._radius),1),x=(Math.max(Math.round(l._radiusY),1)||E)/E;x!==1&&(_.save(),_.scale(1,x)),_.beginPath(),_.arc(f.x,f.y/x,E,0,Math.PI*2,!1),x!==1&&_.restore(),this._fillStroke(_,l)}},_fillStroke:function(l,f){var _=f.options;_.fill&&(l.globalAlpha=_.fillOpacity,l.fillStyle=_.fillColor||_.color,l.fill(_.fillRule||"evenodd")),_.stroke&&_.weight!==0&&(l.setLineDash&&l.setLineDash(f.options&&f.options._dashArray||[]),l.globalAlpha=_.opacity,l.lineWidth=_.weight,l.strokeStyle=_.color,l.lineCap=_.lineCap,l.lineJoin=_.lineJoin,l.stroke())},_onClick:function(l){for(var f=this._map.mouseEventToLayerPoint(l),_,E,x=this._drawFirst;x;x=x.next)_=x.layer,_.options.interactive&&_._containsPoint(f)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(_))&&(E=_);this._fireEvent(E?[E]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var f=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,f)}},_handleMouseOut:function(l){var f=this._hoveredLayer;f&&(Ce(this._container,"leaflet-interactive"),this._fireEvent([f],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,f){if(!this._mouseHoverThrottled){for(var _,E,x=this._drawFirst;x;x=x.next)_=x.layer,_.options.interactive&&_._containsPoint(f)&&(E=_);E!==this._hoveredLayer&&(this._handleMouseOut(l),E&&(Wt(this._container,"leaflet-interactive"),this._fireEvent([E],l,"mouseover"),this._hoveredLayer=E)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,f,_){this._map._fireDOMEvent(f,_||f.type,l)},_bringToFront:function(l){var f=l._order;if(f){var _=f.next,E=f.prev;if(_)_.prev=E;else return;E?E.next=_:_&&(this._drawFirst=_),f.prev=this._drawLast,this._drawLast.next=f,f.next=null,this._drawLast=f,this._requestRedraw(l)}},_bringToBack:function(l){var f=l._order;if(f){var _=f.next,E=f.prev;if(E)E.next=_;else return;_?_.prev=E:E&&(this._drawLast=E),f.prev=null,f.next=this._drawFirst,this._drawFirst.prev=f,this._drawFirst=f,this._requestRedraw(l)}}});function Rl(l){return kt.canvas?new Il(l):null}var no=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),sa={_initContainer:function(){this._container=ne("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Qi.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var f=l._container=no("shape");Wt(f,"leaflet-vml-shape "+(this.options.className||"")),f.coordsize="1 1",l._path=no("path"),f.appendChild(l._path),this._updateStyle(l),this._layers[d(l)]=l},_addPath:function(l){var f=l._container;this._container.appendChild(f),l.options.interactive&&l.addInteractiveTarget(f)},_removePath:function(l){var f=l._container;we(f),l.removeInteractiveTarget(f),delete this._layers[d(l)]},_updateStyle:function(l){var f=l._stroke,_=l._fill,E=l.options,x=l._container;x.stroked=!!E.stroke,x.filled=!!E.fill,E.stroke?(f||(f=l._stroke=no("stroke")),x.appendChild(f),f.weight=E.weight+"px",f.color=E.color,f.opacity=E.opacity,E.dashArray?f.dashStyle=J(E.dashArray)?E.dashArray.join(" "):E.dashArray.replace(/( *, *)/g," "):f.dashStyle="",f.endcap=E.lineCap.replace("butt","flat"),f.joinstyle=E.lineJoin):f&&(x.removeChild(f),l._stroke=null),E.fill?(_||(_=l._fill=no("fill")),x.appendChild(_),_.color=E.fillColor||E.color,_.opacity=E.fillOpacity):_&&(x.removeChild(_),l._fill=null)},_updateCircle:function(l){var f=l._point.round(),_=Math.round(l._radius),E=Math.round(l._radiusY||_);this._setPath(l,l._empty()?"M0 0":"AL "+f.x+","+f.y+" "+_+","+E+" 0,"+65535*360)},_setPath:function(l,f){l._path.v=f},_bringToFront:function(l){ps(l._container)},_bringToBack:function(l){pr(l._container)}},Pl=kt.vml?no:Do,br=Qi.extend({_initContainer:function(){this._container=Pl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Pl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){we(this._container),pe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qi.prototype._update.call(this);var l=this._bounds,f=l.getSize(),_=this._container;(!this._svgSize||!this._svgSize.equals(f))&&(this._svgSize=f,_.setAttribute("width",f.x),_.setAttribute("height",f.y)),Bt(_,l.min),_.setAttribute("viewBox",[l.min.x,l.min.y,f.x,f.y].join(" ")),this.fire("update")}},_initPath:function(l){var f=l._path=Pl("path");l.options.className&&Wt(f,l.options.className),l.options.interactive&&Wt(f,"leaflet-interactive"),this._updateStyle(l),this._layers[d(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){we(l._path),l.removeInteractiveTarget(l._path),delete this._layers[d(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var f=l._path,_=l.options;f&&(_.stroke?(f.setAttribute("stroke",_.color),f.setAttribute("stroke-opacity",_.opacity),f.setAttribute("stroke-width",_.weight),f.setAttribute("stroke-linecap",_.lineCap),f.setAttribute("stroke-linejoin",_.lineJoin),_.dashArray?f.setAttribute("stroke-dasharray",_.dashArray):f.removeAttribute("stroke-dasharray"),_.dashOffset?f.setAttribute("stroke-dashoffset",_.dashOffset):f.removeAttribute("stroke-dashoffset")):f.setAttribute("stroke","none"),_.fill?(f.setAttribute("fill",_.fillColor||_.color),f.setAttribute("fill-opacity",_.fillOpacity),f.setAttribute("fill-rule",_.fillRule||"evenodd")):f.setAttribute("fill","none"))},_updatePoly:function(l,f){this._setPath(l,ol(l._parts,f))},_updateCircle:function(l){var f=l._point,_=Math.max(Math.round(l._radius),1),E=Math.max(Math.round(l._radiusY),1)||_,x="a"+_+","+E+" 0 1,0 ",P=l._empty()?"M0 0":"M"+(f.x-_)+","+f.y+x+_*2+",0 "+x+-_*2+",0 ";this._setPath(l,P)},_setPath:function(l,f){l._path.setAttribute("d",f)},_bringToFront:function(l){ps(l._path)},_bringToBack:function(l){pr(l._path)}});kt.vml&&br.include(sa);function io(l){return kt.svg||kt.vml?new br(l):null}Kt.include({getRenderer:function(l){var f=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return f||(f=this._renderer=this._createRenderer()),this.hasLayer(f)||this.addLayer(f),f},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var f=this._paneRenderers[l];return f===void 0&&(f=this._createRenderer({pane:l}),this._paneRenderers[l]=f),f},_createRenderer:function(l){return this.options.preferCanvas&&Rl(l)||io(l)}});var Rd=ta.extend({initialize:function(l,f){ta.prototype.initialize.call(this,this._boundsToLatLngs(l),f)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=xt(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function bi(l,f){return new Rd(l,f)}br.create=Pl,br.pointsToPath=ol,_i.geometryToLayer=Sl,_i.coordsToLatLng=ku,_i.coordsToLatLngs=xl,_i.latLngToCoords=Cl,_i.latLngsToCoords=Du,_i.getFeature=Zi,_i.asFeature=ea,Kt.mergeOptions({boxZoom:!0});var zu=ni.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){Lt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){pe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){we(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Rn(),Zr(),this._startPoint=this._map.mouseEventToContainerPoint(l),Lt(document,{contextmenu:Pn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=ne("div","leaflet-zoom-box",this._container),Wt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var f=new lt(this._point,this._startPoint),_=f.getSize();Bt(this._box,f.min),this._box.style.width=_.x+"px",this._box.style.height=_.y+"px"},_finish:function(){this._moved&&(we(this._box),Ce(this._container,"leaflet-crosshair")),ji(),_l(),pe(document,{contextmenu:Pn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var f=new mt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(f).fire("boxzoomend",{boxZoomBounds:f})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Kt.addInitHook("addHandler","boxZoom",zu),Kt.mergeOptions({doubleClickZoom:!0});var Es=ni.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var f=this._map,_=f.getZoom(),E=f.options.zoomDelta,x=l.originalEvent.shiftKey?_-E:_+E;f.options.doubleClickZoom==="center"?f.setZoom(x):f.setZoomAround(l.containerPoint,x)}});Kt.addInitHook("addHandler","doubleClickZoom",Es),Kt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var uh=ni.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new Yi(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}Wt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ce(this._map._container,"leaflet-grab"),Ce(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var f=xt(this._map.options.maxBounds);this._offsetLimit=bt(this._map.latLngToContainerPoint(f.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(f.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var f=this._lastTime=+new Date,_=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(_),this._times.push(f),this._prunePositions(f)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),f=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=f.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,f){return l-(l-f)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),f=this._offsetLimit;l.x<f.min.x&&(l.x=this._viscousLimit(l.x,f.min.x)),l.y<f.min.y&&(l.y=this._viscousLimit(l.y,f.min.y)),l.x>f.max.x&&(l.x=this._viscousLimit(l.x,f.max.x)),l.y>f.max.y&&(l.y=this._viscousLimit(l.y,f.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,f=Math.round(l/2),_=this._initialWorldOffset,E=this._draggable._newPos.x,x=(E-f+_)%l+f-_,P=(E+f+_)%l-f-_,j=Math.abs(x+_)<Math.abs(P+_)?x:P;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=j},_onDragEnd:function(l){var f=this._map,_=f.options,E=!_.inertia||l.noInertia||this._times.length<2;if(f.fire("dragend",l),E)f.fire("moveend");else{this._prunePositions(+new Date);var x=this._lastPos.subtract(this._positions[0]),P=(this._lastTime-this._times[0])/1e3,j=_.easeLinearity,X=x.multiplyBy(j/P),ot=X.distanceTo([0,0]),yt=Math.min(_.inertiaMaxSpeed,ot),Ct=X.multiplyBy(yt/ot),Pt=yt/(_.inertiaDeceleration*j),Ot=Ct.multiplyBy(-Pt/2).round();!Ot.x&&!Ot.y?f.fire("moveend"):(Ot=f._limitOffset(Ot,f.options.maxBounds),H(function(){f.panBy(Ot,{duration:Pt,easeLinearity:j,noMoveStart:!0,animate:!0})}))}}});Kt.addInitHook("addHandler","dragging",uh),Kt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ml=ni.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),Lt(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),pe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,f=document.documentElement,_=l.scrollTop||f.scrollTop,E=l.scrollLeft||f.scrollLeft;this._map._container.focus(),window.scrollTo(E,_)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var f=this._panKeys={},_=this.keyCodes,E,x;for(E=0,x=_.left.length;E<x;E++)f[_.left[E]]=[-1*l,0];for(E=0,x=_.right.length;E<x;E++)f[_.right[E]]=[l,0];for(E=0,x=_.down.length;E<x;E++)f[_.down[E]]=[0,l];for(E=0,x=_.up.length;E<x;E++)f[_.up[E]]=[0,-1*l]},_setZoomDelta:function(l){var f=this._zoomKeys={},_=this.keyCodes,E,x;for(E=0,x=_.zoomIn.length;E<x;E++)f[_.zoomIn[E]]=l;for(E=0,x=_.zoomOut.length;E<x;E++)f[_.zoomOut[E]]=-l},_addHooks:function(){Lt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){pe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var f=l.keyCode,_=this._map,E;if(f in this._panKeys){if(!_._panAnim||!_._panAnim._inProgress)if(E=this._panKeys[f],l.shiftKey&&(E=B(E).multiplyBy(3)),_.options.maxBounds&&(E=_._limitOffset(B(E),_.options.maxBounds)),_.options.worldCopyJump){var x=_.wrapLatLng(_.unproject(_.project(_.getCenter()).add(E)));_.panTo(x)}else _.panBy(E)}else if(f in this._zoomKeys)_.setZoom(_.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[f]);else if(f===27&&_._popup&&_._popup.options.closeOnEscapeKey)_.closePopup();else return;Pn(l)}}});Kt.addInitHook("addHandler","keyboard",Ml),Kt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Er=ni.extend({addHooks:function(){Lt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){pe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var f=Kr(l),_=this._map.options.wheelDebounceTime;this._delta+=f,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var E=Math.max(_-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),E),Pn(l)},_performZoom:function(){var l=this._map,f=l.getZoom(),_=this._map.options.zoomSnap||0;l._stop();var E=this._delta/(this._map.options.wheelPxPerZoomLevel*4),x=4*Math.log(2/(1+Math.exp(-Math.abs(E))))/Math.LN2,P=_?Math.ceil(x/_)*_:x,j=l._limitZoom(f+(this._delta>0?P:-P))-f;this._delta=0,this._startTime=null,j&&(l.options.scrollWheelZoom==="center"?l.setZoom(f+j):l.setZoomAround(this._lastMousePos,f+j))}});Kt.addInitHook("addHandler","scrollWheelZoom",Er);var ch=600;Kt.mergeOptions({tapHold:kt.touchNative&&kt.safari&&kt.mobile,tapTolerance:15});var Bu=ni.extend({addHooks:function(){Lt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){pe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var f=l.touches[0];this._startPos=this._newPos=new vt(f.clientX,f.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Lt(document,"touchend",Me),Lt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",f))},this),ch),Lt(document,"touchend touchcancel contextmenu",this._cancel,this),Lt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){pe(document,"touchend",Me),pe(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),pe(document,"touchend touchcancel contextmenu",this._cancel,this),pe(document,"touchmove",this._onMove,this)},_onMove:function(l){var f=l.touches[0];this._newPos=new vt(f.clientX,f.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,f){var _=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:f.screenX,screenY:f.screenY,clientX:f.clientX,clientY:f.clientY});_._simulated=!0,f.target.dispatchEvent(_)}});Kt.addInitHook("addHandler","tapHold",Bu),Kt.mergeOptions({touchZoom:kt.touch,bounceAtZoomLimits:!0});var so=ni.extend({addHooks:function(){Wt(this._map._container,"leaflet-touch-zoom"),Lt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ce(this._map._container,"leaflet-touch-zoom"),pe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var f=this._map;if(!(!l.touches||l.touches.length!==2||f._animatingZoom||this._zooming)){var _=f.mouseEventToContainerPoint(l.touches[0]),E=f.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=f.getSize()._divideBy(2),this._startLatLng=f.containerPointToLatLng(this._centerPoint),f.options.touchZoom!=="center"&&(this._pinchStartLatLng=f.containerPointToLatLng(_.add(E)._divideBy(2))),this._startDist=_.distanceTo(E),this._startZoom=f.getZoom(),this._moved=!1,this._zooming=!0,f._stop(),Lt(document,"touchmove",this._onTouchMove,this),Lt(document,"touchend touchcancel",this._onTouchEnd,this),Me(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var f=this._map,_=f.mouseEventToContainerPoint(l.touches[0]),E=f.mouseEventToContainerPoint(l.touches[1]),x=_.distanceTo(E)/this._startDist;if(this._zoom=f.getScaleZoom(x,this._startZoom),!f.options.bounceAtZoomLimits&&(this._zoom<f.getMinZoom()&&x<1||this._zoom>f.getMaxZoom()&&x>1)&&(this._zoom=f._limitZoom(this._zoom)),f.options.touchZoom==="center"){if(this._center=this._startLatLng,x===1)return}else{var P=_._add(E)._divideBy(2)._subtract(this._centerPoint);if(x===1&&P.x===0&&P.y===0)return;this._center=f.unproject(f.project(this._pinchStartLatLng,this._zoom).subtract(P),this._zoom)}this._moved||(f._moveStart(!0,!1),this._moved=!0),W(this._animRequest);var j=u(f._move,f,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=H(j,this,!0),Me(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,W(this._animRequest),pe(document,"touchmove",this._onTouchMove,this),pe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Kt.addInitHook("addHandler","touchZoom",so),Kt.BoxZoom=zu,Kt.DoubleClickZoom=Es,Kt.Drag=uh,Kt.Keyboard=Ml,Kt.ScrollWheelZoom=Er,Kt.TapHold=Bu,Kt.TouchZoom=so,e.Bounds=lt,e.Browser=kt,e.CRS=Pe,e.Canvas=Il,e.Circle=oh,e.CircleMarker=wl,e.Class=ee,e.Control=En,e.DivIcon=lh,e.DivOverlay=Ki,e.DomEvent=Au,e.DomUtil=yl,e.Draggable=Yi,e.Evented=Et,e.FeatureGroup=Ne,e.GeoJSON=_i,e.GridLayer=to,e.Handler=ni,e.Icon=vs,e.ImageOverlay=bs,e.LatLng=At,e.LatLngBounds=mt,e.Layer=Se,e.LayerGroup=Fe,e.LineUtil=D,e.Map=Kt,e.Marker=Jo,e.Mixin=Qr,e.Path=Gs,e.Point=vt,e.PolyUtil=Ko,e.Polygon=ta,e.Polyline=Ws,e.Popup=Al,e.PosAnimation=$r,e.Projection=wt,e.Rectangle=Rd,e.Renderer=Qi,e.SVG=br,e.SVGOverlay=vr,e.TileLayer=eo,e.Tooltip=Vu,e.Transformation=Li,e.Util=F,e.VideoOverlay=Lu,e.bind=u,e.bounds=bt,e.canvas=Rl,e.circle=Hg,e.circleMarker=Sd,e.control=Mn,e.divIcon=Id,e.extend=s,e.featureGroup=ys,e.geoJSON=Nu,e.geoJson=xd,e.gridLayer=$i,e.icon=Ou,e.imageOverlay=na,e.latLng=Tt,e.latLngBounds=xt,e.layerGroup=qs,e.map=gs,e.marker=rh,e.point=B,e.polygon=gi,e.polyline=jg,e.popup=qg,e.rectangle=bi,e.setOptions=M,e.stamp=d,e.svg=io,e.svgOverlay=Ad,e.tileLayer=yi,e.tooltip=Gg,e.transformation=Vi,e.version=i,e.videoOverlay=Cd;var ra=window.L;e.noConflict=function(){return window.L=ra,this},window.L=e})}(_f,_f.exports)),_f.exports}var wd=v8();function Fg(n,t,e){return Object.freeze({instance:n,context:t,container:e})}function Jb(n,t){return t==null?function(i,s){const o=$.useRef(void 0);return o.current||(o.current=n(i,s)),o}:function(i,s){const o=$.useRef(void 0);o.current||(o.current=n(i,s));const u=$.useRef(i),{instance:h}=o.current;return $.useEffect(function(){u.current!==i&&(t(h,i,u.current),u.current=i)},[h,i,t]),o}}function PM(n,t){$.useEffect(function(){return(t.layerContainer??t.map).addLayer(n.instance),function(){var o;(o=t.layerContainer)==null||o.removeLayer(n.instance),t.map.removeLayer(n.instance)}},[t,n])}function b8(n){return function(e){const i=Qb(),s=n(Ug(e,i),i);return IM(i.map,e.attribution),Xb(s.current,e.eventHandlers),PM(s.current,i),s}}function E8(n,t){const e=$.useRef(void 0);$.useEffect(function(){if(t.pathOptions!==e.current){const s=t.pathOptions??{};n.instance.setStyle(s),e.current=s}},[n,t])}function T8(n){return function(e){const i=Qb(),s=n(Ug(e,i),i);return Xb(s.current,e.eventHandlers),PM(s.current,i),E8(s.current,e),s}}function w8(n,t){const e=Jb(n),i=_8(e,t);return m8(i)}function MM(n,t){const e=Jb(n,t),i=T8(e);return p8(i)}function S8(n,t){const e=Jb(n,t),i=b8(e);return g8(i)}function x8(n,t,e){const{opacity:i,zIndex:s}=t;i!=null&&i!==e.opacity&&n.setOpacity(i),s!=null&&s!==e.zIndex&&n.setZIndex(s)}const C8=MM(function({center:t,children:e,...i},s){const o=new wd.CircleMarker(t,i);return Fg(o,RM(s,{overlayContainer:o}))},h8);function A8({bounds:n,boundsOptions:t,center:e,children:i,className:s,id:o,placeholder:u,style:h,whenReady:d,zoom:m,...v},T){const[w]=$.useState({className:s,id:o,style:h}),[A,R]=$.useState(null),M=$.useRef(void 0);$.useImperativeHandle(T,()=>(A==null?void 0:A.map)??null,[A]);const k=$.useCallback(Z=>{if(Z!==null&&!M.current){const J=new wd.Map(Z,v);M.current=J,e!=null&&m!=null?J.setView(e,m):n!=null&&J.fitBounds(n,t),d!=null&&J.whenReady(d),R(d8(J))}},[]);$.useEffect(()=>()=>{A==null||A.map.remove()},[A]);const U=A?Cc.createElement($b,{value:A},i):u??null;return Cc.createElement("div",{...w,ref:k},U)}const I8=$.forwardRef(A8),R8=MM(function({positions:t,...e},i){const s=new wd.Polyline(t,e);return Fg(s,RM(i,{overlayContainer:s}))},function(t,e,i){e.positions!==i.positions&&t.setLatLngs(e.positions)}),P8=w8(function(t,e){const i=new wd.Popup(t,e.overlayContainer);return Fg(i,e)},function(t,e,{position:i},s){$.useEffect(function(){const{instance:u}=t;function h(m){m.popup===u&&(u.update(),s(!0))}function d(m){m.popup===u&&s(!1)}return e.map.on({popupopen:h,popupclose:d}),e.overlayContainer==null?(i!=null&&u.setLatLng(i),u.openOn(e.map)):e.overlayContainer.bindPopup(u),function(){var v;e.map.off({popupopen:h,popupclose:d}),(v=e.overlayContainer)==null||v.unbindPopup(),e.map.removeLayer(u)}},[t,e,s,i])}),M8=S8(function({url:t,...e},i){const s=new wd.TileLayer(t,Ug(e,i));return Fg(s,i)},function(t,e,i){x8(t,e,i);const{url:s}=e;s!=null&&s!==i.url&&t.setUrl(s)});zg.register($v,Qv,dm,mf,HH,$H,UH);function O8(){const[n,t]=$.useState(0),[e,i]=$.useState(0),[s,o]=$.useState(0),[u,h]=$.useState([]),[d,m]=$.useState([]),[v,T]=$.useState([]),[w,A]=$.useState([]),R=w[w.length-1];return $.useEffect(()=>{const M=C3(e5,"/"),k=I3(M,U=>{const Z=U.val();Z&&(t(Z.watertank??0),i(Z.temperature??0),o(Z.turbidity??0))});return()=>k()},[]),$.useEffect(()=>{(async()=>{var k;try{const U=(k=cu.currentUser)==null?void 0:k.uid;if(!U)return;const Z=await i5(U),J=Z.map(_t=>_t.id),ut=Z.map(_t=>_t.temp),rt=Z.map(_t=>_t.humidity);h(J),m(ut),T(rt)}catch(U){console.error("Error fetching graph data:",U)}})()},[]),$.useEffect(()=>{(async()=>{var k;try{const U=(k=cu.currentUser)==null?void 0:k.uid;if(!U)return;const Z=await n5(U);console.log("🧭 Last 30 locations:",Z),A(Z)}catch(U){console.error("Error fetching location data:",U)}})()},[]),gt.jsxs("main",{className:"p-6 text-white bg-gray-900 min-h-screen",children:[gt.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Dashboard"}),gt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[gt.jsx(Jy,{title:"Water Tank",value:n.toFixed(1),color:"cyan"}),gt.jsx(Jy,{title:"Temperature",value:e.toFixed(1),color:"green"}),gt.jsx(Jy,{title:"Turbidity",value:s.toFixed(1),color:"green"}),gt.jsx(CA,{title:"Temperature Graph",data:d,labels:u,color:"#4ade80"}),gt.jsx(CA,{title:"Turbidity Graph",data:v,labels:u,color:"#60a5fa"}),gt.jsxs("div",{className:"bg-gray-800 p-4 rounded shadow col-span-1 lg:col-span-3",children:[gt.jsx("h2",{className:"text-lg mb-4",children:"Location Map"}),gt.jsxs(I8,{center:R?[R.lat,R.lng]:[-7.95,112.61],zoom:14,scrollWheelZoom:!1,style:{height:"400px",width:"100%"},children:[gt.jsx(M8,{attribution:"© OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),w.length>1&&gt.jsx(R8,{positions:w.map(M=>[M.lat,M.lng]),color:"white",weight:3}),w.map((M,k)=>gt.jsx(C8,{center:[M.lat,M.lng],radius:4,pathOptions:{color:k===w.length-1?"black":"red",fillColor:k===w.length-1?"black":"red",fillOpacity:1},children:gt.jsxs(P8,{children:[M.id,gt.jsx("br",{}),"Lat: ",M.lat.toFixed(5),gt.jsx("br",{}),"Lng: ",M.lng.toFixed(5)]})},k))]})]})]})]})}function Jy({title:n,value:t,color:e}){return gt.jsxs("div",{className:"bg-gray-800 p-4 rounded shadow",children:[gt.jsx("h2",{className:"text-lg mb-2",children:n}),gt.jsx("div",{className:`text-5xl font-bold text-center text-${e}-400`,children:t})]})}function CA({title:n,data:t,labels:e,color:i}){return gt.jsxs("div",{className:"bg-gray-800 p-4 rounded shadow col-span-1 lg:col-span-2",children:[gt.jsx("h2",{className:"text-lg mb-4",children:n}),gt.jsx(c8,{data:{labels:e,datasets:[{label:n,data:t,borderColor:i,backgroundColor:`${i}20`,tension:.4,fill:!0}]},options:{responsive:!0,plugins:{legend:{labels:{color:"white"}}},scales:{x:{ticks:{color:"white"}},y:{ticks:{color:"white"}}}}})]})}function k8(){const[n,t]=$.useState(null),e=qc();return $.useEffect(()=>{(async()=>{const s=cu.currentUser;if(!s)return e("/");const o=CP(Ng,"users",s.uid),u=await $6(o);u.exists()&&t(u.data())})()},[e]),n?gt.jsxs("main",{className:"p-6 text-white bg-gray-900 min-h-screen",children:[gt.jsx("h1",{className:"text-3xl font-semibold mb-6",children:"User Profile"}),gt.jsxs("div",{className:"bg-gray-800 p-6 rounded shadow max-w-xl space-y-4",children:[gt.jsxs("p",{children:[gt.jsx("span",{className:"font-bold",children:"Nama Depan:"})," ",n.firstName||"-"]}),gt.jsxs("p",{children:[gt.jsx("span",{className:"font-bold",children:"Nama Belakang:"})," ",n.lastName||"-"]}),gt.jsxs("p",{children:[gt.jsx("span",{className:"font-bold",children:"Email:"})," ",n.email||"-"]}),gt.jsxs("p",{children:[gt.jsx("span",{className:"font-bold",children:"Tanggal Lahir:"})," ",n.dob||"-"]}),gt.jsxs("p",{children:[gt.jsx("span",{className:"font-bold",children:"No HP:"})," ",n.phone||"-"]}),gt.jsxs("p",{children:[gt.jsx("span",{className:"font-bold",children:"Alamat:"})," ",n.address||"-"]}),gt.jsxs("p",{children:[gt.jsx("span",{className:"font-bold",children:"Umur:"})," ",n.age||"-"]})]})]}):gt.jsx("div",{className:"text-white text-center mt-10",children:"Loading profile..."})}function D8(){const[n,t]=$.useState(10),[e,i]=$.useState("auto"),s=o=>{o.preventDefault(),console.log("Config saved:",{interval:n,mode:e}),alert("Pengaturan disimpan")};return gt.jsxs("main",{className:"p-6 bg-gray-100 min-h-screen",children:[gt.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Konfigurasi Sistem"}),gt.jsxs("form",{onSubmit:s,className:"space-y-4 bg-white p-6 rounded-lg shadow-md max-w-md mx-auto",children:[gt.jsxs("div",{children:[gt.jsx("label",{className:"block mb-1 font-medium",htmlFor:"interval",children:"Interval Sampling (detik)"}),gt.jsx("input",{type:"number",id:"interval",className:"w-full px-4 py-2 border rounded-md",value:n,onChange:o=>t(o.target.value)})]}),gt.jsxs("div",{children:[gt.jsx("label",{className:"block mb-1 font-medium",htmlFor:"mode",children:"Mode"}),gt.jsxs("select",{id:"mode",className:"w-full px-4 py-2 border rounded-md",value:e,onChange:o=>i(o.target.value),children:[gt.jsx("option",{value:"auto",children:"Auto"}),gt.jsx("option",{value:"manual",children:"Manual"})]})]}),gt.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition",children:"Simpan"})]})]})}function N8(){const[n,t]=$.useState(!1),e=qc(),i=()=>{cu.signOut().then(()=>{e("/")})};return gt.jsxs("header",{className:"flex items-center justify-between bg-gray-800 p-4 shadow text-white",children:[gt.jsx("h1",{className:"text-xl font-bold",children:"AquaMonitor"}),gt.jsxs("div",{className:"relative",children:[gt.jsx("button",{onClick:()=>t(!n),className:"focus:outline-none",children:gt.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:gt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),n&&gt.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-gray-700 rounded-md shadow-lg py-2 z-50",children:[gt.jsx("a",{href:"/dashboard",className:"block px-4 py-2 hover:bg-gray-600",children:"Home"}),gt.jsx("a",{href:"/profile",className:"block px-4 py-2 hover:bg-gray-600",children:"Profile"}),gt.jsx("a",{href:"/settings",className:"block px-4 py-2 hover:bg-gray-600",children:"Settings"}),gt.jsx("button",{onClick:i,className:"w-full text-left px-4 py-2 text-red-400 hover:bg-red-500 hover:text-white",children:"Logout"})]})]})]})}function L8(){const[n,t]=$.useState(null),[e,i]=$.useState(!0);return $.useEffect(()=>{const s=cu.onAuthStateChanged(o=>{t(o),i(!1)});return()=>s()},[]),e?gt.jsx("div",{className:"text-center mt-10",children:"Loading..."}):gt.jsxs(yD,{children:[n&&gt.jsx(N8,{}),gt.jsxs(Zk,{children:[gt.jsx(cc,{path:"/",element:n?gt.jsx(Yh,{to:"/dashboard"}):gt.jsx(s5,{})}),gt.jsx(cc,{path:"/register",element:n?gt.jsx(Yh,{to:"/dashboard"}):gt.jsx(r5,{})}),gt.jsx(cc,{path:"/dashboard",element:n?gt.jsx(O8,{}):gt.jsx(Yh,{to:"/"})}),gt.jsx(cc,{path:"/profile",element:n?gt.jsx(k8,{}):gt.jsx(Yh,{to:"/"})}),gt.jsx(cc,{path:"/settings",element:n?gt.jsx(D8,{}):gt.jsx(Yh,{to:"/"})})]})]})}ik.createRoot(document.getElementById("root")).render(gt.jsx(Cc.StrictMode,{children:gt.jsx(L8,{})}));
